(function(Pn,bl){typeof exports=="object"&&typeof module<"u"?bl(exports):typeof define=="function"&&define.amd?define(["exports"],bl):(Pn=typeof globalThis<"u"?globalThis:Pn||self,bl(Pn.Slicker={}))})(this,function(Pn){"use strict";function bl(a,t){for(var e=0;e<t.length;e++){const n=t[e];if(typeof n!="string"&&!Array.isArray(n)){for(const r in n)if(r!=="default"&&!(r in a)){const o=Object.getOwnPropertyDescriptor(n,r);o&&Object.defineProperty(a,r,o.get?o:{enumerable:!0,get:()=>n[r]})}}}return Object.freeze(Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}))}var en;(function(a){a.local="local",a.remote="remote"})(en||(en={}));class Ep{constructor(t){this.rxjs=t}addRxJsResource(t){this.rxjs=t}executeBackendProcessesCallback(t,e,n,r){const o=new Date;e&&n.service.postProcess&&n.service.postProcess(e),e&&(n!=null&&n.internalPostProcess)&&n.internalPostProcess(e),n.postProcess!==void 0&&(e instanceof Object&&(e.metrics={startTime:t,endTime:o,executionTime:o.valueOf()-t.valueOf(),itemCount:r,totalItemCount:r}),n.postProcess(e))}onBackendError(t,e){if(typeof(e==null?void 0:e.onError)=="function")e.onError(t);else throw t}executeBackendCallback(t,e,n,r,o,s){var l;if(t){n&&!n.clearFilterTriggered&&!n.clearSortTriggered&&(s!=null&&s.emitActionChangedCallback)&&s.emitActionChangedCallback.call(this,en.remote);const u=t.process(e);if(u instanceof Promise&&u.then)u.then(h=>{var c;this.executeBackendProcessesCallback(r,h,t,o),(c=s==null?void 0:s.successCallback)===null||c===void 0||c.call(this,n)}).catch(h=>{var c;(c=s==null?void 0:s.errorCallback)===null||c===void 0||c.call(this,n),this.onBackendError(h,t)});else if(!((l=this.rxjs)===null||l===void 0)&&l.isObservable(u)){const h=this.rxjs;h.isObservable(s==null?void 0:s.httpCancelRequestSubject)&&(s==null||s.httpCancelRequestSubject.next()),u.pipe(h.takeUntil(h.iif(()=>h.isObservable(s==null?void 0:s.httpCancelRequestSubject),s==null?void 0:s.httpCancelRequestSubject,h.EMPTY))).subscribe(c=>{var p;this.executeBackendProcessesCallback(r,c,t,o),(p=s==null?void 0:s.successCallback)===null||p===void 0||p.call(this,n)},c=>{var p;(p=s==null?void 0:s.errorCallback)===null||p===void 0||p.call(this,n),this.onBackendError(c,t)})}}}refreshBackendDataset(t){var e,n;let r="";const o=t==null?void 0:t.backendServiceApi;if(!o||!o.service||!o.process)throw new Error('BackendServiceApi requires at least a "process" function and a "service" defined');if(o.service&&(r=o.service.buildQuery()),r&&r!==""){const s=new Date;o.preProcess&&o.preProcess();const l=(n=(e=t==null?void 0:t.pagination)===null||e===void 0?void 0:e.totalItems)!==null&&n!==void 0?n:0;this.executeBackendCallback(o,r,null,s,l)}}}const Yg=Object.freeze(Object.defineProperty({__proto__:null,BackendUtilityService:Ep},Symbol.toStringTag,{value:"Module"}));function Ma(a,t){["pop","push","reverse","shift","unshift","splice","sort"].forEach(n=>{a[n]=(...r)=>{const o=Array.prototype[n].apply(a,r);return t.apply(a,[a,r]),o}})}function Jc(a,t,e){let n=a[t];Object.defineProperty(a,t,{configurable:!0,get(){return n},set(r){n=r,e.apply(a,[r,a[t]])}})}const jg=Object.freeze(Object.defineProperty({__proto__:null,collectionObserver:Ma,propertyObserver:Jc},Symbol.toStringTag,{value:"Module"})),Xg=a=>a;function qg(a,t,e=Xg,n=()=>{}){const r=a&&a.length?[{pointer:a,offset:0}]:[],o=[];let s;for(;r.length;)for(s=r.pop();s.offset<s.pointer.length;){const l=s.pointer[s.offset],u=n(l),h=t(l);o.push(e(l,s.node,u,s.nodeId)),s.offset+=1,h&&(r.push(s),s={pointer:h,offset:0,node:l,nodeId:u})}return o}var Pr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function eh(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}function Na(a){throw new Error('Could not dynamically require "'+a+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Sp={exports:{}};(function(a,t){(function(e,n){a.exports=n()})(Pr,function(){var e;function n(){return e.apply(null,arguments)}function r(g){return g instanceof Array||Object.prototype.toString.call(g)==="[object Array]"}function o(g){return g!=null&&Object.prototype.toString.call(g)==="[object Object]"}function s(g,w){return Object.prototype.hasOwnProperty.call(g,w)}function l(g){if(Object.getOwnPropertyNames)return Object.getOwnPropertyNames(g).length===0;for(var w in g)if(s(g,w))return;return 1}function u(g){return g===void 0}function h(g){return typeof g=="number"||Object.prototype.toString.call(g)==="[object Number]"}function c(g){return g instanceof Date||Object.prototype.toString.call(g)==="[object Date]"}function p(g,w){for(var R=[],H=g.length,ee=0;ee<H;++ee)R.push(w(g[ee],ee));return R}function m(g,w){for(var R in w)s(w,R)&&(g[R]=w[R]);return s(w,"toString")&&(g.toString=w.toString),s(w,"valueOf")&&(g.valueOf=w.valueOf),g}function v(g,w,R,H){return Je(g,w,R,H,!0).utc()}function _(g){return g._pf==null&&(g._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}),g._pf}function C(g){if(g._isValid==null){var w=_(g),R=S.call(w.parsedDateParts,function(H){return H!=null}),R=!isNaN(g._d.getTime())&&w.overflow<0&&!w.empty&&!w.invalidEra&&!w.invalidMonth&&!w.invalidWeekday&&!w.weekdayMismatch&&!w.nullInput&&!w.invalidFormat&&!w.userInvalidated&&(!w.meridiem||w.meridiem&&R);if(g._strict&&(R=R&&w.charsLeftOver===0&&w.unusedTokens.length===0&&w.bigHour===void 0),Object.isFrozen!=null&&Object.isFrozen(g))return R;g._isValid=R}return g._isValid}function x(g){var w=v(NaN);return g!=null?m(_(w),g):_(w).userInvalidated=!0,w}var S=Array.prototype.some||function(g){for(var w=Object(this),R=w.length>>>0,H=0;H<R;H++)if(H in w&&g.call(this,w[H],H,w))return!0;return!1},y=n.momentProperties=[],D=!1;function A(g,w){var R,H,ee,we=y.length;if(u(w._isAMomentObject)||(g._isAMomentObject=w._isAMomentObject),u(w._i)||(g._i=w._i),u(w._f)||(g._f=w._f),u(w._l)||(g._l=w._l),u(w._strict)||(g._strict=w._strict),u(w._tzm)||(g._tzm=w._tzm),u(w._isUTC)||(g._isUTC=w._isUTC),u(w._offset)||(g._offset=w._offset),u(w._pf)||(g._pf=_(w)),u(w._locale)||(g._locale=w._locale),0<we)for(R=0;R<we;R++)u(ee=w[H=y[R]])||(g[H]=ee);return g}function P(g){A(this,g),this._d=new Date(g._d!=null?g._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),D===!1&&(D=!0,n.updateOffset(this),D=!1)}function M(g){return g instanceof P||g!=null&&g._isAMomentObject!=null}function B(g){n.suppressDeprecationWarnings===!1&&typeof console<"u"&&console.warn&&console.warn("Deprecation warning: "+g)}function Q(g,w){var R=!0;return m(function(){if(n.deprecationHandler!=null&&n.deprecationHandler(null,g),R){for(var H,ee,we=[],He=arguments.length,Ke=0;Ke<He;Ke++){if(H="",typeof arguments[Ke]=="object"){for(ee in H+=`
[`+Ke+"] ",arguments[0])s(arguments[0],ee)&&(H+=ee+": "+arguments[0][ee]+", ");H=H.slice(0,-2)}else H=arguments[Ke];we.push(H)}B(g+`
Arguments: `+Array.prototype.slice.call(we).join("")+`
`+new Error().stack),R=!1}return w.apply(this,arguments)},w)}var L={};function le(g,w){n.deprecationHandler!=null&&n.deprecationHandler(g,w),L[g]||(B(w),L[g]=!0)}function _e(g){return typeof Function<"u"&&g instanceof Function||Object.prototype.toString.call(g)==="[object Function]"}function J(g,w){var R,H=m({},g);for(R in w)s(w,R)&&(o(g[R])&&o(w[R])?(H[R]={},m(H[R],g[R]),m(H[R],w[R])):w[R]!=null?H[R]=w[R]:delete H[R]);for(R in g)s(g,R)&&!s(w,R)&&o(g[R])&&(H[R]=m({},H[R]));return H}function z(g){g!=null&&this.set(g)}n.suppressDeprecationWarnings=!1,n.deprecationHandler=null;var F=Object.keys||function(g){var w,R=[];for(w in g)s(g,w)&&R.push(w);return R};function ae(g,w,R){var H=""+Math.abs(g);return(0<=g?R?"+":"":"-")+Math.pow(10,Math.max(0,w-H.length)).toString().substr(1)+H}var qe=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,De=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,xe={},Te={};function Re(g,w,R,H){var ee=typeof H=="string"?function(){return this[H]()}:H;g&&(Te[g]=ee),w&&(Te[w[0]]=function(){return ae(ee.apply(this,arguments),w[1],w[2])}),R&&(Te[R]=function(){return this.localeData().ordinal(ee.apply(this,arguments),g)})}function ne(g,w){return g.isValid()?(w=fe(w,g.localeData()),xe[w]=xe[w]||function(R){for(var H,ee=R.match(qe),we=0,He=ee.length;we<He;we++)Te[ee[we]]?ee[we]=Te[ee[we]]:ee[we]=(H=ee[we]).match(/\[[\s\S]/)?H.replace(/^\[|\]$/g,""):H.replace(/\\/g,"");return function(Ke){for(var bt="",ht=0;ht<He;ht++)bt+=_e(ee[ht])?ee[ht].call(Ke,R):ee[ht];return bt}}(w),xe[w](g)):g.localeData().invalidDate()}function fe(g,w){var R=5;function H(ee){return w.longDateFormat(ee)||ee}for(De.lastIndex=0;0<=R&&De.test(g);)g=g.replace(De,H),De.lastIndex=0,--R;return g}var Be={};function Ye(g,w){var R=g.toLowerCase();Be[R]=Be[R+"s"]=Be[w]=g}function Ve(g){return typeof g=="string"?Be[g]||Be[g.toLowerCase()]:void 0}function ue(g){var w,R,H={};for(R in g)s(g,R)&&(w=Ve(R))&&(H[w]=g[R]);return H}var Ce={};function be(g,w){Ce[g]=w}function Le(g){return g%4==0&&g%100!=0||g%400==0}function nt(g){return g<0?Math.ceil(g)||0:Math.floor(g)}function Ge(w){var w=+w,R=0;return R=w!=0&&isFinite(w)?nt(w):R}function yt(g,w){return function(R){return R!=null?(k(this,g,R),n.updateOffset(this,w),this):at(this,g)}}function at(g,w){return g.isValid()?g._d["get"+(g._isUTC?"UTC":"")+w]():NaN}function k(g,w,R){g.isValid()&&!isNaN(R)&&(w==="FullYear"&&Le(g.year())&&g.month()===1&&g.date()===29?(R=Ge(R),g._d["set"+(g._isUTC?"UTC":"")+w](R,g.month(),Mi(R,g.month()))):g._d["set"+(g._isUTC?"UTC":"")+w](R))}var te=/\d/,Mt=/\d\d/,ge=/\d{3}/,Ki=/\d{4}/,on=/[+-]?\d{6}/,$=/\d\d?/,X=/\d\d\d\d?/,re=/\d\d\d\d\d\d?/,Fe=/\d{1,3}/,qn=/\d{1,4}/,Or=/[+-]?\d{1,6}/,Me=/\d+/,pe=/[+-]?\d+/,Ue=/Z|[+-]\d\d:?\d\d/gi,ft=/Z|[+-]\d\d(?::?\d\d)?/gi,ze=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i;function Ne(g,w,R){Ci[g]=_e(w)?w:function(H,ee){return H&&R?R:w}}function Xt(g,w){return s(Ci,g)?Ci[g](w._strict,w._locale):new RegExp(It(g.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(R,H,ee,we,He){return H||ee||we||He})))}function It(g){return g.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}var Ci={},q={};function W(g,w){var R,H,ee=w;for(typeof g=="string"&&(g=[g]),h(w)&&(ee=function(we,He){He[w]=Ge(we)}),H=g.length,R=0;R<H;R++)q[g[R]]=ee}function me(g,w){W(g,function(R,H,ee,we){ee._w=ee._w||{},w(R,ee._w,ee,we)})}var ke,st=0,rt=1,ut=2,Rt=3,Ht=4,Tt=5,Ut=6,Zt=7,Fi=8;function Mi(g,w){if(isNaN(g)||isNaN(w))return NaN;var R=(w%(R=12)+R)%R;return g+=(w-R)/12,R==1?Le(g)?29:28:31-R%7%2}ke=Array.prototype.indexOf||function(g){for(var w=0;w<this.length;++w)if(this[w]===g)return w;return-1},Re("M",["MM",2],"Mo",function(){return this.month()+1}),Re("MMM",0,0,function(g){return this.localeData().monthsShort(this,g)}),Re("MMMM",0,0,function(g){return this.localeData().months(this,g)}),Ye("month","M"),be("month",8),Ne("M",$),Ne("MM",$,Mt),Ne("MMM",function(g,w){return w.monthsShortRegex(g)}),Ne("MMMM",function(g,w){return w.monthsRegex(g)}),W(["M","MM"],function(g,w){w[rt]=Ge(g)-1}),W(["MMM","MMMM"],function(g,w,R,H){H=R._locale.monthsParse(g,H,R._strict),H!=null?w[rt]=H:_(R).invalidMonth=g});var U="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),Z="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),ce=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,Ee=ze,ot=ze;function pt(g,w){var R;if(g.isValid()){if(typeof w=="string"){if(/^\d+$/.test(w))w=Ge(w);else if(!h(w=g.localeData().monthsParse(w)))return}R=Math.min(g.date(),Mi(g.year(),w)),g._d["set"+(g._isUTC?"UTC":"")+"Month"](w,R)}}function ct(g){return g!=null?(pt(this,g),n.updateOffset(this,!0),this):at(this,"Month")}function St(){function g(He,Ke){return Ke.length-He.length}for(var w,R=[],H=[],ee=[],we=0;we<12;we++)w=v([2e3,we]),R.push(this.monthsShort(w,"")),H.push(this.months(w,"")),ee.push(this.months(w,"")),ee.push(this.monthsShort(w,""));for(R.sort(g),H.sort(g),ee.sort(g),we=0;we<12;we++)R[we]=It(R[we]),H[we]=It(H[we]);for(we=0;we<24;we++)ee[we]=It(ee[we]);this._monthsRegex=new RegExp("^("+ee.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+H.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+R.join("|")+")","i")}function Bt(g){return Le(g)?366:365}Re("Y",0,0,function(){var g=this.year();return g<=9999?ae(g,4):"+"+g}),Re(0,["YY",2],0,function(){return this.year()%100}),Re(0,["YYYY",4],0,"year"),Re(0,["YYYYY",5],0,"year"),Re(0,["YYYYYY",6,!0],0,"year"),Ye("year","y"),be("year",1),Ne("Y",pe),Ne("YY",$,Mt),Ne("YYYY",qn,Ki),Ne("YYYYY",Or,on),Ne("YYYYYY",Or,on),W(["YYYYY","YYYYYY"],st),W("YYYY",function(g,w){w[st]=g.length===2?n.parseTwoDigitYear(g):Ge(g)}),W("YY",function(g,w){w[st]=n.parseTwoDigitYear(g)}),W("Y",function(g,w){w[st]=parseInt(g,10)}),n.parseTwoDigitYear=function(g){return Ge(g)+(68<Ge(g)?1900:2e3)};var xo=yt("FullYear",!0);function Ct(g,w,R,H,ee,we,He){var Ke;return g<100&&0<=g?(Ke=new Date(g+400,w,R,H,ee,we,He),isFinite(Ke.getFullYear())&&Ke.setFullYear(g)):Ke=new Date(g,w,R,H,ee,we,He),Ke}function vt(g){var w;return g<100&&0<=g?((w=Array.prototype.slice.call(arguments))[0]=g+400,w=new Date(Date.UTC.apply(null,w)),isFinite(w.getUTCFullYear())&&w.setUTCFullYear(g)):w=new Date(Date.UTC.apply(null,arguments)),w}function ti(g,w,R){return R=7+w-R,R-(7+vt(g,0,R).getUTCDay()-w)%7-1}function ki(g,He,Ke,H,ee){var we,He=1+7*(He-1)+(7+Ke-H)%7+ti(g,H,ee),Ke=He<=0?Bt(we=g-1)+He:He>Bt(g)?(we=g+1,He-Bt(g)):(we=g,He);return{year:we,dayOfYear:Ke}}function Ui(g,w,R){var H,ee,we=ti(g.year(),w,R),we=Math.floor((g.dayOfYear()-we-1)/7)+1;return we<1?H=we+Qt(ee=g.year()-1,w,R):we>Qt(g.year(),w,R)?(H=we-Qt(g.year(),w,R),ee=g.year()+1):(ee=g.year(),H=we),{week:H,year:ee}}function Qt(g,ee,R){var H=ti(g,ee,R),ee=ti(g+1,ee,R);return(Bt(g)-H+ee)/7}Re("w",["ww",2],"wo","week"),Re("W",["WW",2],"Wo","isoWeek"),Ye("week","w"),Ye("isoWeek","W"),be("week",5),be("isoWeek",5),Ne("w",$),Ne("ww",$,Mt),Ne("W",$),Ne("WW",$,Mt),me(["w","ww","W","WW"],function(g,w,R,H){w[H.substr(0,1)]=Ge(g)});function Ni(g,w){return g.slice(w,7).concat(g.slice(0,w))}Re("d",0,"do","day"),Re("dd",0,0,function(g){return this.localeData().weekdaysMin(this,g)}),Re("ddd",0,0,function(g){return this.localeData().weekdaysShort(this,g)}),Re("dddd",0,0,function(g){return this.localeData().weekdays(this,g)}),Re("e",0,0,"weekday"),Re("E",0,0,"isoWeekday"),Ye("day","d"),Ye("weekday","e"),Ye("isoWeekday","E"),be("day",11),be("weekday",11),be("isoWeekday",11),Ne("d",$),Ne("e",$),Ne("E",$),Ne("dd",function(g,w){return w.weekdaysMinRegex(g)}),Ne("ddd",function(g,w){return w.weekdaysShortRegex(g)}),Ne("dddd",function(g,w){return w.weekdaysRegex(g)}),me(["dd","ddd","dddd"],function(g,w,R,H){H=R._locale.weekdaysParse(g,H,R._strict),H!=null?w.d=H:_(R).invalidWeekday=g}),me(["d","e","E"],function(g,w,R,H){w[H]=Ge(g)});var Ln="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),mn="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),_t="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),Se=ze,Xe=ze,wt=ze;function ii(){function g(ht,zt){return zt.length-ht.length}for(var w,R,H,ee=[],we=[],He=[],Ke=[],bt=0;bt<7;bt++)H=v([2e3,1]).day(bt),w=It(this.weekdaysMin(H,"")),R=It(this.weekdaysShort(H,"")),H=It(this.weekdays(H,"")),ee.push(w),we.push(R),He.push(H),Ke.push(w),Ke.push(R),Ke.push(H);ee.sort(g),we.sort(g),He.sort(g),Ke.sort(g),this._weekdaysRegex=new RegExp("^("+Ke.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+He.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+we.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+ee.join("|")+")","i")}function Gi(){return this.hours()%12||12}function Wi(g,w){Re(g,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),w)})}function Li(g,w){return w._meridiemParse}Re("H",["HH",2],0,"hour"),Re("h",["hh",2],0,Gi),Re("k",["kk",2],0,function(){return this.hours()||24}),Re("hmm",0,0,function(){return""+Gi.apply(this)+ae(this.minutes(),2)}),Re("hmmss",0,0,function(){return""+Gi.apply(this)+ae(this.minutes(),2)+ae(this.seconds(),2)}),Re("Hmm",0,0,function(){return""+this.hours()+ae(this.minutes(),2)}),Re("Hmmss",0,0,function(){return""+this.hours()+ae(this.minutes(),2)+ae(this.seconds(),2)}),Wi("a",!0),Wi("A",!1),Ye("hour","h"),be("hour",13),Ne("a",Li),Ne("A",Li),Ne("H",$),Ne("h",$),Ne("k",$),Ne("HH",$,Mt),Ne("hh",$,Mt),Ne("kk",$,Mt),Ne("hmm",X),Ne("hmmss",re),Ne("Hmm",X),Ne("Hmmss",re),W(["H","HH"],Rt),W(["k","kk"],function(g,w,R){g=Ge(g),w[Rt]=g===24?0:g}),W(["a","A"],function(g,w,R){R._isPm=R._locale.isPM(g),R._meridiem=g}),W(["h","hh"],function(g,w,R){w[Rt]=Ge(g),_(R).bigHour=!0}),W("hmm",function(g,w,R){var H=g.length-2;w[Rt]=Ge(g.substr(0,H)),w[Ht]=Ge(g.substr(H)),_(R).bigHour=!0}),W("hmmss",function(g,w,R){var H=g.length-4,ee=g.length-2;w[Rt]=Ge(g.substr(0,H)),w[Ht]=Ge(g.substr(H,2)),w[Tt]=Ge(g.substr(ee)),_(R).bigHour=!0}),W("Hmm",function(g,w,R){var H=g.length-2;w[Rt]=Ge(g.substr(0,H)),w[Ht]=Ge(g.substr(H))}),W("Hmmss",function(g,w,R){var H=g.length-4,ee=g.length-2;w[Rt]=Ge(g.substr(0,H)),w[Ht]=Ge(g.substr(H,2)),w[Tt]=Ge(g.substr(ee))}),ze=yt("Hours",!0);var vn,Gn={calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},invalidDate:"Invalid date",ordinal:"%d",dayOfMonthOrdinalParse:/\d{1,2}/,relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},months:U,monthsShort:Z,week:{dow:0,doy:6},weekdays:Ln,weekdaysMin:_t,weekdaysShort:mn,meridiemParse:/[ap]\.?m?\.?/i},qt={},$i={};function ar(g){return g&&g.toLowerCase().replace("_","-")}function go(g){for(var w,R,H,ee,we=0;we<g.length;){for(w=(ee=ar(g[we]).split("-")).length,R=(R=ar(g[we+1]))?R.split("-"):null;0<w;){if(H=Jn(ee.slice(0,w).join("-")))return H;if(R&&R.length>=w&&function(He,Ke){for(var bt=Math.min(He.length,Ke.length),ht=0;ht<bt;ht+=1)if(He[ht]!==Ke[ht])return ht;return bt}(ee,R)>=w-1)break;w--}we++}return vn}function Jn(g){var w;if(qt[g]===void 0&&a&&a.exports&&g.match("^[^/\\\\]*$")!=null)try{w=vn._abbr,Na("./locale/"+g),er(w)}catch{qt[g]=null}return qt[g]}function er(g,w){return g&&((w=u(w)?vr(g):_o(g,w))?vn=w:typeof console<"u"&&console.warn&&console.warn("Locale "+g+" not found. Did you forget to load it?")),vn._abbr}function _o(g,w){if(w===null)return delete qt[g],null;var R,H=Gn;if(w.abbr=g,qt[g]!=null)le("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),H=qt[g]._config;else if(w.parentLocale!=null)if(qt[w.parentLocale]!=null)H=qt[w.parentLocale]._config;else{if((R=Jn(w.parentLocale))==null)return $i[w.parentLocale]||($i[w.parentLocale]=[]),$i[w.parentLocale].push({name:g,config:w}),null;H=R._config}return qt[g]=new z(J(H,w)),$i[g]&&$i[g].forEach(function(ee){_o(ee.name,ee.config)}),er(g),qt[g]}function vr(g){var w;if(!(g=g&&g._locale&&g._locale._abbr?g._locale._abbr:g))return vn;if(!r(g)){if(w=Jn(g))return w;g=[g]}return go(g)}function dr(g){var w=g._a;return w&&_(g).overflow===-2&&(w=w[rt]<0||11<w[rt]?rt:w[ut]<1||w[ut]>Mi(w[st],w[rt])?ut:w[Rt]<0||24<w[Rt]||w[Rt]===24&&(w[Ht]!==0||w[Tt]!==0||w[Ut]!==0)?Rt:w[Ht]<0||59<w[Ht]?Ht:w[Tt]<0||59<w[Tt]?Tt:w[Ut]<0||999<w[Ut]?Ut:-1,_(g)._overflowDayOfYear&&(w<st||ut<w)&&(w=ut),_(g)._overflowWeeks&&w===-1&&(w=Zt),_(g)._overflowWeekday&&w===-1&&(w=Fi),_(g).overflow=w),g}var Tr=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Wn=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Hn=/Z|[+-]\d\d(?::?\d\d)?/,ci=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],Bn=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],Jr=/^\/?Date\((-?\d+)/i,bo=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,gn={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function tr(g){var w,R,H,ee,we,He,bt=g._i,Ke=Tr.exec(bt)||Wn.exec(bt),bt=ci.length,ht=Bn.length;if(Ke){for(_(g).iso=!0,w=0,R=bt;w<R;w++)if(ci[w][1].exec(Ke[1])){ee=ci[w][0],H=ci[w][2]!==!1;break}if(ee==null)g._isValid=!1;else{if(Ke[3]){for(w=0,R=ht;w<R;w++)if(Bn[w][1].exec(Ke[3])){we=(Ke[2]||" ")+Bn[w][0];break}if(we==null)return void(g._isValid=!1)}if(H||we==null){if(Ke[4]){if(!Hn.exec(Ke[4]))return void(g._isValid=!1);He="Z"}g._f=ee+(we||"")+(He||""),ye(g)}else g._isValid=!1}}else g._isValid=!1}function gr(g,w,R,H,ee,we){return g=[function(He){He=parseInt(He,10);{if(He<=49)return 2e3+He;if(He<=999)return 1900+He}return He}(g),Z.indexOf(w),parseInt(R,10),parseInt(H,10),parseInt(ee,10)],we&&g.push(parseInt(we,10)),g}function _r(g){var w,R,H,ee,we=bo.exec(g._i.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,""));we?(w=gr(we[4],we[3],we[2],we[5],we[6],we[7]),R=we[1],H=w,ee=g,R&&mn.indexOf(R)!==new Date(H[0],H[1],H[2]).getDay()?(_(ee).weekdayMismatch=!0,ee._isValid=!1):(g._a=w,g._tzm=(R=we[8],H=we[9],ee=we[10],R?gn[R]:H?0:60*(((R=parseInt(ee,10))-(H=R%100))/100)+H),g._d=vt.apply(null,g._a),g._d.setUTCMinutes(g._d.getUTCMinutes()-g._tzm),_(g).rfc2822=!0)):g._isValid=!1}function oe(g,w,R){return g??w??R}function de(g){var w,R,H,ee,we,He,Ke,bt,ht,zt,Nt,Zi=[];if(!g._d){for(H=g,ee=new Date(n.now()),R=H._useUTC?[ee.getUTCFullYear(),ee.getUTCMonth(),ee.getUTCDate()]:[ee.getFullYear(),ee.getMonth(),ee.getDate()],g._w&&g._a[ut]==null&&g._a[rt]==null&&((ee=(H=g)._w).GG!=null||ee.W!=null||ee.E!=null?(bt=1,ht=4,we=oe(ee.GG,H._a[st],Ui(lt(),1,4).year),He=oe(ee.W,1),((Ke=oe(ee.E,1))<1||7<Ke)&&(zt=!0)):(bt=H._locale._week.dow,ht=H._locale._week.doy,Nt=Ui(lt(),bt,ht),we=oe(ee.gg,H._a[st],Nt.year),He=oe(ee.w,Nt.week),ee.d!=null?((Ke=ee.d)<0||6<Ke)&&(zt=!0):ee.e!=null?(Ke=ee.e+bt,(ee.e<0||6<ee.e)&&(zt=!0)):Ke=bt),He<1||He>Qt(we,bt,ht)?_(H)._overflowWeeks=!0:zt!=null?_(H)._overflowWeekday=!0:(Nt=ki(we,He,Ke,bt,ht),H._a[st]=Nt.year,H._dayOfYear=Nt.dayOfYear)),g._dayOfYear!=null&&(ee=oe(g._a[st],R[st]),(g._dayOfYear>Bt(ee)||g._dayOfYear===0)&&(_(g)._overflowDayOfYear=!0),zt=vt(ee,0,g._dayOfYear),g._a[rt]=zt.getUTCMonth(),g._a[ut]=zt.getUTCDate()),w=0;w<3&&g._a[w]==null;++w)g._a[w]=Zi[w]=R[w];for(;w<7;w++)g._a[w]=Zi[w]=g._a[w]==null?w===2?1:0:g._a[w];g._a[Rt]===24&&g._a[Ht]===0&&g._a[Tt]===0&&g._a[Ut]===0&&(g._nextDay=!0,g._a[Rt]=0),g._d=(g._useUTC?vt:Ct).apply(null,Zi),we=g._useUTC?g._d.getUTCDay():g._d.getDay(),g._tzm!=null&&g._d.setUTCMinutes(g._d.getUTCMinutes()-g._tzm),g._nextDay&&(g._a[Rt]=24),g._w&&g._w.d!==void 0&&g._w.d!==we&&(_(g).weekdayMismatch=!0)}}function ye(g){if(g._f===n.ISO_8601)tr(g);else if(g._f===n.RFC_2822)_r(g);else{g._a=[],_(g).empty=!0;for(var w,R,H,ee,we,He=""+g._i,Ke=He.length,bt=0,ht=fe(g._f,g._locale).match(qe)||[],zt=ht.length,Nt=0;Nt<zt;Nt++)R=ht[Nt],(w=(He.match(Xt(R,g))||[])[0])&&(0<(H=He.substr(0,He.indexOf(w))).length&&_(g).unusedInput.push(H),He=He.slice(He.indexOf(w)+w.length),bt+=w.length),Te[R]?(w?_(g).empty=!1:_(g).unusedTokens.push(R),H=R,we=g,(ee=w)!=null&&s(q,H)&&q[H](ee,we._a,we,H)):g._strict&&!w&&_(g).unusedTokens.push(R);_(g).charsLeftOver=Ke-bt,0<He.length&&_(g).unusedInput.push(He),g._a[Rt]<=12&&_(g).bigHour===!0&&0<g._a[Rt]&&(_(g).bigHour=void 0),_(g).parsedDateParts=g._a.slice(0),_(g).meridiem=g._meridiem,g._a[Rt]=function(Zi,an,Qi){return Qi==null?an:Zi.meridiemHour!=null?Zi.meridiemHour(an,Qi):Zi.isPM!=null?((Zi=Zi.isPM(Qi))&&an<12&&(an+=12),an=Zi||an!==12?an:0):an}(g._locale,g._a[Rt],g._meridiem),(Ke=_(g).era)!==null&&(g._a[st]=g._locale.erasConvertYear(Ke,g._a[st])),de(g),dr(g)}}function We(g){var w,R,H,ee=g._i,we=g._f;return g._locale=g._locale||vr(g._l),ee===null||we===void 0&&ee===""?x({nullInput:!0}):(typeof ee=="string"&&(g._i=ee=g._locale.preparse(ee)),M(ee)?new P(dr(ee)):(c(ee)?g._d=ee:r(we)?function(He){var Ke,bt,ht,zt,Nt,Zi,an=!1,Qi=He._f.length;if(Qi===0)return _(He).invalidFormat=!0,He._d=new Date(NaN);for(zt=0;zt<Qi;zt++)Nt=0,Zi=!1,Ke=A({},He),He._useUTC!=null&&(Ke._useUTC=He._useUTC),Ke._f=He._f[zt],ye(Ke),C(Ke)&&(Zi=!0),Nt=(Nt+=_(Ke).charsLeftOver)+10*_(Ke).unusedTokens.length,_(Ke).score=Nt,an?Nt<ht&&(ht=Nt,bt=Ke):(ht==null||Nt<ht||Zi)&&(ht=Nt,bt=Ke,Zi&&(an=!0));m(He,bt||Ke)}(g):we?ye(g):u(we=(ee=g)._i)?ee._d=new Date(n.now()):c(we)?ee._d=new Date(we.valueOf()):typeof we=="string"?(R=ee,(w=Jr.exec(R._i))!==null?R._d=new Date(+w[1]):(tr(R),R._isValid===!1&&(delete R._isValid,_r(R),R._isValid===!1&&(delete R._isValid,R._strict?R._isValid=!1:n.createFromInputFallback(R))))):r(we)?(ee._a=p(we.slice(0),function(He){return parseInt(He,10)}),de(ee)):o(we)?(w=ee)._d||(H=(R=ue(w._i)).day===void 0?R.date:R.day,w._a=p([R.year,R.month,H,R.hour,R.minute,R.second,R.millisecond],function(He){return He&&parseInt(He,10)}),de(w)):h(we)?ee._d=new Date(we):n.createFromInputFallback(ee),C(g)||(g._d=null),g))}function Je(g,w,R,H,ee){var we={};return w!==!0&&w!==!1||(H=w,w=void 0),R!==!0&&R!==!1||(H=R,R=void 0),(o(g)&&l(g)||r(g)&&g.length===0)&&(g=void 0),we._isAMomentObject=!0,we._useUTC=we._isUTC=ee,we._l=R,we._i=g,we._f=w,we._strict=H,(ee=new P(dr(We(ee=we))))._nextDay&&(ee.add(1,"d"),ee._nextDay=void 0),ee}function lt(g,w,R,H){return Je(g,w,R,H,!1)}n.createFromInputFallback=Q("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(g){g._d=new Date(g._i+(g._useUTC?" UTC":""))}),n.ISO_8601=function(){},n.RFC_2822=function(){},X=Q("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var g=lt.apply(null,arguments);return this.isValid()&&g.isValid()?g<this?this:g:x()}),re=Q("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var g=lt.apply(null,arguments);return this.isValid()&&g.isValid()?this<g?this:g:x()});function Ot(g,w){var R,H;if(!(w=w.length===1&&r(w[0])?w[0]:w).length)return lt();for(R=w[0],H=1;H<w.length;++H)w[H].isValid()&&!w[H][g](R)||(R=w[H]);return R}var Vt=["year","quarter","month","week","day","hour","minute","second","millisecond"];function hi(w){var w=ue(w),R=w.year||0,H=w.quarter||0,ee=w.month||0,we=w.week||w.isoWeek||0,He=w.day||0,Ke=w.hour||0,bt=w.minute||0,ht=w.second||0,zt=w.millisecond||0;this._isValid=function(Nt){var Zi,an,Qi=!1,ns=Vt.length;for(Zi in Nt)if(s(Nt,Zi)&&(ke.call(Vt,Zi)===-1||Nt[Zi]!=null&&isNaN(Nt[Zi])))return!1;for(an=0;an<ns;++an)if(Nt[Vt[an]]){if(Qi)return!1;parseFloat(Nt[Vt[an]])!==Ge(Nt[Vt[an]])&&(Qi=!0)}return!0}(w),this._milliseconds=+zt+1e3*ht+6e4*bt+1e3*Ke*60*60,this._days=+He+7*we,this._months=+ee+3*H+12*R,this._data={},this._locale=vr(),this._bubble()}function yi(g){return g instanceof hi}function Ei(g){return g<0?-1*Math.round(-1*g):Math.round(g)}function En(g,w){Re(g,0,0,function(){var R=this.utcOffset(),H="+";return R<0&&(R=-R,H="-"),H+ae(~~(R/60),2)+w+ae(~~R%60,2)})}En("Z",":"),En("ZZ",""),Ne("Z",ft),Ne("ZZ",ft),W(["Z","ZZ"],function(g,w,R){R._useUTC=!0,R._tzm=Yn(ft,g)});var $n=/([\+\-]|\d\d)/gi;function Yn(g,R){var R=(R||"").match(g);return R===null?null:(R=60*(g=((R[R.length-1]||[])+"").match($n)||["-",0,0])[1]+Ge(g[2]))===0?0:g[0]==="+"?R:-R}function jn(g,w){var R;return w._isUTC?(w=w.clone(),R=(M(g)||c(g)?g:lt(g)).valueOf()-w.valueOf(),w._d.setTime(w._d.valueOf()+R),n.updateOffset(w,!1),w):lt(g).local()}function eo(g){return-Math.round(g._d.getTimezoneOffset())}function br(){return!!this.isValid()&&this._isUTC&&this._offset===0}n.updateOffset=function(){};var Co=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,Hi=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function Oi(g,w){var R,H=g,ee=null;return yi(g)?H={ms:g._milliseconds,d:g._days,M:g._months}:h(g)||!isNaN(+g)?(H={},w?H[w]=+g:H.milliseconds=+g):(ee=Co.exec(g))?(R=ee[1]==="-"?-1:1,H={y:0,d:Ge(ee[ut])*R,h:Ge(ee[Rt])*R,m:Ge(ee[Ht])*R,s:Ge(ee[Tt])*R,ms:Ge(Ei(1e3*ee[Ut]))*R}):(ee=Hi.exec(g))?(R=ee[1]==="-"?-1:1,H={y:Hr(ee[2],R),M:Hr(ee[3],R),w:Hr(ee[4],R),d:Hr(ee[5],R),h:Hr(ee[6],R),m:Hr(ee[7],R),s:Hr(ee[8],R)}):H==null?H={}:typeof H=="object"&&("from"in H||"to"in H)&&(w=function(we,He){var Ke;return!we.isValid()||!He.isValid()?{milliseconds:0,months:0}:(He=jn(He,we),we.isBefore(He)?Ke=Es(we,He):((Ke=Es(He,we)).milliseconds=-Ke.milliseconds,Ke.months=-Ke.months),Ke)}(lt(H.from),lt(H.to)),(H={}).ms=w.milliseconds,H.M=w.months),ee=new hi(H),yi(g)&&s(g,"_locale")&&(ee._locale=g._locale),yi(g)&&s(g,"_isValid")&&(ee._isValid=g._isValid),ee}function Hr(g,w){return g=g&&parseFloat(g.replace(",",".")),(isNaN(g)?0:g)*w}function Es(g,w){var R={};return R.months=w.month()-g.month()+12*(w.year()-g.year()),g.clone().add(R.months,"M").isAfter(w)&&--R.months,R.milliseconds=+w-+g.clone().add(R.months,"M"),R}function yo(g,w){return function(R,H){var ee;return H===null||isNaN(+H)||(le(w,"moment()."+w+"(period, number) is deprecated. Please use moment()."+w+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),ee=R,R=H,H=ee),Qs(this,Oi(R,H),g),this}}function Qs(g,He,R,H){var ee=He._milliseconds,we=Ei(He._days),He=Ei(He._months);g.isValid()&&(H=H==null||H,He&&pt(g,at(g,"Month")+He*R),we&&k(g,"Date",at(g,"Date")+we*R),ee&&g._d.setTime(g._d.valueOf()+ee*R),H&&n.updateOffset(g,we||He))}Oi.fn=hi.prototype,Oi.invalid=function(){return Oi(NaN)},U=yo(1,"add"),Ln=yo(-1,"subtract");function Ss(g){return typeof g=="string"||g instanceof String}function ha(g){return M(g)||c(g)||Ss(g)||h(g)||function(w){var R=r(w),H=!1;return R&&(H=w.filter(function(ee){return!h(ee)&&Ss(w)}).length===0),R&&H}(g)||function(w){var R,H,ee=o(w)&&!l(w),we=!1,He=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],Ke=He.length;for(R=0;R<Ke;R+=1)H=He[R],we=we||s(w,H);return ee&&we}(g)||g==null}function es(g,ee){if(g.date()<ee.date())return-es(ee,g);var R=12*(ee.year()-g.year())+(ee.month()-g.month()),H=g.clone().add(R,"months"),ee=ee-H<0?(ee-H)/(H-g.clone().add(R-1,"months")):(ee-H)/(g.clone().add(1+R,"months")-H);return-(R+ee)||0}function ws(g){return g===void 0?this._locale._abbr:((g=vr(g))!=null&&(this._locale=g),this)}n.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",n.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]",_t=Q("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(g){return g===void 0?this.localeData():this.locale(g)});function Ii(){return this._locale}var gi=126227808e5;function Eo(g,w){return(g%w+w)%w}function So(g,w,R){return g<100&&0<=g?new Date(g+400,w,R)-gi:new Date(g,w,R).valueOf()}function xs(g,w,R){return g<100&&0<=g?Date.UTC(g+400,w,R)-gi:Date.UTC(g,w,R)}function Il(g,w){return w.erasAbbrRegex(g)}function Js(){for(var g=[],w=[],R=[],H=[],ee=this.eras(),we=0,He=ee.length;we<He;++we)w.push(It(ee[we].name)),g.push(It(ee[we].abbr)),R.push(It(ee[we].narrow)),H.push(It(ee[we].name)),H.push(It(ee[we].abbr)),H.push(It(ee[we].narrow));this._erasRegex=new RegExp("^("+H.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+w.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+g.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+R.join("|")+")","i")}function ts(g,w){Re(0,[g,g.length],0,w)}function Ts(g,w,R,H,ee){var we;return g==null?Ui(this,H,ee).year:(we=Qt(g,H,ee),(function(He,Ke,bt,ht,zt){return He=ki(He,Ke,bt,ht,zt),Ke=vt(He.year,0,He.dayOfYear),this.year(Ke.getUTCFullYear()),this.month(Ke.getUTCMonth()),this.date(Ke.getUTCDate()),this}).call(this,g,w=we<w?we:w,R,H,ee))}Re("N",0,0,"eraAbbr"),Re("NN",0,0,"eraAbbr"),Re("NNN",0,0,"eraAbbr"),Re("NNNN",0,0,"eraName"),Re("NNNNN",0,0,"eraNarrow"),Re("y",["y",1],"yo","eraYear"),Re("y",["yy",2],0,"eraYear"),Re("y",["yyy",3],0,"eraYear"),Re("y",["yyyy",4],0,"eraYear"),Ne("N",Il),Ne("NN",Il),Ne("NNN",Il),Ne("NNNN",function(g,w){return w.erasNameRegex(g)}),Ne("NNNNN",function(g,w){return w.erasNarrowRegex(g)}),W(["N","NN","NNN","NNNN","NNNNN"],function(g,w,R,H){H=R._locale.erasParse(g,H,R._strict),H?_(R).era=H:_(R).invalidEra=g}),Ne("y",Me),Ne("yy",Me),Ne("yyy",Me),Ne("yyyy",Me),Ne("yo",function(g,w){return w._eraYearOrdinalRegex||Me}),W(["y","yy","yyy","yyyy"],st),W(["yo"],function(g,w,R,H){var ee;R._locale._eraYearOrdinalRegex&&(ee=g.match(R._locale._eraYearOrdinalRegex)),R._locale.eraYearOrdinalParse?w[st]=R._locale.eraYearOrdinalParse(g,ee):w[st]=parseInt(g,10)}),Re(0,["gg",2],0,function(){return this.weekYear()%100}),Re(0,["GG",2],0,function(){return this.isoWeekYear()%100}),ts("gggg","weekYear"),ts("ggggg","weekYear"),ts("GGGG","isoWeekYear"),ts("GGGGG","isoWeekYear"),Ye("weekYear","gg"),Ye("isoWeekYear","GG"),be("weekYear",1),be("isoWeekYear",1),Ne("G",pe),Ne("g",pe),Ne("GG",$,Mt),Ne("gg",$,Mt),Ne("GGGG",qn,Ki),Ne("gggg",qn,Ki),Ne("GGGGG",Or,on),Ne("ggggg",Or,on),me(["gggg","ggggg","GGGG","GGGGG"],function(g,w,R,H){w[H.substr(0,2)]=Ge(g)}),me(["gg","GG"],function(g,w,R,H){w[H]=n.parseTwoDigitYear(g)}),Re("Q",0,"Qo","quarter"),Ye("quarter","Q"),be("quarter",7),Ne("Q",te),W("Q",function(g,w){w[rt]=3*(Ge(g)-1)}),Re("D",["DD",2],"Do","date"),Ye("date","D"),be("date",9),Ne("D",$),Ne("DD",$,Mt),Ne("Do",function(g,w){return g?w._dayOfMonthOrdinalParse||w._ordinalParse:w._dayOfMonthOrdinalParseLenient}),W(["D","DD"],ut),W("Do",function(g,w){w[ut]=Ge(g.match($)[0])}),qn=yt("Date",!0),Re("DDD",["DDDD",3],"DDDo","dayOfYear"),Ye("dayOfYear","DDD"),be("dayOfYear",4),Ne("DDD",Fe),Ne("DDDD",ge),W(["DDD","DDDD"],function(g,w,R){R._dayOfYear=Ge(g)}),Re("m",["mm",2],0,"minute"),Ye("minute","m"),be("minute",14),Ne("m",$),Ne("mm",$,Mt),W(["m","mm"],Ht);var At,Ki=yt("Minutes",!1),Or=(Re("s",["ss",2],0,"second"),Ye("second","s"),be("second",15),Ne("s",$),Ne("ss",$,Mt),W(["s","ss"],Tt),yt("Seconds",!1));for(Re("S",0,0,function(){return~~(this.millisecond()/100)}),Re(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),Re(0,["SSS",3],0,"millisecond"),Re(0,["SSSS",4],0,function(){return 10*this.millisecond()}),Re(0,["SSSSS",5],0,function(){return 100*this.millisecond()}),Re(0,["SSSSSS",6],0,function(){return 1e3*this.millisecond()}),Re(0,["SSSSSSS",7],0,function(){return 1e4*this.millisecond()}),Re(0,["SSSSSSSS",8],0,function(){return 1e5*this.millisecond()}),Re(0,["SSSSSSSSS",9],0,function(){return 1e6*this.millisecond()}),Ye("millisecond","ms"),be("millisecond",16),Ne("S",Fe,te),Ne("SS",Fe,Mt),Ne("SSS",Fe,ge),At="SSSS";At.length<=9;At+="S")Ne(At,Me);function Lo(g,w){w[Ut]=Ge(1e3*("0."+g))}for(At="S";At.length<=9;At+="S")W(At,Lo);on=yt("Milliseconds",!1),Re("z",0,0,"zoneAbbr"),Re("zz",0,0,"zoneName"),te=P.prototype;function Dl(g){return g}te.add=U,te.calendar=function(R,ee){arguments.length===1&&(arguments[0]?ha(arguments[0])?(R=arguments[0],ee=void 0):function(we){for(var He=o(we)&&!l(we),Ke=!1,bt=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"],ht=0;ht<bt.length;ht+=1)Ke=Ke||s(we,bt[ht]);return He&&Ke}(arguments[0])&&(ee=arguments[0],R=void 0):ee=R=void 0);var R=R||lt(),H=jn(R,this).startOf("day"),H=n.calendarFormat(this,H)||"sameElse",ee=ee&&(_e(ee[H])?ee[H].call(this,R):ee[H]);return this.format(ee||this.localeData().calendar(H,this,lt(R)))},te.clone=function(){return new P(this)},te.diff=function(g,w,R){var H,ee,we;if(!this.isValid())return NaN;if(!(H=jn(g,this)).isValid())return NaN;switch(ee=6e4*(H.utcOffset()-this.utcOffset()),w=Ve(w)){case"year":we=es(this,H)/12;break;case"month":we=es(this,H);break;case"quarter":we=es(this,H)/3;break;case"second":we=(this-H)/1e3;break;case"minute":we=(this-H)/6e4;break;case"hour":we=(this-H)/36e5;break;case"day":we=(this-H-ee)/864e5;break;case"week":we=(this-H-ee)/6048e5;break;default:we=this-H}return R?we:nt(we)},te.endOf=function(g){var w,R;if((g=Ve(g))===void 0||g==="millisecond"||!this.isValid())return this;switch(R=this._isUTC?xs:So,g){case"year":w=R(this.year()+1,0,1)-1;break;case"quarter":w=R(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":w=R(this.year(),this.month()+1,1)-1;break;case"week":w=R(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":w=R(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":w=R(this.year(),this.month(),this.date()+1)-1;break;case"hour":w=this._d.valueOf(),w+=36e5-Eo(w+(this._isUTC?0:6e4*this.utcOffset()),36e5)-1;break;case"minute":w=this._d.valueOf(),w+=6e4-Eo(w,6e4)-1;break;case"second":w=this._d.valueOf(),w+=1e3-Eo(w,1e3)-1;break}return this._d.setTime(w),n.updateOffset(this,!0),this},te.format=function(g){return g=g||(this.isUtc()?n.defaultFormatUtc:n.defaultFormat),g=ne(this,g),this.localeData().postformat(g)},te.from=function(g,w){return this.isValid()&&(M(g)&&g.isValid()||lt(g).isValid())?Oi({to:this,from:g}).locale(this.locale()).humanize(!w):this.localeData().invalidDate()},te.fromNow=function(g){return this.from(lt(),g)},te.to=function(g,w){return this.isValid()&&(M(g)&&g.isValid()||lt(g).isValid())?Oi({from:this,to:g}).locale(this.locale()).humanize(!w):this.localeData().invalidDate()},te.toNow=function(g){return this.to(lt(),g)},te.get=function(g){return _e(this[g=Ve(g)])?this[g]():this},te.invalidAt=function(){return _(this).overflow},te.isAfter=function(g,w){return g=M(g)?g:lt(g),!(!this.isValid()||!g.isValid())&&((w=Ve(w)||"millisecond")==="millisecond"?this.valueOf()>g.valueOf():g.valueOf()<this.clone().startOf(w).valueOf())},te.isBefore=function(g,w){return g=M(g)?g:lt(g),!(!this.isValid()||!g.isValid())&&((w=Ve(w)||"millisecond")==="millisecond"?this.valueOf()<g.valueOf():this.clone().endOf(w).valueOf()<g.valueOf())},te.isBetween=function(g,w,R,H){return g=M(g)?g:lt(g),w=M(w)?w:lt(w),!!(this.isValid()&&g.isValid()&&w.isValid())&&((H=H||"()")[0]==="("?this.isAfter(g,R):!this.isBefore(g,R))&&(H[1]===")"?this.isBefore(w,R):!this.isAfter(w,R))},te.isSame=function(R,w){var R=M(R)?R:lt(R);return!(!this.isValid()||!R.isValid())&&((w=Ve(w)||"millisecond")==="millisecond"?this.valueOf()===R.valueOf():(R=R.valueOf(),this.clone().startOf(w).valueOf()<=R&&R<=this.clone().endOf(w).valueOf()))},te.isSameOrAfter=function(g,w){return this.isSame(g,w)||this.isAfter(g,w)},te.isSameOrBefore=function(g,w){return this.isSame(g,w)||this.isBefore(g,w)},te.isValid=function(){return C(this)},te.lang=_t,te.locale=ws,te.localeData=Ii,te.max=re,te.min=X,te.parsingFlags=function(){return m({},_(this))},te.set=function(g,w){if(typeof g=="object")for(var R=function(we){var He,Ke=[];for(He in we)s(we,He)&&Ke.push({unit:He,priority:Ce[He]});return Ke.sort(function(bt,ht){return bt.priority-ht.priority}),Ke}(g=ue(g)),H=R.length,ee=0;ee<H;ee++)this[R[ee].unit](g[R[ee].unit]);else if(_e(this[g=Ve(g)]))return this[g](w);return this},te.startOf=function(g){var w,R;if((g=Ve(g))===void 0||g==="millisecond"||!this.isValid())return this;switch(R=this._isUTC?xs:So,g){case"year":w=R(this.year(),0,1);break;case"quarter":w=R(this.year(),this.month()-this.month()%3,1);break;case"month":w=R(this.year(),this.month(),1);break;case"week":w=R(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":w=R(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":w=R(this.year(),this.month(),this.date());break;case"hour":w=this._d.valueOf(),w-=Eo(w+(this._isUTC?0:6e4*this.utcOffset()),36e5);break;case"minute":w=this._d.valueOf(),w-=Eo(w,6e4);break;case"second":w=this._d.valueOf(),w-=Eo(w,1e3);break}return this._d.setTime(w),n.updateOffset(this,!0),this},te.subtract=Ln,te.toArray=function(){var g=this;return[g.year(),g.month(),g.date(),g.hour(),g.minute(),g.second(),g.millisecond()]},te.toObject=function(){var g=this;return{years:g.year(),months:g.month(),date:g.date(),hours:g.hours(),minutes:g.minutes(),seconds:g.seconds(),milliseconds:g.milliseconds()}},te.toDate=function(){return new Date(this.valueOf())},te.toISOString=function(g){if(!this.isValid())return null;var w=(g=g!==!0)?this.clone().utc():this;return w.year()<0||9999<w.year()?ne(w,g?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):_e(Date.prototype.toISOString)?g?this.toDate().toISOString():new Date(this.valueOf()+60*this.utcOffset()*1e3).toISOString().replace("Z",ne(w,"Z")):ne(w,g?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")},te.inspect=function(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var g,w="moment",R="";return this.isLocal()||(w=this.utcOffset()===0?"moment.utc":"moment.parseZone",R="Z"),w="["+w+'("]',g=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",this.format(w+g+"-MM-DD[T]HH:mm:ss.SSS"+(R+'[")]'))},typeof Symbol<"u"&&Symbol.for!=null&&(te[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"}),te.toJSON=function(){return this.isValid()?this.toISOString():null},te.toString=function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},te.unix=function(){return Math.floor(this.valueOf()/1e3)},te.valueOf=function(){return this._d.valueOf()-6e4*(this._offset||0)},te.creationData=function(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}},te.eraName=function(){for(var g,w=this.localeData().eras(),R=0,H=w.length;R<H;++R)if(g=this.clone().startOf("day").valueOf(),w[R].since<=g&&g<=w[R].until||w[R].until<=g&&g<=w[R].since)return w[R].name;return""},te.eraNarrow=function(){for(var g,w=this.localeData().eras(),R=0,H=w.length;R<H;++R)if(g=this.clone().startOf("day").valueOf(),w[R].since<=g&&g<=w[R].until||w[R].until<=g&&g<=w[R].since)return w[R].narrow;return""},te.eraAbbr=function(){for(var g,w=this.localeData().eras(),R=0,H=w.length;R<H;++R)if(g=this.clone().startOf("day").valueOf(),w[R].since<=g&&g<=w[R].until||w[R].until<=g&&g<=w[R].since)return w[R].abbr;return""},te.eraYear=function(){for(var g,w,R=this.localeData().eras(),H=0,ee=R.length;H<ee;++H)if(g=R[H].since<=R[H].until?1:-1,w=this.clone().startOf("day").valueOf(),R[H].since<=w&&w<=R[H].until||R[H].until<=w&&w<=R[H].since)return(this.year()-n(R[H].since).year())*g+R[H].offset;return this.year()},te.year=xo,te.isLeapYear=function(){return Le(this.year())},te.weekYear=function(g){return Ts.call(this,g,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)},te.isoWeekYear=function(g){return Ts.call(this,g,this.isoWeek(),this.isoWeekday(),1,4)},te.quarter=te.quarters=function(g){return g==null?Math.ceil((this.month()+1)/3):this.month(3*(g-1)+this.month()%3)},te.month=ct,te.daysInMonth=function(){return Mi(this.year(),this.month())},te.week=te.weeks=function(g){var w=this.localeData().week(this);return g==null?w:this.add(7*(g-w),"d")},te.isoWeek=te.isoWeeks=function(g){var w=Ui(this,1,4).week;return g==null?w:this.add(7*(g-w),"d")},te.weeksInYear=function(){var g=this.localeData()._week;return Qt(this.year(),g.dow,g.doy)},te.weeksInWeekYear=function(){var g=this.localeData()._week;return Qt(this.weekYear(),g.dow,g.doy)},te.isoWeeksInYear=function(){return Qt(this.year(),1,4)},te.isoWeeksInISOWeekYear=function(){return Qt(this.isoWeekYear(),1,4)},te.date=qn,te.day=te.days=function(g){if(!this.isValid())return g!=null?this:NaN;var w,R,H=this._isUTC?this._d.getUTCDay():this._d.getDay();return g!=null?(w=g,R=this.localeData(),g=typeof w!="string"?w:isNaN(w)?typeof(w=R.weekdaysParse(w))=="number"?w:null:parseInt(w,10),this.add(g-H,"d")):H},te.weekday=function(g){if(!this.isValid())return g!=null?this:NaN;var w=(this.day()+7-this.localeData()._week.dow)%7;return g==null?w:this.add(g-w,"d")},te.isoWeekday=function(g){return this.isValid()?g!=null?(w=g,R=this.localeData(),R=typeof w=="string"?R.weekdaysParse(w)%7||7:isNaN(w)?null:w,this.day(this.day()%7?R:R-7)):this.day()||7:g!=null?this:NaN;var w,R},te.dayOfYear=function(g){var w=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return g==null?w:this.add(g-w,"d")},te.hour=te.hours=ze,te.minute=te.minutes=Ki,te.second=te.seconds=Or,te.millisecond=te.milliseconds=on,te.utcOffset=function(g,w,R){var H,ee=this._offset||0;if(!this.isValid())return g!=null?this:NaN;if(g==null)return this._isUTC?ee:eo(this);if(typeof g=="string"){if((g=Yn(ft,g))===null)return this}else Math.abs(g)<16&&!R&&(g*=60);return!this._isUTC&&w&&(H=eo(this)),this._offset=g,this._isUTC=!0,H!=null&&this.add(H,"m"),ee!==g&&(!w||this._changeInProgress?Qs(this,Oi(g-ee,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,n.updateOffset(this,!0),this._changeInProgress=null)),this},te.utc=function(g){return this.utcOffset(0,g)},te.local=function(g){return this._isUTC&&(this.utcOffset(0,g),this._isUTC=!1,g&&this.subtract(eo(this),"m")),this},te.parseZone=function(){var g;return this._tzm!=null?this.utcOffset(this._tzm,!1,!0):typeof this._i=="string"&&((g=Yn(Ue,this._i))!=null?this.utcOffset(g):this.utcOffset(0,!0)),this},te.hasAlignedHourOffset=function(g){return!!this.isValid()&&(g=g?lt(g).utcOffset():0,(this.utcOffset()-g)%60==0)},te.isDST=function(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()},te.isLocal=function(){return!!this.isValid()&&!this._isUTC},te.isUtcOffset=function(){return!!this.isValid()&&this._isUTC},te.isUtc=br,te.isUTC=br,te.zoneAbbr=function(){return this._isUTC?"UTC":""},te.zoneName=function(){return this._isUTC?"Coordinated Universal Time":""},te.dates=Q("dates accessor is deprecated. Use date instead.",qn),te.months=Q("months accessor is deprecated. Use month instead",ct),te.years=Q("years accessor is deprecated. Use year instead",xo),te.zone=Q("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",function(g,w){return g!=null?(this.utcOffset(g=typeof g!="string"?-g:g,w),this):-this.utcOffset()}),te.isDSTShifted=Q("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",function(){if(!u(this._isDSTShifted))return this._isDSTShifted;var g,w={};return A(w,this),(w=We(w))._a?(g=(w._isUTC?v:lt)(w._a),this._isDSTShifted=this.isValid()&&0<function(R,H,ee){for(var we=Math.min(R.length,H.length),He=Math.abs(R.length-H.length),Ke=0,bt=0;bt<we;bt++)(ee&&R[bt]!==H[bt]||!ee&&Ge(R[bt])!==Ge(H[bt]))&&Ke++;return Ke+He}(w._a,g.toArray())):this._isDSTShifted=!1,this._isDSTShifted}),Mt=z.prototype;function to(g,w,R,we){var ee=vr(),we=v().set(we,w);return ee[R](we,g)}function Xn(g,w,R){if(h(g)&&(w=g,g=void 0),g=g||"",w!=null)return to(g,w,R,"month");for(var H=[],ee=0;ee<12;ee++)H[ee]=to(g,ee,R,"month");return H}function el(g,w,R,H){w=(typeof g=="boolean"?h(w)&&(R=w,w=void 0):(w=g,g=!1,h(R=w)&&(R=w,w=void 0)),w||"");var ee,we=vr(),He=g?we._week.dow:0,Ke=[];if(R!=null)return to(w,(R+He)%7,H,"day");for(ee=0;ee<7;ee++)Ke[ee]=to(w,(ee+He)%7,H,"day");return Ke}Mt.calendar=function(g,w,R){return _e(g=this._calendar[g]||this._calendar.sameElse)?g.call(w,R):g},Mt.longDateFormat=function(g){var w=this._longDateFormat[g],R=this._longDateFormat[g.toUpperCase()];return w||!R?w:(this._longDateFormat[g]=R.match(qe).map(function(H){return H==="MMMM"||H==="MM"||H==="DD"||H==="dddd"?H.slice(1):H}).join(""),this._longDateFormat[g])},Mt.invalidDate=function(){return this._invalidDate},Mt.ordinal=function(g){return this._ordinal.replace("%d",g)},Mt.preparse=Dl,Mt.postformat=Dl,Mt.relativeTime=function(g,w,R,H){var ee=this._relativeTime[R];return _e(ee)?ee(g,w,R,H):ee.replace(/%d/i,g)},Mt.pastFuture=function(g,w){return _e(g=this._relativeTime[0<g?"future":"past"])?g(w):g.replace(/%s/i,w)},Mt.set=function(g){var w,R;for(R in g)s(g,R)&&(_e(w=g[R])?this[R]=w:this["_"+R]=w);this._config=g,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)},Mt.eras=function(g,w){for(var R,H=this._eras||vr("en")._eras,ee=0,we=H.length;ee<we;++ee){switch(typeof H[ee].since){case"string":R=n(H[ee].since).startOf("day"),H[ee].since=R.valueOf();break}switch(typeof H[ee].until){case"undefined":H[ee].until=1/0;break;case"string":R=n(H[ee].until).startOf("day").valueOf(),H[ee].until=R.valueOf();break}}return H},Mt.erasParse=function(g,w,R){var H,ee,we,He,Ke,bt=this.eras();for(g=g.toUpperCase(),H=0,ee=bt.length;H<ee;++H)if(we=bt[H].name.toUpperCase(),He=bt[H].abbr.toUpperCase(),Ke=bt[H].narrow.toUpperCase(),R)switch(w){case"N":case"NN":case"NNN":if(He===g)return bt[H];break;case"NNNN":if(we===g)return bt[H];break;case"NNNNN":if(Ke===g)return bt[H];break}else if(0<=[we,He,Ke].indexOf(g))return bt[H]},Mt.erasConvertYear=function(g,w){var R=g.since<=g.until?1:-1;return w===void 0?n(g.since).year():n(g.since).year()+(w-g.offset)*R},Mt.erasAbbrRegex=function(g){return s(this,"_erasAbbrRegex")||Js.call(this),g?this._erasAbbrRegex:this._erasRegex},Mt.erasNameRegex=function(g){return s(this,"_erasNameRegex")||Js.call(this),g?this._erasNameRegex:this._erasRegex},Mt.erasNarrowRegex=function(g){return s(this,"_erasNarrowRegex")||Js.call(this),g?this._erasNarrowRegex:this._erasRegex},Mt.months=function(g,w){return g?(r(this._months)?this._months:this._months[(this._months.isFormat||ce).test(w)?"format":"standalone"])[g.month()]:r(this._months)?this._months:this._months.standalone},Mt.monthsShort=function(g,w){return g?(r(this._monthsShort)?this._monthsShort:this._monthsShort[ce.test(w)?"format":"standalone"])[g.month()]:r(this._monthsShort)?this._monthsShort:this._monthsShort.standalone},Mt.monthsParse=function(g,w,R){var H,ee;if(this._monthsParseExact)return(function(Nt,He,Ke){var bt,ht,zt,Nt=Nt.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],bt=0;bt<12;++bt)zt=v([2e3,bt]),this._shortMonthsParse[bt]=this.monthsShort(zt,"").toLocaleLowerCase(),this._longMonthsParse[bt]=this.months(zt,"").toLocaleLowerCase();return Ke?He==="MMM"?(ht=ke.call(this._shortMonthsParse,Nt))!==-1?ht:null:(ht=ke.call(this._longMonthsParse,Nt))!==-1?ht:null:He==="MMM"?(ht=ke.call(this._shortMonthsParse,Nt))!==-1||(ht=ke.call(this._longMonthsParse,Nt))!==-1?ht:null:(ht=ke.call(this._longMonthsParse,Nt))!==-1||(ht=ke.call(this._shortMonthsParse,Nt))!==-1?ht:null}).call(this,g,w,R);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),H=0;H<12;H++)if(ee=v([2e3,H]),R&&!this._longMonthsParse[H]&&(this._longMonthsParse[H]=new RegExp("^"+this.months(ee,"").replace(".","")+"$","i"),this._shortMonthsParse[H]=new RegExp("^"+this.monthsShort(ee,"").replace(".","")+"$","i")),R||this._monthsParse[H]||(ee="^"+this.months(ee,"")+"|^"+this.monthsShort(ee,""),this._monthsParse[H]=new RegExp(ee.replace(".",""),"i")),R&&w==="MMMM"&&this._longMonthsParse[H].test(g)||R&&w==="MMM"&&this._shortMonthsParse[H].test(g)||!R&&this._monthsParse[H].test(g))return H},Mt.monthsRegex=function(g){return this._monthsParseExact?(s(this,"_monthsRegex")||St.call(this),g?this._monthsStrictRegex:this._monthsRegex):(s(this,"_monthsRegex")||(this._monthsRegex=ot),this._monthsStrictRegex&&g?this._monthsStrictRegex:this._monthsRegex)},Mt.monthsShortRegex=function(g){return this._monthsParseExact?(s(this,"_monthsRegex")||St.call(this),g?this._monthsShortStrictRegex:this._monthsShortRegex):(s(this,"_monthsShortRegex")||(this._monthsShortRegex=Ee),this._monthsShortStrictRegex&&g?this._monthsShortStrictRegex:this._monthsShortRegex)},Mt.week=function(g){return Ui(g,this._week.dow,this._week.doy).week},Mt.firstDayOfYear=function(){return this._week.doy},Mt.firstDayOfWeek=function(){return this._week.dow},Mt.weekdays=function(g,w){return w=r(this._weekdays)?this._weekdays:this._weekdays[g&&g!==!0&&this._weekdays.isFormat.test(w)?"format":"standalone"],g===!0?Ni(w,this._week.dow):g?w[g.day()]:w},Mt.weekdaysMin=function(g){return g===!0?Ni(this._weekdaysMin,this._week.dow):g?this._weekdaysMin[g.day()]:this._weekdaysMin},Mt.weekdaysShort=function(g){return g===!0?Ni(this._weekdaysShort,this._week.dow):g?this._weekdaysShort[g.day()]:this._weekdaysShort},Mt.weekdaysParse=function(g,w,R){var H,ee;if(this._weekdaysParseExact)return(function(Nt,He,Ke){var bt,ht,zt,Nt=Nt.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],bt=0;bt<7;++bt)zt=v([2e3,1]).day(bt),this._minWeekdaysParse[bt]=this.weekdaysMin(zt,"").toLocaleLowerCase(),this._shortWeekdaysParse[bt]=this.weekdaysShort(zt,"").toLocaleLowerCase(),this._weekdaysParse[bt]=this.weekdays(zt,"").toLocaleLowerCase();return Ke?He==="dddd"?(ht=ke.call(this._weekdaysParse,Nt))!==-1?ht:null:He==="ddd"?(ht=ke.call(this._shortWeekdaysParse,Nt))!==-1?ht:null:(ht=ke.call(this._minWeekdaysParse,Nt))!==-1?ht:null:He==="dddd"?(ht=ke.call(this._weekdaysParse,Nt))!==-1||(ht=ke.call(this._shortWeekdaysParse,Nt))!==-1||(ht=ke.call(this._minWeekdaysParse,Nt))!==-1?ht:null:He==="ddd"?(ht=ke.call(this._shortWeekdaysParse,Nt))!==-1||(ht=ke.call(this._weekdaysParse,Nt))!==-1||(ht=ke.call(this._minWeekdaysParse,Nt))!==-1?ht:null:(ht=ke.call(this._minWeekdaysParse,Nt))!==-1||(ht=ke.call(this._weekdaysParse,Nt))!==-1||(ht=ke.call(this._shortWeekdaysParse,Nt))!==-1?ht:null}).call(this,g,w,R);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),H=0;H<7;H++)if(ee=v([2e3,1]).day(H),R&&!this._fullWeekdaysParse[H]&&(this._fullWeekdaysParse[H]=new RegExp("^"+this.weekdays(ee,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[H]=new RegExp("^"+this.weekdaysShort(ee,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[H]=new RegExp("^"+this.weekdaysMin(ee,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[H]||(ee="^"+this.weekdays(ee,"")+"|^"+this.weekdaysShort(ee,"")+"|^"+this.weekdaysMin(ee,""),this._weekdaysParse[H]=new RegExp(ee.replace(".",""),"i")),R&&w==="dddd"&&this._fullWeekdaysParse[H].test(g)||R&&w==="ddd"&&this._shortWeekdaysParse[H].test(g)||R&&w==="dd"&&this._minWeekdaysParse[H].test(g)||!R&&this._weekdaysParse[H].test(g))return H},Mt.weekdaysRegex=function(g){return this._weekdaysParseExact?(s(this,"_weekdaysRegex")||ii.call(this),g?this._weekdaysStrictRegex:this._weekdaysRegex):(s(this,"_weekdaysRegex")||(this._weekdaysRegex=Se),this._weekdaysStrictRegex&&g?this._weekdaysStrictRegex:this._weekdaysRegex)},Mt.weekdaysShortRegex=function(g){return this._weekdaysParseExact?(s(this,"_weekdaysRegex")||ii.call(this),g?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(s(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=Xe),this._weekdaysShortStrictRegex&&g?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)},Mt.weekdaysMinRegex=function(g){return this._weekdaysParseExact?(s(this,"_weekdaysRegex")||ii.call(this),g?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(s(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=wt),this._weekdaysMinStrictRegex&&g?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)},Mt.isPM=function(g){return(g+"").toLowerCase().charAt(0)==="p"},Mt.meridiem=function(g,w,R){return 11<g?R?"pm":"PM":R?"am":"AM"},er("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(g){var w=g%10;return g+(Ge(g%100/10)===1?"th":w==1?"st":w==2?"nd":w==3?"rd":"th")}}),n.lang=Q("moment.lang is deprecated. Use moment.locale instead.",er),n.langData=Q("moment.langData is deprecated. Use moment.localeData instead.",vr);var Ar=Math.abs;function Rl(g,w,R,H){return w=Oi(w,R),g._milliseconds+=H*w._milliseconds,g._days+=H*w._days,g._months+=H*w._months,g._bubble()}function tl(g){return g<0?Math.floor(g):Math.ceil(g)}function Pl(g){return 4800*g/146097}function Os(g){return 146097*g/4800}function rn(g){return function(){return this.as(g)}}Fe=rn("ms"),ge=rn("s"),U=rn("m"),re=rn("h"),X=rn("d"),Ln=rn("w"),ze=rn("M"),Ki=rn("Q"),Or=rn("y");function wo(g){return function(){return this.isValid()?this._data[g]:NaN}}var on=wo("milliseconds"),qn=wo("seconds"),xo=wo("minutes"),Mt=wo("hours"),il=wo("days"),nl=wo("months"),Yi=wo("years"),Vn=Math.round,To={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function fd(g,w,R,H){var ht=Oi(g).abs(),zt=Vn(ht.as("s")),ee=Vn(ht.as("m")),we=Vn(ht.as("h")),He=Vn(ht.as("d")),Ke=Vn(ht.as("M")),bt=Vn(ht.as("w")),ht=Vn(ht.as("y")),zt=(zt<=R.ss?["s",zt]:zt<R.s&&["ss",zt])||ee<=1&&["m"]||ee<R.m&&["mm",ee]||we<=1&&["h"]||we<R.h&&["hh",we]||He<=1&&["d"]||He<R.d&&["dd",He];return(zt=(zt=R.w!=null?zt||bt<=1&&["w"]||bt<R.w&&["ww",bt]:zt)||Ke<=1&&["M"]||Ke<R.M&&["MM",Ke]||ht<=1&&["y"]||["yy",ht])[2]=w,zt[3]=0<+g,zt[4]=H,(function(Nt,Zi,an,Qi,ns){return ns.relativeTime(Zi||1,!!an,Nt,Qi)}).apply(null,zt)}var As=Math.abs;function is(g){return(0<g)-(g<0)||+g}function rl(){if(!this.isValid())return this.localeData().invalidDate();var g,w,R,H,ee,we,He,Ke=As(this._milliseconds)/1e3,bt=As(this._days),ht=As(this._months),zt=this.asSeconds();return zt?(g=nt(Ke/60),w=nt(g/60),Ke%=60,g%=60,R=nt(ht/12),ht%=12,H=Ke?Ke.toFixed(3).replace(/\.?0+$/,""):"",ee=is(this._months)!==is(zt)?"-":"",we=is(this._days)!==is(zt)?"-":"",He=is(this._milliseconds)!==is(zt)?"-":"",(zt<0?"-":"")+"P"+(R?ee+R+"Y":"")+(ht?ee+ht+"M":"")+(bt?we+bt+"D":"")+(w||g||Ke?"T":"")+(w?He+w+"H":"")+(g?He+g+"M":"")+(Ke?He+H+"S":"")):"P0D"}var pi=hi.prototype;return pi.isValid=function(){return this._isValid},pi.abs=function(){var g=this._data;return this._milliseconds=Ar(this._milliseconds),this._days=Ar(this._days),this._months=Ar(this._months),g.milliseconds=Ar(g.milliseconds),g.seconds=Ar(g.seconds),g.minutes=Ar(g.minutes),g.hours=Ar(g.hours),g.months=Ar(g.months),g.years=Ar(g.years),this},pi.add=function(g,w){return Rl(this,g,w,1)},pi.subtract=function(g,w){return Rl(this,g,w,-1)},pi.as=function(g){if(!this.isValid())return NaN;var w,R,H=this._milliseconds;if((g=Ve(g))==="month"||g==="quarter"||g==="year")switch(w=this._days+H/864e5,R=this._months+Pl(w),g){case"month":return R;case"quarter":return R/3;case"year":return R/12}else switch(w=this._days+Math.round(Os(this._months)),g){case"week":return w/7+H/6048e5;case"day":return w+H/864e5;case"hour":return 24*w+H/36e5;case"minute":return 1440*w+H/6e4;case"second":return 86400*w+H/1e3;case"millisecond":return Math.floor(864e5*w)+H;default:throw new Error("Unknown unit "+g)}},pi.asMilliseconds=Fe,pi.asSeconds=ge,pi.asMinutes=U,pi.asHours=re,pi.asDays=X,pi.asWeeks=Ln,pi.asMonths=ze,pi.asQuarters=Ki,pi.asYears=Or,pi.valueOf=function(){return this.isValid()?this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*Ge(this._months/12):NaN},pi._bubble=function(){var g=this._milliseconds,w=this._days,R=this._months,H=this._data;return 0<=g&&0<=w&&0<=R||g<=0&&w<=0&&R<=0||(g+=864e5*tl(Os(R)+w),R=w=0),H.milliseconds=g%1e3,g=nt(g/1e3),H.seconds=g%60,g=nt(g/60),H.minutes=g%60,g=nt(g/60),H.hours=g%24,w+=nt(g/24),R+=g=nt(Pl(w)),w-=tl(Os(g)),g=nt(R/12),R%=12,H.days=w,H.months=R,H.years=g,this},pi.clone=function(){return Oi(this)},pi.get=function(g){return g=Ve(g),this.isValid()?this[g+"s"]():NaN},pi.milliseconds=on,pi.seconds=qn,pi.minutes=xo,pi.hours=Mt,pi.days=il,pi.weeks=function(){return nt(this.days()/7)},pi.months=nl,pi.years=Yi,pi.humanize=function(g,w){if(!this.isValid())return this.localeData().invalidDate();var R=!1,H=To;return typeof g=="object"&&(w=g,g=!1),typeof g=="boolean"&&(R=g),typeof w=="object"&&(H=Object.assign({},To,w),w.s!=null&&w.ss==null&&(H.ss=w.s-1)),g=this.localeData(),w=fd(this,!R,H,g),R&&(w=g.pastFuture(+this,w)),g.postformat(w)},pi.toISOString=rl,pi.toString=rl,pi.toJSON=rl,pi.locale=ws,pi.localeData=Ii,pi.toIsoString=Q("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",rl),pi.lang=_t,Re("X",0,0,"unix"),Re("x",0,0,"valueOf"),Ne("x",pe),Ne("X",/[+-]?\d+(\.\d{1,3})?/),W("X",function(g,w,R){R._d=new Date(1e3*parseFloat(g))}),W("x",function(g,w,R){R._d=new Date(Ge(g))}),n.version="2.29.4",e=lt,n.fn=te,n.min=function(){return Ot("isBefore",[].slice.call(arguments,0))},n.max=function(){return Ot("isAfter",[].slice.call(arguments,0))},n.now=function(){return Date.now?Date.now():+new Date},n.utc=v,n.unix=function(g){return lt(1e3*g)},n.months=function(g,w){return Xn(g,w,"months")},n.isDate=c,n.locale=er,n.invalid=x,n.duration=Oi,n.isMoment=M,n.weekdays=function(g,w,R){return el(g,w,R,"weekdays")},n.parseZone=function(){return lt.apply(null,arguments).parseZone()},n.localeData=vr,n.isDuration=yi,n.monthsShort=function(g,w){return Xn(g,w,"monthsShort")},n.weekdaysMin=function(g,w,R){return el(g,w,R,"weekdaysMin")},n.defineLocale=_o,n.updateLocale=function(g,w){var R,H;return w!=null?(H=Gn,qt[g]!=null&&qt[g].parentLocale!=null?qt[g].set(J(qt[g]._config,w)):(w=J(H=(R=Jn(g))!=null?R._config:H,w),R==null&&(w.abbr=g),(H=new z(w)).parentLocale=qt[g],qt[g]=H),er(g)):qt[g]!=null&&(qt[g].parentLocale!=null?(qt[g]=qt[g].parentLocale,g===er()&&er(g)):qt[g]!=null&&delete qt[g]),qt[g]},n.locales=function(){return F(qt)},n.weekdaysShort=function(g,w,R){return el(g,w,R,"weekdaysShort")},n.normalizeUnits=Ve,n.relativeTimeRounding=function(g){return g===void 0?Vn:typeof g=="function"&&(Vn=g,!0)},n.relativeTimeThreshold=function(g,w){return To[g]!==void 0&&(w===void 0?To[g]:(To[g]=w,g==="s"&&(To.ss=w-1),!0))},n.calendarFormat=function(g,w){return(g=g.diff(w,"days",!0))<-6?"sameElse":g<-1?"lastWeek":g<0?"lastDay":g<1?"sameDay":g<2?"nextDay":g<7?"nextWeek":"sameElse"},n.prototype=te,n.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"},n})})(Sp);var wp=Sp.exports;const $s=eh(wp),ps=bl({__proto__:null,default:$s},[wp]);class je{}je.locales={TEXT_ALL_SELECTED:"All Selected",TEXT_ALL_X_RECORDS_SELECTED:"All {{x}} records selected",TEXT_APPLY_MASS_UPDATE:"Apply Mass Update",TEXT_APPLY_TO_SELECTION:"Update Selection",TEXT_CANCEL:"Cancel",TEXT_CLEAR_ALL_FILTERS:"Clear all Filters",TEXT_CLEAR_ALL_GROUPING:"Clear all Grouping",TEXT_CLEAR_ALL_SORTING:"Clear all Sorting",TEXT_CLEAR_PINNING:"Unfreeze Columns/Rows",TEXT_CLONE:"Clone",TEXT_COLLAPSE_ALL_GROUPS:"Collapse all Groups",TEXT_CONTAINS:"Contains",TEXT_COLUMNS:"Columns",TEXT_COLUMN_RESIZE_BY_CONTENT:"Resize by Content",TEXT_COMMANDS:"Commands",TEXT_COPY:"Copy",TEXT_DROP_COLUMN_HEADER_TO_GROUP_BY:"Drop a column header here to group by the column",TEXT_EQUALS:"Equals",TEXT_EQUAL_TO:"Equal to",TEXT_ENDS_WITH:"Ends With",TEXT_ERROR_EDITABLE_GRID_REQUIRED:"Your grid must be editable in order to use the Composite Editor Modal.",TEXT_ERROR_ENABLE_CELL_NAVIGATION_REQUIRED:'Composite Editor requires the flag "enableCellNavigation" to be set to True in your Grid Options.',TEXT_ERROR_NO_CHANGES_DETECTED:"Sorry we could not detect any changes.",TEXT_ERROR_NO_EDITOR_FOUND:"We could not find any Editor in your Column Definition.",TEXT_ERROR_NO_RECORD_FOUND:"No records selected for edit or clone operation.",TEXT_ERROR_ROW_NOT_EDITABLE:"Current row is not editable.",TEXT_ERROR_ROW_SELECTION_REQUIRED:"You must select some rows before trying to apply new value(s).",TEXT_EXPAND_ALL_GROUPS:"Expand all Groups",TEXT_EXPORT_TO_CSV:"Export in CSV format",TEXT_EXPORT_TO_TEXT_FORMAT:"Export in Text format (Tab delimited)",TEXT_EXPORT_TO_EXCEL:"Export to Excel",TEXT_EXPORT_TO_TAB_DELIMITED:"Export in Text format (Tab delimited)",TEXT_FORCE_FIT_COLUMNS:"Force fit columns",TEXT_FREEZE_COLUMNS:"Freeze Columns",TEXT_GREATER_THAN:"Greater than",TEXT_GREATER_THAN_OR_EQUAL_TO:"Greater than or equal to",TEXT_GROUP_BY:"Group By",TEXT_HIDE_COLUMN:"Hide Column",TEXT_ITEMS:"items",TEXT_ITEMS_PER_PAGE:"items per page",TEXT_ITEMS_SELECTED:"items selected",TEXT_OF:"of",TEXT_OK:"OK",TEXT_LAST_UPDATE:"Last Update",TEXT_LESS_THAN:"Less than",TEXT_LESS_THAN_OR_EQUAL_TO:"Less than or equal to",TEXT_NOT_CONTAINS:"Not contains",TEXT_NOT_EQUAL_TO:"Not equal to",TEXT_PAGE:"Page",TEXT_RECORDS_SELECTED:"records selected",TEXT_REFRESH_DATASET:"Refresh Dataset",TEXT_REMOVE_FILTER:"Remove Filter",TEXT_REMOVE_SORT:"Remove Sort",TEXT_RESET_INPUT_VALUE:"Reset Input Value",TEXT_RESET_FORM:"Reset Form",TEXT_SAVE:"Save",TEXT_SELECT_ALL:"Select All",TEXT_SYNCHRONOUS_RESIZE:"Synchronous resize",TEXT_SORT_ASCENDING:"Sort Ascending",TEXT_SORT_DESCENDING:"Sort Descending",TEXT_STARTS_WITH:"Starts With",TEXT_TOGGLE_ALL_GROUPS:"Toggle all Groups",TEXT_TOGGLE_FILTER_ROW:"Toggle Filter Row",TEXT_TOGGLE_PRE_HEADER_ROW:"Toggle Pre-Header Row",TEXT_UNFREEZE_COLUMNS:"Unfreeze Columns",TEXT_X_OF_Y_SELECTED:"# of % selected",TEXT_X_OF_Y_MASS_SELECTED:"{{x}} of {{y}} selected"},je.treeDataProperties={CHILDREN_PROP:"children",COLLAPSED_PROP:"__collapsed",HAS_CHILDREN_PROP:"__hasChildren",TREE_LEVEL_PROP:"__treeLevel",PARENT_PROP:"__parentId"},je.DEFAULT_FORMATTER_NUMBER_MIN_DECIMAL=2,je.DEFAULT_FORMATTER_NUMBER_MAX_DECIMAL=2,je.DEFAULT_FORMATTER_CURRENCY_MIN_DECIMAL=2,je.DEFAULT_FORMATTER_CURRENCY_MAX_DECIMAL=4,je.DEFAULT_FORMATTER_PERCENT_MIN_DECIMAL=void 0,je.DEFAULT_FORMATTER_PERCENT_MAX_DECIMAL=void 0,je.DEFAULT_NUMBER_DECIMAL_SEPARATOR=".",je.DEFAULT_NUMBER_THOUSAND_SEPARATOR="",je.DEFAULT_NEGATIVE_NUMBER_WRAPPED_IN_BRAQUET=!1,je.SLIDER_DEFAULT_MIN_VALUE=0,je.SLIDER_DEFAULT_MAX_VALUE=100,je.SLIDER_DEFAULT_STEP=1,je.VALIDATION_REQUIRED_FIELD="Field is required",je.VALIDATION_EDITOR_VALID_NUMBER="Please enter a valid number",je.VALIDATION_EDITOR_VALID_INTEGER="Please enter a valid integer number",je.VALIDATION_EDITOR_INTEGER_BETWEEN="Please enter a valid integer number between {{minValue}} and {{maxValue}}",je.VALIDATION_EDITOR_INTEGER_MAX="Please enter a valid integer number that is lower than {{maxValue}}",je.VALIDATION_EDITOR_INTEGER_MAX_INCLUSIVE="Please enter a valid integer number that is lower than or equal to {{maxValue}}",je.VALIDATION_EDITOR_INTEGER_MIN="Please enter a valid integer number that is greater than {{minValue}}",je.VALIDATION_EDITOR_INTEGER_MIN_INCLUSIVE="Please enter a valid integer number that is greater than or equal to {{minValue}}",je.VALIDATION_EDITOR_NUMBER_BETWEEN="Please enter a valid number between {{minValue}} and {{maxValue}}",je.VALIDATION_EDITOR_NUMBER_MAX="Please enter a valid number that is lower than {{maxValue}}",je.VALIDATION_EDITOR_NUMBER_MAX_INCLUSIVE="Please enter a valid number that is lower than or equal to {{maxValue}}",je.VALIDATION_EDITOR_NUMBER_MIN="Please enter a valid number that is greater than {{minValue}}",je.VALIDATION_EDITOR_NUMBER_MIN_INCLUSIVE="Please enter a valid number that is greater than or equal to {{minValue}}",je.VALIDATION_EDITOR_DECIMAL_BETWEEN="Please enter a valid number with a maximum of {{maxDecimal}} decimals",je.VALIDATION_EDITOR_TEXT_LENGTH_BETWEEN="Please make sure your text length is between {{minLength}} and {{maxLength}} characters",je.VALIDATION_EDITOR_TEXT_MAX_LENGTH="Please make sure your text is less than {{maxLength}} characters",je.VALIDATION_EDITOR_TEXT_MAX_LENGTH_INCLUSIVE="Please make sure your text is less than or equal to {{maxLength}} characters",je.VALIDATION_EDITOR_TEXT_MIN_LENGTH="Please make sure your text is more than {{minLength}} character(s)",je.VALIDATION_EDITOR_TEXT_MIN_LENGTH_INCLUSIVE="Please make sure your text is at least {{minLength}} character(s)";var th;(function(a){a[a.camelCase=0]="camelCase",a[a.pascalCase=1]="pascalCase",a[a.snakeCase=2]="snakeCase",a[a.kebabCase=3]="kebabCase"})(th||(th={}));var ms;(function(a){a.colon=":",a.comma=",",a.equalSign="=",a.pipe="|",a.semicolon=";",a.space=" ",a.tab="	",a.doubleColon="::",a.doublePipe="||",a.doubleSemicolon=";;"})(ms||(ms={}));var ri;(function(a){a.autoTooltip="autoTooltip",a.cellExternalCopyManager="cellExternalCopyManager",a.cellMenu="cellMenu",a.checkboxSelector="checkboxSelector",a.columnPicker="columnPicker",a.contextMenu="contextMenu",a.customTooltip="customTooltip",a.draggableGrouping="draggableGrouping",a.groupItemMetaProvider="groupItemMetaProvider",a.gridMenu="gridMenu",a.headerButton="headerButton",a.headerMenu="headerMenu",a.rowDetailView="rowDetailView",a.rowMoveManager="rowMoveManager",a.rowSelection="rowSelection"})(ri||(ri={}));const ie={unknown:"unknown",string:"string",boolean:"boolean",integer:"integer",float:"float",number:"number",date:"date",dateIso:"dateIso",dateUtc:"dateUtc",dateTime:"dateTime",dateTimeIso:"dateTimeIso",dateTimeIsoAmPm:"dateTimeIsoAmPm",dateTimeIsoAM_PM:"dateTimeIsoAM_PM",dateTimeShortIso:"dateTimeShortIso",dateEuro:"dateEuro",dateEuroShort:"dateEuroShort",dateTimeShortEuro:"dateTimeShortEuro",dateTimeEuro:"dateTimeEuro",dateTimeEuroAmPm:"dateTimeEuroAmPm",dateTimeEuroAM_PM:"dateTimeEuroAM_PM",dateTimeEuroShort:"dateTimeEuroShort",dateTimeEuroShortAmPm:"dateTimeEuroShortAmPm",dateTimeEuroShortAM_PM:"dateTimeEuroShortAM_PM",dateUs:"dateUs",dateUsShort:"dateUsShort",dateTimeShortUs:"dateTimeShortUs",dateTimeUs:"dateTimeUs",dateTimeUsAmPm:"dateTimeUsAmPm",dateTimeUsAM_PM:"dateTimeUsAM_PM",dateTimeUsShort:"dateTimeUsShort",dateTimeUsShortAmPm:"dateTimeUsShortAmPm",dateTimeUsShortAM_PM:"dateTimeUsShortAM_PM",object:"object",password:"password",text:"text",readonly:"readonly"};var un;(function(a){a.csv="csv",a.txt="txt",a.xls="xls",a.xlsx="xlsx"})(un||(un={}));var Kl;(function(a){a.merge="merge",a.chain="chain"})(Kl||(Kl={}));var Ud;(function(a){a.none="NOA",a.legacyOff="LOF",a.legacyForceFit="LFF",a.ignoreViewport="IGV",a.fitColsToViewport="FCV",a.fitViewportToCols="FVC"})(Ud||(Ud={}));var cr;(function(a){a.columns="columns",a.filter="filter",a.pagination="pagination",a.pinning="pinning",a.rowSelection="rowSelection",a.sorter="sorter",a.treeData="treeData"})(cr||(cr={}));var xi;(function(a){a[a.C=67]="C",a[a.V=86]="V",a[a.BACKSPACE=8]="BACKSPACE",a[a.DELETE=46]="DELETE",a[a.DOWN=40]="DOWN",a[a.END=35]="END",a[a.ENTER=13]="ENTER",a[a.ESCAPE=27]="ESCAPE",a[a.HOME=36]="HOME",a[a.INSERT=45]="INSERT",a[a.LEFT=37]="LEFT",a[a.PAGE_DOWN=34]="PAGE_DOWN",a[a.PAGE_UP=33]="PAGE_UP",a[a.RIGHT=39]="RIGHT",a[a.TAB=9]="TAB",a[a.UP=38]="UP",a[a.SPACE=32]="SPACE"})(xi||(xi={}));var Lt;(function(a){a.empty="",a.contains="Contains",a.notContains="Not_Contains",a.lessThan="LT",a.lessThanOrEqual="LE",a.greaterThan="GT",a.greaterThanOrEqual="GE",a.notEqual="NE",a.equal="EQ",a.endsWith="EndsWith",a.rangeInclusive="RangeInclusive",a.rangeExclusive="RangeExclusive",a.startsWith="StartsWith",a.in="IN",a.notIn="NOT_IN",a.inContains="IN_CONTAINS",a.notInContains="NOT_IN_CONTAINS",a.inCollection="IN_COLLECTION",a.notInCollection="NOT_IN_COLLECTION"})(Lt||(Lt={}));var Io;(function(a){a.asc="asc",a.ASC="ASC",a.desc="desc",a.DESC="DESC"})(Io||(Io={}));var Xi;(function(a){a[a.asc=1]="asc",a[a.desc=-1]="desc",a[a.neutral=0]="neutral"})(Xi||(Xi={}));var vs;(function(a){a.toggleCollapse="toggle-collapse",a.fullExpand="full-expand",a.fullCollapse="full-collapse",a.toggleExpand="toggle-expand"})(vs||(vs={}));const ih=Object.freeze(Object.defineProperty({__proto__:null,get CaseType(){return th},get DelimiterType(){return ms},get EmitterType(){return en},get ExtensionName(){return ri},FieldType:ie,get FileType(){return un},get FilterMultiplePassType(){return Kl},get GridAutosizeColsMode(){return Ud},get GridStateType(){return cr},get KeyCode(){return xi},get OperatorType(){return Lt},get SortDirection(){return Io},get SortDirectionNumber(){return Xi},get ToggleStateChangeType(){return vs}},Symbol.toStringTag,{value:"Module"})),Kg=$s||ps;class La extends Error{constructor(t){super(t),Object.setPrototypeOf(this,La.prototype)}}function xp(a){let t=!1;return a instanceof Promise?{promise:a.then(e=>{if(t)throw new La("Cancelled Promise");return e}),cancel:()=>t=!0}:a}function Tp(a,t,e=""){let n=t;if(t instanceof Promise)return t;if(a.isObservable(t)&&(n=a.firstValueFrom(t)),!(n instanceof Promise))throw new Error(`Something went wrong, Slickgrid-Universal ${e} is not able to convert the Observable into a Promise.`);return n}function Gd(a,t,e=0){var n;const r=(n=t==null?void 0:t.childrenPropName)!==null&&n!==void 0?n:je.treeDataProperties.CHILDREN_PROP;if(Array.isArray(a))for(const o of a)o&&(Array.isArray(o[r])&&o[r].length>0&&(e++,Gd(o[r],t,e),e--),o[t.levelPropName]=e)}function Ha(a,t,e=0,n=null){var r;const o=(r=t==null?void 0:t.childrenPropName)!==null&&r!==void 0?r:je.treeDataProperties.CHILDREN_PROP,{aggregator:s}=t;if(Array.isArray(a)){for(const l of a)if(l){const u=Array.isArray(l[o]);Array.isArray(l[o])&&l[o].length>0&&(s.init(l,!0),e++,Ha(l[o],t,e,l),e--),n&&s.isInitialized&&typeof s.accumulate=="function"&&!(l!=null&&l.__filteredOut)&&(s.accumulate(l,u),s.storeResult(n.__treeTotals)),l[t.levelPropName]=e}}}function Op(a,t){var e,n,r,o,s;const l=(e=t==null?void 0:t.identifierPropName)!==null&&e!==void 0?e:"id",u=(n=t==null?void 0:t.childrenPropName)!==null&&n!==void 0?n:je.treeDataProperties.CHILDREN_PROP,h=(r=t==null?void 0:t.hasChildrenPropName)!==null&&r!==void 0?r:je.treeDataProperties.HAS_CHILDREN_PROP,c=(o=t==null?void 0:t.parentPropName)!==null&&o!==void 0?o:je.treeDataProperties.PARENT_PROP,p=(s=t==null?void 0:t.levelPropName)!==null&&s!==void 0?s:je.treeDataProperties.TREE_LEVEL_PROP;return t!=null&&t.shouldAddTreeLevelNumber&&(t!=null&&t.aggregators?t.aggregators.forEach(v=>{Ha(a,{childrenPropName:u,levelPropName:p,aggregator:v})}):Gd(a,{childrenPropName:u,levelPropName:p})),qg(a,v=>v[u],(v,_)=>({[l]:v[l],[c]:_!==void 0?_[l]:null,[h]:!!v[u],...kp(v,u)}))}function Ap(a,t){var e,n,r,o,s;const l=(e=t==null?void 0:t.identifierPropName)!==null&&e!==void 0?e:"id",u=(n=t==null?void 0:t.childrenPropName)!==null&&n!==void 0?n:je.treeDataProperties.CHILDREN_PROP,h=(r=t==null?void 0:t.parentPropName)!==null&&r!==void 0?r:je.treeDataProperties.PARENT_PROP,c=(o=t==null?void 0:t.levelPropName)!==null&&o!==void 0?o:je.treeDataProperties.TREE_LEVEL_PROP,p=(s=t==null?void 0:t.collapsedPropName)!==null&&s!==void 0?s:je.treeDataProperties.COLLAPSED_PROP,m=a||[],v=[],_={};return m.forEach(C=>_[C[l]]=C),Object.keys(_).forEach(C=>{var x;const S=_[C];if(!(h in S)||S[h]===null||S[h]===void 0||S[h]==="")v.push(S);else if(S[h]in _){const y=_[S[h]];u in y||(y[u]=[]),y[u].push(S),y[p]===void 0&&(y[p]=(x=t==null?void 0:t.initiallyCollapsed)!==null&&x!==void 0?x:!1)}}),t!=null&&t.aggregators?t.aggregators.forEach(C=>{Ha(v,{childrenPropName:u,levelPropName:c,aggregator:C},0)}):Gd(v,{childrenPropName:u,levelPropName:c},0),v}function Ba(a,t,e){if(!e)throw new Error('findRecursive requires parameter "childrenPropertyName"');const n=a.find(t),r=a.filter(o=>(o==null?void 0:o.hasOwnProperty(e))&&o[e]);if(n)return n;if(r.length){const o=[];return r.forEach(s=>{s!=null&&s.hasOwnProperty(e)&&o.push(...s[e])}),Ba(o,t,e)}}function Ys(a,t,e,n=".",r=""){if(isNaN(+a))return a;const o=t===void 0?2:t,s=e===void 0?2:e;let l=String(Math.round(+a*Math.pow(10,s))/Math.pow(10,s));for(l.indexOf(".")<0&&o>0&&(l+=".");l.length-l.indexOf(".")<=o;)l+="0";const u=l.split(".");let h,c;r?h=u.length>=1?gs(u[0],r):void 0:h=u.length>=1?u[0]:l,u.length>1&&(c=u[1]);let p="";return h!==void 0&&c!==void 0?p=`${h}${n}${c}`:h!=null&&(p=h),p}function wn(a,t,e,n,r="",o="",s=".",l=""){if(isNaN(+a))return a;const u=Math.round(parseFloat(a)*1e6)/1e6;if(u<0){const h=Math.abs(u);if(n){if(!isNaN(t)||!isNaN(e))return`(${r}${Ys(h,t,e,s,l)}${o})`;const c=gs(`${h}`,l);return`(${r}${c}${o})`}else{if(!isNaN(t)||!isNaN(e))return`-${r}${Ys(h,t,e,s,l)}${o}`;const c=gs(`${h}`,l);return`-${r}${c}${o}`}}else{if(!isNaN(t)||!isNaN(e))return`${r}${Ys(a,t,e,s,l)}${o}`;const h=gs(`${a}`,l);return`${r}${h}${o}`}}function Va(a,t,e){if(typeof a.queryFieldNameGetterFn=="function"){const n=a.queryFieldNameGetterFn(t);(n==null?void 0:n.indexOf("."))>=0?e=bn(t,n):e=t.hasOwnProperty(n)?t[n]:e}return e}function bn(a,t){return!a||!t?a:t.split(".").reduce((e,n)=>e&&e[n],a)}function ao(a){return a&&a.translationNamespace?a.translationNamespace+(a.translationNamespaceSeparator||""):""}function za(a){return a.outputType||a.type||ie.string}function nh(a){switch(a){case ie.date:case ie.dateTime:case ie.dateIso:case ie.dateTimeIso:case ie.dateTimeShortIso:case ie.dateTimeIsoAmPm:case ie.dateTimeIsoAM_PM:case ie.dateEuro:case ie.dateEuroShort:case ie.dateTimeEuro:case ie.dateTimeShortEuro:case ie.dateTimeEuroAmPm:case ie.dateTimeEuroAM_PM:case ie.dateTimeEuroShort:case ie.dateTimeEuroShortAmPm:case ie.dateTimeEuroShortAM_PM:case ie.dateUs:case ie.dateUsShort:case ie.dateTimeUs:case ie.dateTimeShortUs:case ie.dateTimeUsAmPm:case ie.dateTimeUsAM_PM:case ie.dateTimeUsShort:case ie.dateTimeUsShortAmPm:case ie.dateTimeUsShortAM_PM:case ie.dateUtc:return!0;default:return!1}}function Fr(a){let t;switch(a){case ie.dateTime:case ie.dateTimeIso:t="YYYY-MM-DD HH:mm:ss";break;case ie.dateTimeIsoAmPm:t="YYYY-MM-DD hh:mm:ss a";break;case ie.dateTimeIsoAM_PM:t="YYYY-MM-DD hh:mm:ss A";break;case ie.dateTimeShortIso:t="YYYY-MM-DD HH:mm";break;case ie.dateEuro:t="DD/MM/YYYY";break;case ie.dateEuroShort:t="D/M/YY";break;case ie.dateTimeEuro:t="DD/MM/YYYY HH:mm:ss";break;case ie.dateTimeShortEuro:t="DD/MM/YYYY HH:mm";break;case ie.dateTimeEuroAmPm:t="DD/MM/YYYY hh:mm:ss a";break;case ie.dateTimeEuroAM_PM:t="DD/MM/YYYY hh:mm:ss A";break;case ie.dateTimeEuroShort:t="D/M/YY H:m:s";break;case ie.dateTimeEuroShortAmPm:t="D/M/YY h:m:s a";break;case ie.dateTimeEuroShortAM_PM:t="D/M/YY h:m:s A";break;case ie.dateUs:t="MM/DD/YYYY";break;case ie.dateUsShort:t="M/D/YY";break;case ie.dateTimeUs:t="MM/DD/YYYY HH:mm:ss";break;case ie.dateTimeUsAmPm:t="MM/DD/YYYY hh:mm:ss a";break;case ie.dateTimeUsAM_PM:t="MM/DD/YYYY hh:mm:ss A";break;case ie.dateTimeUsShort:t="M/D/YY H:m:s";break;case ie.dateTimeUsShortAmPm:t="M/D/YY h:m:s a";break;case ie.dateTimeUsShortAM_PM:t="M/D/YY h:m:s A";break;case ie.dateTimeShortUs:t="MM/DD/YYYY HH:mm";break;case ie.dateUtc:t="YYYY-MM-DDTHH:mm:ss.SSSZ";break;case ie.date:case ie.dateIso:default:t="YYYY-MM-DD";break}return t}function Ua(a){let t;switch(a){case ie.dateTime:case ie.dateTimeIso:t="Y-m-d H:i:S";break;case ie.dateTimeShortIso:t="Y-m-d H:i";break;case ie.dateTimeIsoAmPm:case ie.dateTimeIsoAM_PM:t="Y-m-d h:i:S K";break;case ie.dateEuro:t="d/m/Y";break;case ie.dateEuroShort:t="d/m/y";break;case ie.dateTimeEuro:t="d/m/Y H:i:S";break;case ie.dateTimeShortEuro:t="d/m/y H:i";break;case ie.dateTimeEuroAmPm:t="d/m/Y h:i:S K";break;case ie.dateTimeEuroAM_PM:t="d/m/Y h:i:s K";break;case ie.dateTimeEuroShort:t="d/m/y H:i:s";break;case ie.dateTimeEuroShortAmPm:t="d/m/y h:i:s K";break;case ie.dateUs:t="m/d/Y";break;case ie.dateUsShort:t="m/d/y";break;case ie.dateTimeUs:t="m/d/Y H:i:S";break;case ie.dateTimeShortUs:t="m/d/y H:i";break;case ie.dateTimeUsAmPm:t="m/d/Y h:i:S K";break;case ie.dateTimeUsAM_PM:t="m/d/Y h:i:s K";break;case ie.dateTimeUsShort:t="m/d/y H:i:s";break;case ie.dateTimeUsShortAmPm:t="m/d/y h:i:s K";break;case ie.dateUtc:t="Z";break;case ie.date:case ie.dateIso:default:t="Y-m-d";break}return t}function Zg(a){let t;switch(a){case"<":case"LT":t=Lt.lessThan;break;case"<=":case"LE":t=Lt.lessThanOrEqual;break;case">":case"GT":t=Lt.greaterThan;break;case">=":case"GE":t=Lt.greaterThanOrEqual;break;case"<>":case"!=":case"NE":t=Lt.notEqual;break;case"*":case"a*":case"StartsWith":t=Lt.startsWith;break;case"*z":case"EndsWith":t=Lt.endsWith;break;case"=":case"==":case"EQ":t=Lt.equal;break;case"IN":t=Lt.in;break;case"NIN":case"NOT_IN":t=Lt.notIn;break;case"Not_Contains":case"NOT_CONTAINS":t=Lt.notContains;break;case"Contains":case"CONTAINS":default:t=Lt.contains;break}return t}function Zl(a){let t="";switch(a){case Lt.greaterThan:case">":t=">";break;case Lt.greaterThanOrEqual:case">=":t=">=";break;case Lt.lessThan:case"<":t="<";break;case Lt.lessThanOrEqual:case"<=":t="<=";break;case Lt.notEqual:case"<>":t="<>";break;case Lt.equal:case"=":case"==":case"EQ":t="=";break;case Lt.startsWith:case"a*":case"*":t="a*";break;case Lt.endsWith:case"*z":t="*z";break;default:t=a;break}return t}function rh(a){let t;if(nh(a))t=Lt.equal;else switch(a){case ie.unknown:case ie.string:case ie.text:case ie.password:case ie.readonly:t=Lt.contains;break;case ie.float:case ie.number:default:t=Lt.equal;break}return t}function kp(a,t){return Object.keys(a).reduce((e,n)=>(n!==t&&(e[n]=a[n]),e),{})}function Qg(a,t){let e="";if(typeof a=="string"&&/^[0-9\-\/]*$/.test(a)){const n=decodeURIComponent(a),r=Kg(new Date(n));r.isValid()&&r.year().toString().length===4&&(e=t?r.utc().format():r.format())}return e}function gs(a,t=","){if(a!=null){const e=`${a}`,n=e.split(".");return n.length===2?`${n[0].replace(/\B(?=(\d{3})+(?!\d))/g,t)}.${n[1]}`:e.replace(/\B(?=(\d{3})+(?!\d))/g,t)}return a}function _s(a,t,e={}){return Array.isArray(a)?a.find(t)||e:a}function Wd(a){if(Array.isArray(a))for(;a.length>0;){const t=a.pop();t!=null&&t.unsubscribe&&t.unsubscribe()}return a}const Jg=Object.freeze(Object.defineProperty({__proto__:null,CancelledException:La,addTreeLevelAndAggregatorsByMutation:Ha,addTreeLevelByMutation:Gd,cancellablePromise:xp,castObservableToPromise:Tp,decimalFormatted:Ys,findItemInTreeStructure:Ba,findOrDefault:_s,flattenToParentChildArray:Op,formatNumber:wn,getCellValueFromQueryFieldGetter:Va,getColumnFieldType:za,getDescendantProperty:bn,getTranslationPrefix:ao,isColumnDateType:nh,mapFlatpickrDateFormatWithFieldType:Ua,mapMomentDateFormatWithFieldType:Fr,mapOperatorByFieldType:rh,mapOperatorToShorthandDesignation:Zl,mapOperatorType:Zg,objectWithoutKey:kp,parseUtcDate:Qg,thousandSeparatorFormatted:gs,unflattenParentChildArrayToTree:Ap,unsubscribeAll:Wd},Symbol.toStringTag,{value:"Module"})),e_=(a,t,e)=>{e==null&&(e=Xi.neutral);let n=0;return a===t?n=0:a===null?n=-1:t===null?n=1:e?n=a<t?-1:1:n=a<t?1:-1,e*n},t_=(a,t,e,n,r)=>{var o,s;if(!n||!n.dataKey)throw new Error('Sorting a "FieldType.object" requires you to provide the "dataKey" (object property name) of the object so that we can use it to sort correctly');const l=a!=null&&a.hasOwnProperty(n.dataKey)?a[n.dataKey]:a,u=t!=null&&t.hasOwnProperty(n.dataKey)?t[n.dataKey]:t,h=(s=(o=n==null?void 0:n.valueCouldBeUndefined)!==null&&o!==void 0?o:r==null?void 0:r.cellValueCouldBeUndefined)!==null&&s!==void 0?s:!1;e==null&&(e=Xi.neutral);let c=0;return typeof a!="object"?c=-99e10:typeof t!="object"?c=99e10:l===null||h&&l===void 0?c=-1:u===null||h&&u===void 0?c=1:l===u?c=0:e?c=l<u?-1:1:c=l<u?1:-1,e*c};function i_(a,t,e="id"){let n=-1;t&&typeof t=="object"&&e in t?n=a.findIndex(r=>r[e]===t[e]):n=a.findIndex(r=>r===t),n<0&&a.push(t)}function Ga(a,t=" "){let e="";for(let n=0;n<a;n++)e+=t;return e}function oh(a,t){return a.filter((e,n)=>t!==n)}function uo(a){const t=()=>{const r={};for(const o in a)Object.prototype.hasOwnProperty.call(a,o)&&(r[o]=uo(a[o]));return r},e=()=>a.map(r=>uo(r)),n=Object.prototype.toString.call(a).slice(8,-1).toLowerCase();return n==="object"?t():n==="array"?e():a}function Cl(a,...t){if(!t.length)return a;const e=t.shift();if(a=!qo(a)&&qo(e)?{}:a,qo(a)&&qo(e))for(const n in e)e.hasOwnProperty(n)&&(n in a?typeof a[n]!="object"||typeof e[n]!="object"?a[n]=e[n]:a[n].concat&&e[n].concat?a[n]=a[n].concat(e[n]):a[n]=Cl(a[n],e[n]):a[n]=e[n]);return Cl(a,...t)}function sh(a,...t){if(!t.length||t[0]===void 0)return a;const e=t.shift();if(a=!qo(a)&&qo(e)?{}:a,qo(a)&&qo(e))for(const n of Object.keys(e))typeof e[n]=="object"&&e[n]!==null&&sh(a[n],e[n]),(a[n]===null||a[n]===void 0)&&e[n]!==null&&e[n]!==void 0&&(a[n]=e[n]);return sh(a,...t)}function Ip(a){for(const t in a)a.hasOwnProperty(t)&&delete a[t];return a=null,a={},a}function lh(a){return a==null?!0:Object.entries(a).length===0}function qo(a){return a!==null&&typeof a=="object"&&!Array.isArray(a)&&!(a instanceof Date)}function $d(a){return a==null||typeof a=="boolean"||typeof a=="number"||typeof a=="string"}function Yd(a){return a!=null&&a!==""}function tn(a,t=!1){return t?a==null||typeof a=="string"?!1:!isNaN(a):a==null||a===""?!1:!isNaN(+a)}function Dp(a){return!a||a&&typeof a=="object"&&Object.keys(a).length===0}function jd(a){return/(true|1)/i.test(a+"")}function Ql(a,t=!1){const e=typeof a.normalize=="function"?a.normalize("NFD").replace(/[\u0300-\u036f]/g,""):a;return t?e.toLowerCase():e}function hr(a,t,e){if(typeof t=="string"&&(t=t.split(".")),t.length>1){const n=t.shift();a&&n!==void 0&&hr(a[n]=Yd(a[n])&&(Array.isArray(a[n])||Object.prototype.toString.call(a[n])==="[object Object]")?a[n]:{},t,e)}else a&&t[0]&&(a[t[0]]=e)}function yl(a,t=!1){return typeof a=="string"?t?a.replace(/\w\S*/g,e=>e.charAt(0).toUpperCase()+e.substring(1).toLowerCase()):a.charAt(0).toUpperCase()+a.slice(1):a}function ah(a){return typeof a=="string"?a.replace(/(?:^\w|[A-Z]|\b\w|[\s+\-_\/])/g,(t,e)=>/[\s+\-_\/]/.test(t)?"":e===0?t.toLowerCase():t.toUpperCase()):a}function Wa(a){return typeof a=="string"?ah(a).replace(/([A-Z])/g,"-$1").toLowerCase():a}function jr(a){if(typeof a=="string"){const t=a.replace(/([A-Z])|(\-)/g," $1").replace(/\s+/g," ").trim();return t.charAt(0).toUpperCase()+t.slice(1)}return a}function n_(a){return typeof a=="string"?ah(a).replace(/([A-Z])/g,"_$1").toLowerCase():a}function Rp(a){return Array.isArray(a)&&a.length>0?a.filter((t,e)=>a.indexOf(t)>=e):a}function r_(a,t="id"){if(Array.isArray(a)&&a.length>0){const e=[],n=new Map;for(const r of a)r&&!n.has(r[t])&&(n.set(r[t],!0),e.push({id:r[t],name:r.name}));return e}return a}const o_=Object.freeze(Object.defineProperty({__proto__:null,addToArrayWhenNotExists:i_,addWhiteSpaces:Ga,arrayRemoveItemByIndex:oh,deepCopy:uo,deepMerge:Cl,emptyObject:Ip,hasData:Yd,isEmptyObject:lh,isNumber:tn,isObject:qo,isObjectEmpty:Dp,isPrimitiveValue:$d,objectAssignAndExtend:sh,parseBoolean:jd,removeAccentFromText:Ql,setDeepValue:hr,titleCase:yl,toCamelCase:ah,toKebabCase:Wa,toSentenceCase:jr,toSnakeCase:n_,uniqueArray:Rp,uniqueObjectArray:r_},Symbol.toStringTag,{value:"Module"})),s_=(a,t,e,n,r)=>{var o,s;e==null&&(e=Xi.neutral);let l=0;const u=(s=(o=n==null?void 0:n.valueCouldBeUndefined)!==null&&o!==void 0?o:r==null?void 0:r.cellValueCouldBeUndefined)!==null&&s!==void 0?s:!1;return a===t?l=0:a===null||u&&a===void 0?l=-1:t===null||u&&t===void 0?l=1:(r!=null&&r.ignoreAccentOnStringFilterAndSort&&(a=Ql(a,!1),t=Ql(t,!1)),e?l=a<t?-1:1:l=a<t?1:-1),e*l},Pp=(a,t,e,n,r)=>{var o,s;const l=(s=(o=n==null?void 0:n.valueCouldBeUndefined)!==null&&o!==void 0?o:r==null?void 0:r.cellValueCouldBeUndefined)!==null&&s!==void 0?s:!1,u=isNaN(a)||a===""||a===null||l&&a===void 0?-99e10:parseFloat(a),h=isNaN(t)||t===""||t===null||l&&t===void 0?-99e10:parseFloat(t);return e*(u===h?0:u>h?1:-1)},Xd=$s||ps;function Fp(a,t,e,n,r){let o=0;if(a===t)o=0;else{let s=Xd(a,n,r),l=Xd(t,n,r);s.isValid()||(s=new Date(1001,1,1)),l.isValid()||(l=new Date(1001,1,1)),o=s.valueOf()-l.valueOf()}return e*o}function qi(a){const t=a===ie.date?Xd.ISO_8601:Fr(a);return(e,n,r)=>t===Xd.ISO_8601?Fp(e,n,r,t,!1):Fp(e,n,r,t,!0)}const El={boolean:e_,date:qi(ie.date),dateIso:qi(ie.dateIso),dateUtc:qi(ie.dateUtc),dateTime:qi(ie.dateTime),dateTimeIso:qi(ie.dateTimeIso),dateTimeIsoAmPm:qi(ie.dateTimeIsoAmPm),dateTimeIsoAM_PM:qi(ie.dateTimeIsoAM_PM),dateTimeShortIso:qi(ie.dateTimeShortIso),dateEuro:qi(ie.dateEuro),dateEuroShort:qi(ie.dateEuroShort),dateTimeShortEuro:qi(ie.dateTimeShortEuro),dateTimeEuro:qi(ie.dateTimeEuro),dateTimeEuroAmPm:qi(ie.dateTimeEuroAmPm),dateTimeEuroAM_PM:qi(ie.dateTimeEuroAM_PM),dateTimeEuroShort:qi(ie.dateTimeEuroShort),dateTimeEuroShortAmPm:qi(ie.dateTimeEuroShortAmPm),dateTimeEuroShortAM_PM:qi(ie.dateTimeEuroShortAM_PM),dateUs:qi(ie.dateUs),dateUsShort:qi(ie.dateUsShort),dateTimeShortUs:qi(ie.dateTimeShortUs),dateTimeUs:qi(ie.dateTimeUs),dateTimeUsAmPm:qi(ie.dateTimeUsAmPm),dateTimeUsAM_PM:qi(ie.dateTimeUsAM_PM),dateTimeUsShort:qi(ie.dateTimeUsShort),dateTimeUsShortAmPm:qi(ie.dateTimeUsShortAmPm),dateTimeUsShortAM_PM:qi(ie.dateTimeUsShortAM_PM),numeric:Pp,objectString:t_,string:s_};function Jl(a,t,e,n,r,o){let s=0;switch(a){case ie.boolean:s=El.boolean(t,e,n,r,o);break;case ie.float:case ie.integer:case ie.number:s=El.numeric(t,e,n,r,o);break;case ie.date:case ie.dateIso:case ie.dateUtc:case ie.dateTime:case ie.dateTimeIso:case ie.dateTimeIsoAmPm:case ie.dateTimeIsoAM_PM:case ie.dateTimeShortIso:case ie.dateEuro:case ie.dateEuroShort:case ie.dateTimeShortEuro:case ie.dateTimeEuro:case ie.dateTimeEuroAmPm:case ie.dateTimeEuroAM_PM:case ie.dateTimeEuroShort:case ie.dateTimeEuroShortAmPm:case ie.dateTimeEuroShortAM_PM:case ie.dateUs:case ie.dateUsShort:case ie.dateTimeShortUs:case ie.dateTimeUs:case ie.dateTimeUsAmPm:case ie.dateTimeUsAM_PM:case ie.dateTimeUsShort:case ie.dateTimeUsShortAmPm:case ie.dateTimeUsShortAM_PM:s=qi(a).call(this,t,e,n,r,o);break;case ie.object:s=El.objectString(t,e,n,r,o);break;case ie.string:case ie.text:case ie.password:case ie.readonly:default:s=El.string(t,e,n,r,o);break}return s}const l_=Object.freeze(Object.defineProperty({__proto__:null,sortByFieldType:Jl},Symbol.toStringTag,{value:"Module"}));var Do;(function(a){a.camelCase="camelCase",a.kebabCase="kebabCase",a.lowerCase="lowerCase",a.lowerCaseWithoutOnPrefix="lowerCaseWithoutOnPrefix"})(Do||(Do={}));class Mp{get elementSource(){return this._elementSource}set elementSource(t){this._elementSource=t}get subscribedEvents(){return this._subscribedEvents}get subscribedEventNames(){return this._subscribedEvents.map(t=>t.name)}constructor(t){this._subscribedEvents=[],this.eventNamingStyle=Do.camelCase,this._elementSource=t||document.createElement("div")}dispose(){var t;this.unsubscribeAll(),this._subscribedEvents=[],clearTimeout(this._timer),(t=this._elementSource)===null||t===void 0||t.remove(),this._elementSource=null}dispatchCustomEvent(t,e,n=!0,r=!0){var o;const s={bubbles:n,cancelable:r};return e&&(s.detail=e),(o=this._elementSource)===null||o===void 0?void 0:o.dispatchEvent(new CustomEvent(t,s))}getEventNameByNamingConvention(t,e){let n="";switch(this.eventNamingStyle){case Do.camelCase:n=e!==""?`${e}${yl(t)}`:t;break;case Do.kebabCase:n=e!==""?`${e}-${Wa(t)}`:Wa(t);break;case Do.lowerCase:n=`${e}${t}`.toLowerCase();break;case Do.lowerCaseWithoutOnPrefix:n=`${e}${t.replace(/^on/,"")}`.toLowerCase();break}return n}publish(t,e,n){const r=this.getEventNameByNamingConvention(t,"");return n?new Promise(o=>{this._timer=setTimeout(()=>o(this.dispatchCustomEvent(r,e,!0,!0)),n)}):this.dispatchCustomEvent(r,e,!0,!0)}subscribe(t,e){const n=this.getEventNameByNamingConvention(t,"");return this._elementSource.addEventListener(n,r=>e.call(null,r.detail)),this._subscribedEvents.push({name:n,listener:e}),{unsubscribe:()=>this.unsubscribe(n,e)}}subscribeEvent(t,e){const n=this.getEventNameByNamingConvention(t,"");return this._elementSource.addEventListener(n,e),this._subscribedEvents.push({name:n,listener:e}),{unsubscribe:()=>this.unsubscribe(n,e)}}unsubscribe(t,e,n=!0){const r=this.getEventNameByNamingConvention(t,"");this._elementSource.removeEventListener(r,e),n&&this.removeSubscribedEventWhenFound(t,e)}unsubscribeAll(t){if(Array.isArray(t)){let e;do e=t.pop(),e!=null&&e.dispose?e.dispose():e!=null&&e.unsubscribe&&e.unsubscribe();while(e)}else{let e=this._subscribedEvents.pop();for(;e;)this.unsubscribe(e.name,e.listener,!1),e=this._subscribedEvents.pop()}}removeSubscribedEventWhenFound(t,e){const n=this._subscribedEvents.findIndex(r=>r.name===t&&r.listener===e);n>=0&&this._subscribedEvents.splice(n,1)}}var Np={exports:{}};(function(a,t){(function(e,n){a.exports=n()})(Pr,function(){function e(n){var r=document,o=n.container||r.createElement("div"),s=n.preventSubmit||0;o.id=o.id||"autocomplete-"+P();var l=o.style,u=n.debounceWaitMs||0,h=n.disableAutoSelect||!1,c=o.parentElement,p=[],m="",v=2,_=n.showOnFocus,C,x=0,S,y=!1,D=!1;if(n.minLength!==void 0&&(v=n.minLength),!n.input)throw new Error("input undefined");var A=n.input;o.className="autocomplete "+(n.className||""),o.setAttribute("role","listbox"),A.setAttribute("role","combobox"),A.setAttribute("aria-expanded","false"),A.setAttribute("aria-autocomplete","list"),A.setAttribute("aria-controls",o.id),A.setAttribute("aria-owns",o.id),A.setAttribute("aria-activedescendant",""),A.setAttribute("aria-haspopup","listbox"),l.position="absolute";function P(){return Date.now().toString(36)+Math.random().toString(36).substring(2)}function M(){var k=o.parentNode;k&&k.removeChild(o)}function B(){S&&window.clearTimeout(S)}function Q(){o.parentNode||(c||r.body).appendChild(o)}function L(){return!!o.parentNode}function le(){x++,p=[],m="",C=void 0,A.setAttribute("aria-activedescendant",""),A.setAttribute("aria-expanded","false"),M()}function _e(){if(!L())return;A.setAttribute("aria-expanded","true"),l.height="auto",l.width=A.offsetWidth+"px";var k=0,te;function ge(){var $=r.documentElement,X=$.clientTop||r.body.clientTop||0,re=$.clientLeft||r.body.clientLeft||0,Fe=window.pageYOffset||$.scrollTop,Me=window.pageXOffset||$.scrollLeft;te=A.getBoundingClientRect();var pe=te.top+A.offsetHeight+Fe-X,Ue=te.left+Me-re;l.top=pe+"px",l.left=Ue+"px",k=window.innerHeight-(te.top+A.offsetHeight),k<0&&(k=0),l.top=pe+"px",l.bottom="",l.left=Ue+"px",l.maxHeight=k+"px"}ge(),ge(),n.customize&&te&&n.customize(A,te,o,k)}function J(){o.innerHTML="",A.setAttribute("aria-activedescendant","");var k=function(re,Fe,Me){var pe=r.createElement("div");return pe.textContent=re.label||"",pe};n.render&&(k=n.render);var te=function(re,Fe){var Me=r.createElement("div");return Me.textContent=re,Me};n.renderGroup&&(te=n.renderGroup);var ge=r.createDocumentFragment(),$=P();if(p.forEach(function(re,Fe){if(re.group&&re.group!==$){$=re.group;var Me=te(re.group,m);Me&&(Me.className+=" group",ge.appendChild(Me))}var pe=k(re,m,Fe);pe&&(pe.id=o.id+"_"+Fe,pe.setAttribute("role","option"),pe.addEventListener("click",function(Ue){D=!0;try{n.onSelect(re,A)}finally{D=!1}le(),Ue.preventDefault(),Ue.stopPropagation()}),re===C&&(pe.className+=" selected",pe.setAttribute("aria-selected","true"),A.setAttribute("aria-activedescendant",pe.id)),ge.appendChild(pe))}),o.appendChild(ge),p.length<1)if(n.emptyMsg){var X=r.createElement("div");X.id=o.id+"_"+P(),X.className="empty",X.textContent=n.emptyMsg,o.appendChild(X),A.setAttribute("aria-activedescendant",X.id)}else{le();return}Q(),_e(),De()}function z(){L()&&J()}function F(){z()}function ae(k){k.target!==o?z():k.preventDefault()}function qe(){D||Ce(0)}function De(){var k=o.getElementsByClassName("selected");if(k.length>0){var te=k[0],ge=te.previousElementSibling;if(ge&&ge.className.indexOf("group")!==-1&&!ge.previousElementSibling&&(te=ge),te.offsetTop<o.scrollTop)o.scrollTop=te.offsetTop;else{var $=te.offsetTop+te.offsetHeight,X=o.scrollTop+o.offsetHeight;$>X&&(o.scrollTop+=$-X)}}}function xe(){var k=p.indexOf(C);C=k===-1?void 0:p[(k+p.length-1)%p.length],Re(k)}function Te(){var k=p.indexOf(C);C=p.length<1?void 0:k===-1?p[0]:p[(k+1)%p.length],Re(k)}function Re(k){p.length>0&&(fe(k),ne(p.indexOf(C)),De())}function ne(k){var te=r.getElementById(o.id+"_"+k);te&&(te.classList.add("selected"),te.setAttribute("aria-selected","true"),A.setAttribute("aria-activedescendant",te.id))}function fe(k){var te=r.getElementById(o.id+"_"+k);te&&(te.classList.remove("selected"),te.removeAttribute("aria-selected"),A.removeAttribute("aria-activedescendant"))}function Be(k,te){var ge=L();if(te==="Escape")le();else{if(!ge||p.length<1)return;te==="ArrowUp"?xe():Te()}k.preventDefault(),ge&&k.stopPropagation()}function Ye(k){if(C){s===2&&k.preventDefault(),D=!0;try{n.onSelect(C,A)}finally{D=!1}le()}s===1&&k.preventDefault()}function Ve(k){var te=k.key;switch(te){case"ArrowUp":case"ArrowDown":case"Escape":Be(k,te);break;case"Enter":Ye(k);break}}function ue(){_&&Ce(1)}function Ce(k){A.value.length>=v||k===1?(B(),S=window.setTimeout(function(){return be(A.value,k,A.selectionStart||0)},k===0||k===2?u:0)):le()}function be(k,te,ge){if(!y){var $=++x;n.fetch(k,function(X){x===$&&X&&(p=X,m=k,C=p.length<1||h?void 0:p[0],J())},te,ge)}}function Le(k){if(n.keyup){n.keyup({event:k,fetch:function(){return Ce(0)}});return}!L()&&k.key==="ArrowDown"&&Ce(0)}function nt(k){n.click&&n.click({event:k,fetch:function(){return Ce(2)}})}function Ge(){setTimeout(function(){r.activeElement!==A&&le()},200)}function yt(){be(A.value,3,A.selectionStart||0)}o.addEventListener("mousedown",function(k){k.stopPropagation(),k.preventDefault()}),o.addEventListener("focus",function(){return A.focus()}),M();function at(){A.removeEventListener("focus",ue),A.removeEventListener("keyup",Le),A.removeEventListener("click",nt),A.removeEventListener("keydown",Ve),A.removeEventListener("input",qe),A.removeEventListener("blur",Ge),window.removeEventListener("resize",F),r.removeEventListener("scroll",ae,!0),A.removeAttribute("role"),A.removeAttribute("aria-expanded"),A.removeAttribute("aria-autocomplete"),A.removeAttribute("aria-controls"),A.removeAttribute("aria-activedescendant"),A.removeAttribute("aria-owns"),A.removeAttribute("aria-haspopup"),B(),le(),y=!0}return A.addEventListener("keyup",Le),A.addEventListener("click",nt),A.addEventListener("keydown",Ve),A.addEventListener("input",qe),A.addEventListener("blur",Ge),A.addEventListener("focus",ue),window.addEventListener("resize",F),r.addEventListener("scroll",ae,!0),{destroy:at,fetch:yt}}return e})})(Np);var Lp=Np.exports;const dh=eh(Lp),qd=bl({__proto__:null,default:dh},[Lp]);function Hp(a,t){const e=t.fetch;e&&(t.fetch=(n,r,o,s)=>{a.classList.add("slick-autocomplete-loading");const l=r;e(n,h=>{l(h),a.classList.remove("slick-autocomplete-loading")},o,s)})}class Fn{constructor(){this._boundedEvents=[]}get boundedEvents(){return this._boundedEvents}dispose(){this.unbindAll(),this._boundedEvents=[]}bind(t,e,n,r,o=""){const s=Array.isArray(e)?e:[e];if(t!=null&&t.forEach)t.forEach(l=>{for(const u of s)l.addEventListener(u,n,r),this._boundedEvents.push({element:l,eventName:u,listener:n,groupName:o})});else for(const l of s)t.addEventListener(l,n,r),this._boundedEvents.push({element:t,eventName:l,listener:n,groupName:o})}unbind(t,e,n){const r=Array.isArray(t)?t:[t],o=Array.isArray(e)?e:[e];for(const s of o)for(const l of r)typeof(l==null?void 0:l.removeEventListener)=="function"&&l.removeEventListener(s,n)}unbindAll(t){if(t){const e=Array.isArray(t)?t:[t];for(let n=this._boundedEvents.length-1;n>=0;--n){const r=this._boundedEvents[n];if(e.some(o=>o===r.groupName)){const{element:o,eventName:s,listener:l}=r;this.unbind(o,s,l),this._boundedEvents.splice(n,1)}}}else for(;this._boundedEvents.length>0;){const e=this._boundedEvents.pop(),{element:n,eventName:r,listener:o}=e;this.unbind(n,r,o)}}}class Bp{constructor(t){this.translaterService=t}filterCollection(t,e,n=Kl.chain){let r=[];if(Array.isArray(e)){r=n===Kl.merge?[]:[...t];for(const o of e)if(n===Kl.merge){const s=this.singleFilterCollection(t,o);r=Rp([...r,...s])}else r=this.singleFilterCollection(r,o)}else r=this.singleFilterCollection(t,e);return r}singleFilterCollection(t,e){let n=[];if(e){const r=e.property,o=e.operator||Lt.equal,s=typeof e.value>"u"?"":e.value;switch(o){case Lt.equal:r?n=t.filter(l=>l[r]===s):n=t.filter(l=>l===s);break;case Lt.contains:r?n=t.filter(l=>{var u;return((u=l[r])===null||u===void 0?void 0:u.toString().indexOf(s.toString()))!==-1}):n=t.filter(l=>l!=null&&l.toString().indexOf(s.toString())!==-1);break;case Lt.notContains:r?n=t.filter(l=>{var u;return((u=l[r])===null||u===void 0?void 0:u.toString().indexOf(s.toString()))===-1}):n=t.filter(l=>l!=null&&l.toString().indexOf(s.toString())===-1);break;case Lt.notEqual:default:r?n=t.filter(l=>l[r]!==s):n=t.filter(l=>l!==s)}}return n}sortCollection(t,e,n,r){var o,s,l,u;if(r&&(!this.translaterService||!this.translaterService.translate))throw new Error('[Slickgrid-Universal] requires a Translate Service to be installed and configured when the grid option "enableTranslate" is enabled.');let h=[];if(n){if(Array.isArray(n))h=e.sort((c,p)=>{var m,v,_,C;for(let x=0,S=n.length;x<S;x++){const y=n[x];if(y!=null&&y.property){const D=y.sortDesc?Xi.desc:Xi.asc,A=y.property,P=(v=(m=y==null?void 0:y.fieldType)!==null&&m!==void 0?m:t==null?void 0:t.type)!==null&&v!==void 0?v:ie.string,M=r?((_=this.translaterService)===null||_===void 0?void 0:_.translate)&&this.translaterService.translate(c[A]||" "):c[A],B=r?((C=this.translaterService)===null||C===void 0?void 0:C.translate)&&this.translaterService.translate(p[A]||" "):p[A],Q=Jl(P,M,B,D,t);if(Q!==Xi.neutral)return Q}}return Xi.neutral});else if(n!=null&&n.property){const c=n.property,p=n.sortDesc?Xi.desc:Xi.asc,m=(s=(o=n==null?void 0:n.fieldType)!==null&&o!==void 0?o:t==null?void 0:t.type)!==null&&s!==void 0?s:ie.string;h=e.sort((v,_)=>{var C,x;const S=r?((C=this.translaterService)===null||C===void 0?void 0:C.translate)&&this.translaterService.translate(v[c]||" "):v[c],y=r?((x=this.translaterService)===null||x===void 0?void 0:x.translate)&&this.translaterService.translate(_[c]||" "):_[c],D=Jl(m,S,y,p,t);return D!==Xi.neutral?D:Xi.neutral})}else if(n&&!n.property){const c=n.sortDesc?Xi.desc:Xi.asc,p=(u=(l=n==null?void 0:n.fieldType)!==null&&l!==void 0?l:t==null?void 0:t.type)!==null&&u!==void 0?u:ie.string;h=e.sort((m,v)=>{var _,C;const x=r?((_=this.translaterService)===null||_===void 0?void 0:_.translate)&&this.translaterService.translate(m||" "):m,S=r?((C=this.translaterService)===null||C===void 0?void 0:C.translate)&&this.translaterService.translate(v||" "):v,y=Jl(p,x,S,c,t);return y!==Xi.neutral?y:Xi.neutral})}}return h}}/*! @license DOMPurify 3.0.6 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.0.6/LICENSE */const{entries:Vp,setPrototypeOf:zp,isFrozen:a_,getPrototypeOf:d_,getOwnPropertyDescriptor:Up}=Object;let{freeze:Sr,seal:Ro,create:Gp}=Object,{apply:uh,construct:ch}=typeof Reflect<"u"&&Reflect;Sr||(Sr=function(t){return t}),Ro||(Ro=function(t){return t}),uh||(uh=function(t,e,n){return t.apply(e,n)}),ch||(ch=function(t,e){return new t(...e)});const Kd=co(Array.prototype.forEach),Wp=co(Array.prototype.pop),$a=co(Array.prototype.push),Zd=co(String.prototype.toLowerCase),hh=co(String.prototype.toString),u_=co(String.prototype.match),Ya=co(String.prototype.replace),c_=co(String.prototype.indexOf),h_=co(String.prototype.trim),Xr=co(RegExp.prototype.test),ja=f_(TypeError);function co(a){return function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return uh(a,t,n)}}function f_(a){return function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return ch(a,e)}}function ui(a,t){let e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Zd;zp&&zp(a,null);let n=t.length;for(;n--;){let r=t[n];if(typeof r=="string"){const o=e(r);o!==r&&(a_(t)||(t[n]=o),r=o)}a[r]=!0}return a}function ea(a){const t=Gp(null);for(const[e,n]of Vp(a))Up(a,e)!==void 0&&(t[e]=n);return t}function Qd(a,t){for(;a!==null;){const n=Up(a,t);if(n){if(n.get)return co(n.get);if(typeof n.value=="function")return co(n.value)}a=d_(a)}function e(n){return console.warn("fallback value for",n),null}return e}const $p=Sr(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),fh=Sr(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),ph=Sr(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),p_=Sr(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),mh=Sr(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),m_=Sr(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),Yp=Sr(["#text"]),jp=Sr(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),vh=Sr(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),Xp=Sr(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),Jd=Sr(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),v_=Ro(/\{\{[\w\W]*|[\w\W]*\}\}/gm),g_=Ro(/<%[\w\W]*|[\w\W]*%>/gm),__=Ro(/\${[\w\W]*}/gm),b_=Ro(/^data-[\-\w.\u00B7-\uFFFF]/),C_=Ro(/^aria-[\-\w]+$/),qp=Ro(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),y_=Ro(/^(?:\w+script|data):/i),E_=Ro(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),Kp=Ro(/^html$/i);var Zp=Object.freeze({__proto__:null,MUSTACHE_EXPR:v_,ERB_EXPR:g_,TMPLIT_EXPR:__,DATA_ATTR:b_,ARIA_ATTR:C_,IS_ALLOWED_URI:qp,IS_SCRIPT_OR_DATA:y_,ATTR_WHITESPACE:E_,DOCTYPE_NAME:Kp});const S_=function(){return typeof window>"u"?null:window},w_=function(t,e){if(typeof t!="object"||typeof t.createPolicy!="function")return null;let n=null;const r="data-tt-policy-suffix";e&&e.hasAttribute(r)&&(n=e.getAttribute(r));const o="dompurify"+(n?"#"+n:"");try{return t.createPolicy(o,{createHTML(s){return s},createScriptURL(s){return s}})}catch{return console.warn("TrustedTypes policy "+o+" could not be created."),null}};function Qp(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:S_();const t=_t=>Qp(_t);if(t.version="3.0.6",t.removed=[],!a||!a.document||a.document.nodeType!==9)return t.isSupported=!1,t;let{document:e}=a;const n=e,r=n.currentScript,{DocumentFragment:o,HTMLTemplateElement:s,Node:l,Element:u,NodeFilter:h,NamedNodeMap:c=a.NamedNodeMap||a.MozNamedAttrMap,HTMLFormElement:p,DOMParser:m,trustedTypes:v}=a,_=u.prototype,C=Qd(_,"cloneNode"),x=Qd(_,"nextSibling"),S=Qd(_,"childNodes"),y=Qd(_,"parentNode");if(typeof s=="function"){const _t=e.createElement("template");_t.content&&_t.content.ownerDocument&&(e=_t.content.ownerDocument)}let D,A="";const{implementation:P,createNodeIterator:M,createDocumentFragment:B,getElementsByTagName:Q}=e,{importNode:L}=n;let le={};t.isSupported=typeof Vp=="function"&&typeof y=="function"&&P&&P.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:_e,ERB_EXPR:J,TMPLIT_EXPR:z,DATA_ATTR:F,ARIA_ATTR:ae,IS_SCRIPT_OR_DATA:qe,ATTR_WHITESPACE:De}=Zp;let{IS_ALLOWED_URI:xe}=Zp,Te=null;const Re=ui({},[...$p,...fh,...ph,...mh,...Yp]);let ne=null;const fe=ui({},[...jp,...vh,...Xp,...Jd]);let Be=Object.seal(Gp(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Ye=null,Ve=null,ue=!0,Ce=!0,be=!1,Le=!0,nt=!1,Ge=!1,yt=!1,at=!1,k=!1,te=!1,ge=!1,$=!0,X=!1;const re="user-content-";let Fe=!0,Me=!1,pe={},Ue=null;const ft=ui({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let ze=null;const Ne=ui({},["audio","video","img","source","image","track"]);let Xt=null;const It=ui({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Ci="http://www.w3.org/1998/Math/MathML",q="http://www.w3.org/2000/svg",W="http://www.w3.org/1999/xhtml";let me=W,ke=!1,st=null;const rt=ui({},[Ci,q,W],hh);let ut=null;const Rt=["application/xhtml+xml","text/html"],Ht="text/html";let Tt=null,Ut=null;const Zt=e.createElement("form"),Fi=function(Se){return Se instanceof RegExp||Se instanceof Function},Mi=function(){let Se=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(Ut&&Ut===Se)){if((!Se||typeof Se!="object")&&(Se={}),Se=ea(Se),ut=Rt.indexOf(Se.PARSER_MEDIA_TYPE)===-1?ut=Ht:ut=Se.PARSER_MEDIA_TYPE,Tt=ut==="application/xhtml+xml"?hh:Zd,Te="ALLOWED_TAGS"in Se?ui({},Se.ALLOWED_TAGS,Tt):Re,ne="ALLOWED_ATTR"in Se?ui({},Se.ALLOWED_ATTR,Tt):fe,st="ALLOWED_NAMESPACES"in Se?ui({},Se.ALLOWED_NAMESPACES,hh):rt,Xt="ADD_URI_SAFE_ATTR"in Se?ui(ea(It),Se.ADD_URI_SAFE_ATTR,Tt):It,ze="ADD_DATA_URI_TAGS"in Se?ui(ea(Ne),Se.ADD_DATA_URI_TAGS,Tt):Ne,Ue="FORBID_CONTENTS"in Se?ui({},Se.FORBID_CONTENTS,Tt):ft,Ye="FORBID_TAGS"in Se?ui({},Se.FORBID_TAGS,Tt):{},Ve="FORBID_ATTR"in Se?ui({},Se.FORBID_ATTR,Tt):{},pe="USE_PROFILES"in Se?Se.USE_PROFILES:!1,ue=Se.ALLOW_ARIA_ATTR!==!1,Ce=Se.ALLOW_DATA_ATTR!==!1,be=Se.ALLOW_UNKNOWN_PROTOCOLS||!1,Le=Se.ALLOW_SELF_CLOSE_IN_ATTR!==!1,nt=Se.SAFE_FOR_TEMPLATES||!1,Ge=Se.WHOLE_DOCUMENT||!1,k=Se.RETURN_DOM||!1,te=Se.RETURN_DOM_FRAGMENT||!1,ge=Se.RETURN_TRUSTED_TYPE||!1,at=Se.FORCE_BODY||!1,$=Se.SANITIZE_DOM!==!1,X=Se.SANITIZE_NAMED_PROPS||!1,Fe=Se.KEEP_CONTENT!==!1,Me=Se.IN_PLACE||!1,xe=Se.ALLOWED_URI_REGEXP||qp,me=Se.NAMESPACE||W,Be=Se.CUSTOM_ELEMENT_HANDLING||{},Se.CUSTOM_ELEMENT_HANDLING&&Fi(Se.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(Be.tagNameCheck=Se.CUSTOM_ELEMENT_HANDLING.tagNameCheck),Se.CUSTOM_ELEMENT_HANDLING&&Fi(Se.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(Be.attributeNameCheck=Se.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),Se.CUSTOM_ELEMENT_HANDLING&&typeof Se.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(Be.allowCustomizedBuiltInElements=Se.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),nt&&(Ce=!1),te&&(k=!0),pe&&(Te=ui({},[...Yp]),ne=[],pe.html===!0&&(ui(Te,$p),ui(ne,jp)),pe.svg===!0&&(ui(Te,fh),ui(ne,vh),ui(ne,Jd)),pe.svgFilters===!0&&(ui(Te,ph),ui(ne,vh),ui(ne,Jd)),pe.mathMl===!0&&(ui(Te,mh),ui(ne,Xp),ui(ne,Jd))),Se.ADD_TAGS&&(Te===Re&&(Te=ea(Te)),ui(Te,Se.ADD_TAGS,Tt)),Se.ADD_ATTR&&(ne===fe&&(ne=ea(ne)),ui(ne,Se.ADD_ATTR,Tt)),Se.ADD_URI_SAFE_ATTR&&ui(Xt,Se.ADD_URI_SAFE_ATTR,Tt),Se.FORBID_CONTENTS&&(Ue===ft&&(Ue=ea(Ue)),ui(Ue,Se.FORBID_CONTENTS,Tt)),Fe&&(Te["#text"]=!0),Ge&&ui(Te,["html","head","body"]),Te.table&&(ui(Te,["tbody"]),delete Ye.tbody),Se.TRUSTED_TYPES_POLICY){if(typeof Se.TRUSTED_TYPES_POLICY.createHTML!="function")throw ja('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof Se.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw ja('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');D=Se.TRUSTED_TYPES_POLICY,A=D.createHTML("")}else D===void 0&&(D=w_(v,r)),D!==null&&typeof A=="string"&&(A=D.createHTML(""));Sr&&Sr(Se),Ut=Se}},U=ui({},["mi","mo","mn","ms","mtext"]),Z=ui({},["foreignobject","desc","title","annotation-xml"]),ce=ui({},["title","style","font","a","script"]),Ee=ui({},fh);ui(Ee,ph),ui(Ee,p_);const ot=ui({},mh);ui(ot,m_);const pt=function(Se){let Xe=y(Se);(!Xe||!Xe.tagName)&&(Xe={namespaceURI:me,tagName:"template"});const wt=Zd(Se.tagName),ii=Zd(Xe.tagName);return st[Se.namespaceURI]?Se.namespaceURI===q?Xe.namespaceURI===W?wt==="svg":Xe.namespaceURI===Ci?wt==="svg"&&(ii==="annotation-xml"||U[ii]):!!Ee[wt]:Se.namespaceURI===Ci?Xe.namespaceURI===W?wt==="math":Xe.namespaceURI===q?wt==="math"&&Z[ii]:!!ot[wt]:Se.namespaceURI===W?Xe.namespaceURI===q&&!Z[ii]||Xe.namespaceURI===Ci&&!U[ii]?!1:!ot[wt]&&(ce[wt]||!Ee[wt]):!!(ut==="application/xhtml+xml"&&st[Se.namespaceURI]):!1},ct=function(Se){$a(t.removed,{element:Se});try{Se.parentNode.removeChild(Se)}catch{Se.remove()}},St=function(Se,Xe){try{$a(t.removed,{attribute:Xe.getAttributeNode(Se),from:Xe})}catch{$a(t.removed,{attribute:null,from:Xe})}if(Xe.removeAttribute(Se),Se==="is"&&!ne[Se])if(k||te)try{ct(Xe)}catch{}else try{Xe.setAttribute(Se,"")}catch{}},Bt=function(Se){let Xe=null,wt=null;if(at)Se="<remove></remove>"+Se;else{const Wi=u_(Se,/^[\r\n\t ]+/);wt=Wi&&Wi[0]}ut==="application/xhtml+xml"&&me===W&&(Se='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+Se+"</body></html>");const ii=D?D.createHTML(Se):Se;if(me===W)try{Xe=new m().parseFromString(ii,ut)}catch{}if(!Xe||!Xe.documentElement){Xe=P.createDocument(me,"template",null);try{Xe.documentElement.innerHTML=ke?A:ii}catch{}}const Gi=Xe.body||Xe.documentElement;return Se&&wt&&Gi.insertBefore(e.createTextNode(wt),Gi.childNodes[0]||null),me===W?Q.call(Xe,Ge?"html":"body")[0]:Ge?Xe.documentElement:Gi},Ct=function(Se){return M.call(Se.ownerDocument||Se,Se,h.SHOW_ELEMENT|h.SHOW_COMMENT|h.SHOW_TEXT,null)},vt=function(Se){return Se instanceof p&&(typeof Se.nodeName!="string"||typeof Se.textContent!="string"||typeof Se.removeChild!="function"||!(Se.attributes instanceof c)||typeof Se.removeAttribute!="function"||typeof Se.setAttribute!="function"||typeof Se.namespaceURI!="string"||typeof Se.insertBefore!="function"||typeof Se.hasChildNodes!="function")},ti=function(Se){return typeof l=="function"&&Se instanceof l},ki=function(Se,Xe,wt){le[Se]&&Kd(le[Se],ii=>{ii.call(t,Xe,wt,Ut)})},Ui=function(Se){let Xe=null;if(ki("beforeSanitizeElements",Se,null),vt(Se))return ct(Se),!0;const wt=Tt(Se.nodeName);if(ki("uponSanitizeElement",Se,{tagName:wt,allowedTags:Te}),Se.hasChildNodes()&&!ti(Se.firstElementChild)&&Xr(/<[/\w]/g,Se.innerHTML)&&Xr(/<[/\w]/g,Se.textContent))return ct(Se),!0;if(!Te[wt]||Ye[wt]){if(!Ye[wt]&&Ni(wt)&&(Be.tagNameCheck instanceof RegExp&&Xr(Be.tagNameCheck,wt)||Be.tagNameCheck instanceof Function&&Be.tagNameCheck(wt)))return!1;if(Fe&&!Ue[wt]){const ii=y(Se)||Se.parentNode,Gi=S(Se)||Se.childNodes;if(Gi&&ii){const Wi=Gi.length;for(let Li=Wi-1;Li>=0;--Li)ii.insertBefore(C(Gi[Li],!0),x(Se))}}return ct(Se),!0}return Se instanceof u&&!pt(Se)||(wt==="noscript"||wt==="noembed"||wt==="noframes")&&Xr(/<\/no(script|embed|frames)/i,Se.innerHTML)?(ct(Se),!0):(nt&&Se.nodeType===3&&(Xe=Se.textContent,Kd([_e,J,z],ii=>{Xe=Ya(Xe,ii," ")}),Se.textContent!==Xe&&($a(t.removed,{element:Se.cloneNode()}),Se.textContent=Xe)),ki("afterSanitizeElements",Se,null),!1)},Qt=function(Se,Xe,wt){if($&&(Xe==="id"||Xe==="name")&&(wt in e||wt in Zt))return!1;if(!(Ce&&!Ve[Xe]&&Xr(F,Xe))){if(!(ue&&Xr(ae,Xe))){if(!ne[Xe]||Ve[Xe]){if(!(Ni(Se)&&(Be.tagNameCheck instanceof RegExp&&Xr(Be.tagNameCheck,Se)||Be.tagNameCheck instanceof Function&&Be.tagNameCheck(Se))&&(Be.attributeNameCheck instanceof RegExp&&Xr(Be.attributeNameCheck,Xe)||Be.attributeNameCheck instanceof Function&&Be.attributeNameCheck(Xe))||Xe==="is"&&Be.allowCustomizedBuiltInElements&&(Be.tagNameCheck instanceof RegExp&&Xr(Be.tagNameCheck,wt)||Be.tagNameCheck instanceof Function&&Be.tagNameCheck(wt))))return!1}else if(!Xt[Xe]){if(!Xr(xe,Ya(wt,De,""))){if(!((Xe==="src"||Xe==="xlink:href"||Xe==="href")&&Se!=="script"&&c_(wt,"data:")===0&&ze[Se])){if(!(be&&!Xr(qe,Ya(wt,De,"")))){if(wt)return!1}}}}}}return!0},Ni=function(Se){return Se.indexOf("-")>0},Ln=function(Se){ki("beforeSanitizeAttributes",Se,null);const{attributes:Xe}=Se;if(!Xe)return;const wt={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:ne};let ii=Xe.length;for(;ii--;){const Gi=Xe[ii],{name:Wi,namespaceURI:Li,value:vn}=Gi,Gn=Tt(Wi);let qt=Wi==="value"?vn:h_(vn);if(wt.attrName=Gn,wt.attrValue=qt,wt.keepAttr=!0,wt.forceKeepAttr=void 0,ki("uponSanitizeAttribute",Se,wt),qt=wt.attrValue,wt.forceKeepAttr||(St(Wi,Se),!wt.keepAttr))continue;if(!Le&&Xr(/\/>/i,qt)){St(Wi,Se);continue}nt&&Kd([_e,J,z],ar=>{qt=Ya(qt,ar," ")});const $i=Tt(Se.nodeName);if(Qt($i,Gn,qt)){if(X&&(Gn==="id"||Gn==="name")&&(St(Wi,Se),qt=re+qt),D&&typeof v=="object"&&typeof v.getAttributeType=="function"&&!Li)switch(v.getAttributeType($i,Gn)){case"TrustedHTML":{qt=D.createHTML(qt);break}case"TrustedScriptURL":{qt=D.createScriptURL(qt);break}}try{Li?Se.setAttributeNS(Li,Wi,qt):Se.setAttribute(Wi,qt),Wp(t.removed)}catch{}}}ki("afterSanitizeAttributes",Se,null)},mn=function _t(Se){let Xe=null;const wt=Ct(Se);for(ki("beforeSanitizeShadowDOM",Se,null);Xe=wt.nextNode();)ki("uponSanitizeShadowNode",Xe,null),!Ui(Xe)&&(Xe.content instanceof o&&_t(Xe.content),Ln(Xe));ki("afterSanitizeShadowDOM",Se,null)};return t.sanitize=function(_t){let Se=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Xe=null,wt=null,ii=null,Gi=null;if(ke=!_t,ke&&(_t="<!-->"),typeof _t!="string"&&!ti(_t))if(typeof _t.toString=="function"){if(_t=_t.toString(),typeof _t!="string")throw ja("dirty is not a string, aborting")}else throw ja("toString is not a function");if(!t.isSupported)return _t;if(yt||Mi(Se),t.removed=[],typeof _t=="string"&&(Me=!1),Me){if(_t.nodeName){const vn=Tt(_t.nodeName);if(!Te[vn]||Ye[vn])throw ja("root node is forbidden and cannot be sanitized in-place")}}else if(_t instanceof l)Xe=Bt("<!---->"),wt=Xe.ownerDocument.importNode(_t,!0),wt.nodeType===1&&wt.nodeName==="BODY"||wt.nodeName==="HTML"?Xe=wt:Xe.appendChild(wt);else{if(!k&&!nt&&!Ge&&_t.indexOf("<")===-1)return D&&ge?D.createHTML(_t):_t;if(Xe=Bt(_t),!Xe)return k?null:ge?A:""}Xe&&at&&ct(Xe.firstChild);const Wi=Ct(Me?_t:Xe);for(;ii=Wi.nextNode();)Ui(ii)||(ii.content instanceof o&&mn(ii.content),Ln(ii));if(Me)return _t;if(k){if(te)for(Gi=B.call(Xe.ownerDocument);Xe.firstChild;)Gi.appendChild(Xe.firstChild);else Gi=Xe;return(ne.shadowroot||ne.shadowrootmode)&&(Gi=L.call(n,Gi,!0)),Gi}let Li=Ge?Xe.outerHTML:Xe.innerHTML;return Ge&&Te["!doctype"]&&Xe.ownerDocument&&Xe.ownerDocument.doctype&&Xe.ownerDocument.doctype.name&&Xr(Kp,Xe.ownerDocument.doctype.name)&&(Li="<!DOCTYPE "+Xe.ownerDocument.doctype.name+`>
`+Li),nt&&Kd([_e,J,z],vn=>{Li=Ya(Li,vn," ")}),D&&ge?D.createHTML(Li):Li},t.setConfig=function(){let _t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Mi(_t),yt=!0},t.clearConfig=function(){Ut=null,yt=!1},t.isValidAttribute=function(_t,Se,Xe){Ut||Mi({});const wt=Tt(_t),ii=Tt(Se);return Qt(wt,ii,Xe)},t.addHook=function(_t,Se){typeof Se=="function"&&(le[_t]=le[_t]||[],$a(le[_t],Se))},t.removeHook=function(_t){if(le[_t])return Wp(le[_t])},t.removeHooks=function(_t){le[_t]&&(le[_t]=[])},t.removeAllHooks=function(){le={}},t}var Jp=Qp();const gh=Object.freeze(Object.defineProperty({__proto__:null,default:Jp},Symbol.toStringTag,{value:"Module"}));var _h;const eu=(_h=gh==null?void 0:Jp)!==null&&_h!==void 0?_h:gh;function em(a,t,e,n,r=!1,o,s){var l,u,h,c,p,m,v,_,C,x,S,y,D,A,P,M,B,Q;const L=(l=e==null?void 0:e.id)!==null&&l!==void 0?l:"",le=n.getOptions(),_e=(u=a==="editor"?e==null?void 0:e.internalColumnEditor:e==null?void 0:e.filter)!==null&&u!==void 0?u:{},J=(h=_e==null?void 0:_e.collectionOptions)!==null&&h!==void 0?h:{},z=(c=J==null?void 0:J.separatorBetweenTextLabels)!==null&&c!==void 0?c:"",F=(p=_e==null?void 0:_e.enableTranslateLabel)!==null&&p!==void 0?p:!1,ae=(m=le==null?void 0:le.enableTranslate)!==null&&m!==void 0?m:!1,qe=(v=_e==null?void 0:_e.enableRenderHtml)!==null&&v!==void 0?v:!1,De=(_=le==null?void 0:le.sanitizeHtmlOptions)!==null&&_!==void 0?_:{},xe=(x=(C=_e==null?void 0:_e.customStructure)===null||C===void 0?void 0:C.label)!==null&&x!==void 0?x:"label",Te=(y=(S=_e==null?void 0:_e.customStructure)===null||S===void 0?void 0:S.labelPrefix)!==null&&y!==void 0?y:"labelPrefix",Re=(A=(D=_e==null?void 0:_e.customStructure)===null||D===void 0?void 0:D.labelSuffix)!==null&&A!==void 0?A:"labelSuffix",ne=(M=(P=_e==null?void 0:_e.customStructure)===null||P===void 0?void 0:P.optionLabel)!==null&&M!==void 0?M:"value",fe=(Q=(B=_e==null?void 0:_e.customStructure)===null||B===void 0?void 0:B.value)!==null&&Q!==void 0?Q:"value",Be=Ie("select",{className:"ms-filter search-filter"}),Ye=a==="filter"?["search-filter",`filter-${L}`]:["select-editor",`editor-${L}`];Be.classList.add(...Ye),Be.multiple=r;const Ve=[];let ue=!1;if(Array.isArray(t))if(t.every(Ce=>typeof Ce=="number"||typeof Ce=="string"))for(const Ce of t){const be={text:Ce,value:Ce};a==="filter"&&Array.isArray(s)&&(be.selected=s.findIndex(Le=>Le===Ce)>=0),Ve.push(be),(be.selected&&r||be.selected&&!r&&Ce!=="")&&(ue=!0)}else t.forEach(Ce=>{if(Ce===void 0||typeof Ce=="object"&&Ce[xe]===void 0&&Ce.labelKey===void 0)throw new Error("[Slickgrid-Universal] Select Filter/Editor collection with value/label (or value/labelKey when using Locale) is required to populate the Select list, for example:: { filter: model: Filters.multipleSelect, collection: [ { value: '1', label: 'One' } ]')");const be=Ce.labelKey||Ce[xe],Le=(Ce.labelKey||F&&o)&&be&&ae?o==null?void 0:o.translate(be||" "):be;let nt=Ce[Te]||"",Ge=Ce[Re]||"",yt=Ce.hasOwnProperty(ne)?Ce[ne]:"";yt!=null&&yt.toString&&(yt=yt.toString().replace(/\"/g,"'")),nt=F&&o&&nt&&typeof nt=="string"?o.translate(nt||" "):nt,Ge=F&&o&&Ge&&typeof Ge=="string"?o.translate(Ge||" "):Ge,yt=F&&o&&yt&&typeof yt=="string"?o.translate(yt||" "):yt;let k=[nt,typeof Le=="string"||typeof Le=="number"?Le.toString():Le,Ge].filter($=>$).join(z);const te={text:"",value:""};qe&&(k=Mn(le,k,De)),te.text=k;let ge=Ce[fe];ge==null&&(ge=""),a==="filter"&&Array.isArray(s)&&(te.selected=s.findIndex($=>`${$}`==`${Ce[fe]}`)>=0),te.value=`${ge??""}`,Ve.push(te),(te.selected&&r||te.selected&&!r&&Ce[fe]!=="")&&(ue=!0)});return{selectElement:Be,dataCollection:Ve,hasFoundSearchTerm:ue}}function tu(a){var t,e,n,r;let o=0,s=0,l=0,u=0;const h=(t=window.innerHeight)!==null&&t!==void 0?t:0,c=(e=window.innerWidth)!==null&&e!==void 0?e:0,p=D_(),m=p.top,v=p.left,_=Un(a);if(_){const C=(n=_.top)!==null&&n!==void 0?n:0,x=(r=_.left)!==null&&r!==void 0?r:0;s=C-m,o=h-(C-m),l=x-v,u=c-(x-v)}return{top:s,bottom:o,left:l,right:u}}function Ie(a,t,e){const n=document.createElement(a);return t&&Object.keys(t).forEach(r=>{const o=t[r];typeof o=="object"?Object.assign(n[r],o):n[r]=t[r]}),e!=null&&e.appendChild&&e.appendChild(n),n}function bh(a){if(a)for(const t of Object.keys(a))Array.isArray(a[t])&&bh(a[t]),a[t]instanceof HTMLElement&&(a[t]=null)}function sn(a){if(a!=null&&a.firstChild)for(;a.firstChild;)a.lastChild&&a.removeChild(a.lastChild);return a}function x_(a,t){if(!a||!t)return;const e=a.getBoundingClientRect(),n=t.getBoundingClientRect();return{top:n.top-e.top,right:n.right-e.right,bottom:n.bottom-e.bottom,left:n.left-e.left}}function Un(a){var t;if(!a)return;const e=(t=a==null?void 0:a.getBoundingClientRect)===null||t===void 0?void 0:t.call(a);let n=0,r=0,o=0,s=0;return(e==null?void 0:e.top)!==void 0&&e.left!==void 0&&(n=e.top+window.pageYOffset,r=e.left+window.pageXOffset,s=e.right,o=e.bottom),{top:n,left:r,bottom:o,right:s}}function tm(a,t){let e=0;if(a){const n=t==="height"?"clientHeight":"clientWidth",r=t==="height"?["top","bottom"]:["left","right"];e=a[n];for(const o of r)e-=parseFloat(T_(a,`padding-${o}`))||0}return e}function T_(a,t){return window.getComputedStyle(a,null).getPropertyValue(t)}function O_(a){let t="";return a!=null&&a.localName&&(t=a!=null&&a.className?`${a.localName}.${Array.from(a.classList).join(".")}`:a.localName),t}function iu(a,t){if(a)for(const e of t){const n=a.getAttribute(e);if(n)return n}return null}function js(a,t="auto"){return(/^[0-9]+$/i.test(`${a}`)?`${+a}px`:a)||t}function A_(a){const t=typeof a=="string"?a:String(a),e={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};return(t||"").toString().replace(/[&<>"']/g,n=>e[n])}function k_(a){return a.replace(/&#(\d+);/g,(t,e)=>String.fromCharCode(e))}function I_(a,t){const e=a.length;let n=A_(a);if(e<t)for(let r=e;r<t;r++)n+="&nbsp;";return n}function sr(a){const t=document.createElement("div");return t.innerHTML=a,t.textContent||t.innerText||""}function Mn(a,t,e){let n=t;return typeof(a==null?void 0:a.sanitizer)=="function"?n=a.sanitizer(t||""):typeof(eu==null?void 0:eu.sanitize)=="function"&&(n=(eu.sanitize(t||"",e||{})||"").toString()),n}function D_(){return{left:window.pageXOffset||document.documentElement.scrollLeft||0,top:window.pageYOffset||document.documentElement.scrollTop||0}}class R_{constructor(t,e,n){this.sharedService=t,this.backendUtilities=e,this.translaterService=n}getPickerTitleOutputString(t,e){var n,r,o,s,l,u,h,c,p,m,v,_,C,x,S;if(this.sharedService.gridOptions&&this.sharedService.gridOptions.enableTranslate&&(!this.translaterService||!this.translaterService.translate))throw new Error('[Slickgrid-Universal] requires a Translate Service to be installed and configured when the grid option "enableTranslate" is enabled.');let y="";const D=(r=(n=this.sharedService.gridOptions)===null||n===void 0?void 0:n[e])!==null&&r!==void 0?r:{},A=(s=(o=this.sharedService.gridOptions)===null||o===void 0?void 0:o.enableTranslate)!==null&&s!==void 0?s:!1,P=(u=(l=this.sharedService.gridOptions)===null||l===void 0?void 0:l.locales)!==null&&u!==void 0?u:je.locales,M=D==null?void 0:D[t],B=D==null?void 0:D[`${t}Key`],Q=this.sharedService.gridOptions,L=ao(Q);if(B&&(!((h=this.translaterService)===null||h===void 0)&&h.translate))y=this.translaterService.translate(B||" ");else switch(t){case"commandTitle":y=M||A&&((c=this.translaterService)===null||c===void 0?void 0:c.getCurrentLanguage)&&((p=this.translaterService)===null||p===void 0?void 0:p.translate(`${L}COMMANDS`||" "))||(P==null?void 0:P.TEXT_COMMANDS);break;case"columnTitle":y=M||A&&((m=this.translaterService)===null||m===void 0?void 0:m.getCurrentLanguage)&&((v=this.translaterService)===null||v===void 0?void 0:v.translate(`${L}COLUMNS`||" "))||(P==null?void 0:P.TEXT_COLUMNS);break;case"forceFitTitle":y=M||A&&((_=this.translaterService)===null||_===void 0?void 0:_.getCurrentLanguage)&&((C=this.translaterService)===null||C===void 0?void 0:C.translate(`${L}FORCE_FIT_COLUMNS`||" "))||(P==null?void 0:P.TEXT_FORCE_FIT_COLUMNS);break;case"syncResizeTitle":y=M||A&&((x=this.translaterService)===null||x===void 0?void 0:x.getCurrentLanguage)&&((S=this.translaterService)===null||S===void 0?void 0:S.translate(`${L}SYNCHRONOUS_RESIZE`||" "))||(P==null?void 0:P.TEXT_SYNCHRONOUS_RESIZE);break;default:y=M;break}return y}readjustFrozenColumnIndexWhenNeeded(t,e,n){if(t>=0){const r=n.findIndex(o=>o.id===this.sharedService.frozenVisibleColumnId);r>=0&&r!==t&&(this.sharedService.gridOptions.frozenColumn=r,this.sharedService.slickGrid.setOptions({frozenColumn:r})),Array.isArray(n)&&Array.isArray(e)&&n.length!==e.length&&this.sharedService.slickGrid.setColumns(n)}}refreshBackendDataset(t){var e;let n=this.sharedService.gridOptions;t&&(n={...this.sharedService.gridOptions,...t},this.sharedService.gridOptions=n),(e=this.backendUtilities)===null||e===void 0||e.refreshBackendDataset(n)}runOverrideFunctionWhenExists(t,e){return typeof t=="function"?!!t.call(this,e):!0}sortItems(t,e){Array.isArray(t)&&t.sort((n,r)=>n&&r&&n.hasOwnProperty(e)&&r.hasOwnProperty(e)?n[e]-r[e]:0)}translateItems(t,e,n){var r,o;if(Array.isArray(t))for(const s of t)s.hasOwnProperty(e)&&(s[n]=(o=(r=this.translaterService)===null||r===void 0?void 0:r.translate)===null||o===void 0?void 0:o.call(r,s[e]))}translateMenuItemsFromTitleKey(t,e="commandItems"){for(const n of t)typeof n=="object"&&(n.titleKey&&(n.title=this.translateWhenEnabledAndServiceExist(`${n.titleKey}`,`TEXT_${n.titleKey}`)),n.subMenuTitleKey&&(n.subMenuTitle=this.translateWhenEnabledAndServiceExist(`${n.subMenuTitleKey}`,`TEXT_${n.subMenuTitleKey}`))),Array.isArray(n==null?void 0:n[e])&&this.translateMenuItemsFromTitleKey(n==null?void 0:n[e])}translateWhenEnabledAndServiceExist(t,e,n){var r,o,s;let l="";const u=(r=this.sharedService)===null||r===void 0?void 0:r.gridOptions,h=(o=u==null?void 0:u.locales)!==null&&o!==void 0?o:je.locales;return n?l=n:u.enableTranslate&&(!((s=this.translaterService)===null||s===void 0)&&s.translate)?l=this.translaterService.translate(t||" "):e in h?l=h[e]:l=e,l}}class P_{constructor(t){this._defaults={enableForCells:!0,enableForHeaderCells:!1,maxToolTipLength:void 0,replaceExisting:!0},this.pluginName="AutoTooltips",this._eventHandler=new Slick.EventHandler,this._addonOptions=t}get addonOptions(){return this._addonOptions}get eventHandler(){return this._eventHandler}init(t){this._addonOptions={...this._defaults,...this.addonOptions},this._grid=t,this._addonOptions.enableForCells&&this._eventHandler.subscribe(this._grid.onMouseEnter,this.handleMouseEnter.bind(this)),this._addonOptions.enableForHeaderCells&&this._eventHandler.subscribe(this._grid.onHeaderMouseEnter,this.handleHeaderMouseEnter.bind(this))}dispose(){var t;(t=this._eventHandler)===null||t===void 0||t.unsubscribeAll()}handleMouseEnter(t){var e,n,r,o,s;const l=this._grid.getCellFromEvent(t);if(l){let u=this._grid.getCellNode(l.row,l.cell),h;this._addonOptions&&u&&(!u.title||!((e=this._addonOptions)===null||e===void 0)&&e.replaceExisting)&&(u.clientWidth<u.scrollWidth?(h=(r=(n=u.textContent)===null||n===void 0?void 0:n.trim())!==null&&r!==void 0?r:"",!((o=this._addonOptions)===null||o===void 0)&&o.maxToolTipLength&&h.length>((s=this._addonOptions)===null||s===void 0?void 0:s.maxToolTipLength)&&(h=h.substring(0,this._addonOptions.maxToolTipLength-3)+"...")):h="",u.title=h),u=null}}handleHeaderMouseEnter(t,e){var n;const r=e.column;let o;const s=t.target;s&&(o=s.closest(".slick-header-column"),o&&!(r!=null&&r.toolTip)&&(o.title=s.clientWidth<o.clientWidth&&(n=r==null?void 0:r.name)!==null&&n!==void 0?n:"")),o=null}}class F_{constructor(){this.pluginName="CellExcelCopyManager",this._eventHandler=new Slick.EventHandler,this._bindingEventService=new Fn}get addonOptions(){return this._addonOptions}get eventHandler(){return this._eventHandler}get commandQueue(){return this._commandQueue}get gridOptions(){var t,e,n;return(n=(e=(t=this._grid)===null||t===void 0?void 0:t.getOptions)===null||e===void 0?void 0:e.call(t))!==null&&n!==void 0?n:{}}get undoRedoBuffer(){return this._undoRedoBuffer}init(t,e){this._grid=t,this.createUndoRedoBuffer(),this._cellSelectionModel=new B_,this._grid.setSelectionModel(this._cellSelectionModel),this._bindingEventService.bind(document.body,"keydown",this.handleBodyKeyDown.bind(this)),this._addonOptions={...this.getDefaultOptions(),...e},this._cellExternalCopyManagerPlugin=new N_,this._cellExternalCopyManagerPlugin.init(this._grid,this._addonOptions),this._eventHandler.subscribe(this._cellExternalCopyManagerPlugin.onCopyCells,(n,r)=>{this._addonOptions&&typeof this._addonOptions.onCopyCells=="function"&&this._addonOptions.onCopyCells(n,r)}),this._eventHandler.subscribe(this._cellExternalCopyManagerPlugin.onCopyCancelled,(n,r)=>{this._addonOptions&&typeof this._addonOptions.onCopyCancelled=="function"&&this._addonOptions.onCopyCancelled(n,r)}),this._eventHandler.subscribe(this._cellExternalCopyManagerPlugin.onPasteCells,(n,r)=>{this._addonOptions&&typeof this._addonOptions.onPasteCells=="function"&&this._addonOptions.onPasteCells(n,r)})}dispose(){var t,e;this._eventHandler.unsubscribeAll(),this._bindingEventService.unbindAll(),(t=this._cellSelectionModel)===null||t===void 0||t.dispose(),(e=this._cellExternalCopyManagerPlugin)===null||e===void 0||e.dispose()}createUndoRedoBuffer(){let t=0;this._commandQueue=[],this._undoRedoBuffer={queueAndExecuteCommand:e=>{this._commandQueue[t]=e,t++,e.execute()},undo:()=>{if(t===0)return;t--;const e=this._commandQueue[t];e&&Slick.GlobalEditorLock.cancelCurrentEdit()&&e.undo()},redo:()=>{if(t>=this._commandQueue.length)return;const e=this._commandQueue[t];t++,e&&Slick.GlobalEditorLock.cancelCurrentEdit()&&e.execute()}}}getDefaultOptions(){let t=0;return{clipboardCommandHandler:e=>{this._undoRedoBuffer.queueAndExecuteCommand.call(this._undoRedoBuffer,e)},dataItemColumnValueExtractor:(e,n)=>{var r,o;if(!this.gridOptions.editable||!n.editor){const s=n.exportWithFormatter!==void 0?n.exportWithFormatter:(r=this.gridOptions.textExportOptions)===null||r===void 0?void 0:r.exportWithFormatter;if(n.formatter&&s){const l=n.formatter(0,0,e[n.field],n,e,this._grid);if(n.sanitizeDataExport||!((o=this.gridOptions.textExportOptions)===null||o===void 0)&&o.sanitizeDataExport){let u=l;return l&&typeof l=="object"&&l.hasOwnProperty("text")&&(u=l.text),u===null&&(u=""),sr(u)}return l}}return null},readOnlyMode:!1,includeHeaderWhenCopying:!1,newRowCreator:e=>{for(let n=0;n<e;n++)this._grid.getData().addItem({id:`newRow_${t++}`})}}}handleBodyKeyDown(t){(t.keyCode||t.code)===90&&(t.ctrlKey||t.metaKey)&&(t.shiftKey?this._undoRedoBuffer.redo():this._undoRedoBuffer.undo())}}const M_=2e3,im=100;class N_{constructor(){this._bodyElement=document.body,this._copiedCellStyle="copied",this._copiedCellStyleLayerKey="copy-manager",this._copiedRanges=null,this.pluginName="CellExternalCopyManager",this.onCopyCells=new Slick.Event,this.onCopyCancelled=new Slick.Event,this.onPasteCells=new Slick.Event,this._eventHandler=new Slick.EventHandler}get addonOptions(){return this._addonOptions}get eventHandler(){return this._eventHandler}init(t,e){this._grid=t,this._addonOptions={...this._addonOptions,...e},this._copiedCellStyleLayerKey=this._addonOptions.copiedCellStyleLayerKey||"copy-manager",this._copiedCellStyle=this._addonOptions.copiedCellStyle||"copied",this._bodyElement=this._addonOptions.bodyElement||document.body,this._onCopyInit=this._addonOptions.onCopyInit||void 0,this._onCopySuccess=this._addonOptions.onCopySuccess||void 0,this._eventHandler.subscribe(this._grid.onKeyDown,this.handleKeyDown.bind(this));const n=t.getSelectionModel();if(!n)throw new Error("Selection model is mandatory for this plugin. Please set a selection model on the grid before adding this plugin: grid.setSelectionModel(new Slick.CellSelectionModel())");this._eventHandler.subscribe(n.onSelectedRangesChanged,()=>{this._grid.getEditorLock().isActive()||this._grid.focus()})}dispose(){this._eventHandler.unsubscribeAll()}clearCopySelection(){this._grid.removeCellCssStyles(this._copiedCellStyleLayerKey)}getHeaderValueForColumn(t){if(typeof this._addonOptions.headerColumnValueExtractor=="function"){const e=this._addonOptions.headerColumnValueExtractor(t);if(e)return e}return t.name}getDataItemValueForColumn(t,e,n){if(typeof this._addonOptions.dataItemColumnValueExtractor=="function"){const o=this._addonOptions.dataItemColumnValueExtractor(t,e);if(o)return o}let r="";if(e)if(e.editor){const o=document.createElement("p"),s=new e.editor({container:o,column:e,event:n,position:{top:0,left:0},grid:this._grid});s.loadValue(t),r=s.serializeValue(),s.destroy(),o.remove()}else r=t[e.field||""];return r}setDataItemValueForColumn(t,e,n){if(!(e!=null&&e.denyPaste)){if(this._addonOptions.dataItemColumnValueSetter)return this._addonOptions.dataItemColumnValueSetter(t,e,n);if(e.editor){const r=document.createElement("div"),o=new e.editor({container:r,column:e,position:{top:0,left:0},grid:this._grid});o.loadValue(t),o.applyValue(t,n),o.destroy(),r.remove()}else t[e.field]=n}}setIncludeHeaderWhenCopying(t){this._addonOptions.includeHeaderWhenCopying=t}createTextBox(t){const e=Ie("textarea",{value:t,style:{position:"absolute",left:"-1000px",top:`${document.body.scrollTop}px`}},this._bodyElement);return e.select(),e}decodeTabularData(t,e){var n;const r=t.getColumns(),s=e.value.split(/[\n\f\r]/);s[s.length-1]===""&&s.pop();let l=0;const u=[];this._bodyElement.removeChild(e);for(const P of s)u[l++]=P!==""?P.split("	"):[""];const h=this._grid.getActiveCell(),c=(n=this._grid.getSelectionModel())===null||n===void 0?void 0:n.getSelectedRanges(),p=c!=null&&c.length?c[0]:null;let m,v;if(p)m=p.fromRow,v=p.fromCell;else if(h)m=h.row,v=h.cell;else return;let _=!1,C=u.length,x=u.length?u[0].length:0;u.length===1&&u[0].length===1&&p&&(_=!0,C=p.toRow-p.fromRow+1,x=p.toCell-p.fromCell+1);const S=this._grid.getData().length-m;let y=0;if(S<C&&typeof this._addonOptions.newRowCreator=="function"){const P=this._grid.getData();for(y=1;y<=C-S;y++)P.push({});this._grid.setData(P),this._grid.render()}if(m+C>this._grid.getDataLength()&&typeof this._addonOptions.newRowCreator=="function"){const P=m+C-this._grid.getDataLength();this._addonOptions.newRowCreator(P)}const A={isClipboardCommand:!0,clippedRange:u,oldValues:[],cellExternalCopyManager:this,_options:this._addonOptions,setDataItemValueForColumn:this.setDataItemValueForColumn,markCopySelection:this.markCopySelection,oneCellToMultiple:_,activeRow:m,activeCell:v,destH:C,destW:x,maxDestY:this._grid.getDataLength(),maxDestX:this._grid.getColumns().length,h:0,w:0,execute:()=>{var P;A.h=0;for(let B=0;B<A.destH;B++){A.oldValues[B]=[],A.w=0,A.h++;for(let Q=0;Q<A.destW;Q++){A.w++;const L=m+B,le=v+Q;if(L<A.maxDestY&&le<A.maxDestX){const _e=this._grid.getDataItem(L);A.oldValues[B][Q]=_e[r[le].field],_?this.setDataItemValueForColumn(_e,r[le],u[0][0]):this.setDataItemValueForColumn(_e,r[le],u[B]?u[B][Q]:""),this._grid.updateCell(L,le),this._grid.onCellChange.notify({row:L,cell:le,item:_e,grid:this._grid,column:{}})}}}const M={fromCell:v,fromRow:m,toCell:v+A.w-1,toRow:m+A.h-1};this.markCopySelection([M]),(P=this._grid.getSelectionModel())===null||P===void 0||P.setSelectedRanges([M]),this.onPasteCells.notify({ranges:[M]})},undo:()=>{var P;for(let B=0;B<A.destH;B++)for(let Q=0;Q<A.destW;Q++){const L=m+B,le=v+Q;if(L<A.maxDestY&&le<A.maxDestX){const _e=this._grid.getDataItem(L);_?this.setDataItemValueForColumn(_e,r[le],A.oldValues[0][0]):this.setDataItemValueForColumn(_e,r[le],A.oldValues[B][Q]),this._grid.updateCell(L,le),this._grid.onCellChange.notify({row:L,cell:le,item:_e,grid:this._grid,column:{}})}}const M={fromCell:v,fromRow:m,toCell:v+A.w-1,toRow:m+A.h-1};if(this.markCopySelection([M]),(P=this._grid.getSelectionModel())===null||P===void 0||P.setSelectedRanges([M]),this.onPasteCells.notify({ranges:[M]}),typeof this._addonOptions.onPasteCells=="function"&&this._addonOptions.onPasteCells(new Slick.EventData,{ranges:[M]}),y>1){const B=this._grid.getData();for(;y>1;y--)B.splice(B.length-1,1);this._grid.setData(B),this._grid.render()}}};this._addonOptions.clipboardCommandHandler?this._addonOptions.clipboardCommandHandler(A):A.execute()}handleKeyDown(t){var e,n,r,o,s,l;let u;if(!this._grid.getEditorLock().isActive()||this._grid.getOptions().autoEdit){if((t.which===xi.ESCAPE||t.key==="Escape")&&this._copiedRanges&&(t.preventDefault(),this.clearCopySelection(),this.onCopyCancelled.notify({ranges:this._copiedRanges}),typeof this._addonOptions.onCopyCancelled=="function"&&this._addonOptions.onCopyCancelled(t,{ranges:this._copiedRanges}),this._copiedRanges=null),(t.which===xi.C||t.key==="c"||t.which===xi.INSERT||t.key==="Insert")&&(t.ctrlKey||t.metaKey)&&!t.shiftKey&&(typeof this._onCopyInit=="function"&&this._onCopyInit.call(this),u=(n=(e=this._grid.getSelectionModel())===null||e===void 0?void 0:e.getSelectedRanges())!==null&&n!==void 0?n:[],u.length!==0)){this._copiedRanges=u,this.markCopySelection(u),this.onCopyCells.notify({ranges:u}),typeof this._addonOptions.onCopyCells=="function"&&this._addonOptions.onCopyCells(t,{ranges:u});const h=this._grid.getColumns();let c="";for(let p=0;p<u.length;p++){const m=u[p],v=[];for(let _=m.fromRow;_<m.toRow+1;_++){const C=[],x=this._grid.getDataItem(_);if(v.length===0&&this._addonOptions.includeHeaderWhenCopying){const S=[];for(let y=m.fromCell;y<m.toCell+1;y++)h[y].name.length>0&&S.push(this.getHeaderValueForColumn(h[y]));v.push(S.join("	"))}for(let S=m.fromCell;S<m.toCell+1;S++)C.push(this.getDataItemValueForColumn(x,h[S],t));v.push(C.join("	"))}c+=v.join(`\r
`)+`\r
`}if(window.clipboardData)return window.clipboardData.setData("Text",c),!0;{const p=document.activeElement,m=this.createTextBox(c);if(m.focus(),setTimeout(()=>{this._bodyElement.removeChild(m),p?p.focus():console.log("No element to restore focus to after copy?")},(o=(r=this.addonOptions)===null||r===void 0?void 0:r.clipboardPasteDelay)!==null&&o!==void 0?o:im),typeof this._onCopySuccess=="function"){const v=u.length===1?u[0].toRow+1-u[0].fromRow:u.length;this._onCopySuccess(v)}return!1}}if(!this._addonOptions.readOnlyMode&&((t.which===xi.V||t.key==="v")&&(t.ctrlKey||t.metaKey)&&!t.shiftKey||(t.which===xi.INSERT||t.key==="Insert")&&t.shiftKey&&!t.ctrlKey)){const h=this.createTextBox("");return setTimeout(()=>this.decodeTabularData(this._grid,h),(l=(s=this.addonOptions)===null||s===void 0?void 0:s.clipboardPasteDelay)!==null&&l!==void 0?l:im),!1}}}markCopySelection(t){var e;this.clearCopySelection();const n=this._grid.getColumns(),r={};for(const o of t)for(let s=o.fromRow;s<=o.toRow;s++){r[s]={};for(let l=o.fromCell;l<=o.toCell&&l<n.length;l++)r[s][n[l].id]=this._copiedCellStyle}this._grid.setCellCssStyles(this._copiedCellStyleLayerKey,r),clearTimeout(this._clearCopyTI),this._clearCopyTI=setTimeout(()=>this.clearCopySelection(),((e=this.addonOptions)===null||e===void 0?void 0:e.clearCopySelectionDelay)||M_)}}class nu{constructor(t,e,n){this.extensionUtility=t,this.pubSubService=e,this.sharedService=n,this._addonOptions={},this._camelPluginName="",this._gridUid="",this._menuCssPrefix="",this._menuPluginCssPrefix="",this._bindEventService=new Fn,this._eventHandler=new Slick.EventHandler}get addonOptions(){return this._addonOptions}set addonOptions(t){this._addonOptions=t}get eventHandler(){return this._eventHandler}get grid(){return this.sharedService.slickGrid}get gridOptions(){var t;return(t=this.sharedService.gridOptions)!==null&&t!==void 0?t:{}}get gridUid(){var t,e;return this._gridUid||((e=(t=this.grid)===null||t===void 0?void 0:t.getUID())!==null&&e!==void 0?e:"")}get gridUidSelector(){return this.gridUid?`.${this.gridUid}`:""}get menuCssClass(){return this._menuPluginCssPrefix||this._menuCssPrefix}get menuElement(){return this._menuElm||document.querySelector(`.${this.menuCssClass}${this.gridUidSelector}`)}dispose(){var t,e,n,r,o;(t=this._eventHandler)===null||t===void 0||t.unsubscribeAll(),this._bindEventService.unbindAll(),this.pubSubService.unsubscribeAll(),(e=this._commandTitleElm)===null||e===void 0||e.remove(),(n=this._optionTitleElm)===null||n===void 0||n.remove(),this.disposeAllMenus(),sn(this._menuElm),(r=this.menuElement)===null||r===void 0||r.remove(),(o=this._menuElm)===null||o===void 0||o.remove()}disposeAllMenus(){this.disposeSubMenus(),this._bindEventService.unbindAll("parent-menu"),document.querySelectorAll(`.${this.menuCssClass}${this.gridUidSelector}`).forEach(t=>t.remove())}disposeSubMenus(){this._bindEventService.unbindAll("sub-menu"),document.querySelectorAll(`.${this.menuCssClass}.slick-submenu${this.gridUidSelector}`).forEach(t=>t.remove())}setOptions(t){this._addonOptions={...this._addonOptions,...t}}addSubMenuTitleWhenExists(t,e){if(t!=="divider"&&(t!=null&&t.subMenuTitle)){const n=document.createElement("div");n.className="slick-menu-title",n.textContent=t.subMenuTitle;const r=t.subMenuTitleCssClass;r&&n.classList.add(...r.split(" ")),e.appendChild(n)}}populateCommandOrOptionItems(t,e,n,r,o,s,l){if(o&&r&&e)for(const u of r)this.populateSingleCommandOrOptionItem(t,e,n,u,o,s,l)}populateCommandOrOptionTitle(t,e,n,r){var o,s;if(e){const l=r>0,u=(s=(o=this._menuElm)===null||o===void 0?void 0:o.querySelector(`.slick-${t}-header`))!==null&&s!==void 0?s:Ie("div",{className:`slick-${t}-header`}),h=`${t}Title`;l||(e!=null&&e[h]?(sn(u),this[`_${t}TitleElm`]=Ie("span",{className:"slick-menu-title",textContent:e[h]}),u.appendChild(this[`_${t}TitleElm`]),u.classList.add("with-title")):u.classList.add("no-title"),n.appendChild(u))}}populateSingleCommandOrOptionItem(t,e,n,r,o,s,l){var u;let h=null;if(o&&r&&e){const c=(o==null?void 0:o.level)||0,p=this._camelPluginName==="headerButtons"?"":"-item",m=`${this._menuCssPrefix}${p}`;let v=!0,_=!0;if(typeof r=="object"&&(v=this.extensionUtility.runOverrideFunctionWhenExists(r.itemVisibilityOverride,o),_=this.extensionUtility.runOverrideFunctionWhenExists(r.itemUsabilityOverride,o)),!v)return null;if(typeof r=="object"&&r.itemUsabilityOverride&&(r.disabled=!_),h=Ie("li",{className:m,role:"menuitem"}),typeof r=="object"&&Yd(r[t])&&(h.dataset[t]=r==null?void 0:r[t]),n&&n.appendChild(h),typeof r=="object"&&r.divider||r==="divider")return h.classList.add(`${m}-divider`),h;if(r.disabled&&h.classList.add(`${m}-disabled`),(r.hidden||r.showOnHover)&&h.classList.add(`${m}-hidden`),r.cssClass&&h.classList.add(...r.cssClass.split(" ")),r.tooltip&&(h.title=r.tooltip),this._camelPluginName!=="headerButtons"){const x=Ie("div",{className:`${this._menuCssPrefix}-icon`});h.appendChild(x),r.iconCssClass?x.classList.add(...r.iconCssClass.split(" ")):!r.commandItems&&!r.optionItems&&!r.items&&(x.textContent="");const S=Ie("span",{className:`${this._menuCssPrefix}-content`,textContent:typeof r=="object"&&r.title||""},h);r.textCssClass&&S.classList.add(...r.textCssClass.split(" "))}const C=c>0?"sub-menu":"parent-menu";if(this._bindEventService.bind(h,"click",x=>s.call(this,x,t,r,c,o==null?void 0:o.column),void 0,C),((u=this._addonOptions)===null||u===void 0?void 0:u.subMenuOpenByEvent)==="mouseover"&&typeof l=="function"&&this._bindEventService.bind(h,"mouseover",x=>l.call(this,x,t,r,c),void 0,C),r.commandItems||r.optionItems||r.items){const x=document.createElement("span");x.className="sub-item-chevron",this._addonOptions.subItemChevronClass?x.classList.add(...this._addonOptions.subItemChevronClass.split(" ")):x.textContent="",h.classList.add("slick-submenu-item"),h.appendChild(x)}}return h}}class nm extends nu{constructor(t,e,n){super(t,e,n),this.extensionUtility=t,this.pubSubService=e,this.sharedService=n,this._currentCell=-1,this._currentRow=-1,this._lastMenuTypeClicked="",this._subMenuParentId=""}createParentMenu(t){var e,n,r,o,s,l,u;(e=this.menuElement)===null||e===void 0||e.remove(),this._menuElm=void 0;const h=this.grid.getCellFromEvent(t);if(h){this._currentCell=(n=h.cell)!==null&&n!==void 0?n:0,this._currentRow=(r=h.row)!==null&&r!==void 0?r:0;const c=((o=this._addonOptions)===null||o===void 0?void 0:o.commandItems)||[],p=((s=this._addonOptions)===null||s===void 0?void 0:s.optionItems)||[],m={cell:this._currentCell,row:this._currentRow,grid:this.grid};if(this.closeMenu(t,m),typeof t.stopPropagation=="function"&&(this.pubSubService.publish(`on${yl(this._camelPluginName)}BeforeMenuShow`,m),typeof((l=this.addonOptions)===null||l===void 0?void 0:l.onBeforeMenuShow)=="function"&&this.addonOptions.onBeforeMenuShow(t,m)===!1)||(this._menuElm=this.createMenu(c,p),this._menuElm&&(this._menuElm.style.top=`${t.pageY+5}px`,this._menuElm.style.left=`${t.pageX}px`,this._menuElm.style.display="block",document.body.appendChild(this._menuElm)),this.pubSubService.publish(`on${yl(this._camelPluginName)}AfterMenuShow`,m),typeof((u=this.addonOptions)===null||u===void 0?void 0:u.onAfterMenuShow)=="function"&&this.addonOptions.onAfterMenuShow(t,m)===!1))return}return this._menuElm}createMenu(t,e,n=0,r){var o,s,l,u,h,c,p,m;const v=this.grid.getColumns()[this._currentCell],_=this.grid.getDataItem(this._currentRow),C=(r==null?void 0:r.command)||(r==null?void 0:r.option);let x=n===1&&C?String(C).replace(/\s/g,""):"";x&&(this._subMenuParentId=x),n>1&&(x=this._subMenuParentId);let S=!0,y=!0;if(this._camelPluginName==="contextMenu"){if(S=this.checkIsColumnAllowed((s=(o=this._addonOptions)===null||o===void 0?void 0:o.optionShownOverColumnIds)!==null&&s!==void 0?s:[],v.id),y=this.checkIsColumnAllowed((u=(l=this._addonOptions)===null||l===void 0?void 0:l.commandShownOverColumnIds)!==null&&u!==void 0?u:[],v.id),!v||(!y||!t.length)&&(!S||!e.length)){this.hideMenu();return}}else if(!v||!v.cellMenu||!t.length&&!e.length)return;const D=`${this.menuCssClass} slick-menu-level-${n} ${this.gridUid}`,A=document.body.querySelector(`.${this.menuCssClass}.slick-menu-level-${n}${this.gridUidSelector}`);if(A){if(A.dataset.subMenuParent===x)return A;this.disposeSubMenus()}const P=document.createElement("div");P.className=D,n>0&&(P.classList.add("slick-submenu"),x&&(P.dataset.subMenuParent=x));const M=isNaN(this.addonOptions.maxHeight)?this.addonOptions.maxHeight:`${(h=this.addonOptions.maxHeight)!==null&&h!==void 0?h:0}px`,B=isNaN(this.addonOptions.maxWidth)?this.addonOptions.maxWidth:`${(c=this.addonOptions.maxWidth)!==null&&c!==void 0?c:0}px`;M&&(P.style.maxHeight=M),B&&(P.style.maxWidth=B),!((p=this.addonOptions)===null||p===void 0)&&p.width&&(P.style.width=js((m=this.addonOptions)===null||m===void 0?void 0:m.width));const Q=Ie("button",{ariaLabel:"Close",className:"close",type:"button",textContent:"",dataset:{dismiss:this._menuCssPrefix}});if(!this.addonOptions.hideOptionSection&&S&&e.length>0){const L=Ie("div",{className:`${this._menuCssPrefix}-option-list`,role:"menu"},P);this.populateCommandOrOptionTitle("option",this.addonOptions,L,n),!this.addonOptions.hideCloseButton&&n<1&&this.populateCommandOrOptionCloseBtn("option",Q,L),r&&n>0&&this.addSubMenuTitleWhenExists(r,L),this.populateCommandOrOptionItems("option",this.addonOptions,L,e,{cell:this._currentCell,row:this._currentRow,column:v,dataContext:_,grid:this.grid,level:n},this.handleMenuItemCommandClick,this.handleMenuItemMouseOver)}if(!this.addonOptions.hideCommandSection&&y&&t.length>0){const L=Ie("div",{className:`${this._menuCssPrefix}-command-list`,role:"menu"},P);this.populateCommandOrOptionTitle("command",this.addonOptions,L,n),!this.addonOptions.hideCloseButton&&n<1&&(!S||e.length===0||this.addonOptions.hideOptionSection)&&this.populateCommandOrOptionCloseBtn("command",Q,L),r&&n>0&&this.addSubMenuTitleWhenExists(r,L),this.populateCommandOrOptionItems("command",this.addonOptions,L,t,{cell:this._currentCell,row:this._currentRow,column:v,dataContext:_,grid:this.grid,level:n},this.handleMenuItemCommandClick,this.handleMenuItemMouseOver)}return n++,P}closeMenu(t,e){var n;if(this.menuElement){if(typeof((n=this.addonOptions)===null||n===void 0?void 0:n.onBeforeMenuClose)=="function"&&this.addonOptions.onBeforeMenuClose(t,e)===!1)return;this.hideMenu()}}hideMenu(){var t;(t=this.menuElement)===null||t===void 0||t.remove(),this._menuElm=null,this.disposeSubMenus()}checkIsColumnAllowed(t,e){return(t==null?void 0:t.length)>0?t.findIndex(n=>n===e)>=0:!0}handleBodyMouseDown(t){if(this.menuElement){let e=!1;const n=t.target.closest(`.${this.menuCssClass}`);(this.menuElement.contains(t.target)||n)&&(e=!0),(this.menuElement!==t.target&&!e&&!t.defaultPrevented||t.target.className==="close"&&n)&&this.closeMenu(t,{cell:this._currentCell,row:this._currentRow,grid:this.grid})}}handleCloseButtonClicked(t){t.defaultPrevented||this.closeMenu(t,{cell:0,row:0,grid:this.grid})}handleMenuItemMouseOver(t,e,n,r=0){(n==null?void 0:n[e])!==void 0&&n!=="divider"&&!n.disabled&&!n.divider&&(n.commandItems||n.optionItems||n.items?(this.repositionSubMenu(n,e,r,t),this._lastMenuTypeClicked=e):r===0&&this.disposeSubMenus())}handleMenuItemCommandClick(t,e,n,r=0){var o;if((n==null?void 0:n[e])!==void 0&&n!=="divider"&&!n.disabled&&!n.divider&&this._currentCell!==void 0&&this._currentRow!==void 0){if(e==="option"&&!this.grid.getEditorLock().commitCurrentEdit())return;const s=this._currentCell,l=this._currentRow,u=this.grid.getColumns()[this._currentCell],h=this.grid.getDataItem(this._currentRow),c=n[e]!==void 0?n[e]:"";if(c!==void 0&&!n[`${e}Items`]){const p={cell:this._currentCell,row:this._currentRow,grid:this.grid,[e]:c,item:n,column:u,dataContext:h},m=e==="command"?"onCommand":"onOptionSelected",v=`${this._camelPluginName}:${m}`;this.pubSubService.publish(v,p),typeof((o=this._addonOptions)===null||o===void 0?void 0:o[m])=="function"&&this._addonOptions[m](t,p),typeof n.action=="function"&&n.action.call(this,t,p),t.defaultPrevented||this.closeMenu(t,{cell:s,row:l,grid:this.grid})}else(n.commandItems||n.optionItems)&&this.repositionSubMenu(n,e,r,t);this._lastMenuTypeClicked=e}}populateCommandOrOptionCloseBtn(t,e,n){var r;this._bindEventService.bind(e,"click",s=>this.handleCloseButtonClicked(s),void 0,"parent-menu");const o=(r=n.querySelector(`.slick-${t}-header`))!==null&&r!==void 0?r:Ie("div",{className:`slick-${t}-header`});o==null||o.appendChild(e),n.appendChild(o),o.classList.add("with-close")}repositionSubMenu(t,e,n,r){(r.target.classList.contains("slick-cell")||this._lastMenuTypeClicked!==e)&&this.disposeSubMenus();const o=this.createMenu((t==null?void 0:t.commandItems)||[],(t==null?void 0:t.optionItems)||[],n+1,t);o&&(o.style.display="block",document.body.appendChild(o),this.repositionMenu(r,o))}repositionMenu(t,e){var n,r,o,s,l,u;const h=e==null?void 0:e.classList.contains("slick-submenu"),c=h?t.target.closest(`.${this._menuCssPrefix}-item`):t.target.closest(".slick-cell");if(e&&c){e.style.top="0px",e.style.left="0px";const p=(r=(n=t==null?void 0:t.touches)===null||n===void 0?void 0:n[0])!==null&&r!==void 0?r:t,m=Un(c);let v=c&&this._camelPluginName==="cellMenu"?(o=m==null?void 0:m.left)!==null&&o!==void 0?o:0:p.pageX,_=c&&this._camelPluginName==="cellMenu"?(s=m==null?void 0:m.top)!==null&&s!==void 0?s:0:p.pageY;h&&this._camelPluginName==="contextMenu"&&(v=(l=m==null?void 0:m.left)!==null&&l!==void 0?l:0,_=(u=m==null?void 0:m.top)!==null&&u!==void 0?u:0);const C=c.offsetWidth||0,x=(e==null?void 0:e.offsetHeight)||0,S=(e==null?void 0:e.offsetWidth)||this._addonOptions.width||0,y=this.gridOptions.rowHeight||0,D=Number(this._addonOptions.autoAdjustDropOffset||0),A=Number(this._addonOptions.autoAlignSideOffset||0);if(this._addonOptions.autoAdjustDrop||this._addonOptions.dropDirection){const{bottom:P,top:M}=tu(c),B=P+D-y,Q=M-D+y;(B<x&&Q>B?"top":"bottom")==="top"||this._addonOptions.dropDirection==="top"?(e.classList.remove("dropdown"),e.classList.add("dropup"),h?_-=x-D-c.clientHeight:_-=x-D):(e.classList.remove("dropup"),e.classList.add("dropdown"),_=_+D,this._camelPluginName==="cellMenu"&&(h?_+=D:_+=y+D))}if(this._addonOptions.autoAlignSide||this._addonOptions.dropSide==="left"){const P=this.grid.getGridPosition();let M=v+Number(S);h&&(M+=c.clientWidth);const B=document.documentElement.clientWidth;(M>=P.width||M>=B?"left":"right")==="left"||!h&&this._addonOptions.dropSide==="left"?(e.classList.remove("dropright"),e.classList.add("dropleft"),this._camelPluginName==="cellMenu"&&!h?v-=Number(S)-C-A:v-=Number(S)-A):(e.classList.remove("dropleft"),e.classList.add("dropright"),h?v+=A+c.offsetWidth:v+=A)}e.style.top=`${_}px`,e.style.left=`${v}px`}}}class L_ extends nm{constructor(t,e,n){super(t,e,n),this.extensionUtility=t,this.pubSubService=e,this.sharedService=n,this._defaults={autoAdjustDrop:!0,autoAlignSide:!0,autoAdjustDropOffset:0,autoAlignSideOffset:0,hideMenuOnScroll:!0,subMenuOpenByEvent:"mouseover"},this.pluginName="CellMenu",this._camelPluginName="cellMenu",this._menuCssPrefix="slick-menu",this._menuPluginCssPrefix="slick-cell-menu",this.init(n.gridOptions.cellMenu)}init(t){this._addonOptions={...this._defaults,...t},this.sortMenuItems(this.sharedService.allColumns),this._eventHandler.subscribe(this.grid.onClick,this.handleCellClick.bind(this)),this._addonOptions.hideMenuOnScroll&&this._eventHandler.subscribe(this.grid.onScroll,this.closeMenu.bind(this))}translateCellMenu(){var t;const e=(t=this.sharedService)===null||t===void 0?void 0:t.gridOptions,n=this.sharedService.allColumns;e!=null&&e.enableTranslate&&Array.isArray(n)&&n.forEach(r=>{if(r!=null&&r.cellMenu&&(Array.isArray(r.cellMenu.commandItems)||Array.isArray(r.cellMenu.optionItems))){const o=r.cellMenu.commandItems||[],s=r.cellMenu.optionItems||[];r.cellMenu.commandTitleKey&&(r.cellMenu.commandTitle=this.extensionUtility.translateWhenEnabledAndServiceExist(r.cellMenu.commandTitleKey,"TEXT_COMMANDS")||r.cellMenu.commandTitle),r.cellMenu.optionTitleKey&&(r.cellMenu.optionTitle=this.extensionUtility.translateWhenEnabledAndServiceExist(r.cellMenu.optionTitleKey,"TEXT_COMMANDS")||r.cellMenu.optionTitle),this.extensionUtility.translateMenuItemsFromTitleKey(o,"commandItems"),this.extensionUtility.translateMenuItemsFromTitleKey(s,"optionItems")}})}handleCellClick(t,e){this.disposeAllMenus();const n=this.grid.getCellFromEvent(t);if(n){const r=this.grid.getDataItem(n.row),o=this.grid.getColumns()[n.cell];if(o!=null&&o.cellMenu&&t.preventDefault(),this._addonOptions={...this._addonOptions,...o.cellMenu},e=e||{},e.column=o,e.dataContext=r,e.grid=this.grid,!this.extensionUtility.runOverrideFunctionWhenExists(this._addonOptions.menuUsabilityOverride,e))return;this._menuElm=this.createParentMenu(t),this._menuElm&&(this.repositionMenu(t,this._menuElm),this._menuElm.setAttribute("aria-expanded","true"),this._menuElm.style.display="block"),this._bindEventService.bind(document.body,"mousedown",this.handleBodyMouseDown.bind(this),{capture:!0})}}sortMenuItems(t){t.forEach(e=>{var n,r;!((n=e==null?void 0:e.cellMenu)===null||n===void 0)&&n.commandItems&&this.extensionUtility.sortItems(e.cellMenu.commandItems||[],"positionOrder"),!((r=e==null?void 0:e.cellMenu)===null||r===void 0)&&r.optionItems&&this.extensionUtility.sortItems(e.cellMenu.optionItems||[],"positionOrder")})}}class H_{constructor(t,e){this.grid=t,this.pluginName="CellRangeDecorator",this._defaults={selectionCssClass:"slick-range-decorator",selectionCss:{border:"2px dashed red",zIndex:"9999"},offset:{top:-1,left:-1,height:-2,width:-2}},this._addonOptions=Cl(this._defaults,e)}get addonOptions(){return this._addonOptions}get addonElement(){return this._elem}dispose(){this.hide()}hide(){var t;(t=this._elem)===null||t===void 0||t.remove(),this._elem=null}show(t){var e,n;this._elem||(this._elem=Ie("div",{className:this._addonOptions.selectionCssClass}),Object.keys(this._addonOptions.selectionCss).forEach(s=>{this._elem.style[s]=this._addonOptions.selectionCss[s]}),this._elem.style.position="absolute",(e=this.grid.getActiveCanvasNode())===null||e===void 0||e.appendChild(this._elem));const r=this.grid.getCellNodeBox(t.fromRow,t.fromCell),o=this.grid.getCellNodeBox(t.toRow,t.toCell);return r&&o&&(!((n=this._addonOptions)===null||n===void 0)&&n.offset)&&(this._elem.style.top=`${r.top+this._addonOptions.offset.top}px`,this._elem.style.left=`${r.left+this._addonOptions.offset.left}px`,this._elem.style.height=`${o.bottom-r.top+this._addonOptions.offset.height}px`,this._elem.style.width=`${o.right-r.left+this._addonOptions.offset.width}px`),this._elem}}class rm{constructor(t){this._currentlySelectedRange=null,this._dragging=!1,this._gridUid="",this._columnOffset=0,this._rowOffset=0,this._isRightCanvas=!1,this._isBottomCanvas=!1,this._xDelayForNextCell=0,this._yDelayForNextCell=0,this._viewportHeight=0,this._viewportWidth=0,this._isRowMoveRegistered=!1,this._scrollLeft=0,this._scrollTop=0,this._defaults={autoScroll:!0,minIntervalToShowNextCell:30,maxIntervalToShowNextCell:600,accelerateInterval:5,selectionCss:{border:"2px dashed blue"}},this.pluginName="CellRangeSelector",this.onBeforeCellRangeSelected=new Slick.Event,this.onCellRangeSelecting=new Slick.Event,this.onCellRangeSelected=new Slick.Event,this._eventHandler=new Slick.EventHandler,this._addonOptions=Cl(this._defaults,t)}get addonOptions(){return this._addonOptions}get eventHandler(){return this._eventHandler}get gridUid(){var t,e;return this._gridUid||((e=(t=this._grid)===null||t===void 0?void 0:t.getUID())!==null&&e!==void 0?e:"")}get gridUidSelector(){return this.gridUid?`.${this.gridUid}`:""}init(t){this._grid=t,this._decorator=this._addonOptions.cellDecorator||new H_(t,this._addonOptions),this._canvas=t.getCanvasNode(),this._gridOptions=t.getOptions(),this._gridUid=t.getUID(),this._eventHandler.subscribe(this._grid.onDrag,this.handleDrag.bind(this)).subscribe(this._grid.onDragInit,this.handleDragInit.bind(this)).subscribe(this._grid.onDragStart,this.handleDragStart.bind(this)).subscribe(this._grid.onDragEnd,this.handleDragEnd.bind(this)).subscribe(this._grid.onScroll,this.handleScroll.bind(this))}destroy(){this.dispose()}dispose(){var t,e;(t=this._eventHandler)===null||t===void 0||t.unsubscribeAll(),sn(this._activeCanvas),sn(this._canvas),(e=this._decorator)===null||e===void 0||e.dispose(),this.stopIntervalTimer()}getCellDecorator(){return this._decorator}getCurrentRange(){return this._currentlySelectedRange}getMouseOffsetViewport(t,e){var n,r,o,s;const l=(r=(n=t==null?void 0:t.touches)===null||n===void 0?void 0:n[0])!==null&&r!==void 0?r:t,u=this._activeViewport.scrollLeft,h=this._activeViewport.scrollTop,c=u+this._viewportWidth,p=h+this._viewportHeight,m=Un(this._activeViewport),v=(o=m==null?void 0:m.left)!==null&&o!==void 0?o:0,_=(s=m==null?void 0:m.top)!==null&&s!==void 0?s:0,C=v+this._viewportWidth,x=_+this._viewportHeight,S={e:t,dd:e,viewport:{left:u,top:h,right:c,bottom:p,offset:{left:v,top:_,right:C,bottom:x}},offset:{x:0,y:0},isOutsideViewport:!1};return l.pageX<v?S.offset.x=l.pageX-v:l.pageX>C&&(S.offset.x=l.pageX-C),l.pageY<_?S.offset.y=_-l.pageY:l.pageY>x&&(S.offset.y=x-l.pageY),S.isOutsideViewport=!!S.offset.x||!!S.offset.y,S}stopIntervalTimer(){this._autoScrollTimerId&&(clearInterval(this._autoScrollTimerId),this._autoScrollTimerId=void 0)}handleDrag(t,e){if(!(!this._dragging&&!this._gridOptions.enableRowMoveManager)){if(this._gridOptions.enableRowMoveManager||t.stopImmediatePropagation(),this.addonOptions.autoScroll&&(this._draggingMouseOffset=this.getMouseOffsetViewport(t,e),this._draggingMouseOffset.isOutsideViewport))return this.handleDragOutsideViewport();this.stopIntervalTimer(),this.handleDragTo(t,e)}}handleDragOutsideViewport(){if(this._xDelayForNextCell=this.addonOptions.maxIntervalToShowNextCell-Math.abs(this._draggingMouseOffset.offset.x)*this.addonOptions.accelerateInterval,this._yDelayForNextCell=this.addonOptions.maxIntervalToShowNextCell-Math.abs(this._draggingMouseOffset.offset.y)*this.addonOptions.accelerateInterval,!this._autoScrollTimerId){let t=0,e=0;this._autoScrollTimerId=setInterval(()=>{let n=!1,r=!1;this._draggingMouseOffset.offset.x?(t+=this.addonOptions.minIntervalToShowNextCell,n=t>=this._xDelayForNextCell):t=0,this._draggingMouseOffset.offset.y?(e+=this.addonOptions.minIntervalToShowNextCell,r=e>=this._yDelayForNextCell):e=0,(n||r)&&(n&&(t=0),r&&(e=0),this.handleDragToNewPosition(n,r))},this.addonOptions.minIntervalToShowNextCell)}}handleDragToNewPosition(t,e){let n=this._draggingMouseOffset.e.pageX,r=this._draggingMouseOffset.e.pageY;const o=this._draggingMouseOffset.offset.x,s=this._draggingMouseOffset.offset.y,l=this._draggingMouseOffset.viewport.offset;t&&o&&(o>0?n=l.right+this._moveDistanceForOneCell.x:n=l.left-this._moveDistanceForOneCell.x),e&&s&&(s>0?r=l.top-this._moveDistanceForOneCell.y:r=l.bottom+this._moveDistanceForOneCell.y),this.handleDragTo({pageX:n,pageY:r},this._draggingMouseOffset.dd)}handleDragTo(t,e){var n,r,o,s,l,u;const h=(r=(n=t==null?void 0:t.touches)===null||n===void 0?void 0:n[0])!==null&&r!==void 0?r:t,c=this._grid.getCellFromPoint(h.pageX-((s=(o=Un(this._activeCanvas))===null||o===void 0?void 0:o.left)!==null&&s!==void 0?s:0)+this._columnOffset,h.pageY-((u=(l=Un(this._activeCanvas))===null||l===void 0?void 0:l.top)!==null&&u!==void 0?u:0)+this._rowOffset);if(c!==void 0){if(this._gridOptions.frozenColumn>=0&&(!this._isRightCanvas&&c.cell>this._gridOptions.frozenColumn||this._isRightCanvas&&c.cell<=this._gridOptions.frozenColumn)||this._gridOptions.frozenRow>=0&&(!this._isBottomCanvas&&c.row>=this._gridOptions.frozenRow||this._isBottomCanvas&&c.row<this._gridOptions.frozenRow))return;if(this.addonOptions.autoScroll&&this._draggingMouseOffset){const p=this._grid.getCellNodeBox(c.row,c.cell);if(p){const m=this._draggingMouseOffset.viewport;(p.left<m.left||p.right>m.right||p.top<m.top||p.bottom>m.bottom)&&this._grid.scrollCellIntoView(c.row,c.cell)}}if(!this._grid.canCellBeSelected(c.row,c.cell))return;if(e!=null&&e.range){e.range.end=c;const p=new Slick.Range(e.range.start.row,e.range.start.cell,c.row,c.cell);this._decorator.show(p),this.onCellRangeSelecting.notify({range:p})}}}handleDragEnd(t,e){this._dragging&&(this._dragging=!1,t.stopImmediatePropagation(),this.stopIntervalTimer(),this._decorator.hide(),this.onCellRangeSelected.notify({range:new Slick.Range(e.range.start.row,e.range.start.cell,e.range.end.row,e.range.end.cell)}))}handleDragInit(t){var e,n,r,o;this._activeCanvas=this._grid.getActiveCanvasNode(t),this._activeViewport=this._grid.getActiveViewportNode(t);const s=this._grid.getDisplayedScrollbarDimensions();if(this._viewportWidth=this._activeViewport.offsetWidth-s.width,this._viewportHeight=this._activeViewport.offsetHeight-s.height,this._moveDistanceForOneCell={x:this._grid.getAbsoluteColumnMinWidth()/2,y:this._gridOptions.rowHeight/2},this._rowOffset=0,this._columnOffset=0,this._isBottomCanvas=this._activeCanvas.classList.contains("grid-canvas-bottom"),this._gridOptions.frozenRow>-1&&this._isBottomCanvas){const l=`${this.gridUidSelector} .grid-canvas-${this._gridOptions.frozenBottom?"bottom":"top"}`;this._rowOffset=(n=(e=document.querySelector(l))===null||e===void 0?void 0:e.clientHeight)!==null&&n!==void 0?n:0}this._isRightCanvas=this._activeCanvas.classList.contains("grid-canvas-right"),this._gridOptions.frozenColumn>-1&&this._isRightCanvas&&(this._columnOffset=(o=(r=document.querySelector(`${this.gridUidSelector} .grid-canvas-left`))===null||r===void 0?void 0:r.clientWidth)!==null&&o!==void 0?o:0),t.stopImmediatePropagation(),t.preventDefault()}handleDragStart(t,e){var n,r,o,s;const l=this._grid.getCellFromEvent(t);if(l&&this.onBeforeCellRangeSelected.notify(l).getReturnValue()!==!1&&this._grid.canCellBeSelected(l.row,l.cell)&&(this._dragging=!0,t.stopImmediatePropagation()),!this._dragging)return;this._grid.focus();let u=e.startX-((r=(n=Un(this._canvas))===null||n===void 0?void 0:n.left)!==null&&r!==void 0?r:0);this._gridOptions.frozenColumn>=0&&this._isRightCanvas&&(u+=this._scrollLeft);let h=e.startY-((s=(o=Un(this._canvas))===null||o===void 0?void 0:o.top)!==null&&s!==void 0?s:0);this._gridOptions.frozenRow>=0&&this._isBottomCanvas&&(h+=this._scrollTop);const c=this._grid.getCellFromPoint(u,h);return e.range={start:c,end:{}},this._currentlySelectedRange=e.range,this._decorator.show(new Slick.Range(c.row,c.cell))}handleScroll(t,e){this._scrollTop=e.scrollTop,this._scrollLeft=e.scrollLeft}}class B_{constructor(t){this._cachedPageRowCount=0,this._prevKeyDown="",this._ranges=[],this._defaults={selectActiveCell:!0},this.onSelectedRangesChanged=new Slick.Event,this.pluginName="CellSelectionModel",this._eventHandler=new Slick.EventHandler,t===void 0||t.cellRangeSelector===void 0?this._selector=new rm({selectionCss:{border:"2px solid black"}}):this._selector=t.cellRangeSelector,this._addonOptions=t}get addonOptions(){return this._addonOptions}get cellRangeSelector(){return this._selector}get eventHandler(){return this._eventHandler}init(t){var e;this._grid=t,this.hasDataView()&&(this._dataView=(e=t==null?void 0:t.getData())!==null&&e!==void 0?e:{}),this._addonOptions={...this._defaults,...this._addonOptions},this._eventHandler.subscribe(this._grid.onActiveCellChanged,this.handleActiveCellChange.bind(this)).subscribe(this._grid.onKeyDown,this.handleKeyDown.bind(this)).subscribe(this._selector.onBeforeCellRangeSelected,this.handleBeforeCellRangeSelected.bind(this)).subscribe(this._selector.onCellRangeSelected,this.handleCellRangeSelected.bind(this)),t.registerPlugin(this._selector)}destroy(){this.dispose()}dispose(){var t,e;this._selector&&(this._selector.onBeforeCellRangeSelected.unsubscribe(this.handleBeforeCellRangeSelected.bind(this)),this._selector.onCellRangeSelected.unsubscribe(this.handleCellRangeSelected.bind(this))),this._eventHandler.unsubscribeAll(),(t=this._grid)===null||t===void 0||t.unregisterPlugin(this._selector),(e=this._selector)===null||e===void 0||e.dispose()}getSelectedRanges(){return this._ranges}getViewportRowCount(){var t,e,n;const r=this._grid.getViewportNode(),o=(t=r==null?void 0:r.clientHeight)!==null&&t!==void 0?t:0,s=(n=(e=this._grid.getScrollbarDimensions())===null||e===void 0?void 0:e.height)!==null&&n!==void 0?n:0;return Math.floor((o-s)/this._grid.getOptions().rowHeight)||1}hasDataView(){return!Array.isArray(this._grid.getData())}rangesAreEqual(t,e){let n=t.length!==e.length;if(!n){for(let r=0;r<t.length;r++)if(t[r].fromCell!==e[r].fromCell||t[r].fromRow!==e[r].fromRow||t[r].toCell!==e[r].toCell||t[r].toRow!==e[r].toRow){n=!0;break}}return!n}refreshSelections(){this.setSelectedRanges(this.getSelectedRanges())}removeInvalidRanges(t){const e=[];for(let n=0;n<t.length;n++){const r=t[n];this._grid.canCellBeSelected(r.fromRow,r.fromCell)&&this._grid.canCellBeSelected(r.toRow,r.toCell)&&e.push(r)}return e}resetPageRowCount(){this._cachedPageRowCount=0}setSelectedRanges(t,e="SlickCellSelectionModel.setSelectedRanges"){if((!this._ranges||this._ranges.length===0)&&(!t||t.length===0))return;const n=!this.rangesAreEqual(this._ranges,t);if(this._ranges=this.removeInvalidRanges(t),n){const r=new Slick.EventData;Object.defineProperty(r,"detail",{writable:!0,configurable:!0,value:{caller:e}}),this.onSelectedRangesChanged.notify(this._ranges,r)}}handleActiveCellChange(t,e){var n,r;this._prevSelectedRow=void 0,!((n=this._addonOptions)===null||n===void 0)&&n.selectActiveCell&&e.row!==null&&e.cell!==null?this.setSelectedRanges([new Slick.Range(e.row,e.cell)]):!((r=this._addonOptions)===null||r===void 0)&&r.selectActiveCell||this.setSelectedRanges([])}handleBeforeCellRangeSelected(t){if(this._grid.getEditorLock().isActive())return t.stopPropagation(),!1}handleCellRangeSelected(t,e){this._grid.setActiveCell(e.range.fromRow,e.range.fromCell,!1,!1,!0),this.setSelectedRanges([e.range])}isKeyAllowed(t){return["ArrowLeft","ArrowRight","ArrowUp","ArrowDown","PageDown","PageUp","Home","End"].some(e=>e===t)}handleKeyDown(t){var e;let n,r;const o=this._grid.getActiveCell(),s=t.ctrlKey||t.metaKey;let l=0;if(this._dataView?l=((e=this._dataView)===null||e===void 0?void 0:e.getPagingInfo().pageSize)||this._dataView.getLength():l=this._grid.getDataLength(),o&&t.shiftKey&&!s&&!t.altKey&&this.isKeyAllowed(t.key)&&(n=this.getSelectedRanges().slice(),n.length||n.push(new Slick.Range(o.row,o.cell)),r=n.pop(),typeof(r==null?void 0:r.contains)=="function")){r.contains(o.row,o.cell)||(r=new Slick.Range(o.row,o.cell));let u=r.toRow-r.fromRow,h=r.toCell-r.fromCell;const c=o.row===r.fromRow?1:-1,p=o.cell===r.fromCell?1:-1,m=t.key.startsWith("Arrow");let v=0;m?(t.key==="ArrowLeft"?h-=p:t.key==="ArrowRight"?h+=p:t.key==="ArrowUp"?u-=c:t.key==="ArrowDown"&&(u+=c),v=o.row+c*u):(this._cachedPageRowCount<1&&(this._cachedPageRowCount=this.getViewportRowCount()),this._prevSelectedRow===void 0&&(this._prevSelectedRow=o.row),t.key==="Home"?v=0:t.key==="End"?v=l-1:t.key==="PageUp"?(this._prevSelectedRow>=0&&(v=this._prevSelectedRow-this._cachedPageRowCount),v<0&&(v=0)):t.key==="PageDown"&&(this._prevSelectedRow<=l-1&&(v=this._prevSelectedRow+this._cachedPageRowCount),v>l-1&&(v=l-1)),this._prevSelectedRow=v);const _=new Slick.Range(o.row,o.cell,v,o.cell+p*h);if(this.removeInvalidRanges([_]).length){n.push(_);const C=c>0?_.toRow:_.fromRow,x=p>0?_.toCell:_.fromCell;m?(this._grid.scrollRowIntoView(C),this._grid.scrollCellIntoView(C,x,!1)):(this._grid.scrollRowIntoView(v),this._grid.scrollCellIntoView(v,x,!1))}else n.push(r);this.setSelectedRanges(n),t.preventDefault(),t.stopPropagation(),this._prevKeyDown=t.key}}}class Ch{constructor(t){this._ranges=[],this._defaults={autoScrollWhenDrag:!0,cellRangeSelector:void 0,dragToSelect:!1,selectActiveRow:!0},this.pluginName="RowSelectionModel",this.onSelectedRangesChanged=new Slick.Event,this._eventHandler=new Slick.EventHandler,this._addonOptions={...this._defaults,...t}}get addonOptions(){return this._addonOptions}get eventHandler(){return this._eventHandler}get gridOptions(){return this._grid.getOptions()}init(t){this._grid=t,this._addonOptions={...this._defaults,...this._addonOptions},this._selector=this.addonOptions.cellRangeSelector,!this._selector&&this._addonOptions.dragToSelect&&(this._selector=new rm({selectionCss:{border:"none"},autoScroll:this._addonOptions.autoScrollWhenDrag}),this.addonOptions.cellRangeSelector=this._selector),this._eventHandler.subscribe(this._grid.onActiveCellChanged,this.handleActiveCellChange.bind(this)).subscribe(this._grid.onClick,this.handleClick.bind(this)).subscribe(this._grid.onKeyDown,this.handleKeyDown.bind(this)),this._selector&&(this._grid.registerPlugin(this._selector),this._selector.onCellRangeSelecting.subscribe(this.handleCellRangeSelected.bind(this)),this._selector.onCellRangeSelected.subscribe(this.handleCellRangeSelected.bind(this)),this._selector.onBeforeCellRangeSelected.subscribe(this.handleBeforeCellRangeSelected.bind(this)))}destroy(){this.dispose()}dispose(){this._eventHandler.unsubscribeAll(),this.disposeSelector()}disposeSelector(){var t,e;this._selector&&(this._selector.onCellRangeSelecting.unsubscribe(this.handleCellRangeSelected.bind(this)),this._selector.onCellRangeSelected.unsubscribe(this.handleCellRangeSelected.bind(this)),this._selector.onBeforeCellRangeSelected.unsubscribe(this.handleBeforeCellRangeSelected.bind(this)),this._grid.unregisterPlugin(this._selector),(t=this._selector)===null||t===void 0||t.destroy(),(e=this._selector)===null||e===void 0||e.dispose())}getCellRangeSelector(){return this._selector}getSelectedRanges(){return this._ranges}getSelectedRows(){return this.rangesToRows(this._ranges)}refreshSelections(){this.setSelectedRows(this.getSelectedRows())}setSelectedRows(t){this.setSelectedRanges(this.rowsToRanges(t),"SlickRowSelectionModel.setSelectedRows")}setSelectedRanges(t,e="SlickRowSelectionModel.setSelectedRanges"){if((!this._ranges||this._ranges.length===0)&&(!t||t.length===0))return;this._ranges=t;const n=new Slick.EventData;Object.defineProperty(n,"detail",{writable:!0,configurable:!0,value:{caller:e}}),this.onSelectedRangesChanged.notify(this._ranges,n)}getRowsRange(t,e){let n;const r=[];for(n=t;n<=e;n++)r.push(n);for(n=e;n<t;n++)r.push(n);return r}handleBeforeCellRangeSelected(t,e){var n;let r=!1;if(this.gridOptions.enableRowMoveManager&&(r=(n=this.isHandlerColumn(e.cell))!==null&&n!==void 0?n:!1),this._grid.getEditorLock().isActive()||r)return t.stopPropagation(),!1;this._grid.setActiveCell(e.row,e.cell)}handleCellRangeSelected(t,e){if(!this.gridOptions.multiSelect||!this.addonOptions.selectActiveRow)return!1;this.setSelectedRanges([new Slick.Range(e.range.fromRow,0,e.range.toRow,this._grid.getColumns().length-1)])}handleActiveCellChange(t,e){this._addonOptions.selectActiveRow&&e.row!==null&&this.setSelectedRanges([new Slick.Range(e.row,0,e.row,this._grid.getColumns().length-1)])}handleClick(t){const e=this._grid.getCellFromEvent(t);if(!e||!this._grid.canCellBeActive(e.row,e.cell)||!this.gridOptions.multiSelect||!t.ctrlKey&&!t.shiftKey&&!t.metaKey)return!1;let n=this.rangesToRows(this._ranges);const r=n.indexOf(e.row);if(r===-1&&(t.ctrlKey||t.metaKey))n.push(e.row),this._grid.setActiveCell(e.row,e.cell);else if(r!==-1&&(t.ctrlKey||t.metaKey))n=n.filter(s=>s!==e.row),this._grid.setActiveCell(e.row,e.cell);else if(n.length&&t.shiftKey){const s=n.pop(),l=Math.min(e.row,s),u=Math.max(e.row,s);n=[];for(let h=l;h<=u;h++)h!==s&&n.push(h);n.push(s),this._grid.setActiveCell(e.row,e.cell)}const o=this.rowsToRanges(n);return this.setSelectedRanges(o),t.stopImmediatePropagation(),!0}handleKeyDown(t){const e=this._grid.getActiveCell();if(this.gridOptions.multiSelect&&e&&t.shiftKey&&!t.ctrlKey&&!t.altKey&&!t.metaKey&&(t.which===xi.UP||t.key==="ArrowUp"||t.which===xi.DOWN||t.key==="ArrowDown")){let n=this.getSelectedRows();n.sort((l,u)=>l-u),n.length||(n=[e.row]);let r,o=n[0],s=n[n.length-1];if(t.which===xi.DOWN||t.key==="ArrowDown"?r=e.row<s||o===s?++s:++o:r=e.row<s?--s:--o,r>=0&&r<this._grid.getDataLength()){this._grid.scrollRowIntoView(r);const l=this.rowsToRanges(this.getRowsRange(o,s));this.setSelectedRanges(l)}t.preventDefault(),t.stopPropagation()}}isHandlerColumn(t){const n=this._grid.getColumns()[t].behavior||"";return/move|selectAndMove/.test(n)}rangesToRows(t){const e=[];for(let n=0;n<t.length;n++)for(let r=t[n].fromRow;r<=t[n].toRow;r++)e.push(r);return e}rowsToRanges(t){const e=[],n=this._grid.getColumns().length-1;for(const r of t)e.push(new Slick.Range(r,0,r,n));return e}}class om{constructor(t,e){this.pubSubService=t,this.pluginName="CheckboxSelectColumn",this._defaults={columnId:"_checkbox_selector",cssClass:null,field:"_checkbox_selector",hideSelectAllCheckbox:!1,toolTip:"Select/Deselect All",width:30,applySelectOnAllPages:!0,hideInColumnTitleRow:!1,hideInFilterHeaderRow:!0},this._addonOptions=this._defaults,this._checkboxColumnCellIndex=null,this._isSelectAllChecked=!1,this._isUsingDataView=!1,this._selectedRowsLookup={},this._selectAll_UID=this.createUID(),this._bindEventService=new Fn,this._eventHandler=new Slick.EventHandler,this._addonOptions={...this._defaults,...e}}get addonOptions(){return this._addonOptions}get headerRowNode(){return this._headerRowNode}get gridOptions(){var t,e,n;return(n=(e=(t=this._grid)===null||t===void 0?void 0:t.getOptions)===null||e===void 0?void 0:e.call(t))!==null&&n!==void 0?n:{}}get selectAllUid(){return this._selectAll_UID}set selectedRowsLookup(t){this._selectedRowsLookup=t}init(t){this._grid=t,this._isUsingDataView=!Array.isArray(t.getData()),this._isUsingDataView&&(this._dataView=t.getData()),this.gridOptions.backendServiceApi&&(this._addonOptions.applySelectOnAllPages=!1),this._eventHandler.subscribe(t.onSelectedRowsChanged,this.handleSelectedRowsChanged.bind(this)).subscribe(t.onClick,this.handleClick.bind(this)).subscribe(t.onKeyDown,this.handleKeyDown.bind(this)),this._isUsingDataView&&this._dataView&&this._addonOptions.applySelectOnAllPages&&this._eventHandler.subscribe(this._dataView.onSelectedRowIdsChanged,this.handleDataViewSelectedIdsChanged.bind(this)).subscribe(this._dataView.onPagingInfoChanged,this.handleDataViewSelectedIdsChanged.bind(this)),this._addonOptions.hideInFilterHeaderRow||this.addCheckboxToFilterHeaderRow(t),this._addonOptions.hideInColumnTitleRow||this._eventHandler.subscribe(this._grid.onHeaderClick,this.handleHeaderClick.bind(this)),(!this._rowSelectionModel||!this._grid.getSelectionModel())&&(this._rowSelectionModel=new Ch(this.gridOptions.rowSelectionOptions),this._grid.setSelectionModel(this._rowSelectionModel)),this.gridOptions.preselectedRows&&this._rowSelectionModel&&this._grid.getSelectionModel()&&setTimeout(()=>this.selectRows(this.gridOptions.preselectedRows||[])),typeof this._addonOptions.selectableOverride=="function"&&this.selectableOverride(this._addonOptions.selectableOverride)}dispose(){this._bindEventService.unbindAll(),this._eventHandler.unsubscribeAll()}create(t,e){var n,r;if(this._addonOptions={...this._defaults,...e.checkboxSelector},Array.isArray(t)&&e){const o=this.getColumnDefinition();if(!t.some(s=>s.id===o.id)){const s=(r=(n=e==null?void 0:e.checkboxSelector)===null||n===void 0?void 0:n.columnIndexPosition)!==null&&r!==void 0?r:0;s>0?t.splice(s,0,o):t.unshift(o),this.pubSubService.publish("onPluginColumnsChanged",{columns:t,pluginName:this.pluginName})}}return this}getOptions(){return this._addonOptions}setOptions(t){var e;if(this._addonOptions={...this._addonOptions,...t},this._addonOptions.hideSelectAllCheckbox)this.hideSelectAllFromColumnHeaderTitleRow(),this.hideSelectAllFromColumnHeaderFilterRow();else if(this._addonOptions.hideInColumnTitleRow?this.hideSelectAllFromColumnHeaderTitleRow():(this.renderSelectAllCheckbox(this._isSelectAllChecked),this._eventHandler.subscribe(this._grid.onHeaderClick,this.handleHeaderClick.bind(this))),this._addonOptions.hideInFilterHeaderRow)this.hideSelectAllFromColumnHeaderFilterRow();else{const n=(e=this.headerRowNode)===null||e===void 0?void 0:e.querySelector("#filter-checkbox-selectall-container");if(n){n.style.display="flex",n.ariaChecked=String(this._isSelectAllChecked);const r=n.querySelector('input[type="checkbox"]');r&&(r.ariaChecked=String(this._isSelectAllChecked),r.checked=this._isSelectAllChecked)}}}deSelectRows(t){const e=[];for(const n of t)this._selectedRowsLookup[n]&&(e[e.length]=n);this._grid.setSelectedRows(this._grid.getSelectedRows().filter(n=>e.indexOf(n)<0),"SlickCheckboxSelectColumn.deSelectRows")}selectRows(t){var e;const n=[];for(const o of t)this._selectedRowsLookup[o]&&(n[n.length]=o);const r=(e=this._grid.getSelectedRows())===null||e===void 0?void 0:e.concat(n);this._grid.setSelectedRows(r)}getColumnDefinition(){var t,e;const n=String((e=(t=this._addonOptions)===null||t===void 0?void 0:t.columnId)!==null&&e!==void 0?e:this._defaults.columnId);return{id:n,name:this._addonOptions.hideSelectAllCheckbox||this._addonOptions.hideInColumnTitleRow?"":`<input id="header-selector${this._selectAll_UID}" type="checkbox"><label for="header-selector${this._selectAll_UID}"></label>`,toolTip:this._addonOptions.hideSelectAllCheckbox||this._addonOptions.hideInColumnTitleRow?"":this._addonOptions.toolTip,field:n,cssClass:this._addonOptions.cssClass,excludeFromExport:!0,excludeFromColumnPicker:!0,excludeFromGridMenu:!0,excludeFromQuery:!0,excludeFromHeaderMenu:!0,hideSelectAllCheckbox:this._addonOptions.hideSelectAllCheckbox,resizable:!1,sortable:!1,width:this._addonOptions.width||30,formatter:this.checkboxSelectionFormatter.bind(this)}}hideSelectAllFromColumnHeaderTitleRow(){this._grid.updateColumnHeader(this._addonOptions.columnId||"","","")}hideSelectAllFromColumnHeaderFilterRow(){var t;const e=(t=this.headerRowNode)===null||t===void 0?void 0:t.querySelector("#filter-checkbox-selectall-container");e&&(e.style.display="none")}toggleRowSelection(t){this.toggleRowSelectionWithEvent(null,t)}toggleRowSelectionWithEvent(t,e){const n=this._grid.getDataItem(e);if(!this.checkSelectableOverride(e,n,this._grid))return;const r=this._grid.getSelectedRows();this._addonOptions.onRowToggleStart&&this._addonOptions.onRowToggleStart(t,{row:e,previousSelectedRows:r});const o=this._selectedRowsLookup[e]?this._grid.getSelectedRows().filter(s=>s!==e):this._grid.getSelectedRows().concat(e);this._grid.setSelectedRows(o,"click.toggle"),this._grid.setActiveCell(e,this.getCheckboxColumnCellIndex()),this._addonOptions.onRowToggleEnd&&this._addonOptions.onRowToggleEnd(t,{row:e,previousSelectedRows:r})}selectableOverride(t){this._selectableOverride=t}addCheckboxToFilterHeaderRow(t){this._eventHandler.subscribe(t.onHeaderRowCellRendered,(e,n)=>{if(n.column.field===(this._addonOptions.field||"_checkbox_selector")){sn(n.node);const r=Ie("span",{id:"filter-checkbox-selectall-container",ariaChecked:"false"});r.appendChild(Ie("input",{type:"checkbox",id:`header-filter-selector${this._selectAll_UID}`})),r.appendChild(Ie("label",{htmlFor:`header-filter-selector${this._selectAll_UID}`})),n.node.appendChild(r),this._headerRowNode=n.node,this._bindEventService.bind(r,"click",o=>this.handleHeaderClick(o,n))}})}checkboxSelectionFormatter(t,e,n,r,o,s){if(o&&this.checkSelectableOverride(t,o,s)){const l=this.createUID()+t;return`<input id="selector${l}" type="checkbox" ${this._selectedRowsLookup[t]?'checked="checked" aria-checked="true"':'aria-checked="false"'}><label for="selector${l}"></label>`}return null}checkSelectableOverride(t,e,n){return typeof this._selectableOverride=="function"?this._selectableOverride(t,e,n):!0}createUID(){return Math.round(1e7*Math.random())}getCheckboxColumnCellIndex(){if(this._checkboxColumnCellIndex===null){this._checkboxColumnCellIndex=0;const t=this._grid.getColumns();for(let e=0;e<t.length;e++)t[e].id===this._addonOptions.columnId&&(this._checkboxColumnCellIndex=e)}return this._checkboxColumnCellIndex}handleDataViewSelectedIdsChanged(){var t;const e=this._dataView.getAllSelectedFilteredIds(),n=this._dataView.getFilteredItems();let r=0;if(typeof this._selectableOverride=="function"&&e.length>0)for(let o=0;o<this._dataView.getItemCount();o++){const s=this._dataView.getItemByIdx(o),l=this._dataView.getIdPropertyName(),u=s[l];n.findIndex(c=>c[l]===u)>=0&&!this.checkSelectableOverride(o,s,this._grid)&&r++}if(this._isSelectAllChecked=e.length+r>=n.length,!this._addonOptions.hideInColumnTitleRow&&!this._addonOptions.hideSelectAllCheckbox&&this.renderSelectAllCheckbox(this._isSelectAllChecked),!this._addonOptions.hideInFilterHeaderRow){const o=(t=this.headerRowNode)===null||t===void 0?void 0:t.querySelector(`#header-filter-selector${this._selectAll_UID}`);o&&(o.ariaChecked=String(this._isSelectAllChecked),o.checked=this._isSelectAllChecked)}}handleClick(t,e){if(this._grid.getColumns()[e.cell].id===this._addonOptions.columnId&&t.target.type==="checkbox"){if(t.target.ariaChecked=String(t.target.checked),this._grid.getEditorLock().isActive()&&!this._grid.getEditorLock().commitCurrentEdit()){t.preventDefault(),t.stopImmediatePropagation();return}this.toggleRowSelectionWithEvent(t,e.row),t.stopPropagation(),t.stopImmediatePropagation()}}handleHeaderClick(t,e){if(e.column.id===this._addonOptions.columnId&&t.target.type==="checkbox"){if(t.target.ariaChecked=String(t.target.checked),this._grid.getEditorLock().isActive()&&!this._grid.getEditorLock().commitCurrentEdit()){t.preventDefault(),t.stopImmediatePropagation();return}let n=t.target.checked;const r=n?"click.selectAll":"click.unselectAll",o=this._grid.getSelectedRows();this._addonOptions.onSelectAllToggleStart&&this._addonOptions.onSelectAllToggleStart(t,{previousSelectedRows:o,caller:r});let s=[];if(n){const l=[];for(let u=0;u<this._grid.getDataLength();u++){const h=this._grid.getDataItem(u);!h.__group&&!h.__groupTotals&&this.checkSelectableOverride(u,h,this._grid)&&l.push(u)}s=l,n=!0}if(this._isUsingDataView&&this._dataView&&this._addonOptions.applySelectOnAllPages){const l=[],u=this._dataView.getFilteredItems();for(let h=0;h<u.length;h++){const c=u[h];this.checkSelectableOverride(h,c,this._grid)&&l.push(c[this._dataView.getIdPropertyName()])}this._dataView.setSelectedIds(l,{isRowBeingAdded:n})}this._grid.setSelectedRows(s,r),this._addonOptions.onSelectAllToggleEnd&&this._addonOptions.onSelectAllToggleEnd(t,{rows:s,previousSelectedRows:o,caller:r}),t.stopPropagation(),t.stopImmediatePropagation()}}handleKeyDown(t,e){(t.which===xi.SPACE||t.key===" ")&&this._grid.getColumns()[e.cell].id===this._addonOptions.columnId&&((!this._grid.getEditorLock().isActive()||this._grid.getEditorLock().commitCurrentEdit())&&this.toggleRowSelectionWithEvent(t,e.row),t.preventDefault(),t.stopImmediatePropagation())}handleSelectedRowsChanged(){var t,e;const n=this._grid.getSelectedRows(),r={};let o=0,s=0,l=0,u=0;if(typeof this._selectableOverride=="function")for(l=0;l<this._grid.getDataLength();l++){const c=this._grid.getDataItem(l);this.checkSelectableOverride(s,c,this._grid)||u++}const h=[];for(s=0;s<n.length;s++){o=n[s];const c=this._grid.getDataItem(o);this.checkSelectableOverride(s,c,this._grid)?(r[o]=!0,r[o]!==this._selectedRowsLookup[o]&&(this._grid.invalidateRow(o),delete this._selectedRowsLookup[o])):h.push(o)}for(const c in this._selectedRowsLookup)c!==void 0&&this._grid.invalidateRow(+c);if(this._selectedRowsLookup=r,this._grid.render(),this._isSelectAllChecked=((t=n==null?void 0:n.length)!==null&&t!==void 0?t:0)+u>=this._grid.getDataLength(),(!this._isUsingDataView||!this._addonOptions.applySelectOnAllPages)&&(!this._addonOptions.hideInColumnTitleRow&&!this._addonOptions.hideSelectAllCheckbox&&this.renderSelectAllCheckbox(this._isSelectAllChecked),!this._addonOptions.hideInFilterHeaderRow)){const c=(e=this.headerRowNode)===null||e===void 0?void 0:e.querySelector(`#header-filter-selector${this._selectAll_UID}`);c&&(c.ariaChecked=String(this._isSelectAllChecked),c.checked=this._isSelectAllChecked)}if(h.length>0){for(const c of h){const p=n.indexOf(c);n.splice(p,1)}this._grid.setSelectedRows(n,"click.toggle")}}renderSelectAllCheckbox(t){const e=t?' checked="checked" aria-checked="true"':' aria-checked="false"';this._grid.updateColumnHeader(this._addonOptions.columnId||"",`<input id="header-selector${this._selectAll_UID}" type="checkbox"${e}><label for="header-selector${this._selectAll_UID}"></label>`,this._addonOptions.toolTip)}}class sm extends nu{constructor(t,e,n,r,o){var s,l,u,h;super(t,n,r),this.extensionUtility=t,this.filterService=e,this.pubSubService=n,this.sharedService=r,this.sortService=o,this._areVisibleColumnDifferent=!1,this._columns=[],this._columnCheckboxes=[],this._commandMenuElm=null,this._headerElm=null,this._isMenuOpen=!1,this._subMenuParentId="",this._defaults={dropSide:"left",showButton:!0,hideForceFitButton:!1,hideSyncResizeButton:!1,forceFitTitle:"Force fit columns",marginBottom:15,menuWidth:18,minHeight:250,contentMinWidth:0,resizeOnShowHeaderRow:!1,syncResizeTitle:"Synchronous resize",subMenuOpenByEvent:"mouseover",headerColumnValueExtractor:c=>c.name},this.onAfterMenuShow=new Slick.Event,this.onBeforeMenuShow=new Slick.Event,this.onMenuClose=new Slick.Event,this.onCommand=new Slick.Event,this.onColumnsChanged=new Slick.Event,this._menuCssPrefix="slick-menu",this._menuPluginCssPrefix="slick-grid-menu",this._camelPluginName="gridMenu",this._columns=(s=this.sharedService.allColumns)!==null&&s!==void 0?s:[],this._gridUid=(h=(u=(l=this.grid)===null||l===void 0?void 0:l.getUID)===null||u===void 0?void 0:u.call(l))!==null&&h!==void 0?h:"",this.initEventHandlers(),this.init()}get addonOptions(){return this._addonOptions||{}}get columns(){return this._columns}set columns(t){this._columns=t}get gridOptions(){return this.grid.getOptions()||{}}get gridUidSelector(){return this.gridUid?`.${this.gridUid}`:""}initEventHandlers(){this._eventHandler.subscribe(this.grid.onColumnsReordered,ru.bind(this)),this._eventHandler.subscribe(this.grid.onBeforeDestroy,this.dispose.bind(this)),this._eventHandler.subscribe(this.grid.onSetOptions,(t,e)=>{if(e&&e.optionsBefore&&e.optionsAfter){const n=e.optionsBefore.frozenColumn>=0&&e.optionsAfter.frozenColumn===-1,r=e.optionsBefore.frozenColumn===-1&&e.optionsAfter.frozenColumn>=0;(n||r)&&this.recreateGridMenu()}})}init(){var t;this._gridUid=(t=this.grid.getUID())!==null&&t!==void 0?t:"",this._userOriginalGridMenu={...this.sharedService.gridOptions.gridMenu},this._addonOptions={...this._defaults,...this.getDefaultGridMenuOptions(),...this.sharedService.gridOptions.gridMenu},this.sharedService.gridOptions.gridMenu=this._addonOptions;const e=this._userOriginalGridMenu.commandItems,n=this._userOriginalGridMenu&&Array.isArray(e)?e:[];this._addonOptions.commandItems=[...n,...this.addGridMenuCustomCommands(n)],this.extensionUtility.translateMenuItemsFromTitleKey(this._addonOptions.commandItems||[],"commandItems"),this.extensionUtility.sortItems(this._addonOptions.commandItems,"positionOrder"),this._addonOptions.commandItems=this._addonOptions.commandItems,this.createGridMenu()}dispose(){this.deleteMenu(),super.dispose()}deleteMenu(){var t,e;this._bindEventService.unbindAll(),(t=this._menuElm)===null||t===void 0||t.remove(),(e=this._gridMenuButtonElm)===null||e===void 0||e.remove(),this._headerElm&&(this._headerElm.style.width="100%")}createColumnPickerContainer(){this._menuElm&&(am.call(this,this._menuElm),this._listElm=Ie("div",{className:"slick-column-picker-list",role:"menu"}),this._bindEventService.bind(this._menuElm,"click",dm.bind(this),void 0,"parent-menu"))}createGridMenu(){var t,e,n,r;const o=this._gridUid?`.${this._gridUid}`:"",s=((t=this._addonOptions)===null||t===void 0?void 0:t.menuWidth)||this._defaults.menuWidth,l=this.gridOptions.hasOwnProperty("frozenColumn")&&this.gridOptions.frozenColumn>=0?"right":"left";if(this._headerElm=document.querySelector(`${o} .slick-header-${l}`),this._headerElm&&this._addonOptions){if(this._headerElm.style.width=`calc(100% - ${s}px)`,((e=this._addonOptions.resizeOnShowHeaderRow)!==null&&e!==void 0?e:this._defaults.resizeOnShowHeaderRow)&&this.gridOptions.showHeaderRow){const c=document.querySelector(`${o} .slick-headerrow`);c&&(c.style.width=`calc(100% - ${s}px)`)}((n=this._addonOptions.showButton)!==null&&n!==void 0?n:this._defaults.showButton)&&(this._gridMenuButtonElm=Ie("button",{className:"slick-grid-menu-button",ariaLabel:"Grid Menu"}),!((r=this._addonOptions)===null||r===void 0)&&r.iconCssClass&&this._gridMenuButtonElm.classList.add(...this._addonOptions.iconCssClass.split(" ")),this._headerElm.parentElement.insertBefore(this._gridMenuButtonElm,this._headerElm.parentElement.firstChild),this._bindEventService.bind(this._gridMenuButtonElm,"click",this.showGridMenu.bind(this))),this.sharedService.gridOptions.gridMenu={...this._defaults,...this._addonOptions},this.translateTitleLabels(this._addonOptions),this.translateTitleLabels(this.sharedService.gridOptions.gridMenu),this._bindEventService.bind(document.body,"mousedown",this.handleBodyMouseDown.bind(this),{capture:!0}),this._bindEventService.bind(document.body,"beforeunload",this.dispose.bind(this))}}createCommandMenu(t,e=0,n){const r=n==null?void 0:n.command;let o=e===1&&r?r.replace(/\s/g,""):"";o&&(this._subMenuParentId=o),e>1&&(o=this._subMenuParentId);const s=`${this.menuCssClass} slick-menu-level-${e} ${this._gridUid}`,l=document.body.querySelector(`.${this.menuCssClass}.slick-menu-level-${e}${this.gridUidSelector}`);if(l){if(l.dataset.subMenuParent===o)return l;this.disposeSubMenus()}const u=Ie("div",{role:"menu",className:s,ariaLabel:e>1?"SubMenu":"Grid Menu"});e>0&&(u.classList.add("slick-submenu"),o&&(u.dataset.subMenuParent=o));const h={grid:this.grid,menu:this._menuElm,columns:this.columns,allColumns:this.getAllColumns(),visibleColumns:this.getVisibleColumns(),level:e};return this._commandMenuElm=this.recreateCommandList(t,u,h,n),e++,u}getAllColumns(){return this._columns}getVisibleColumns(){return this.grid.getColumns()}hideMenu(t){var e,n,r;const o={grid:this.grid,menu:this._menuElm,allColumns:this.columns,visibleColumns:this.getVisibleColumns()};if(this.pubSubService.publish("onGridMenuMenuClose",o),!(typeof((e=this._addonOptions)===null||e===void 0?void 0:e.onMenuClose)=="function"&&this._addonOptions.onMenuClose(t,o)===!1||this.onMenuClose.notify(o,null,this).getReturnValue()===!1)){if(this._isMenuOpen=!1,typeof((n=this.grid)===null||n===void 0?void 0:n.autosizeColumns)=="function"){const s=this.grid.getUID()||"";this._areVisibleColumnDifferent&&s&&document.querySelector(`.${s}`)!==null&&(this.gridOptions.enableAutoSizeColumns&&this.grid.autosizeColumns(),this._areVisibleColumnDifferent=!1)}this.disposeSubMenus(),(r=this._menuElm)===null||r===void 0||r.remove(),this._menuElm=null}}recreateGridMenu(){this.deleteMenu(),this.init()}repositionMenu(t,e,n,r){var o,s,l,u,h,c,p,m,v,_,C;const x=(s=(o=t==null?void 0:t.touches)===null||o===void 0?void 0:o[0])!==null&&s!==void 0?s:t,S=e.classList.contains("slick-submenu"),y=S?t.target.closest(".slick-menu-item"):x.target;if(y){const D=n||this._gridMenuButtonElm,A=Un(n),P=Un(y),M=r??this._addonOptions,B=getComputedStyle(D),Q=parseInt((l=B==null?void 0:B.width)!==null&&l!==void 0?l:(u=this._defaults)===null||u===void 0?void 0:u.menuWidth,10),L=(h=e==null?void 0:e.offsetWidth)!==null&&h!==void 0?h:0,le=(p=(c=M==null?void 0:M.contentMinWidth)!==null&&c!==void 0?c:this._defaults.contentMinWidth)!==null&&p!==void 0?p:0,_e=(le>L?le:L)||0,J=(m=A==null?void 0:A.top)!==null&&m!==void 0?m:0,z=(v=A==null?void 0:A.right)!==null&&v!==void 0?v:0;let F,ae;if(S?(ae=(_=P==null?void 0:P.top)!==null&&_!==void 0?_:0,F=(C=P==null?void 0:P.left)!==null&&C!==void 0?C:0):(ae=J+D.offsetHeight,F=(M==null?void 0:M.dropSide)==="right"?z-Q:z-_e),S){const Re=(e==null?void 0:e.clientHeight)||0,{bottom:ne,top:fe}=tu(y);(ne<Re&&fe>ne?"top":"bottom")==="top"?(e.classList.remove("dropdown"),e.classList.add("dropup"),ae-=Re-y.clientHeight):(e.classList.remove("dropup"),e.classList.add("dropdown"))}const qe=this.grid.getGridPosition();let De=F+Number(L);S&&(De+=y.clientWidth);const xe=document.documentElement.clientWidth;(De>=qe.width||De>=xe?"left":"right")==="left"||!S&&(M==null?void 0:M.dropSide)==="left"?(e.classList.remove("dropright"),e.classList.add("dropleft"),S&&(F-=Number(L))):(e.classList.remove("dropleft"),e.classList.add("dropright"),S&&(F+=y.offsetWidth)),e.style.top=`${ae}px`,e.style.left=`${F}px`,le>0&&(e.style.minWidth=`${le}px`),e.style.opacity="1",e.style.display="block"}}openGridMenu(){const t=new MouseEvent("click",{bubbles:!0,cancelable:!0,composed:!1});Object.defineProperty(t,"target",{writable:!0,configurable:!0,value:Ie("button",{className:"slick-grid-menu-button"})}),this.showGridMenu(t)}showGridMenu(t,e){var n,r,o,s;const l=(r=(n=t==null?void 0:t.touches)===null||n===void 0?void 0:n[0])!==null&&r!==void 0?r:t;if(t.preventDefault(),sn(this._menuElm),this._addonOptions){const u={grid:this.grid,menu:this._menuElm,columns:this.columns,allColumns:this.getAllColumns(),visibleColumns:this.getVisibleColumns()},h={...this._addonOptions,...e};if(h&&!this.extensionUtility.runOverrideFunctionWhenExists(h.menuUsabilityOverride,u)||typeof t.stopPropagation=="function"&&(this.pubSubService.publish("onGridMenuBeforeMenuShow",u),typeof(h==null?void 0:h.onBeforeMenuShow)=="function"&&h.onBeforeMenuShow(t,u)===!1||this.onBeforeMenuShow.notify(u,null,this).getReturnValue()===!1))return;this._menuElm=this.createCommandMenu((s=(o=this._addonOptions)===null||o===void 0?void 0:o.commandItems)!==null&&s!==void 0?s:[]),this.createColumnPickerContainer(),ru.call(this),this._columnCheckboxes=[],um.call(this,h),document.body.appendChild(this._menuElm),this._menuElm.style.opacity="0";const c=((h==null?void 0:h.marginBottom)!==void 0?h.marginBottom:this._defaults.marginBottom)||0;this._menuElm.style.minHeight=js(h==null?void 0:h.minHeight,""),(h==null?void 0:h.height)!==void 0?this._menuElm.style.height=js(h.height,""):this._menuElm.style.maxHeight=js(h==null?void 0:h.maxHeight,`${window.innerHeight-l.clientY-c}px`);let p=t.target.nodeName==="BUTTON"?t.target:t.target.querySelector("button");p||(p=t.target.parentElement),this._menuElm.setAttribute("aria-expanded","true"),this._menuElm.appendChild(this._listElm),this.repositionMenu(t,this._menuElm,p,h),this._isMenuOpen=!0,this.pubSubService.publish("onGridMenuAfterMenuShow",u),typeof(h==null?void 0:h.onAfterMenuShow)=="function"&&h.onAfterMenuShow(t,u),this.onAfterMenuShow.notify(u,null,this)}}translateGridMenu(){var t;if(this.sharedService.gridOptions.gridMenu){this.sharedService.gridOptions.gridMenu.commandItems=[],this.sharedService.gridOptions.gridMenu.commandTitle="",this.sharedService.gridOptions.gridMenu.columnTitle="",this.sharedService.gridOptions.gridMenu.forceFitTitle="",this.sharedService.gridOptions.gridMenu.syncResizeTitle="";const e=this._userOriginalGridMenu&&Array.isArray(this._userOriginalGridMenu.commandItems)?this._userOriginalGridMenu.commandItems:[];this.sharedService.gridOptions.gridMenu.commandItems=[...e,...this.addGridMenuCustomCommands(e)],this.extensionUtility.translateMenuItemsFromTitleKey(((t=this._addonOptions)===null||t===void 0?void 0:t.commandItems)||[],"commandItems"),this.extensionUtility.sortItems(this.sharedService.gridOptions.gridMenu.commandItems,"positionOrder"),this.translateTitleLabels(this.sharedService.gridOptions.gridMenu),this.translateTitleLabels(this._addonOptions),this.extensionUtility.translateItems(this._columns,"nameKey","name")}}translateTitleLabels(t){t&&(t.commandTitle=this.extensionUtility.getPickerTitleOutputString("commandTitle","gridMenu"),t.columnTitle=this.extensionUtility.getPickerTitleOutputString("columnTitle","gridMenu"),t.forceFitTitle=this.extensionUtility.getPickerTitleOutputString("forceFitTitle","gridMenu"),t.syncResizeTitle=this.extensionUtility.getPickerTitleOutputString("syncResizeTitle","gridMenu"))}addGridMenuCustomCommands(t){var e,n,r,o,s,l,u,h,c,p,m,v,_;const C=this.gridOptions.backendServiceApi||null,x=[],S=this.gridOptions,y=ao(S),D=(e=this._addonOptions)===null||e===void 0?void 0:e.commandLabels;if(this.gridOptions&&this._addonOptions&&!this._addonOptions.hideClearFrozenColumnsCommand){const P="clear-pinning";t.some(M=>M!=="divider"&&M.hasOwnProperty("command")&&M.command===P)||x.push({iconCssClass:this._addonOptions.iconClearFrozenColumnsCommand||"fa fa-times",titleKey:`${y}${(n=D==null?void 0:D.clearFrozenColumnsCommandKey)!==null&&n!==void 0?n:"CLEAR_PINNING"}`,disabled:!1,command:P,positionOrder:52})}if(this.gridOptions&&this.gridOptions.enableFiltering&&!this.sharedService.hideHeaderRowAfterPageLoad){if(this.gridOptions&&this._addonOptions&&!this._addonOptions.hideClearAllFiltersCommand){const P="clear-filter";t.some(M=>M!=="divider"&&M.hasOwnProperty("command")&&M.command===P)||x.push({iconCssClass:this._addonOptions.iconClearAllFiltersCommand||"fa fa-filter text-danger",titleKey:`${y}${(r=D==null?void 0:D.clearAllFiltersCommandKey)!==null&&r!==void 0?r:"CLEAR_ALL_FILTERS"}`,disabled:!1,command:P,positionOrder:50})}if(this.gridOptions&&this._addonOptions&&!this._addonOptions.hideToggleFilterCommand){const P="toggle-filter";t.some(M=>M!=="divider"&&M.hasOwnProperty("command")&&M.command===P)||x.push({iconCssClass:this._addonOptions.iconToggleFilterCommand||"fa fa-random",titleKey:`${y}${(o=D==null?void 0:D.toggleFilterCommandKey)!==null&&o!==void 0?o:"TOGGLE_FILTER_ROW"}`,disabled:!1,command:P,positionOrder:53})}if(C&&this.gridOptions&&this._addonOptions&&!this._addonOptions.hideRefreshDatasetCommand){const P="refresh-dataset";t.some(M=>M!=="divider"&&M.hasOwnProperty("command")&&M.command===P)||x.push({iconCssClass:this._addonOptions.iconRefreshDatasetCommand||"fa fa-refresh",titleKey:`${y}${(s=D==null?void 0:D.refreshDatasetCommandKey)!==null&&s!==void 0?s:"REFRESH_DATASET"}`,disabled:!1,command:P,positionOrder:57})}}if(this.gridOptions.showPreHeaderPanel&&this.gridOptions&&this._addonOptions&&!this._addonOptions.hideTogglePreHeaderCommand){const P="toggle-preheader";t.some(M=>M!=="divider"&&M.hasOwnProperty("command")&&M.command===P)||x.push({iconCssClass:this._addonOptions.iconTogglePreHeaderCommand||"fa fa-random",titleKey:`${y}${(l=D==null?void 0:D.togglePreHeaderCommandKey)!==null&&l!==void 0?l:"TOGGLE_PRE_HEADER_ROW"}`,disabled:!1,command:P,positionOrder:53})}if(this.gridOptions.enableSorting&&this.gridOptions&&this._addonOptions&&!this._addonOptions.hideClearAllSortingCommand){const P="clear-sorting";t.some(M=>M!=="divider"&&M.hasOwnProperty("command")&&M.command===P)||x.push({iconCssClass:this._addonOptions.iconClearAllSortingCommand||"fa fa-unsorted text-danger",titleKey:`${y}${(u=D==null?void 0:D.clearAllSortingCommandKey)!==null&&u!==void 0?u:"CLEAR_ALL_SORTING"}`,disabled:!1,command:P,positionOrder:51})}if(!((h=this.gridOptions)===null||h===void 0)&&h.enableTextExport&&this._addonOptions&&!this._addonOptions.hideExportCsvCommand){const P="export-csv";t.some(M=>M!=="divider"&&M.hasOwnProperty("command")&&M.command===P)||x.push({iconCssClass:this._addonOptions.iconExportCsvCommand||"fa fa-download",titleKey:`${y}${(c=D==null?void 0:D.exportCsvCommandKey)!==null&&c!==void 0?c:"EXPORT_TO_CSV"}`,disabled:!1,command:P,positionOrder:54})}if(this.gridOptions&&this.gridOptions.enableExcelExport&&this._addonOptions&&!this._addonOptions.hideExportExcelCommand){const P="export-excel";t.some(M=>M!=="divider"&&M.hasOwnProperty("command")&&M.command===P)||x.push({iconCssClass:this._addonOptions.iconExportExcelCommand||"fa fa-file-excel-o text-success",titleKey:`${y}${(p=D==null?void 0:D.exportExcelCommandKey)!==null&&p!==void 0?p:"EXPORT_TO_EXCEL"}`,disabled:!1,command:P,positionOrder:55})}if(!((m=this.gridOptions)===null||m===void 0)&&m.enableTextExport&&this._addonOptions&&!this._addonOptions.hideExportTextDelimitedCommand){const P="export-text-delimited";t.some(M=>M!=="divider"&&M.hasOwnProperty("command")&&M.command===P)||x.push({iconCssClass:this._addonOptions.iconExportTextDelimitedCommand||"fa fa-download",titleKey:`${y}${(v=D==null?void 0:D.exportTextDelimitedCommandKey)!==null&&v!==void 0?v:"EXPORT_TO_TAB_DELIMITED"}`,disabled:!1,command:P,positionOrder:56})}const A=((_=this._addonOptions)===null||_===void 0?void 0:_.commandItems)||[];return this.gridOptions&&this._addonOptions&&(Array.isArray(x)&&x.length>0||Array.isArray(A)&&A.length>0)&&(this._addonOptions.commandTitle=this._addonOptions.commandTitle||this.extensionUtility.getPickerTitleOutputString("commandTitle","gridMenu")),x}executeGridMenuInternalCustomCommands(t,e){var n,r,o,s,l;const u=((n=this.sharedService)===null||n===void 0?void 0:n.externalRegisteredResources)||[];if(e!=null&&e.command)switch(e.command){case"clear-pinning":const h=[...this.sharedService.visibleColumns],c={frozenColumn:-1,frozenRow:-1,frozenBottom:!1,enableMouseWheelScrollHandler:!1};this.grid.setOptions(c),this.sharedService.gridOptions.frozenColumn=c.frozenColumn,this.sharedService.gridOptions.frozenRow=c.frozenRow,this.sharedService.gridOptions.frozenBottom=c.frozenBottom,this.sharedService.gridOptions.enableMouseWheelScrollHandler=c.enableMouseWheelScrollHandler,Array.isArray(h)&&this.grid.setColumns(h),this.gridOptions.enableAutoSizeColumns&&this.grid.autosizeColumns(),this.pubSubService.publish("onGridMenuClearAllPinning");break;case"clear-filter":this.filterService.clearFilters(),this.sharedService.dataView.refresh(),this.pubSubService.publish("onGridMenuClearAllFilters");break;case"clear-sorting":this.sortService.clearSorting(),this.sharedService.dataView.refresh(),this.pubSubService.publish("onGridMenuClearAllSorting");break;case"export-csv":const m=u.find(S=>S.className==="TextExportService");m!=null&&m.exportToFile?m.exportToFile({delimiter:ms.comma,format:un.csv}):console.error("[Slickgrid-Universal] You must register the TextExportService to properly use Export to File in the Grid Menu. Example:: this.gridOptions = { enableTextExport: true, registerExternalResources: [new TextExportService()] };");break;case"export-excel":const v=u.find(S=>S.className==="ExcelExportService");v!=null&&v.exportToExcel?v.exportToExcel():console.error("[Slickgrid-Universal] You must register the ExcelExportService to properly use Export to Excel in the Grid Menu. Example:: this.gridOptions = { enableExcelExport: true, registerExternalResources: [new ExcelExportService()] };");break;case"export-text-delimited":const _=u.find(S=>S.className==="TextExportService");_!=null&&_.exportToFile?_.exportToFile({delimiter:ms.tab,format:un.txt}):console.error("[Slickgrid-Universal] You must register the TextExportService to properly use Export to File in the Grid Menu. Example:: this.gridOptions = { enableTextExport: true, registerExternalResources: [new TextExportService()] };");break;case"toggle-filter":let C=(o=(r=this.gridOptions)===null||r===void 0?void 0:r.showHeaderRow)!==null&&o!==void 0?o:!1;C=!C,this.grid.setHeaderRowVisibility(C),C===!0&&(this.grid.setColumns(this.sharedService.columnDefinitions),this.grid.scrollColumnIntoView(0));break;case"toggle-preheader":const x=(l=(s=this.gridOptions)===null||s===void 0?void 0:s.showPreHeaderPanel)!==null&&l!==void 0?l:!1;this.grid.setPreHeaderPanelVisibility(!x);break;case"refresh-dataset":this.extensionUtility.refreshBackendDataset();break}}getDefaultGridMenuOptions(){return{commandTitle:void 0,columnTitle:this.extensionUtility.getPickerTitleOutputString("columnTitle","gridMenu"),forceFitTitle:this.extensionUtility.getPickerTitleOutputString("forceFitTitle","gridMenu"),syncResizeTitle:this.extensionUtility.getPickerTitleOutputString("syncResizeTitle","gridMenu"),iconCssClass:"fa fa-bars",menuWidth:18,commandItems:[],hideClearAllFiltersCommand:!1,hideRefreshDatasetCommand:!1,hideToggleFilterCommand:!1}}handleBodyMouseDown(t){if(this.menuElement){let e=!1;const n=t.target.closest(`.${this.menuCssClass}`);(this.menuElement.contains(t.target)||n)&&(e=!0),(this._isMenuOpen&&this.menuElement!==t.target&&!e&&!t.defaultPrevented||t.target.className==="close"&&n)&&this.hideMenu(t)}}handleMenuItemCommandClick(t,e,n,r=0){var o,s;if(n!=="divider"&&!n.disabled&&!n.divider)if((n.command||"")&&!n.commandItems){const u={grid:this.grid,command:n.command,item:n,allColumns:this.columns,visibleColumns:this.getVisibleColumns()};this.executeGridMenuInternalCustomCommands(t,u),this.pubSubService.publish("onGridMenuCommand",u),typeof((o=this._addonOptions)===null||o===void 0?void 0:o.onCommand)=="function"&&this._addonOptions.onCommand(t,u),this.onCommand.notify(u,null,this),typeof n.action=="function"&&n.action.call(this,t,u),!(!((s=this._addonOptions)===null||s===void 0)&&s.leaveOpen)&&!t.defaultPrevented&&this.hideMenu(t),t.preventDefault(),t.stopPropagation()}else n.commandItems&&this.repositionSubMenu(t,n,r)}handleMenuItemMouseOver(t,e,n,r=0){n!=="divider"&&!n.disabled&&!n.divider&&(n.commandItems?this.repositionSubMenu(t,n,r):r===0&&this.disposeSubMenus())}recreateCommandList(t,e,n,r){var o;const s=n.level||0;if(t.length>0){const l=Ie("div",{className:`${this._menuCssPrefix}-command-list`,role:"menu"},e);if(s===0){this.populateCommandOrOptionTitle("command",this.addonOptions,l,s);const u=(o=e.querySelector(".slick-command-header"))!==null&&o!==void 0?o:Ie("div",{className:"slick-command-header"});u.classList.add("with-close"),lm.call(this,u),l.appendChild(u)}return r&&s>0&&this.addSubMenuTitleWhenExists(r,l),this.populateCommandOrOptionItems("command",this._addonOptions,l,t,n,this.handleMenuItemCommandClick,this.handleMenuItemMouseOver),l}return null}repositionSubMenu(t,e,n){const r=(e==null?void 0:e.commandItems)||[],o=this.createCommandMenu(r,n+1,e);o.style.display="block",document.body.appendChild(o),this.repositionMenu(t,o)}}function lm(a){const e=Ie("button",{type:"button",className:"close",ariaLabel:"Close",textContent:"",dataset:{dismiss:this instanceof yh?"slick-column-picker":"slick-grid-menu"}});a.appendChild(e)}function am(a){var t,e,n;const r=this;!((t=r.addonOptions)===null||t===void 0)&&t.columnTitle&&(r._columnTitleElm=Ie("div",{className:"slick-menu-title",textContent:(n=(e=r.addonOptions)===null||e===void 0?void 0:e.columnTitle)!==null&&n!==void 0?n:r._defaults.columnTitle},a))}function dm(a){var t,e;const n=this,r=n instanceof yh?"columnPicker":"gridMenu";if(a.target.dataset.option==="autoresize"){const o=n.getVisibleColumns();a.target.ariaChecked=String(a.target.checked);const s=a.target.checked;n.grid.setOptions({forceFitColumns:s}),n.grid.setColumns(o);return}if(a.target.dataset.option==="syncresize"){a.target.ariaChecked=String(a.target.checked),n.grid.setOptions({syncColumnCellResize:!!a.target.checked});return}if(a.target.type==="checkbox"){n._areVisibleColumnDifferent=!0,a.target.ariaChecked=String(a.target.checked);const o=a.target.checked,s=a.target.dataset.columnid||"",l=[];if(n._columnCheckboxes.forEach((c,p)=>{c.checked&&l.push(n.columns[p])}),!l.length){a.target.checked=!0;return}if(n.grid.setColumns(l),(!n.sharedService.visibleColumns||Array.isArray(l)&&l.length!==n.sharedService.visibleColumns.length)&&(n.sharedService.visibleColumns=l),n.gridOptions.enableRowSelection&&o){const c=n.grid.getSelectedRows();n.grid.setSelectedRows(c)}const u=(t=n.gridOptions.frozenColumn)!==null&&t!==void 0?t:-1;u>=0&&n.extensionUtility.readjustFrozenColumnIndexWhenNeeded(u,n.columns,l);const h={columnId:s,showing:o,allColumns:n.columns,visibleColumns:l,columns:l,grid:n.grid};n.pubSubService.publish(`on${yl(r)}ColumnsChanged`,h),typeof((e=n.addonOptions)===null||e===void 0?void 0:e.onColumnsChanged)=="function"&&n.addonOptions.onColumnsChanged(a,h),n.onColumnsChanged.notify(h,null,n)}}function um(a){var t,e;const n=this,r=n instanceof sm?"gridmenu-":"";for(const o of n.columns){const s=o.id,l=document.createElement("li");o.excludeFromColumnPicker&&(l.className="hidden");const u=Ie("input",{type:"checkbox",id:`${n._gridUid}-${r}colpicker-${s}`,dataset:{columnid:`${s}`}});n.grid.getColumnIndex(s)>=0&&(u.ariaChecked="true",u.checked=!0),l.appendChild(u),n._columnCheckboxes.push(u);const p=(typeof(a==null?void 0:a.headerColumnValueExtractor)=="function"?a.headerColumnValueExtractor:n._defaults.headerColumnValueExtractor)(o,n.gridOptions);l.appendChild(Ie("label",{htmlFor:`${n._gridUid}-${r}colpicker-${s}`,innerHTML:Mn(n.gridOptions,p)})),n._listElm.appendChild(l)}if((!a.hideForceFitButton||!a.hideSyncResizeButton)&&n._listElm.appendChild(document.createElement("hr")),!(a!=null&&a.hideForceFitButton)){const o=document.createElement("li");o.appendChild(Ie("input",{type:"checkbox",id:`${n._gridUid}-${r}colpicker-forcefit`,ariaChecked:String(n.gridOptions.forceFitColumns),checked:n.gridOptions.forceFitColumns,dataset:{option:"autoresize"}})),o.appendChild(Ie("label",{htmlFor:`${n._gridUid}-${r}colpicker-forcefit`,textContent:(t=a==null?void 0:a.forceFitTitle)!==null&&t!==void 0?t:""})),n._listElm.appendChild(o)}if(!(a!=null&&a.hideSyncResizeButton)){const o=document.createElement("li");o.appendChild(Ie("input",{type:"checkbox",id:`${n._gridUid}-${r}colpicker-syncresize`,ariaChecked:String(n.gridOptions.syncColumnCellResize),checked:n.gridOptions.syncColumnCellResize,dataset:{option:"syncresize"}})),o.appendChild(Ie("label",{htmlFor:`${n._gridUid}-${r}colpicker-syncresize`,textContent:(e=a==null?void 0:a.syncResizeTitle)!==null&&e!==void 0?e:""})),n._listElm.appendChild(o)}}function ru(){const a=this,t=a.grid.getColumns().slice(0),e=new Array(a.columns.length);for(let n=0;n<e.length;n++)a.grid.getColumnIndex(a.columns[n].id)===void 0?e[n]=a.columns[n]:e[n]=t.shift();a._columns=e}class yh{constructor(t,e,n){var r,o,s,l;this.extensionUtility=t,this.pubSubService=e,this.sharedService=n,this._areVisibleColumnDifferent=!1,this._columns=[],this._gridUid="",this._menuElm=null,this._columnCheckboxes=[],this.onColumnsChanged=new Slick.Event,this._defaults={hideForceFitButton:!1,hideSyncResizeButton:!1,forceFitTitle:"Force fit columns",minHeight:200,syncResizeTitle:"Synchronous resize",headerColumnValueExtractor:u=>u.name},this._bindEventService=new Fn,this._eventHandler=new Slick.EventHandler,this._columns=(r=this.sharedService.allColumns)!==null&&r!==void 0?r:[],this._gridUid=(l=(s=(o=this.grid)===null||o===void 0?void 0:o.getUID)===null||s===void 0?void 0:s.call(o))!==null&&l!==void 0?l:"",this.init()}get addonOptions(){return this.gridOptions.columnPicker||{}}get eventHandler(){return this._eventHandler}get columns(){return this._columns}set columns(t){this._columns=t}get gridOptions(){var t;return(t=this.sharedService.gridOptions)!==null&&t!==void 0?t:{}}get grid(){return this.sharedService.slickGrid}get menuElement(){return this._menuElm}init(){var t;this._gridUid=(t=this.grid.getUID())!==null&&t!==void 0?t:"",this.gridOptions.columnPicker={...this._defaults,...this.gridOptions.columnPicker},this.addonOptions.columnTitle=this.extensionUtility.getPickerTitleOutputString("columnTitle","columnPicker"),this.addonOptions.forceFitTitle=this.extensionUtility.getPickerTitleOutputString("forceFitTitle","columnPicker"),this.addonOptions.syncResizeTitle=this.extensionUtility.getPickerTitleOutputString("syncResizeTitle","columnPicker"),this._eventHandler.subscribe(this.grid.onHeaderContextMenu,this.handleHeaderContextMenu.bind(this)),this._eventHandler.subscribe(this.grid.onColumnsReordered,ru.bind(this)),this._bindEventService.bind(document.body,"mousedown",this.handleBodyMouseDown.bind(this),void 0,"body"),this._bindEventService.bind(document.body,"beforeunload",this.dispose.bind(this),void 0,"body")}dispose(){this._eventHandler.unsubscribeAll(),this._bindEventService.unbindAll(),this.disposeMenu()}disposeMenu(){var t,e;this._bindEventService.unbindAll("parent-menu"),(t=this._listElm)===null||t===void 0||t.remove(),(e=this._menuElm)===null||e===void 0||e.remove(),this._menuElm=null}createPickerMenu(){const t=Ie("div",{ariaExpanded:"true",className:`slick-column-picker ${this._gridUid}`,role:"menu"});return ru.call(this),am.call(this,t),lm.call(this,t),this._listElm=Ie("div",{className:"slick-column-picker-list",role:"menu"}),this._bindEventService.bind(t,"click",dm.bind(this),void 0,"parent-menu"),document.body.appendChild(t),t}getAllColumns(){return this._columns}getVisibleColumns(){return this.grid.getColumns()}translateColumnPicker(){this.addonOptions&&(this.addonOptions.columnTitle="",this.addonOptions.forceFitTitle="",this.addonOptions.syncResizeTitle="",this.addonOptions.columnTitle=this.extensionUtility.getPickerTitleOutputString("columnTitle","columnPicker"),this.addonOptions.forceFitTitle=this.extensionUtility.getPickerTitleOutputString("forceFitTitle","columnPicker"),this.addonOptions.syncResizeTitle=this.extensionUtility.getPickerTitleOutputString("syncResizeTitle","columnPicker")),this.extensionUtility.translateItems(this._columns,"nameKey","name"),this.translateTitleLabels(this.addonOptions)}handleBodyMouseDown(t){var e;(this._menuElm!==t.target&&!(!((e=this._menuElm)===null||e===void 0)&&e.contains(t.target))||t.target.className==="close"&&t.target.closest(".slick-column-picker"))&&this.disposeMenu()}handleHeaderContextMenu(t){t.preventDefault(),sn(this._listElm),this._columnCheckboxes=[],this._menuElm=this.createPickerMenu(),um.call(this,this.addonOptions),document.body.appendChild(this._menuElm),this.repositionMenu(t)}repositionMenu(t){var e,n;const r=(n=(e=t==null?void 0:t.touches)===null||e===void 0?void 0:e[0])!==null&&n!==void 0?n:t;this._menuElm&&(this._menuElm.style.top=`${r.pageY-10}px`,this._menuElm.style.left=`${r.pageX-10}px`,this._menuElm.style.minHeight=js(this.addonOptions.minHeight,""),this._menuElm.style.maxHeight=js(this.addonOptions.maxHeight,`${window.innerHeight-r.clientY}px`),this._menuElm.style.display="block",this._menuElm.setAttribute("aria-expanded","true"),this._menuElm.appendChild(this._listElm))}translateTitleLabels(t){t&&(t.columnTitle=this.extensionUtility.getPickerTitleOutputString("columnTitle","gridMenu"))}}const ou=(a,t,e,n,r,o)=>{const s=n.params||{};if(!s.formatters||!Array.isArray(s.formatters))throw new Error(`The multiple formatter requires the "formatters" to be provided as a column params.
    For example: this.columnDefinitions = [{ id: title, field: title, formatter: Formatters.multiple, params: { formatters: [Formatters.lowercase, Formatters.uppercase] }`);const l=s.formatters;let u=e;for(const h of l)u=h.call(globalThis,a,t,u,n,r,o);return u},Eh=$s||ps;function cm(a,t){if(Array.isArray(a)){for(const e of a)if(e.editor)if(e.formatter&&e.formatter!==ou&&e.formatter!==t){const n=e.formatter;e.formatter=ou,e.params={...e.params,formatters:[n,t]}}else e.formatter&&e.formatter===ou&&e.params?e.params.formatters.findIndex(n=>n===t)===-1&&(e.params.formatters=[...e.params.formatters,t]):e.formatter=t}}function cn(a,t,e,n){let r,o,s="",l="";switch(e){case"currency":r=je.DEFAULT_FORMATTER_CURRENCY_MIN_DECIMAL,o=je.DEFAULT_FORMATTER_CURRENCY_MAX_DECIMAL;break;case"decimal":r=je.DEFAULT_FORMATTER_NUMBER_MIN_DECIMAL,o=je.DEFAULT_FORMATTER_NUMBER_MAX_DECIMAL;break;case"percent":r=je.DEFAULT_FORMATTER_PERCENT_MIN_DECIMAL,o=je.DEFAULT_FORMATTER_PERCENT_MAX_DECIMAL;break}const u=t&&typeof t.getOptions=="function"?t.getOptions():{},h=Ko("minDecimal",a,u,r),c=Ko("maxDecimal",a,u,o),p=Ko("decimalSeparator",a,u,je.DEFAULT_NUMBER_DECIMAL_SEPARATOR),m=Ko("thousandSeparator",a,u,je.DEFAULT_NUMBER_THOUSAND_SEPARATOR),v=Ko("displayNegativeNumberWithParentheses",a,u,je.DEFAULT_NEGATIVE_NUMBER_WRAPPED_IN_BRAQUET),_=Ko("currencyPrefix",a,u,""),C=Ko("currencySuffix",a,u,"");return n==="cell"&&(s=Ko("numberPrefix",a,u,""),l=Ko("numberSuffix",a,u,"")),{minDecimal:h,maxDecimal:c,decimalSeparator:p,thousandSeparator:m,wrapNegativeNumber:v,currencyPrefix:_,currencySuffix:C,numberPrefix:s,numberSuffix:l}}function Ko(a,t,e,n){var r;const o=t&&t.params;return o&&o.hasOwnProperty(a)?o[a]:!((r=e==null?void 0:e.formatterOptions)===null||r===void 0)&&r.hasOwnProperty(a)?e.formatterOptions[a]:n}function hn(a,t){const e=Fr(a);return(n,r,o,s,l,u)=>{var h,c,p,m,v;const _=u&&typeof u.getOptions=="function"?u.getOptions():{},C=(c=(h=_==null?void 0:_.formatterOptions)===null||h===void 0?void 0:h.dateSeparator)!==null&&c!==void 0?c:t,x=(p=s==null?void 0:s.type)!==null&&p!==void 0?p:ie.date,S=Fr(x),y=(v=(m=s==null?void 0:s.params)===null||m===void 0?void 0:m.parseDateAsUtc)!==null&&v!==void 0?v:!1,D=Eh(o,S,!1).isValid();let A=o;if(o&&D&&(A=y?Eh.utc(o).format(e):Eh(o).format(e)),A&&C!==t){const P=new RegExp(t,"ig");A=A.replace(P,C)}return A}}function Sh(a,t,e,n,r,o){let s=!1;e!=null&&e.hasOwnProperty("exportWithFormatter")?s=!!e.exportWithFormatter:o!=null&&o.hasOwnProperty("exportWithFormatter")&&(s=!!o.exportWithFormatter);let l;n&&e.exportCustomFormatter?l=e.exportCustomFormatter:s&&e.formatter&&(l=e.formatter);const u=su(l,a,t,e,n,r);return o!=null&&o.sanitizeDataExport&&typeof u=="string"?sr(u):u}function su(a,t,e,n,r,o){let s="",u=n.field||n.id||"";if(typeof n.field=="string"&&n.field.indexOf(".")>0){const c=n.field.split(".");u=c.length>0?c[0]:n.field}const h=r!=null&&r.hasOwnProperty(u)?r[u]:null;if(typeof a=="function"){const c=a(t,e,h,n,r,o);s=c,c&&typeof c=="object"&&c.hasOwnProperty("text")&&(s=c.text),s==null&&(s="")}else s=r!=null&&r.hasOwnProperty(u)?h:"",s==null&&(s="");return typeof s=="object"&&!(s instanceof Date)&&Object.entries(s).length===0&&(s=""),s}class V_ extends nm{constructor(t,e,n,r){super(t,e,n),this.extensionUtility=t,this.pubSubService=e,this.sharedService=n,this.treeDataService=r,this._defaults={autoAdjustDrop:!0,autoAlignSide:!0,autoAdjustDropOffset:0,autoAlignSideOffset:0,hideMenuOnScroll:!1,optionShownOverColumnIds:[],commandShownOverColumnIds:[],subMenuOpenByEvent:"mouseover"},this.pluginName="ContextMenu",this._camelPluginName="contextMenu",this._menuCssPrefix="slick-menu",this._menuPluginCssPrefix="slick-context-menu",this.init(n.gridOptions.contextMenu)}init(t){this._addonOptions={...this._defaults,...t};const e=this._addonOptions&&Array.isArray(this._addonOptions.commandItems)?this._addonOptions.commandItems:[];this._addonOptions.commandItems=[...e,...this.addMenuCustomCommands(e)],this._addonOptions={...this._addonOptions},this.sharedService.gridOptions.contextMenu=this._addonOptions,this.sortMenuItems(),this._eventHandler.subscribe(this.grid.onContextMenu,this.handleOnContextMenu.bind(this)),this._addonOptions.hideMenuOnScroll&&this._eventHandler.subscribe(this.grid.onScroll,this.closeMenu.bind(this))}translateContextMenu(){var t,e;const n=(e=(t=this.sharedService)===null||t===void 0?void 0:t.gridOptions)!==null&&e!==void 0?e:{},r=this.sharedService.gridOptions.contextMenu;if(r&&(n!=null&&n.enableTranslate)){const o=r.commandItems||[],s=r.optionItems||[];r.commandTitleKey&&(r.commandTitle=this.extensionUtility.translateWhenEnabledAndServiceExist(r.commandTitleKey,"TEXT_COMMANDS")||r.commandTitle),r.optionTitleKey&&(r.optionTitle=this.extensionUtility.translateWhenEnabledAndServiceExist(r.optionTitleKey,"TEXT_COMMANDS")||r.optionTitle),this.extensionUtility.translateMenuItemsFromTitleKey(o,"commandItems"),this.extensionUtility.translateMenuItemsFromTitleKey(s,"optionItems")}}handleOnContextMenu(t,e){this.disposeAllMenus();const n=this.grid.getCellFromEvent(t);if(n){const r=this.grid.getDataItem(n.row),o=this.grid.getColumns()[n.cell];if(e=e||{},e.cell=n.cell,e.row=n.row,e.column=o,e.dataContext=r,e.grid=this.grid,!this.extensionUtility.runOverrideFunctionWhenExists(this._addonOptions.menuUsabilityOverride,e))return;this._menuElm=this.createParentMenu(t),this._menuElm&&t.preventDefault(),this._menuElm&&(this.repositionMenu(t,this._menuElm),this._menuElm.setAttribute("aria-expanded","true"),this._menuElm.style.display="block"),this._bindEventService.bind(document.body,"mousedown",this.handleBodyMouseDown.bind(this),{capture:!0})}}addMenuCustomCommands(t){var e;const n=[],r=this.sharedService&&this.sharedService.gridOptions||{},o=r==null?void 0:r.contextMenu,s=(e=this.sharedService)===null||e===void 0?void 0:e.dataView,l=ao(r);if(o&&!o.hideCopyCellValueCommand){const u="copy";t.some(h=>h!=="divider"&&h.hasOwnProperty("command")&&h.command===u)||n.push({iconCssClass:o.iconCopyCellValueCommand||"fa fa-clone",titleKey:`${l}COPY`,disabled:!1,command:u,positionOrder:50,action:(h,c)=>{this.copyToClipboard(c)},itemUsabilityOverride:h=>{const c=h==null?void 0:h.column,p=h==null?void 0:h.dataContext;if(typeof c.queryFieldNameGetterFn=="function"){const m=Va(c,p,"");if(m!==""&&m!==void 0)return!0}else if(c&&p.hasOwnProperty(c.field))return p[c.field]!==""&&p[c.field]!==null&&p[c.field]!==void 0;return!1}})}if(r!=null&&r.enableTextExport&&o&&!o.hideExportCsvCommand){const u="export-csv";t.some(h=>h!=="divider"&&h.hasOwnProperty("command")&&h.command===u)||n.push({iconCssClass:o.iconExportCsvCommand||"fa fa-download",titleKey:`${l}EXPORT_TO_CSV`,disabled:!1,command:u,positionOrder:51,action:()=>{var h;const p=(((h=this.sharedService)===null||h===void 0?void 0:h.externalRegisteredResources)||[]).find(m=>m.className==="TextExportService");if(p!=null&&p.exportToFile)p.exportToFile({delimiter:ms.comma,format:un.csv});else throw new Error("[Slickgrid-Universal] You must register the TextExportService to properly use Export to File in the Context Menu. Example:: this.gridOptions = { enableTextExport: true, registerExternalResources: [new TextExportService()] };")}})}if(r&&r.enableExcelExport&&o&&!o.hideExportExcelCommand){const u="export-excel";t.some(h=>h!=="divider"&&h.hasOwnProperty("command")&&h.command===u)||n.push({iconCssClass:o.iconExportExcelCommand||"fa fa-file-excel-o text-success",titleKey:`${l}EXPORT_TO_EXCEL`,disabled:!1,command:u,positionOrder:52,action:()=>{var h;const p=(((h=this.sharedService)===null||h===void 0?void 0:h.externalRegisteredResources)||[]).find(m=>m.className==="ExcelExportService");if(p!=null&&p.exportToExcel)p.exportToExcel();else throw new Error("[Slickgrid-Universal] You must register the ExcelExportService to properly use Export to Excel in the Context Menu. Example:: this.gridOptions = { enableExcelExport: true, registerExternalResources: [new ExcelExportService()] };")}})}if(r!=null&&r.enableTextExport&&o&&!o.hideExportTextDelimitedCommand){const u="export-text-delimited";t.some(h=>h!=="divider"&&h.hasOwnProperty("command")&&h.command===u)||n.push({iconCssClass:o.iconExportTextDelimitedCommand||"fa fa-download",titleKey:`${l}EXPORT_TO_TAB_DELIMITED`,disabled:!1,command:u,positionOrder:53,action:()=>{var h;const p=(((h=this.sharedService)===null||h===void 0?void 0:h.externalRegisteredResources)||[]).find(m=>m.className==="TextExportService");if(p!=null&&p.exportToFile)p.exportToFile({delimiter:ms.tab,format:un.txt});else throw new Error("[Slickgrid-Universal] You must register the TextExportService to properly use Export to File in the Context Menu. Example:: this.gridOptions = { enableTextExport: true, registerExternalResources: [new TextExportService()] };")}})}if(r&&(r.enableGrouping||r.enableDraggableGrouping||r.enableTreeData)){if(o&&!o.hideCopyCellValueCommand&&n.push({divider:!0,command:"",positionOrder:54}),r&&!r.enableTreeData&&o&&!o.hideClearAllGrouping){const u="clear-grouping";t.some(h=>h!=="divider"&&h.hasOwnProperty("command")&&h.command===u)||n.push({iconCssClass:o.iconClearGroupingCommand||"fa fa-times",titleKey:`${l}CLEAR_ALL_GROUPING`,disabled:!1,command:u,positionOrder:55,action:()=>{s.setGrouping([]),this.pubSubService.publish("onContextMenuClearGrouping")},itemUsabilityOverride:()=>{const h=s&&s.getGrouping&&s.getGrouping();return Array.isArray(h)&&h.length>0}})}if(r&&o&&!o.hideCollapseAllGroups){const u="collapse-all-groups";t.some(h=>h!=="divider"&&h.hasOwnProperty("command")&&h.command===u)||n.push({iconCssClass:o.iconCollapseAllGroupsCommand||"fa fa-compress",titleKey:`${l}COLLAPSE_ALL_GROUPS`,disabled:!1,command:u,positionOrder:56,action:()=>{r.enableTreeData?this.treeDataService.toggleTreeDataCollapse(!0):s.collapseAllGroups(),this.pubSubService.publish("onContextMenuCollapseAllGroups")},itemUsabilityOverride:()=>{if(r.enableTreeData)return!0;const h=s&&s.getGrouping&&s.getGrouping();return Array.isArray(h)&&h.length>0}})}if(r&&o&&!o.hideExpandAllGroups){const u="expand-all-groups";t.some(h=>h!=="divider"&&h.hasOwnProperty("command")&&h.command===u)||n.push({iconCssClass:o.iconExpandAllGroupsCommand||"fa fa-expand",titleKey:`${l}EXPAND_ALL_GROUPS`,disabled:!1,command:u,positionOrder:57,action:()=>{r.enableTreeData?this.treeDataService.toggleTreeDataCollapse(!1):s.expandAllGroups(),this.pubSubService.publish("onContextMenuExpandAllGroups")},itemUsabilityOverride:()=>{if(r.enableTreeData)return!0;const h=s&&s.getGrouping&&s.getGrouping();return Array.isArray(h)&&h.length>0}})}}return this.extensionUtility.translateMenuItemsFromTitleKey(n),n}copyToClipboard(t){var e,n,r,o,s;try{if(t&&t.grid&&t.command){const l=(n=(e=this.sharedService)===null||e===void 0?void 0:e.gridOptions)!==null&&n!==void 0?n:{},u=(r=t==null?void 0:t.cell)!==null&&r!==void 0?r:0,h=(o=t==null?void 0:t.row)!==null&&o!==void 0?o:0,c=t==null?void 0:t.column,p=t==null?void 0:t.dataContext,m=(s=this.sharedService)===null||s===void 0?void 0:s.slickGrid,v=l&&(l.excelExportOptions||l.textExportOptions);let _=Sh(h,u,c,p,m,v);typeof c.queryFieldNameGetterFn=="function"&&(_=Va(c,p,""));let C=_;typeof _=="string"&&(C=_.replace(/^([||]\s*)|([||])\s*/gi,"").replace(/[\u00b7|\u034f]/gi,"").trim());const x=document.createElement("textarea");x&&document.body&&(x.style.position="absolute",x.style.opacity="0",x.value=C,document.body.appendChild(x),x.select(),document.execCommand("copy",!1,C)&&x.remove())}}catch{}}sortMenuItems(){var t,e;const n=(e=(t=this.sharedService)===null||t===void 0?void 0:t.gridOptions)===null||e===void 0?void 0:e.contextMenu;n&&(this.extensionUtility.sortItems(n.commandItems||[],"positionOrder"),this.extensionUtility.sortItems(n.optionItems||[],"positionOrder"))}}/**!
 * Sortable 1.15.0
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function hm(a,t){var e=Object.keys(a);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(a);t&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(a,r).enumerable})),e.push.apply(e,n)}return e}function Zo(a){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?hm(Object(e),!0).forEach(function(n){z_(a,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(e)):hm(Object(e)).forEach(function(n){Object.defineProperty(a,n,Object.getOwnPropertyDescriptor(e,n))})}return a}function lu(a){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?lu=function(t){return typeof t}:lu=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},lu(a)}function z_(a,t,e){return t in a?Object.defineProperty(a,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):a[t]=e,a}function ho(){return ho=Object.assign||function(a){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(a[n]=e[n])}return a},ho.apply(this,arguments)}function U_(a,t){if(a==null)return{};var e={},n=Object.keys(a),r,o;for(o=0;o<n.length;o++)r=n[o],!(t.indexOf(r)>=0)&&(e[r]=a[r]);return e}function G_(a,t){if(a==null)return{};var e=U_(a,t),n,r;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(a);for(r=0;r<o.length;r++)n=o[r],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(a,n)&&(e[n]=a[n])}return e}function W_(a){return $_(a)||Y_(a)||j_(a)||X_()}function $_(a){if(Array.isArray(a))return wh(a)}function Y_(a){if(typeof Symbol<"u"&&a[Symbol.iterator]!=null||a["@@iterator"]!=null)return Array.from(a)}function j_(a,t){if(a){if(typeof a=="string")return wh(a,t);var e=Object.prototype.toString.call(a).slice(8,-1);if(e==="Object"&&a.constructor&&(e=a.constructor.name),e==="Map"||e==="Set")return Array.from(a);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return wh(a,t)}}function wh(a,t){(t==null||t>a.length)&&(t=a.length);for(var e=0,n=new Array(t);e<t;e++)n[e]=a[e];return n}function X_(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var q_="1.15.0";function bs(a){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(a)}var Cs=bs(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),Xa=bs(/Edge/i),fm=bs(/firefox/i),qa=bs(/safari/i)&&!bs(/chrome/i)&&!bs(/android/i),pm=bs(/iP(ad|od|hone)/i),mm=bs(/chrome/i)&&bs(/android/i),vm={capture:!1,passive:!1};function bi(a,t,e){a.addEventListener(t,e,!Cs&&vm)}function vi(a,t,e){a.removeEventListener(t,e,!Cs&&vm)}function au(a,t){if(t){if(t[0]===">"&&(t=t.substring(1)),a)try{if(a.matches)return a.matches(t);if(a.msMatchesSelector)return a.msMatchesSelector(t);if(a.webkitMatchesSelector)return a.webkitMatchesSelector(t)}catch{return!1}return!1}}function K_(a){return a.host&&a!==document&&a.host.nodeType?a.host:a.parentNode}function Po(a,t,e,n){if(a){e=e||document;do{if(t!=null&&(t[0]===">"?a.parentNode===e&&au(a,t):au(a,t))||n&&a===e)return a;if(a===e)break}while(a=K_(a))}return null}var gm=/\s+/g;function Cn(a,t,e){if(a&&t)if(a.classList)a.classList[e?"add":"remove"](t);else{var n=(" "+a.className+" ").replace(gm," ").replace(" "+t+" "," ");a.className=(n+(e?" "+t:"")).replace(gm," ")}}function Pt(a,t,e){var n=a&&a.style;if(n){if(e===void 0)return document.defaultView&&document.defaultView.getComputedStyle?e=document.defaultView.getComputedStyle(a,""):a.currentStyle&&(e=a.currentStyle),t===void 0?e:e[t];!(t in n)&&t.indexOf("webkit")===-1&&(t="-webkit-"+t),n[t]=e+(typeof e=="string"?"":"px")}}function Sl(a,t){var e="";if(typeof a=="string")e=a;else do{var n=Pt(a,"transform");n&&n!=="none"&&(e=n+" "+e)}while(!t&&(a=a.parentNode));var r=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return r&&new r(e)}function _m(a,t,e){if(a){var n=a.getElementsByTagName(t),r=0,o=n.length;if(e)for(;r<o;r++)e(n[r],r);return n}return[]}function Qo(){var a=document.scrollingElement;return a||document.documentElement}function fn(a,t,e,n,r){if(!(!a.getBoundingClientRect&&a!==window)){var o,s,l,u,h,c,p;if(a!==window&&a.parentNode&&a!==Qo()?(o=a.getBoundingClientRect(),s=o.top,l=o.left,u=o.bottom,h=o.right,c=o.height,p=o.width):(s=0,l=0,u=window.innerHeight,h=window.innerWidth,c=window.innerHeight,p=window.innerWidth),(t||e)&&a!==window&&(r=r||a.parentNode,!Cs))do if(r&&r.getBoundingClientRect&&(Pt(r,"transform")!=="none"||e&&Pt(r,"position")!=="static")){var m=r.getBoundingClientRect();s-=m.top+parseInt(Pt(r,"border-top-width")),l-=m.left+parseInt(Pt(r,"border-left-width")),u=s+o.height,h=l+o.width;break}while(r=r.parentNode);if(n&&a!==window){var v=Sl(r||a),_=v&&v.a,C=v&&v.d;v&&(s/=C,l/=_,p/=_,c/=C,u=s+c,h=l+p)}return{top:s,left:l,bottom:u,right:h,width:p,height:c}}}function bm(a,t,e){for(var n=Xs(a,!0),r=fn(a)[t];n;){var o=fn(n)[e],s=void 0;if(e==="top"||e==="left"?s=r>=o:s=r<=o,!s)return n;if(n===Qo())break;n=Xs(n,!1)}return!1}function ta(a,t,e,n){for(var r=0,o=0,s=a.children;o<s.length;){if(s[o].style.display!=="none"&&s[o]!==Gt.ghost&&(n||s[o]!==Gt.dragged)&&Po(s[o],e.draggable,a,!1)){if(r===t)return s[o];r++}o++}return null}function xh(a,t){for(var e=a.lastElementChild;e&&(e===Gt.ghost||Pt(e,"display")==="none"||t&&!au(e,t));)e=e.previousElementSibling;return e||null}function xn(a,t){var e=0;if(!a||!a.parentNode)return-1;for(;a=a.previousElementSibling;)a.nodeName.toUpperCase()!=="TEMPLATE"&&a!==Gt.clone&&(!t||au(a,t))&&e++;return e}function Cm(a){var t=0,e=0,n=Qo();if(a)do{var r=Sl(a),o=r.a,s=r.d;t+=a.scrollLeft*o,e+=a.scrollTop*s}while(a!==n&&(a=a.parentNode));return[t,e]}function Z_(a,t){for(var e in a)if(a.hasOwnProperty(e)){for(var n in t)if(t.hasOwnProperty(n)&&t[n]===a[e][n])return Number(e)}return-1}function Xs(a,t){if(!a||!a.getBoundingClientRect)return Qo();var e=a,n=!1;do if(e.clientWidth<e.scrollWidth||e.clientHeight<e.scrollHeight){var r=Pt(e);if(e.clientWidth<e.scrollWidth&&(r.overflowX=="auto"||r.overflowX=="scroll")||e.clientHeight<e.scrollHeight&&(r.overflowY=="auto"||r.overflowY=="scroll")){if(!e.getBoundingClientRect||e===document.body)return Qo();if(n||t)return e;n=!0}}while(e=e.parentNode);return Qo()}function Q_(a,t){if(a&&t)for(var e in t)t.hasOwnProperty(e)&&(a[e]=t[e]);return a}function Th(a,t){return Math.round(a.top)===Math.round(t.top)&&Math.round(a.left)===Math.round(t.left)&&Math.round(a.height)===Math.round(t.height)&&Math.round(a.width)===Math.round(t.width)}var Ka;function ym(a,t){return function(){if(!Ka){var e=arguments,n=this;e.length===1?a.call(n,e[0]):a.apply(n,e),Ka=setTimeout(function(){Ka=void 0},t)}}}function J_(){clearTimeout(Ka),Ka=void 0}function Em(a,t,e){a.scrollLeft+=t,a.scrollTop+=e}function Oh(a){var t=window.Polymer,e=window.jQuery||window.Zepto;return t&&t.dom?t.dom(a).cloneNode(!0):e?e(a).clone(!0)[0]:a.cloneNode(!0)}function Sm(a,t){Pt(a,"position","absolute"),Pt(a,"top",t.top),Pt(a,"left",t.left),Pt(a,"width",t.width),Pt(a,"height",t.height)}function Ah(a){Pt(a,"position",""),Pt(a,"top",""),Pt(a,"left",""),Pt(a,"width",""),Pt(a,"height","")}var fr="Sortable"+new Date().getTime();function e0(){var a=[],t;return{captureAnimationState:function(){if(a=[],!!this.options.animation){var n=[].slice.call(this.el.children);n.forEach(function(r){if(!(Pt(r,"display")==="none"||r===Gt.ghost)){a.push({target:r,rect:fn(r)});var o=Zo({},a[a.length-1].rect);if(r.thisAnimationDuration){var s=Sl(r,!0);s&&(o.top-=s.f,o.left-=s.e)}r.fromRect=o}})}},addAnimationState:function(n){a.push(n)},removeAnimationState:function(n){a.splice(Z_(a,{target:n}),1)},animateAll:function(n){var r=this;if(!this.options.animation){clearTimeout(t),typeof n=="function"&&n();return}var o=!1,s=0;a.forEach(function(l){var u=0,h=l.target,c=h.fromRect,p=fn(h),m=h.prevFromRect,v=h.prevToRect,_=l.rect,C=Sl(h,!0);C&&(p.top-=C.f,p.left-=C.e),h.toRect=p,h.thisAnimationDuration&&Th(m,p)&&!Th(c,p)&&(_.top-p.top)/(_.left-p.left)===(c.top-p.top)/(c.left-p.left)&&(u=i0(_,m,v,r.options)),Th(p,c)||(h.prevFromRect=c,h.prevToRect=p,u||(u=r.options.animation),r.animate(h,_,p,u)),u&&(o=!0,s=Math.max(s,u),clearTimeout(h.animationResetTimer),h.animationResetTimer=setTimeout(function(){h.animationTime=0,h.prevFromRect=null,h.fromRect=null,h.prevToRect=null,h.thisAnimationDuration=null},u),h.thisAnimationDuration=u)}),clearTimeout(t),o?t=setTimeout(function(){typeof n=="function"&&n()},s):typeof n=="function"&&n(),a=[]},animate:function(n,r,o,s){if(s){Pt(n,"transition",""),Pt(n,"transform","");var l=Sl(this.el),u=l&&l.a,h=l&&l.d,c=(r.left-o.left)/(u||1),p=(r.top-o.top)/(h||1);n.animatingX=!!c,n.animatingY=!!p,Pt(n,"transform","translate3d("+c+"px,"+p+"px,0)"),this.forRepaintDummy=t0(n),Pt(n,"transition","transform "+s+"ms"+(this.options.easing?" "+this.options.easing:"")),Pt(n,"transform","translate3d(0,0,0)"),typeof n.animated=="number"&&clearTimeout(n.animated),n.animated=setTimeout(function(){Pt(n,"transition",""),Pt(n,"transform",""),n.animated=!1,n.animatingX=!1,n.animatingY=!1},s)}}}}function t0(a){return a.offsetWidth}function i0(a,t,e,n){return Math.sqrt(Math.pow(t.top-a.top,2)+Math.pow(t.left-a.left,2))/Math.sqrt(Math.pow(t.top-e.top,2)+Math.pow(t.left-e.left,2))*n.animation}var ia=[],kh={initializeByDefault:!0},Za={mount:function(t){for(var e in kh)kh.hasOwnProperty(e)&&!(e in t)&&(t[e]=kh[e]);ia.forEach(function(n){if(n.pluginName===t.pluginName)throw"Sortable: Cannot mount plugin ".concat(t.pluginName," more than once")}),ia.push(t)},pluginEvent:function(t,e,n){var r=this;this.eventCanceled=!1,n.cancel=function(){r.eventCanceled=!0};var o=t+"Global";ia.forEach(function(s){e[s.pluginName]&&(e[s.pluginName][o]&&e[s.pluginName][o](Zo({sortable:e},n)),e.options[s.pluginName]&&e[s.pluginName][t]&&e[s.pluginName][t](Zo({sortable:e},n)))})},initializePlugins:function(t,e,n,r){ia.forEach(function(l){var u=l.pluginName;if(!(!t.options[u]&&!l.initializeByDefault)){var h=new l(t,e,t.options);h.sortable=t,h.options=t.options,t[u]=h,ho(n,h.defaults)}});for(var o in t.options)if(t.options.hasOwnProperty(o)){var s=this.modifyOption(t,o,t.options[o]);typeof s<"u"&&(t.options[o]=s)}},getEventProperties:function(t,e){var n={};return ia.forEach(function(r){typeof r.eventProperties=="function"&&ho(n,r.eventProperties.call(e[r.pluginName],t))}),n},modifyOption:function(t,e,n){var r;return ia.forEach(function(o){t[o.pluginName]&&o.optionListeners&&typeof o.optionListeners[e]=="function"&&(r=o.optionListeners[e].call(t[o.pluginName],n))}),r}};function Qa(a){var t=a.sortable,e=a.rootEl,n=a.name,r=a.targetEl,o=a.cloneEl,s=a.toEl,l=a.fromEl,u=a.oldIndex,h=a.newIndex,c=a.oldDraggableIndex,p=a.newDraggableIndex,m=a.originalEvent,v=a.putSortable,_=a.extraEventProperties;if(t=t||e&&e[fr],!!t){var C,x=t.options,S="on"+n.charAt(0).toUpperCase()+n.substr(1);window.CustomEvent&&!Cs&&!Xa?C=new CustomEvent(n,{bubbles:!0,cancelable:!0}):(C=document.createEvent("Event"),C.initEvent(n,!0,!0)),C.to=s||e,C.from=l||e,C.item=r||e,C.clone=o,C.oldIndex=u,C.newIndex=h,C.oldDraggableIndex=c,C.newDraggableIndex=p,C.originalEvent=m,C.pullMode=v?v.lastPutMode:void 0;var y=Zo(Zo({},_),Za.getEventProperties(n,t));for(var D in y)C[D]=y[D];e&&e.dispatchEvent(C),x[S]&&x[S].call(t,C)}}var n0=["evt"],Mr=function(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=n.evt,o=G_(n,n0);Za.pluginEvent.bind(Gt)(t,e,Zo({dragEl:gt,parentEl:Tn,ghostEl:li,rootEl:pn,nextEl:wl,lastDownEl:du,cloneEl:yn,cloneHidden:qs,dragStarted:ed,putSortable:lr,activeSortable:Gt.active,originalEvent:r,oldIndex:na,oldDraggableIndex:Ja,newIndex:qr,newDraggableIndex:Ks,hideGhostForTarget:Im,unhideGhostForTarget:Dm,cloneNowHidden:function(){qs=!0},cloneNowShown:function(){qs=!1},dispatchSortableEvent:function(l){wr({sortable:e,name:l,originalEvent:r})}},o))};function wr(a){Qa(Zo({putSortable:lr,cloneEl:yn,targetEl:gt,rootEl:pn,oldIndex:na,oldDraggableIndex:Ja,newIndex:qr,newDraggableIndex:Ks},a))}var gt,Tn,li,pn,wl,du,yn,qs,na,qr,Ja,Ks,uu,lr,ra=!1,cu=!1,hu=[],xl,Fo,Ih,Dh,wm,xm,ed,oa,td,id=!1,fu=!1,pu,pr,Rh=[],Ph=!1,mu=[],vu=typeof document<"u",gu=pm,Tm=Xa||Cs?"cssFloat":"float",r0=vu&&!mm&&!pm&&"draggable"in document.createElement("div"),Om=function(){if(vu){if(Cs)return!1;var a=document.createElement("x");return a.style.cssText="pointer-events:auto",a.style.pointerEvents==="auto"}}(),Am=function(t,e){var n=Pt(t),r=parseInt(n.width)-parseInt(n.paddingLeft)-parseInt(n.paddingRight)-parseInt(n.borderLeftWidth)-parseInt(n.borderRightWidth),o=ta(t,0,e),s=ta(t,1,e),l=o&&Pt(o),u=s&&Pt(s),h=l&&parseInt(l.marginLeft)+parseInt(l.marginRight)+fn(o).width,c=u&&parseInt(u.marginLeft)+parseInt(u.marginRight)+fn(s).width;if(n.display==="flex")return n.flexDirection==="column"||n.flexDirection==="column-reverse"?"vertical":"horizontal";if(n.display==="grid")return n.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(o&&l.float&&l.float!=="none"){var p=l.float==="left"?"left":"right";return s&&(u.clear==="both"||u.clear===p)?"vertical":"horizontal"}return o&&(l.display==="block"||l.display==="flex"||l.display==="table"||l.display==="grid"||h>=r&&n[Tm]==="none"||s&&n[Tm]==="none"&&h+c>r)?"vertical":"horizontal"},o0=function(t,e,n){var r=n?t.left:t.top,o=n?t.right:t.bottom,s=n?t.width:t.height,l=n?e.left:e.top,u=n?e.right:e.bottom,h=n?e.width:e.height;return r===l||o===u||r+s/2===l+h/2},s0=function(t,e){var n;return hu.some(function(r){var o=r[fr].options.emptyInsertThreshold;if(!(!o||xh(r))){var s=fn(r),l=t>=s.left-o&&t<=s.right+o,u=e>=s.top-o&&e<=s.bottom+o;if(l&&u)return n=r}}),n},km=function(t){function e(o,s){return function(l,u,h,c){var p=l.options.group.name&&u.options.group.name&&l.options.group.name===u.options.group.name;if(o==null&&(s||p))return!0;if(o==null||o===!1)return!1;if(s&&o==="clone")return o;if(typeof o=="function")return e(o(l,u,h,c),s)(l,u,h,c);var m=(s?l:u).options.group.name;return o===!0||typeof o=="string"&&o===m||o.join&&o.indexOf(m)>-1}}var n={},r=t.group;(!r||lu(r)!="object")&&(r={name:r}),n.name=r.name,n.checkPull=e(r.pull,!0),n.checkPut=e(r.put),n.revertClone=r.revertClone,t.group=n},Im=function(){!Om&&li&&Pt(li,"display","none")},Dm=function(){!Om&&li&&Pt(li,"display","")};vu&&!mm&&document.addEventListener("click",function(a){if(cu)return a.preventDefault(),a.stopPropagation&&a.stopPropagation(),a.stopImmediatePropagation&&a.stopImmediatePropagation(),cu=!1,!1},!0);var Tl=function(t){if(gt){t=t.touches?t.touches[0]:t;var e=s0(t.clientX,t.clientY);if(e){var n={};for(var r in t)t.hasOwnProperty(r)&&(n[r]=t[r]);n.target=n.rootEl=e,n.preventDefault=void 0,n.stopPropagation=void 0,e[fr]._onDragOver(n)}}},l0=function(t){gt&&gt.parentNode[fr]._isOutsideThisEl(t.target)};function Gt(a,t){if(!(a&&a.nodeType&&a.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(a));this.el=a,this.options=t=ho({},t),a[fr]=this;var e={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(a.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return Am(a,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(s,l){s.setData("Text",l.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:Gt.supportPointer!==!1&&"PointerEvent"in window&&!qa,emptyInsertThreshold:5};Za.initializePlugins(this,a,e);for(var n in e)!(n in t)&&(t[n]=e[n]);km(t);for(var r in this)r.charAt(0)==="_"&&typeof this[r]=="function"&&(this[r]=this[r].bind(this));this.nativeDraggable=t.forceFallback?!1:r0,this.nativeDraggable&&(this.options.touchStartThreshold=1),t.supportPointer?bi(a,"pointerdown",this._onTapStart):(bi(a,"mousedown",this._onTapStart),bi(a,"touchstart",this._onTapStart)),this.nativeDraggable&&(bi(a,"dragover",this),bi(a,"dragenter",this)),hu.push(this.el),t.store&&t.store.get&&this.sort(t.store.get(this)||[]),ho(this,e0())}Gt.prototype={constructor:Gt,_isOutsideThisEl:function(t){!this.el.contains(t)&&t!==this.el&&(oa=null)},_getDirection:function(t,e){return typeof this.options.direction=="function"?this.options.direction.call(this,t,e,gt):this.options.direction},_onTapStart:function(t){if(t.cancelable){var e=this,n=this.el,r=this.options,o=r.preventOnFilter,s=t.type,l=t.touches&&t.touches[0]||t.pointerType&&t.pointerType==="touch"&&t,u=(l||t).target,h=t.target.shadowRoot&&(t.path&&t.path[0]||t.composedPath&&t.composedPath()[0])||u,c=r.filter;if(m0(n),!gt&&!(/mousedown|pointerdown/.test(s)&&t.button!==0||r.disabled)&&!h.isContentEditable&&!(!this.nativeDraggable&&qa&&u&&u.tagName.toUpperCase()==="SELECT")&&(u=Po(u,r.draggable,n,!1),!(u&&u.animated)&&du!==u)){if(na=xn(u),Ja=xn(u,r.draggable),typeof c=="function"){if(c.call(this,t,u,this)){wr({sortable:e,rootEl:h,name:"filter",targetEl:u,toEl:n,fromEl:n}),Mr("filter",e,{evt:t}),o&&t.cancelable&&t.preventDefault();return}}else if(c&&(c=c.split(",").some(function(p){if(p=Po(h,p.trim(),n,!1),p)return wr({sortable:e,rootEl:p,name:"filter",targetEl:u,fromEl:n,toEl:n}),Mr("filter",e,{evt:t}),!0}),c)){o&&t.cancelable&&t.preventDefault();return}r.handle&&!Po(h,r.handle,n,!1)||this._prepareDragStart(t,l,u)}}},_prepareDragStart:function(t,e,n){var r=this,o=r.el,s=r.options,l=o.ownerDocument,u;if(n&&!gt&&n.parentNode===o){var h=fn(n);if(pn=o,gt=n,Tn=gt.parentNode,wl=gt.nextSibling,du=n,uu=s.group,Gt.dragged=gt,xl={target:gt,clientX:(e||t).clientX,clientY:(e||t).clientY},wm=xl.clientX-h.left,xm=xl.clientY-h.top,this._lastX=(e||t).clientX,this._lastY=(e||t).clientY,gt.style["will-change"]="all",u=function(){if(Mr("delayEnded",r,{evt:t}),Gt.eventCanceled){r._onDrop();return}r._disableDelayedDragEvents(),!fm&&r.nativeDraggable&&(gt.draggable=!0),r._triggerDragStart(t,e),wr({sortable:r,name:"choose",originalEvent:t}),Cn(gt,s.chosenClass,!0)},s.ignore.split(",").forEach(function(c){_m(gt,c.trim(),Fh)}),bi(l,"dragover",Tl),bi(l,"mousemove",Tl),bi(l,"touchmove",Tl),bi(l,"mouseup",r._onDrop),bi(l,"touchend",r._onDrop),bi(l,"touchcancel",r._onDrop),fm&&this.nativeDraggable&&(this.options.touchStartThreshold=4,gt.draggable=!0),Mr("delayStart",this,{evt:t}),s.delay&&(!s.delayOnTouchOnly||e)&&(!this.nativeDraggable||!(Xa||Cs))){if(Gt.eventCanceled){this._onDrop();return}bi(l,"mouseup",r._disableDelayedDrag),bi(l,"touchend",r._disableDelayedDrag),bi(l,"touchcancel",r._disableDelayedDrag),bi(l,"mousemove",r._delayedDragTouchMoveHandler),bi(l,"touchmove",r._delayedDragTouchMoveHandler),s.supportPointer&&bi(l,"pointermove",r._delayedDragTouchMoveHandler),r._dragStartTimer=setTimeout(u,s.delay)}else u()}},_delayedDragTouchMoveHandler:function(t){var e=t.touches?t.touches[0]:t;Math.max(Math.abs(e.clientX-this._lastX),Math.abs(e.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){gt&&Fh(gt),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var t=this.el.ownerDocument;vi(t,"mouseup",this._disableDelayedDrag),vi(t,"touchend",this._disableDelayedDrag),vi(t,"touchcancel",this._disableDelayedDrag),vi(t,"mousemove",this._delayedDragTouchMoveHandler),vi(t,"touchmove",this._delayedDragTouchMoveHandler),vi(t,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(t,e){e=e||t.pointerType=="touch"&&t,!this.nativeDraggable||e?this.options.supportPointer?bi(document,"pointermove",this._onTouchMove):e?bi(document,"touchmove",this._onTouchMove):bi(document,"mousemove",this._onTouchMove):(bi(gt,"dragend",this),bi(pn,"dragstart",this._onDragStart));try{document.selection?bu(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(t,e){if(ra=!1,pn&&gt){Mr("dragStarted",this,{evt:e}),this.nativeDraggable&&bi(document,"dragover",l0);var n=this.options;!t&&Cn(gt,n.dragClass,!1),Cn(gt,n.ghostClass,!0),Gt.active=this,t&&this._appendGhost(),wr({sortable:this,name:"start",originalEvent:e})}else this._nulling()},_emulateDragOver:function(){if(Fo){this._lastX=Fo.clientX,this._lastY=Fo.clientY,Im();for(var t=document.elementFromPoint(Fo.clientX,Fo.clientY),e=t;t&&t.shadowRoot&&(t=t.shadowRoot.elementFromPoint(Fo.clientX,Fo.clientY),t!==e);)e=t;if(gt.parentNode[fr]._isOutsideThisEl(t),e)do{if(e[fr]){var n=void 0;if(n=e[fr]._onDragOver({clientX:Fo.clientX,clientY:Fo.clientY,target:t,rootEl:e}),n&&!this.options.dragoverBubble)break}t=e}while(e=e.parentNode);Dm()}},_onTouchMove:function(t){if(xl){var e=this.options,n=e.fallbackTolerance,r=e.fallbackOffset,o=t.touches?t.touches[0]:t,s=li&&Sl(li,!0),l=li&&s&&s.a,u=li&&s&&s.d,h=gu&&pr&&Cm(pr),c=(o.clientX-xl.clientX+r.x)/(l||1)+(h?h[0]-Rh[0]:0)/(l||1),p=(o.clientY-xl.clientY+r.y)/(u||1)+(h?h[1]-Rh[1]:0)/(u||1);if(!Gt.active&&!ra){if(n&&Math.max(Math.abs(o.clientX-this._lastX),Math.abs(o.clientY-this._lastY))<n)return;this._onDragStart(t,!0)}if(li){s?(s.e+=c-(Ih||0),s.f+=p-(Dh||0)):s={a:1,b:0,c:0,d:1,e:c,f:p};var m="matrix(".concat(s.a,",").concat(s.b,",").concat(s.c,",").concat(s.d,",").concat(s.e,",").concat(s.f,")");Pt(li,"webkitTransform",m),Pt(li,"mozTransform",m),Pt(li,"msTransform",m),Pt(li,"transform",m),Ih=c,Dh=p,Fo=o}t.cancelable&&t.preventDefault()}},_appendGhost:function(){if(!li){var t=this.options.fallbackOnBody?document.body:pn,e=fn(gt,!0,gu,!0,t),n=this.options;if(gu){for(pr=t;Pt(pr,"position")==="static"&&Pt(pr,"transform")==="none"&&pr!==document;)pr=pr.parentNode;pr!==document.body&&pr!==document.documentElement?(pr===document&&(pr=Qo()),e.top+=pr.scrollTop,e.left+=pr.scrollLeft):pr=Qo(),Rh=Cm(pr)}li=gt.cloneNode(!0),Cn(li,n.ghostClass,!1),Cn(li,n.fallbackClass,!0),Cn(li,n.dragClass,!0),Pt(li,"transition",""),Pt(li,"transform",""),Pt(li,"box-sizing","border-box"),Pt(li,"margin",0),Pt(li,"top",e.top),Pt(li,"left",e.left),Pt(li,"width",e.width),Pt(li,"height",e.height),Pt(li,"opacity","0.8"),Pt(li,"position",gu?"absolute":"fixed"),Pt(li,"zIndex","100000"),Pt(li,"pointerEvents","none"),Gt.ghost=li,t.appendChild(li),Pt(li,"transform-origin",wm/parseInt(li.style.width)*100+"% "+xm/parseInt(li.style.height)*100+"%")}},_onDragStart:function(t,e){var n=this,r=t.dataTransfer,o=n.options;if(Mr("dragStart",this,{evt:t}),Gt.eventCanceled){this._onDrop();return}Mr("setupClone",this),Gt.eventCanceled||(yn=Oh(gt),yn.removeAttribute("id"),yn.draggable=!1,yn.style["will-change"]="",this._hideClone(),Cn(yn,this.options.chosenClass,!1),Gt.clone=yn),n.cloneId=bu(function(){Mr("clone",n),!Gt.eventCanceled&&(n.options.removeCloneOnHide||pn.insertBefore(yn,gt),n._hideClone(),wr({sortable:n,name:"clone"}))}),!e&&Cn(gt,o.dragClass,!0),e?(cu=!0,n._loopId=setInterval(n._emulateDragOver,50)):(vi(document,"mouseup",n._onDrop),vi(document,"touchend",n._onDrop),vi(document,"touchcancel",n._onDrop),r&&(r.effectAllowed="move",o.setData&&o.setData.call(n,r,gt)),bi(document,"drop",n),Pt(gt,"transform","translateZ(0)")),ra=!0,n._dragStartId=bu(n._dragStarted.bind(n,e,t)),bi(document,"selectstart",n),ed=!0,qa&&Pt(document.body,"user-select","none")},_onDragOver:function(t){var e=this.el,n=t.target,r,o,s,l=this.options,u=l.group,h=Gt.active,c=uu===u,p=l.sort,m=lr||h,v,_=this,C=!1;if(Ph)return;function x(xe,Te){Mr(xe,_,Zo({evt:t,isOwner:c,axis:v?"vertical":"horizontal",revert:s,dragRect:r,targetRect:o,canSort:p,fromSortable:m,target:n,completed:y,onMove:function(ne,fe){return _u(pn,e,gt,r,ne,fn(ne),t,fe)},changed:D},Te))}function S(){x("dragOverAnimationCapture"),_.captureAnimationState(),_!==m&&m.captureAnimationState()}function y(xe){return x("dragOverCompleted",{insertion:xe}),xe&&(c?h._hideClone():h._showClone(_),_!==m&&(Cn(gt,lr?lr.options.ghostClass:h.options.ghostClass,!1),Cn(gt,l.ghostClass,!0)),lr!==_&&_!==Gt.active?lr=_:_===Gt.active&&lr&&(lr=null),m===_&&(_._ignoreWhileAnimating=n),_.animateAll(function(){x("dragOverAnimationComplete"),_._ignoreWhileAnimating=null}),_!==m&&(m.animateAll(),m._ignoreWhileAnimating=null)),(n===gt&&!gt.animated||n===e&&!n.animated)&&(oa=null),!l.dragoverBubble&&!t.rootEl&&n!==document&&(gt.parentNode[fr]._isOutsideThisEl(t.target),!xe&&Tl(t)),!l.dragoverBubble&&t.stopPropagation&&t.stopPropagation(),C=!0}function D(){qr=xn(gt),Ks=xn(gt,l.draggable),wr({sortable:_,name:"change",toEl:e,newIndex:qr,newDraggableIndex:Ks,originalEvent:t})}if(t.preventDefault!==void 0&&t.cancelable&&t.preventDefault(),n=Po(n,l.draggable,e,!0),x("dragOver"),Gt.eventCanceled)return C;if(gt.contains(t.target)||n.animated&&n.animatingX&&n.animatingY||_._ignoreWhileAnimating===n)return y(!1);if(cu=!1,h&&!l.disabled&&(c?p||(s=Tn!==pn):lr===this||(this.lastPutMode=uu.checkPull(this,h,gt,t))&&u.checkPut(this,h,gt,t))){if(v=this._getDirection(t,n)==="vertical",r=fn(gt),x("dragOverValid"),Gt.eventCanceled)return C;if(s)return Tn=pn,S(),this._hideClone(),x("revert"),Gt.eventCanceled||(wl?pn.insertBefore(gt,wl):pn.appendChild(gt)),y(!0);var A=xh(e,l.draggable);if(!A||c0(t,v,this)&&!A.animated){if(A===gt)return y(!1);if(A&&e===t.target&&(n=A),n&&(o=fn(n)),_u(pn,e,gt,r,n,o,t,!!n)!==!1)return S(),A&&A.nextSibling?e.insertBefore(gt,A.nextSibling):e.appendChild(gt),Tn=e,D(),y(!0)}else if(A&&u0(t,v,this)){var P=ta(e,0,l,!0);if(P===gt)return y(!1);if(n=P,o=fn(n),_u(pn,e,gt,r,n,o,t,!1)!==!1)return S(),e.insertBefore(gt,P),Tn=e,D(),y(!0)}else if(n.parentNode===e){o=fn(n);var M=0,B,Q=gt.parentNode!==e,L=!o0(gt.animated&&gt.toRect||r,n.animated&&n.toRect||o,v),le=v?"top":"left",_e=bm(n,"top","top")||bm(gt,"top","top"),J=_e?_e.scrollTop:void 0;oa!==n&&(B=o[le],id=!1,fu=!L&&l.invertSwap||Q),M=h0(t,n,o,v,L?1:l.swapThreshold,l.invertedSwapThreshold==null?l.swapThreshold:l.invertedSwapThreshold,fu,oa===n);var z;if(M!==0){var F=xn(gt);do F-=M,z=Tn.children[F];while(z&&(Pt(z,"display")==="none"||z===li))}if(M===0||z===n)return y(!1);oa=n,td=M;var ae=n.nextElementSibling,qe=!1;qe=M===1;var De=_u(pn,e,gt,r,n,o,t,qe);if(De!==!1)return(De===1||De===-1)&&(qe=De===1),Ph=!0,setTimeout(d0,30),S(),qe&&!ae?e.appendChild(gt):n.parentNode.insertBefore(gt,qe?ae:n),_e&&Em(_e,0,J-_e.scrollTop),Tn=gt.parentNode,B!==void 0&&!fu&&(pu=Math.abs(B-fn(n)[le])),D(),y(!0)}if(e.contains(gt))return y(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){vi(document,"mousemove",this._onTouchMove),vi(document,"touchmove",this._onTouchMove),vi(document,"pointermove",this._onTouchMove),vi(document,"dragover",Tl),vi(document,"mousemove",Tl),vi(document,"touchmove",Tl)},_offUpEvents:function(){var t=this.el.ownerDocument;vi(t,"mouseup",this._onDrop),vi(t,"touchend",this._onDrop),vi(t,"pointerup",this._onDrop),vi(t,"touchcancel",this._onDrop),vi(document,"selectstart",this)},_onDrop:function(t){var e=this.el,n=this.options;if(qr=xn(gt),Ks=xn(gt,n.draggable),Mr("drop",this,{evt:t}),Tn=gt&&gt.parentNode,qr=xn(gt),Ks=xn(gt,n.draggable),Gt.eventCanceled){this._nulling();return}ra=!1,fu=!1,id=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),Mh(this.cloneId),Mh(this._dragStartId),this.nativeDraggable&&(vi(document,"drop",this),vi(e,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),qa&&Pt(document.body,"user-select",""),Pt(gt,"transform",""),t&&(ed&&(t.cancelable&&t.preventDefault(),!n.dropBubble&&t.stopPropagation()),li&&li.parentNode&&li.parentNode.removeChild(li),(pn===Tn||lr&&lr.lastPutMode!=="clone")&&yn&&yn.parentNode&&yn.parentNode.removeChild(yn),gt&&(this.nativeDraggable&&vi(gt,"dragend",this),Fh(gt),gt.style["will-change"]="",ed&&!ra&&Cn(gt,lr?lr.options.ghostClass:this.options.ghostClass,!1),Cn(gt,this.options.chosenClass,!1),wr({sortable:this,name:"unchoose",toEl:Tn,newIndex:null,newDraggableIndex:null,originalEvent:t}),pn!==Tn?(qr>=0&&(wr({rootEl:Tn,name:"add",toEl:Tn,fromEl:pn,originalEvent:t}),wr({sortable:this,name:"remove",toEl:Tn,originalEvent:t}),wr({rootEl:Tn,name:"sort",toEl:Tn,fromEl:pn,originalEvent:t}),wr({sortable:this,name:"sort",toEl:Tn,originalEvent:t})),lr&&lr.save()):qr!==na&&qr>=0&&(wr({sortable:this,name:"update",toEl:Tn,originalEvent:t}),wr({sortable:this,name:"sort",toEl:Tn,originalEvent:t})),Gt.active&&((qr==null||qr===-1)&&(qr=na,Ks=Ja),wr({sortable:this,name:"end",toEl:Tn,originalEvent:t}),this.save()))),this._nulling()},_nulling:function(){Mr("nulling",this),pn=gt=Tn=li=wl=yn=du=qs=xl=Fo=ed=qr=Ks=na=Ja=oa=td=lr=uu=Gt.dragged=Gt.ghost=Gt.clone=Gt.active=null,mu.forEach(function(t){t.checked=!0}),mu.length=Ih=Dh=0},handleEvent:function(t){switch(t.type){case"drop":case"dragend":this._onDrop(t);break;case"dragenter":case"dragover":gt&&(this._onDragOver(t),a0(t));break;case"selectstart":t.preventDefault();break}},toArray:function(){for(var t=[],e,n=this.el.children,r=0,o=n.length,s=this.options;r<o;r++)e=n[r],Po(e,s.draggable,this.el,!1)&&t.push(e.getAttribute(s.dataIdAttr)||p0(e));return t},sort:function(t,e){var n={},r=this.el;this.toArray().forEach(function(o,s){var l=r.children[s];Po(l,this.options.draggable,r,!1)&&(n[o]=l)},this),e&&this.captureAnimationState(),t.forEach(function(o){n[o]&&(r.removeChild(n[o]),r.appendChild(n[o]))}),e&&this.animateAll()},save:function(){var t=this.options.store;t&&t.set&&t.set(this)},closest:function(t,e){return Po(t,e||this.options.draggable,this.el,!1)},option:function(t,e){var n=this.options;if(e===void 0)return n[t];var r=Za.modifyOption(this,t,e);typeof r<"u"?n[t]=r:n[t]=e,t==="group"&&km(n)},destroy:function(){Mr("destroy",this);var t=this.el;t[fr]=null,vi(t,"mousedown",this._onTapStart),vi(t,"touchstart",this._onTapStart),vi(t,"pointerdown",this._onTapStart),this.nativeDraggable&&(vi(t,"dragover",this),vi(t,"dragenter",this)),Array.prototype.forEach.call(t.querySelectorAll("[draggable]"),function(e){e.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),hu.splice(hu.indexOf(this.el),1),this.el=t=null},_hideClone:function(){if(!qs){if(Mr("hideClone",this),Gt.eventCanceled)return;Pt(yn,"display","none"),this.options.removeCloneOnHide&&yn.parentNode&&yn.parentNode.removeChild(yn),qs=!0}},_showClone:function(t){if(t.lastPutMode!=="clone"){this._hideClone();return}if(qs){if(Mr("showClone",this),Gt.eventCanceled)return;gt.parentNode==pn&&!this.options.group.revertClone?pn.insertBefore(yn,gt):wl?pn.insertBefore(yn,wl):pn.appendChild(yn),this.options.group.revertClone&&this.animate(gt,yn),Pt(yn,"display",""),qs=!1}}};function a0(a){a.dataTransfer&&(a.dataTransfer.dropEffect="move"),a.cancelable&&a.preventDefault()}function _u(a,t,e,n,r,o,s,l){var u,h=a[fr],c=h.options.onMove,p;return window.CustomEvent&&!Cs&&!Xa?u=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(u=document.createEvent("Event"),u.initEvent("move",!0,!0)),u.to=t,u.from=a,u.dragged=e,u.draggedRect=n,u.related=r||t,u.relatedRect=o||fn(t),u.willInsertAfter=l,u.originalEvent=s,a.dispatchEvent(u),c&&(p=c.call(h,u,s)),p}function Fh(a){a.draggable=!1}function d0(){Ph=!1}function u0(a,t,e){var n=fn(ta(e.el,0,e.options,!0)),r=10;return t?a.clientX<n.left-r||a.clientY<n.top&&a.clientX<n.right:a.clientY<n.top-r||a.clientY<n.bottom&&a.clientX<n.left}function c0(a,t,e){var n=fn(xh(e.el,e.options.draggable)),r=10;return t?a.clientX>n.right+r||a.clientX<=n.right&&a.clientY>n.bottom&&a.clientX>=n.left:a.clientX>n.right&&a.clientY>n.top||a.clientX<=n.right&&a.clientY>n.bottom+r}function h0(a,t,e,n,r,o,s,l){var u=n?a.clientY:a.clientX,h=n?e.height:e.width,c=n?e.top:e.left,p=n?e.bottom:e.right,m=!1;if(!s){if(l&&pu<h*r){if(!id&&(td===1?u>c+h*o/2:u<p-h*o/2)&&(id=!0),id)m=!0;else if(td===1?u<c+pu:u>p-pu)return-td}else if(u>c+h*(1-r)/2&&u<p-h*(1-r)/2)return f0(t)}return m=m||s,m&&(u<c+h*o/2||u>p-h*o/2)?u>c+h/2?1:-1:0}function f0(a){return xn(gt)<xn(a)?1:-1}function p0(a){for(var t=a.tagName+a.className+a.src+a.href+a.textContent,e=t.length,n=0;e--;)n+=t.charCodeAt(e);return n.toString(36)}function m0(a){mu.length=0;for(var t=a.getElementsByTagName("input"),e=t.length;e--;){var n=t[e];n.checked&&mu.push(n)}}function bu(a){return setTimeout(a,0)}function Mh(a){return clearTimeout(a)}vu&&bi(document,"touchmove",function(a){(Gt.active||ra)&&a.cancelable&&a.preventDefault()}),Gt.utils={on:bi,off:vi,css:Pt,find:_m,is:function(t,e){return!!Po(t,e,t,!1)},extend:Q_,throttle:ym,closest:Po,toggleClass:Cn,clone:Oh,index:xn,nextTick:bu,cancelNextTick:Mh,detectDirection:Am,getChild:ta},Gt.get=function(a){return a[fr]},Gt.mount=function(){for(var a=arguments.length,t=new Array(a),e=0;e<a;e++)t[e]=arguments[e];t[0].constructor===Array&&(t=t[0]),t.forEach(function(n){if(!n.prototype||!n.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(n));n.utils&&(Gt.utils=Zo(Zo({},Gt.utils),n.utils)),Za.mount(n)})},Gt.create=function(a,t){return new Gt(a,t)},Gt.version=q_;var Nn=[],nd,Nh,Lh=!1,Hh,Bh,Cu,rd;function v0(){function a(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var t in this)t.charAt(0)==="_"&&typeof this[t]=="function"&&(this[t]=this[t].bind(this))}return a.prototype={dragStarted:function(e){var n=e.originalEvent;this.sortable.nativeDraggable?bi(document,"dragover",this._handleAutoScroll):this.options.supportPointer?bi(document,"pointermove",this._handleFallbackAutoScroll):n.touches?bi(document,"touchmove",this._handleFallbackAutoScroll):bi(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(e){var n=e.originalEvent;!this.options.dragOverBubble&&!n.rootEl&&this._handleAutoScroll(n)},drop:function(){this.sortable.nativeDraggable?vi(document,"dragover",this._handleAutoScroll):(vi(document,"pointermove",this._handleFallbackAutoScroll),vi(document,"touchmove",this._handleFallbackAutoScroll),vi(document,"mousemove",this._handleFallbackAutoScroll)),Rm(),yu(),J_()},nulling:function(){Cu=Nh=nd=Lh=rd=Hh=Bh=null,Nn.length=0},_handleFallbackAutoScroll:function(e){this._handleAutoScroll(e,!0)},_handleAutoScroll:function(e,n){var r=this,o=(e.touches?e.touches[0]:e).clientX,s=(e.touches?e.touches[0]:e).clientY,l=document.elementFromPoint(o,s);if(Cu=e,n||this.options.forceAutoScrollFallback||Xa||Cs||qa){Vh(e,this.options,l,n);var u=Xs(l,!0);Lh&&(!rd||o!==Hh||s!==Bh)&&(rd&&Rm(),rd=setInterval(function(){var h=Xs(document.elementFromPoint(o,s),!0);h!==u&&(u=h,yu()),Vh(e,r.options,h,n)},10),Hh=o,Bh=s)}else{if(!this.options.bubbleScroll||Xs(l,!0)===Qo()){yu();return}Vh(e,this.options,Xs(l,!1),!1)}}},ho(a,{pluginName:"scroll",initializeByDefault:!0})}function yu(){Nn.forEach(function(a){clearInterval(a.pid)}),Nn=[]}function Rm(){clearInterval(rd)}var Vh=ym(function(a,t,e,n){if(t.scroll){var r=(a.touches?a.touches[0]:a).clientX,o=(a.touches?a.touches[0]:a).clientY,s=t.scrollSensitivity,l=t.scrollSpeed,u=Qo(),h=!1,c;Nh!==e&&(Nh=e,yu(),nd=t.scroll,c=t.scrollFn,nd===!0&&(nd=Xs(e,!0)));var p=0,m=nd;do{var v=m,_=fn(v),C=_.top,x=_.bottom,S=_.left,y=_.right,D=_.width,A=_.height,P=void 0,M=void 0,B=v.scrollWidth,Q=v.scrollHeight,L=Pt(v),le=v.scrollLeft,_e=v.scrollTop;v===u?(P=D<B&&(L.overflowX==="auto"||L.overflowX==="scroll"||L.overflowX==="visible"),M=A<Q&&(L.overflowY==="auto"||L.overflowY==="scroll"||L.overflowY==="visible")):(P=D<B&&(L.overflowX==="auto"||L.overflowX==="scroll"),M=A<Q&&(L.overflowY==="auto"||L.overflowY==="scroll"));var J=P&&(Math.abs(y-r)<=s&&le+D<B)-(Math.abs(S-r)<=s&&!!le),z=M&&(Math.abs(x-o)<=s&&_e+A<Q)-(Math.abs(C-o)<=s&&!!_e);if(!Nn[p])for(var F=0;F<=p;F++)Nn[F]||(Nn[F]={});(Nn[p].vx!=J||Nn[p].vy!=z||Nn[p].el!==v)&&(Nn[p].el=v,Nn[p].vx=J,Nn[p].vy=z,clearInterval(Nn[p].pid),(J!=0||z!=0)&&(h=!0,Nn[p].pid=setInterval((function(){n&&this.layer===0&&Gt.active._onTouchMove(Cu);var ae=Nn[this.layer].vy?Nn[this.layer].vy*l:0,qe=Nn[this.layer].vx?Nn[this.layer].vx*l:0;typeof c=="function"&&c.call(Gt.dragged.parentNode[fr],qe,ae,a,Cu,Nn[this.layer].el)!=="continue"||Em(Nn[this.layer].el,qe,ae)}).bind({layer:p}),24))),p++}while(t.bubbleScroll&&m!==u&&(m=Xs(m,!1)));Lh=h}},30),Pm=function(t){var e=t.originalEvent,n=t.putSortable,r=t.dragEl,o=t.activeSortable,s=t.dispatchSortableEvent,l=t.hideGhostForTarget,u=t.unhideGhostForTarget;if(e){var h=n||o;l();var c=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:e,p=document.elementFromPoint(c.clientX,c.clientY);u(),h&&!h.el.contains(p)&&(s("spill"),this.onSpill({dragEl:r,putSortable:n}))}};function zh(){}zh.prototype={startIndex:null,dragStart:function(t){var e=t.oldDraggableIndex;this.startIndex=e},onSpill:function(t){var e=t.dragEl,n=t.putSortable;this.sortable.captureAnimationState(),n&&n.captureAnimationState();var r=ta(this.sortable.el,this.startIndex,this.options);r?this.sortable.el.insertBefore(e,r):this.sortable.el.appendChild(e),this.sortable.animateAll(),n&&n.animateAll()},drop:Pm},ho(zh,{pluginName:"revertOnSpill"});function Uh(){}Uh.prototype={onSpill:function(t){var e=t.dragEl,n=t.putSortable,r=n||this.sortable;r.captureAnimationState(),e.parentNode&&e.parentNode.removeChild(e),r.animateAll()},drop:Pm},ho(Uh,{pluginName:"removeOnSpill"});var fo;function g0(){function a(){this.defaults={swapClass:"sortable-swap-highlight"}}return a.prototype={dragStart:function(e){var n=e.dragEl;fo=n},dragOverValid:function(e){var n=e.completed,r=e.target,o=e.onMove,s=e.activeSortable,l=e.changed,u=e.cancel;if(s.options.swap){var h=this.sortable.el,c=this.options;if(r&&r!==h){var p=fo;o(r)!==!1?(Cn(r,c.swapClass,!0),fo=r):fo=null,p&&p!==fo&&Cn(p,c.swapClass,!1)}l(),n(!0),u()}},drop:function(e){var n=e.activeSortable,r=e.putSortable,o=e.dragEl,s=r||this.sortable,l=this.options;fo&&Cn(fo,l.swapClass,!1),fo&&(l.swap||r&&r.options.swap)&&o!==fo&&(s.captureAnimationState(),s!==n&&n.captureAnimationState(),_0(o,fo),s.animateAll(),s!==n&&n.animateAll())},nulling:function(){fo=null}},ho(a,{pluginName:"swap",eventProperties:function(){return{swapItem:fo}}})}function _0(a,t){var e=a.parentNode,n=t.parentNode,r,o;!e||!n||e.isEqualNode(t)||n.isEqualNode(a)||(r=xn(a),o=xn(t),e.isEqualNode(n)&&r<o&&o++,e.insertBefore(t,e.children[r]),n.insertBefore(a,n.children[o]))}var ei=[],Kr=[],od,Mo,sd=!1,Nr=!1,sa=!1,nn,ld,Eu;function b0(){function a(t){for(var e in this)e.charAt(0)==="_"&&typeof this[e]=="function"&&(this[e]=this[e].bind(this));t.options.avoidImplicitDeselect||(t.options.supportPointer?bi(document,"pointerup",this._deselectMultiDrag):(bi(document,"mouseup",this._deselectMultiDrag),bi(document,"touchend",this._deselectMultiDrag))),bi(document,"keydown",this._checkKeyDown),bi(document,"keyup",this._checkKeyUp),this.defaults={selectedClass:"sortable-selected",multiDragKey:null,avoidImplicitDeselect:!1,setData:function(r,o){var s="";ei.length&&Mo===t?ei.forEach(function(l,u){s+=(u?", ":"")+l.textContent}):s=o.textContent,r.setData("Text",s)}}}return a.prototype={multiDragKeyDown:!1,isMultiDrag:!1,delayStartGlobal:function(e){var n=e.dragEl;nn=n},delayEnded:function(){this.isMultiDrag=~ei.indexOf(nn)},setupClone:function(e){var n=e.sortable,r=e.cancel;if(this.isMultiDrag){for(var o=0;o<ei.length;o++)Kr.push(Oh(ei[o])),Kr[o].sortableIndex=ei[o].sortableIndex,Kr[o].draggable=!1,Kr[o].style["will-change"]="",Cn(Kr[o],this.options.selectedClass,!1),ei[o]===nn&&Cn(Kr[o],this.options.chosenClass,!1);n._hideClone(),r()}},clone:function(e){var n=e.sortable,r=e.rootEl,o=e.dispatchSortableEvent,s=e.cancel;this.isMultiDrag&&(this.options.removeCloneOnHide||ei.length&&Mo===n&&(Fm(!0,r),o("clone"),s()))},showClone:function(e){var n=e.cloneNowShown,r=e.rootEl,o=e.cancel;this.isMultiDrag&&(Fm(!1,r),Kr.forEach(function(s){Pt(s,"display","")}),n(),Eu=!1,o())},hideClone:function(e){var n=this;e.sortable;var r=e.cloneNowHidden,o=e.cancel;this.isMultiDrag&&(Kr.forEach(function(s){Pt(s,"display","none"),n.options.removeCloneOnHide&&s.parentNode&&s.parentNode.removeChild(s)}),r(),Eu=!0,o())},dragStartGlobal:function(e){e.sortable,!this.isMultiDrag&&Mo&&Mo.multiDrag._deselectMultiDrag(),ei.forEach(function(n){n.sortableIndex=xn(n)}),ei=ei.sort(function(n,r){return n.sortableIndex-r.sortableIndex}),sa=!0},dragStarted:function(e){var n=this,r=e.sortable;if(this.isMultiDrag){if(this.options.sort&&(r.captureAnimationState(),this.options.animation)){ei.forEach(function(s){s!==nn&&Pt(s,"position","absolute")});var o=fn(nn,!1,!0,!0);ei.forEach(function(s){s!==nn&&Sm(s,o)}),Nr=!0,sd=!0}r.animateAll(function(){Nr=!1,sd=!1,n.options.animation&&ei.forEach(function(s){Ah(s)}),n.options.sort&&Su()})}},dragOver:function(e){var n=e.target,r=e.completed,o=e.cancel;Nr&&~ei.indexOf(n)&&(r(!1),o())},revert:function(e){var n=e.fromSortable,r=e.rootEl,o=e.sortable,s=e.dragRect;ei.length>1&&(ei.forEach(function(l){o.addAnimationState({target:l,rect:Nr?fn(l):s}),Ah(l),l.fromRect=s,n.removeAnimationState(l)}),Nr=!1,C0(!this.options.removeCloneOnHide,r))},dragOverCompleted:function(e){var n=e.sortable,r=e.isOwner,o=e.insertion,s=e.activeSortable,l=e.parentEl,u=e.putSortable,h=this.options;if(o){if(r&&s._hideClone(),sd=!1,h.animation&&ei.length>1&&(Nr||!r&&!s.options.sort&&!u)){var c=fn(nn,!1,!0,!0);ei.forEach(function(m){m!==nn&&(Sm(m,c),l.appendChild(m))}),Nr=!0}if(!r)if(Nr||Su(),ei.length>1){var p=Eu;s._showClone(n),s.options.animation&&!Eu&&p&&Kr.forEach(function(m){s.addAnimationState({target:m,rect:ld}),m.fromRect=ld,m.thisAnimationDuration=null})}else s._showClone(n)}},dragOverAnimationCapture:function(e){var n=e.dragRect,r=e.isOwner,o=e.activeSortable;if(ei.forEach(function(l){l.thisAnimationDuration=null}),o.options.animation&&!r&&o.multiDrag.isMultiDrag){ld=ho({},n);var s=Sl(nn,!0);ld.top-=s.f,ld.left-=s.e}},dragOverAnimationComplete:function(){Nr&&(Nr=!1,Su())},drop:function(e){var n=e.originalEvent,r=e.rootEl,o=e.parentEl,s=e.sortable,l=e.dispatchSortableEvent,u=e.oldIndex,h=e.putSortable,c=h||this.sortable;if(n){var p=this.options,m=o.children;if(!sa)if(p.multiDragKey&&!this.multiDragKeyDown&&this._deselectMultiDrag(),Cn(nn,p.selectedClass,!~ei.indexOf(nn)),~ei.indexOf(nn))ei.splice(ei.indexOf(nn),1),od=null,Qa({sortable:s,rootEl:r,name:"deselect",targetEl:nn,originalEvent:n});else{if(ei.push(nn),Qa({sortable:s,rootEl:r,name:"select",targetEl:nn,originalEvent:n}),n.shiftKey&&od&&s.el.contains(od)){var v=xn(od),_=xn(nn);if(~v&&~_&&v!==_){var C,x;for(_>v?(x=v,C=_):(x=_,C=v+1);x<C;x++)~ei.indexOf(m[x])||(Cn(m[x],p.selectedClass,!0),ei.push(m[x]),Qa({sortable:s,rootEl:r,name:"select",targetEl:m[x],originalEvent:n}))}}else od=nn;Mo=c}if(sa&&this.isMultiDrag){if(Nr=!1,(o[fr].options.sort||o!==r)&&ei.length>1){var S=fn(nn),y=xn(nn,":not(."+this.options.selectedClass+")");if(!sd&&p.animation&&(nn.thisAnimationDuration=null),c.captureAnimationState(),!sd&&(p.animation&&(nn.fromRect=S,ei.forEach(function(A){if(A.thisAnimationDuration=null,A!==nn){var P=Nr?fn(A):S;A.fromRect=P,c.addAnimationState({target:A,rect:P})}})),Su(),ei.forEach(function(A){m[y]?o.insertBefore(A,m[y]):o.appendChild(A),y++}),u===xn(nn))){var D=!1;ei.forEach(function(A){if(A.sortableIndex!==xn(A)){D=!0;return}}),D&&l("update")}ei.forEach(function(A){Ah(A)}),c.animateAll()}Mo=c}(r===o||h&&h.lastPutMode!=="clone")&&Kr.forEach(function(A){A.parentNode&&A.parentNode.removeChild(A)})}},nullingGlobal:function(){this.isMultiDrag=sa=!1,Kr.length=0},destroyGlobal:function(){this._deselectMultiDrag(),vi(document,"pointerup",this._deselectMultiDrag),vi(document,"mouseup",this._deselectMultiDrag),vi(document,"touchend",this._deselectMultiDrag),vi(document,"keydown",this._checkKeyDown),vi(document,"keyup",this._checkKeyUp)},_deselectMultiDrag:function(e){if(!(typeof sa<"u"&&sa)&&Mo===this.sortable&&!(e&&Po(e.target,this.options.draggable,this.sortable.el,!1))&&!(e&&e.button!==0))for(;ei.length;){var n=ei[0];Cn(n,this.options.selectedClass,!1),ei.shift(),Qa({sortable:this.sortable,rootEl:this.sortable.el,name:"deselect",targetEl:n,originalEvent:e})}},_checkKeyDown:function(e){e.key===this.options.multiDragKey&&(this.multiDragKeyDown=!0)},_checkKeyUp:function(e){e.key===this.options.multiDragKey&&(this.multiDragKeyDown=!1)}},ho(a,{pluginName:"multiDrag",utils:{select:function(e){var n=e.parentNode[fr];!n||!n.options.multiDrag||~ei.indexOf(e)||(Mo&&Mo!==n&&(Mo.multiDrag._deselectMultiDrag(),Mo=n),Cn(e,n.options.selectedClass,!0),ei.push(e))},deselect:function(e){var n=e.parentNode[fr],r=ei.indexOf(e);!n||!n.options.multiDrag||!~r||(Cn(e,n.options.selectedClass,!1),ei.splice(r,1))}},eventProperties:function(){var e=this,n=[],r=[];return ei.forEach(function(o){n.push({multiDragElement:o,index:o.sortableIndex});var s;Nr&&o!==nn?s=-1:Nr?s=xn(o,":not(."+e.options.selectedClass+")"):s=xn(o),r.push({multiDragElement:o,index:s})}),{items:W_(ei),clones:[].concat(Kr),oldIndicies:n,newIndicies:r}},optionListeners:{multiDragKey:function(e){return e=e.toLowerCase(),e==="ctrl"?e="Control":e.length>1&&(e=e.charAt(0).toUpperCase()+e.substr(1)),e}}})}function C0(a,t){ei.forEach(function(e,n){var r=t.children[e.sortableIndex+(a?Number(n):0)];r?t.insertBefore(e,r):t.appendChild(e)})}function Fm(a,t){Kr.forEach(function(e,n){var r=t.children[e.sortableIndex+(a?Number(n):0)];r?t.insertBefore(e,r):t.appendChild(e)})}function Su(){ei.forEach(function(a){a!==nn&&a.parentNode&&a.parentNode.removeChild(a)})}Gt.mount(new v0),Gt.mount(Uh,zh);const la=Object.freeze(Object.defineProperty({__proto__:null,MultiDrag:b0,Sortable:Gt,Swap:g0,default:Gt},Symbol.toStringTag,{value:"Module"}));var Gh;const wu=(Gh=la==null?void 0:Gt)!==null&&Gh!==void 0?Gh:la;class y0{constructor(t,e,n){this.extensionUtility=t,this.pubSubService=e,this.sharedService=n,this._gridColumns=[],this._gridUid="",this._reorderedColumns=[],this._subscriptions=[],this._defaults={dropPlaceHolderText:"Drop a column header here to group by the column",hideGroupSortIcons:!1,hideToggleAllButton:!1,toggleAllButtonText:"",toggleAllPlaceholderText:"Toggle all Groups"},this.columnsGroupBy=[],this.pluginName="DraggableGrouping",this._bindingEventService=new Fn,this._eventHandler=new Slick.EventHandler,this.onGroupChanged=new Slick.Event}get addonOptions(){return this._addonOptions}get dataView(){var t,e,n;return(n=(e=(t=this.grid)===null||t===void 0?void 0:t.getData)===null||e===void 0?void 0:e.call(t))!==null&&n!==void 0?n:{}}get dropboxElement(){return this._dropzoneElm}get droppableInstance(){return this._droppableInstance}get sortableLeftInstance(){return this._sortableLeftInstance}get sortableRightInstance(){return this._sortableRightInstance}get eventHandler(){return this._eventHandler}get grid(){var t,e;return(e=(t=this._grid)!==null&&t!==void 0?t:this.sharedService.slickGrid)!==null&&e!==void 0?e:{}}get gridOptions(){var t;return(t=this.sharedService.gridOptions)!==null&&t!==void 0?t:{}}get gridUid(){var t,e;return this._gridUid||((e=(t=this.grid)===null||t===void 0?void 0:t.getUID())!==null&&e!==void 0?e:"")}init(t,e){var n,r,o,s,l,u;if(this._addonOptions={...this._defaults,...e},this._grid=t,t){if(this._gridUid=t.getUID(),this._gridColumns=t.getColumns(),this._dropzoneElm=t.getPreHeaderPanel(),this._dropzoneElm.classList.add("slick-dropzone"),!this._addonOptions.hideToggleAllButton){this._groupToggler=Ie("div",{className:"slick-group-toggle-all",title:(n=this._addonOptions.toggleAllPlaceholderText)!==null&&n!==void 0?n:"",style:{display:"none"}});const h=Ie("span",{className:"slick-group-toggle-all-icon"},this._groupToggler);this.gridOptions.enableTranslate&&this._addonOptions.toggleAllButtonTextKey&&(this._addonOptions.toggleAllButtonText=this.extensionUtility.translateWhenEnabledAndServiceExist(this._addonOptions.toggleAllButtonTextKey,"TEXT_TOGGLE_ALL_GROUPS")),this.gridOptions.enableTranslate&&this._addonOptions.toggleAllPlaceholderTextKey&&(this._addonOptions.toggleAllPlaceholderText=this.extensionUtility.translateWhenEnabledAndServiceExist(this._addonOptions.toggleAllPlaceholderTextKey,"TEXT_TOGGLE_ALL_GROUPS")),this._groupToggler.title=(r=this._addonOptions.toggleAllPlaceholderText)!==null&&r!==void 0?r:"",this._addonOptions.toggleAllButtonText&&this._groupToggler.appendChild(Ie("span",{className:"slick-group-toggle-all-text",textContent:this._addonOptions.toggleAllButtonText||""})),this._dropzoneElm.appendChild(this._groupToggler),this._subscriptions.push(this.pubSubService.subscribe("onContextMenuCollapseAllGroups",()=>this.toggleGroupToggler(h,!0,!1)),this.pubSubService.subscribe("onContextMenuExpandAllGroups",()=>this.toggleGroupToggler(h,!1,!1)))}this._dropzonePlaceholderElm=Ie("div",{className:"slick-draggable-dropzone-placeholder"},this._dropzoneElm),this.gridOptions.enableTranslate&&(!((o=this._addonOptions)===null||o===void 0)&&o.dropPlaceHolderTextKey)&&(this._addonOptions.dropPlaceHolderText=this.extensionUtility.translateWhenEnabledAndServiceExist(this._addonOptions.dropPlaceHolderTextKey,"TEXT_TOGGLE_ALL_GROUPS")),this._dropzonePlaceholderElm.textContent=(u=(l=(s=this._addonOptions)===null||s===void 0?void 0:s.dropPlaceHolderText)!==null&&l!==void 0?l:this._defaults.dropPlaceHolderText)!==null&&u!==void 0?u:"",this.setupColumnDropbox(),this._eventHandler.subscribe(t.onHeaderCellRendered,(h,c)=>{var p;const m=c.node;if(!lh((p=c.column)===null||p===void 0?void 0:p.grouping)&&m&&(m.style.cursor="pointer",this._addonOptions.groupIconCssClass)){const v=Ie("span",{className:"slick-column-groupable"},m);this._addonOptions.groupIconCssClass&&v.classList.add(...this._addonOptions.groupIconCssClass.split(" "))}}),this._subscriptions.push(this.pubSubService.subscribe("onContextMenuClearGrouping",()=>this.clearDroppedGroups()));for(const h of this._gridColumns){const c=h.field;t.updateColumnHeader(c)}}return this}dispose(){this.destroySortableInstances(),this.onGroupChanged.unsubscribe(),this._eventHandler.unsubscribeAll(),this.pubSubService.unsubscribeAll(this._subscriptions),this._bindingEventService.unbindAll(),sn(document.querySelector(`.${this.gridUid} .slick-preheader-panel`))}clearDroppedGroups(){this.columnsGroupBy=[],this.updateGroupBy("clear-all");const t=this._dropzoneElm.querySelectorAll(".slick-dropped-grouping");for(const e of Array.from(t)){const n=this._dropzoneElm.querySelector(".slick-groupby-remove");n==null||n.remove(),e==null||e.remove()}this._dropzonePlaceholderElm.style.display="inline-block",this._groupToggler&&(this._groupToggler.style.display="none")}destroySortableInstances(){var t,e,n,r;!((t=this._sortableLeftInstance)===null||t===void 0)&&t.el&&((e=this._sortableLeftInstance)===null||e===void 0||e.destroy()),!((n=this._sortableRightInstance)===null||n===void 0)&&n.el&&((r=this._sortableRightInstance)===null||r===void 0||r.destroy())}setAddonOptions(t){this._addonOptions={...this._addonOptions,...t}}setColumns(t){this._gridColumns=t}setDroppedGroups(t){this._dropzonePlaceholderElm.style.display="none";const e=Array.isArray(t)?t:[t];for(const n of e){const r=this.grid.getHeaderColumn(n);this.handleGroupByDrop(this._dropzoneElm,r)}}setupColumnReorder(t,e,n,r,o,s,l,u,h){this.destroySortableInstances();const c=t.getPreHeaderPanel(),p=c.querySelector(".slick-draggable-dropzone-placeholder"),m=c.querySelector(".slick-group-toggle-all"),v={animation:50,chosenClass:"slick-header-column-active",ghostClass:"slick-sortable-placeholder",draggable:".slick-header-column",dataIdAttr:"data-id",group:{name:"shared",pull:"clone",put:!1},revertClone:!0,onStart:()=>{p&&(p.style.display="inline-block"),c.querySelectorAll(".slick-dropped-grouping").forEach(C=>C.style.display="none"),m&&(m.style.display="none")},onEnd:_=>{var C,x,S,y,D;c==null||c.classList.remove("slick-dropzone-hover"),(C=p==null?void 0:p.parentElement)===null||C===void 0||C.classList.remove("slick-dropzone-placeholder-hover");const A=c.querySelectorAll(".slick-dropped-grouping");if(A.forEach(Q=>Q.style.display="flex"),A.length&&(p&&(p.style.display="none"),m&&(m.style.display="inline-block")),!t.getEditorLock().commitCurrentEdit())return;const P=(S=(x=this.sortableLeftInstance)===null||x===void 0?void 0:x.toArray())!==null&&S!==void 0?S:[];if(e.length>1){const Q=(D=(y=this._sortableRightInstance)===null||y===void 0?void 0:y.toArray())!==null&&D!==void 0?D:[];for(const L of Q)P.push(L)}const M=[],B=t.getColumns();for(const Q of P)M.push(B[l(Q)]);r(M),h(t.onColumnsReordered,{grid:t}),_.stopPropagation(),o()}};return this._sortableLeftInstance=wu.create(document.querySelector(`.${t.getUID()} .slick-header-columns.slick-header-columns-left`),v),this._sortableRightInstance=wu.create(document.querySelector(`.${t.getUID()} .slick-header-columns.slick-header-columns-right`),v),{sortableLeftInstance:this._sortableLeftInstance,sortableRightInstance:this._sortableRightInstance}}addColumnGroupBy(t){this.columnsGroupBy.push(t),this.updateGroupBy("add-group")}addGroupByRemoveClickHandler(t,e,n,r){this._bindingEventService.bind(e,"click",()=>{const o=this._bindingEventService.boundedEvents.filter(s=>s.element===e);for(const s of o)this._bindingEventService.unbind(s.element,"click",s.listener);this.removeGroupBy(t,n,r)})}addGroupSortClickHandler(t,e){const{grouping:n,type:r}=t;this._bindingEventService.bind(e,"click",()=>{if(this.toggleGroupAll(t,!1),n){const o=n.sortAsc?Xi.desc:Xi.asc;n.comparer=(s,l)=>Jl(r||"text",s.value,l.value,o,t,this.gridOptions),this.getGroupBySortIcon(e,!n.sortAsc),this.updateGroupBy("sort-group"),n.sortAsc=!n.sortAsc,this.grid.invalidate()}})}getGroupBySortIcon(t,e=!0){var n,r,o,s;e?this._addonOptions.sortAscIconCssClass?(t.classList.remove(...(r=(n=this._addonOptions.sortDescIconCssClass)===null||n===void 0?void 0:n.split(" "))!==null&&r!==void 0?r:""),t.classList.add(...this._addonOptions.sortAscIconCssClass.split(" "))):(t.classList.add("slick-groupby-sort-asc-icon"),t.classList.remove("slick-groupby-sort-desc-icon")):this._addonOptions.sortDescIconCssClass?(t.classList.remove(...(s=(o=this._addonOptions.sortAscIconCssClass)===null||o===void 0?void 0:o.split(" "))!==null&&s!==void 0?s:""),t.classList.add(...this._addonOptions.sortDescIconCssClass.split(" "))):this._addonOptions.sortDescIconCssClass||(t.classList.add("slick-groupby-sort-desc-icon"),t.classList.remove("slick-groupby-sort-asc-icon"))}handleGroupByDrop(t,e){var n,r,o;const s=(n=e.getAttribute("data-id"))===null||n===void 0?void 0:n.replace(this._gridUid,"");let l=!0;for(const u of this.columnsGroupBy)u.id===s&&(l=!1);if(l){for(const u of this._gridColumns)if(u.id===s&&u.grouping&&!lh(u.grouping)){const h=e.querySelector(".slick-column-name"),c=Ie("div",{id:`${this._gridUid}_${u.id}_entry`,className:"slick-dropped-grouping",dataset:{id:`${u.id}`}});Ie("div",{className:"slick-dropped-grouping-title",style:{display:"inline-flex"},textContent:h?h.textContent:e.textContent},c);const p=Ie("div",{className:"slick-groupby-remove"});this._addonOptions.deleteIconCssClass&&p.classList.add(...this._addonOptions.deleteIconCssClass.split(" ")),this._addonOptions.deleteIconCssClass||p.classList.add("slick-groupby-remove-icon");let m;((r=this._addonOptions)===null||r===void 0?void 0:r.hideGroupSortIcons)!==!0&&u.sortable&&(((o=u.grouping)===null||o===void 0?void 0:o.sortAsc)===void 0&&(u.grouping.sortAsc=!0),m=Ie("div",{className:"slick-groupby-sort"},c),this.getGroupBySortIcon(m,u.grouping.sortAsc)),c.appendChild(p),c.appendChild(document.createElement("div")),t.appendChild(c),this._groupToggler&&this.columnsGroupBy.length===0&&this.toggleGroupAll(u),this.addColumnGroupBy(u),this.addGroupByRemoveClickHandler(u.id,p,e,c),m&&this.addGroupSortClickHandler(u,m)}this._groupToggler&&this.columnsGroupBy.length>0&&(this._groupToggler.style.display="inline-block")}}toggleGroupAll({grouping:t},e){var n;const r=(n=this._groupToggler)===null||n===void 0?void 0:n.querySelector(".slick-group-toggle-all-icon");e===!0||t!=null&&t.collapsed?(r==null||r.classList.add("collapsed"),r==null||r.classList.remove("expanded")):(r==null||r.classList.add("expanded"),r==null||r.classList.remove("collapsed"))}removeFromArray(t,e){if(Array.isArray(t)){const n=t.findIndex(r=>r.id===e.id);n>=0&&t.splice(n,1)}return t}removeGroupBy(t,e,n){n.remove();const r=[];this._gridColumns.forEach(o=>r[o.id]=o),this.removeFromArray(this.columnsGroupBy,r[t]),this.columnsGroupBy.length===0&&(this._dropzonePlaceholderElm.style.display="inline-block",this._groupToggler&&(this._groupToggler.style.display="none")),this.updateGroupBy("remove-group")}addDragOverDropzoneListeners(){const t=this._dropzoneElm.querySelector(".slick-draggable-dropzone-placeholder");t&&this._dropzoneElm&&(this._bindingEventService.bind(t,"dragover",e=>e.preventDefault()),this._bindingEventService.bind(t,"dragenter",()=>this._dropzoneElm.classList.add("slick-dropzone-hover")),this._bindingEventService.bind(t,"dragleave",()=>this._dropzoneElm.classList.remove("slick-dropzone-hover")))}setupColumnDropbox(){const t=this._dropzoneElm;this._droppableInstance=wu.create(t,{group:"shared",ghostClass:"slick-droppable-sortitem-hover",draggable:".slick-dropped-grouping",dragoverBubble:!0,onAdd:e=>{var n,r;const o=e.item;!((n=o.getAttribute("id"))===null||n===void 0)&&n.replace(this._gridUid,"")&&this.handleGroupByDrop(t,wu.utils.clone(e.item)),(r=o.parentNode)===null||r===void 0||r.removeChild(o)},onUpdate:()=>{var e,n;const r=(n=(e=this._droppableInstance)===null||e===void 0?void 0:e.toArray())!==null&&n!==void 0?n:[],o=[];for(const s of r)for(const l of this.columnsGroupBy)if(l.id===s){o.push(l);break}this.columnsGroupBy=o,this.updateGroupBy("sort-group")}}),this.addDragOverDropzoneListeners(),this._groupToggler&&this._bindingEventService.bind(this._groupToggler,"click",e=>{const n=e.target.classList.contains("slick-group-toggle-all-icon")?e.target:e.currentTarget.querySelector(".slick-group-toggle-all-icon");this.toggleGroupToggler(n,n==null?void 0:n.classList.contains("expanded"))})}toggleGroupToggler(t,e=!0,n=!0){t&&(e===!0?(t.classList.add("collapsed"),t.classList.remove("expanded"),n&&this.dataView.collapseAllGroups()):(t.classList.remove("collapsed"),t.classList.add("expanded"),n&&this.dataView.expandAllGroups()))}updateGroupBy(t){if(this.columnsGroupBy.length===0){this.dataView.setGrouping([]),this._dropzonePlaceholderElm.style.display="inline-block",this.triggerOnGroupChangedEvent({caller:t,groupColumns:[]});return}const e=[];this.columnsGroupBy.forEach(n=>e.push(n.grouping)),this.dataView.setGrouping(e),this._dropzonePlaceholderElm.style.display="none",this.triggerOnGroupChangedEvent({caller:t,groupColumns:e})}triggerOnGroupChangedEvent(t){this._addonOptions&&typeof this._addonOptions.onGroupChanged=="function"&&this._addonOptions.onGroupChanged(new Slick.EventData,t),this.onGroupChanged.notify(t)}}class Mm{constructor(){this._defaults={groupCssClass:"slick-group",groupTitleCssClass:"slick-group-title",totalsCssClass:"slick-group-totals",groupFocusable:!0,indentation:15,totalsFocusable:!1,toggleCssClass:"slick-group-toggle",toggleExpandedCssClass:"expanded",toggleCollapsedCssClass:"collapsed",enableExpandCollapse:!0,groupFormatter:this.defaultGroupCellFormatter.bind(this),totalsFormatter:this.defaultTotalsCellFormatter.bind(this),includeHeaderTotals:!1},this._eventHandler=new Slick.EventHandler,this._options=this._defaults}get eventHandler(){return this._eventHandler}get dataView(){var t,e,n;return(n=(e=(t=this._grid)===null||t===void 0?void 0:t.getData)===null||e===void 0?void 0:e.call(t))!==null&&n!==void 0?n:{}}get grid(){return this._grid}init(t,e){this._grid=t,this._options={...this._defaults,...e},this._eventHandler.subscribe(t.onClick,this.handleGridClick.bind(this)),this._eventHandler.subscribe(t.onKeyDown,this.handleGridKeyDown.bind(this))}dispose(){var t;(t=this._eventHandler)===null||t===void 0||t.unsubscribeAll()}getOptions(){return this._options}setOptions(t){this._options={...this._options,...t}}getGroupRowMetadata(t){return{selectable:!1,focusable:this._options.groupFocusable,cssClasses:`${this._options.groupCssClass} slick-group-level-${(t==null?void 0:t.level)||0}`,formatter:this._options.includeHeaderTotals&&this._options.totalsFormatter,columns:{0:{colspan:this._options.includeHeaderTotals?"1":"*",formatter:this._options.groupFormatter,editor:null}}}}getTotalsRowMetadata(t){var e;return{selectable:!1,focusable:this._options.totalsFocusable,cssClasses:`${this._options.totalsCssClass} slick-group-level-${((e=t==null?void 0:t.group)===null||e===void 0?void 0:e.level)||0}`,formatter:this._options.totalsFormatter,editor:null}}defaultGroupCellFormatter(t,e,n,r,o){var s,l;if(!this._options.enableExpandCollapse)return o.title;const u=o.level||0,h=(l=(s=this._options)===null||s===void 0?void 0:s.indentation)!==null&&l!==void 0?l:15,c=`${u*h}px`,p=o.collapsed?this._options.toggleCollapsedCssClass:this._options.toggleExpandedCssClass;return`<span class="${this._options.toggleCssClass} ${p}" aria-expanded="${!o.collapsed}" style="margin-left: ${c}"></span><span class="${this._options.groupTitleCssClass}" level="${u}">${o.title||""}</span>`}defaultTotalsCellFormatter(t,e,n,r,o,s){var l,u;return(u=(l=r==null?void 0:r.groupTotalsFormatter)===null||l===void 0?void 0:l.call(r,o,r,s))!==null&&u!==void 0?u:""}handleGridClick(t,e){const n=t.target,r=this.grid.getDataItem(e.row);r instanceof Slick.Group&&n.classList.contains(this._options.toggleCssClass||"")&&(this.handleDataViewExpandOrCollapse(r),t.stopImmediatePropagation(),t.preventDefault())}handleGridKeyDown(t){if(this._options.enableExpandCollapse&&t.keyCode===xi.SPACE){const e=this.grid.getActiveCell();if(e){const n=this.grid.getDataItem(e.row);n instanceof Slick.Group&&(this.handleDataViewExpandOrCollapse(n),t.stopImmediatePropagation(),t.preventDefault())}}}handleDataViewExpandOrCollapse(t){const e=this.grid.getRenderedRange();this.dataView.setRefreshHints({ignoreDiffsBefore:e.top,ignoreDiffsAfter:e.bottom+1}),t.collapsed?this.dataView.expandGroup(t.groupingKey):this.dataView.collapseGroup(t.groupingKey)}}class E0 extends nu{constructor(t,e,n){super(t,e,n),this.extensionUtility=t,this.pubSubService=e,this.sharedService=n,this._buttonElms=[],this._defaults={buttonCssClass:"slick-header-button"},this.pluginName="HeaderButtons",this._menuCssPrefix="slick-header-button",this._camelPluginName="headerButtons",this._bindEventService=new Fn,this._eventHandler=new Slick.EventHandler,this.init(n.gridOptions.headerButton)}get addonOptions(){return this._addonOptions}set addonOptions(t){this._addonOptions=t}get eventHandler(){return this._eventHandler}get grid(){return this.sharedService.slickGrid}init(t){this._addonOptions={...this._defaults,...t},this._eventHandler.subscribe(this.grid.onHeaderCellRendered,this.handleHeaderCellRendered.bind(this)),this._eventHandler.subscribe(this.grid.onBeforeHeaderCellDestroy,this.handleBeforeHeaderCellDestroy.bind(this)),this.grid.setColumns(this.grid.getColumns())}dispose(){super.dispose(),this._buttonElms.forEach(t=>t.remove())}handleHeaderCellRendered(t,e){var n;const r=e.column;if(!((n=r.header)===null||n===void 0)&&n.buttons&&Array.isArray(r.header.buttons)){let o=r.header.buttons.length;for(;o--;){const s=r.header.buttons[o],l=this.populateSingleCommandOrOptionItem("command",this.addonOptions,null,s,e,this.handleButtonClick.bind(this));l&&s.handler&&!s.disabled&&this._bindEventService.bind(l,"click",u=>s.handler.call(this,u)),l&&(this._buttonElms.push(l),e.node.appendChild(l))}}}handleBeforeHeaderCellDestroy(t,e){var n,r,o;if(!((n=e.column.header)===null||n===void 0)&&n.buttons&&(!((r=this._addonOptions)===null||r===void 0)&&r.buttonCssClass)){const l=(((o=this._addonOptions)===null||o===void 0?void 0:o.buttonCssClass)||"").replace(/(\s+)/g,".");l&&e.node.querySelectorAll(`.${l}`).forEach(u=>u.remove())}}handleButtonClick(t,e,n,r,o){var s;if(n.command&&!n.disabled){const l=n.command||"",u={grid:this.grid,column:o,button:n};l&&(u.command=l),typeof n.action=="function"&&!n.disabled&&n.action.call(this,t,u),l!==null&&!n.disabled&&(!((s=this._addonOptions)===null||s===void 0)&&s.onCommand)&&(this.pubSubService.publish("onHeaderButtonCommand",u),this._addonOptions.onCommand(t,u),o!=null&&o.id&&this.grid.updateColumnHeader(o.id))}t.preventDefault(),t.stopPropagation()}}class S0 extends nu{constructor(t,e,n,r,o){super(t,n,r),this.extensionUtility=t,this.filterService=e,this.pubSubService=n,this.sharedService=r,this.sortService=o,this._subMenuParentId="",this._defaults={autoAlign:!0,autoAlignOffset:0,buttonCssClass:null,buttonImage:null,minWidth:100,hideColumnHideCommand:!1,hideSortCommands:!1,title:"",subMenuOpenByEvent:"mouseover"},this.pluginName="HeaderMenu",this._menuCssPrefix="slick-menu",this._menuPluginCssPrefix="slick-header-menu",this._camelPluginName="headerMenu",this.sharedService.gridOptions.headerMenu=this.addHeaderMenuCustomCommands(this.sharedService.columnDefinitions),this.init(r.gridOptions.headerMenu)}init(t){this._addonOptions={...this._defaults,...t},this._eventHandler.subscribe(this.grid.onBeforeSetColumns,(e,n)=>{this.sharedService.gridOptions.headerMenu=this.addHeaderMenuCustomCommands(n.newColumns)}),this._eventHandler.subscribe(this.grid.onHeaderCellRendered,this.handleHeaderCellRendered.bind(this)),this._eventHandler.subscribe(this.grid.onBeforeHeaderCellDestroy,this.handleBeforeHeaderCellDestroy.bind(this)),this.grid.setColumns(this.grid.getColumns()),this._bindEventService.bind(document.body,"mousedown",this.handleBodyMouseDown.bind(this),{capture:!0})}dispose(){var t;super.dispose(),this._menuElm=this._menuElm||document.body.querySelector(`.slick-header-menu${this.gridUidSelector}`),(t=this._menuElm)===null||t===void 0||t.remove(),this._activeHeaderColumnElm=void 0}hideColumn(t){var e,n,r;if(!((n=(e=this.sharedService)===null||e===void 0?void 0:e.slickGrid)===null||n===void 0)&&n.getColumnIndex){const o=this.sharedService.slickGrid.getColumnIndex(t.id),s=this.sharedService.slickGrid.getColumns(),l=(r=this.sharedService.gridOptions.frozenColumn)!==null&&r!==void 0?r:-1;l>=0&&l>=o&&(this.sharedService.gridOptions.frozenColumn=l-1,this.sharedService.slickGrid.setOptions({frozenColumn:this.sharedService.gridOptions.frozenColumn}));const u=oh(s,o);this.sharedService.visibleColumns=u,this.sharedService.slickGrid.setColumns(u),this.pubSubService.publish("onHeaderMenuHideColumns",{columns:u,hiddenColumn:t})}}hideMenu(){var t,e;this.disposeSubMenus(),(t=this._menuElm)===null||t===void 0||t.remove(),this._menuElm=void 0,(e=this._activeHeaderColumnElm)===null||e===void 0||e.classList.remove("slick-header-column-active")}repositionSubMenu(t,e,n,r){const o=this.createCommandMenu(e.commandItems||e.items||[],r,n+1,e);document.body.appendChild(o),this.repositionMenu(t,o)}repositionMenu(t,e){var n,r,o,s,l,u,h,c,p;const m=t.target,v=e.classList.contains("slick-submenu"),_=v?t.target.closest(".slick-menu-item"):m,C=x_(this.sharedService.gridContainerElement,m),x=this.grid.getGridPosition(),S=e.offsetWidth,y=Un(_);let D=v?(n=y==null?void 0:y.left)!==null&&n!==void 0?n:0:(r=C==null?void 0:C.left)!==null&&r!==void 0?r:0,A=v?(o=y==null?void 0:y.top)!==null&&o!==void 0?o:0:((s=C==null?void 0:C.top)!==null&&s!==void 0?s:0)+((u=(l=this.addonOptions)===null||l===void 0?void 0:l.menuOffsetTop)!==null&&u!==void 0?u:0)+m.clientHeight;if(v){const P=(e==null?void 0:e.clientHeight)||0,{bottom:M,top:B}=tu(_);(M<P&&B>M?"top":"bottom")==="top"?(e.classList.remove("dropdown"),e.classList.add("dropup"),A-=P-_.clientHeight):(e.classList.remove("dropup"),e.classList.add("dropdown"))}if(v&&_){const P=D+Number(S)+_.clientWidth,M=document.documentElement.clientWidth;(P>=x.width||P>=M?"left":"right")==="left"?(e.classList.remove("dropright"),e.classList.add("dropleft"),D-=S):(e.classList.remove("dropleft"),e.classList.add("dropright"),D+=_.offsetWidth)}else D=(h=C==null?void 0:C.left)!==null&&h!==void 0?h:0,this.addonOptions.autoAlign&&(x!=null&&x.width)&&D+((c=e.clientWidth)!==null&&c!==void 0?c:0)>=x.width&&(D=D+m.clientWidth-e.clientWidth+(((p=this.addonOptions)===null||p===void 0?void 0:p.autoAlignOffset)||0));e.style.top=`${A}px`,e.style.left=`${D}px`,this._activeHeaderColumnElm=this.grid.getContainerNode().querySelector(":not(.slick-preheader-panel) >.slick-header-columns"),this._activeHeaderColumnElm&&this._activeHeaderColumnElm.classList.add("slick-header-column-active")}translateHeaderMenu(){var t;!((t=this.sharedService.gridOptions)===null||t===void 0)&&t.headerMenu&&this.resetHeaderMenuTranslations(this.sharedService.visibleColumns)}handleHeaderCellRendered(t,e){var n;const o=(n=e.column.header)===null||n===void 0?void 0:n.menu;if(o!=null&&o.items&&console.warn('[Slickgrid-Universal] Header Menu "items" property was deprecated in favor of "commandItems" to align with all other Menu plugins.'),o&&e.node){if(!this.extensionUtility.runOverrideFunctionWhenExists(this.addonOptions.menuUsabilityOverride,e))return;const s=Ie("div",{className:"slick-header-menu-button",ariaLabel:"Header Menu"},e.node);this.addonOptions.buttonCssClass&&s.classList.add(...this.addonOptions.buttonCssClass.split(" ")),this.addonOptions.tooltip&&(s.title=this.addonOptions.tooltip),this._bindEventService.bind(s,"click",l=>{this.disposeAllMenus(),this.createParentMenu(l,e.column,o)})}}handleBeforeHeaderCellDestroy(t,e){var n;!((n=e.column.header)===null||n===void 0)&&n.menu&&e.node.querySelectorAll(".slick-header-menu-button").forEach(o=>o.remove())}handleBodyMouseDown(t){if(this.menuElement){let e=!1;const n=t.target.closest(`.${this.menuCssClass}`);(this.menuElement.contains(t.target)||n)&&(e=!0),(this._menuElm!==t.target&&!e&&!t.defaultPrevented||t.target.className==="close"&&n)&&this.hideMenu()}}handleMenuItemCommandClick(t,e,n,r=0,o){var s;if(n!=="divider"&&!n.disabled&&!n.divider)if((n.command||"")&&!n.commandItems&&!n.items){const u={grid:this.grid,command:n.command,column:o,item:n};this.executeHeaderMenuInternalCommands(t,u),this.pubSubService.publish("onHeaderMenuCommand",u),typeof((s=this.addonOptions)===null||s===void 0?void 0:s.onCommand)=="function"&&this.addonOptions.onCommand(t,u),typeof n.action=="function"&&n.action.call(this,t,u),t.defaultPrevented||this.hideMenu(),t.preventDefault(),t.stopPropagation()}else(n.commandItems||n.items)&&this.repositionSubMenu(t,n,r,o)}handleMenuItemMouseOver(t,e,n,r=0,o){n!=="divider"&&!n.disabled&&!n.divider&&(n.commandItems||n.items?this.repositionSubMenu(t,n,r,o):r===0&&this.disposeSubMenus())}addHeaderMenuCustomCommands(t){const e=this.sharedService.gridOptions,n=e.headerMenu||{},r=ao(e);return Array.isArray(t)&&e.enableHeaderMenu&&t.forEach(o=>{var s,l,u,h,c,p;if(o&&!o.excludeFromHeaderMenu){o.header?o.header.menu||(o.header.menu={commandItems:[]}):o.header={menu:{commandItems:[]}};const m=(p=(u=(l=(s=o==null?void 0:o.header)===null||s===void 0?void 0:s.menu)===null||l===void 0?void 0:l.commandItems)!==null&&u!==void 0?u:(c=(h=o==null?void 0:o.header)===null||h===void 0?void 0:h.menu)===null||c===void 0?void 0:c.items)!==null&&p!==void 0?p:[];let v=!1;n&&!n.hideFreezeColumnsCommand&&(v=!0,m.some(_=>_!=="divider"&&(_==null?void 0:_.command)==="freeze-columns")||m.push({iconCssClass:n.iconFreezeColumns||"fa fa-thumb-tack",titleKey:`${r}FREEZE_COLUMNS`,command:"freeze-columns",positionOrder:47})),n&&!n.hideColumnResizeByContentCommand&&this.sharedService.gridOptions.enableColumnResizeOnDoubleClick&&(v=!0,m.some(_=>_!=="divider"&&(_==null?void 0:_.command)==="column-resize-by-content")||m.push({iconCssClass:n.iconColumnResizeByContentCommand||"fa fa-arrows-h",titleKey:`${r}COLUMN_RESIZE_BY_CONTENT`,command:"column-resize-by-content",positionOrder:48})),v&&!m.some(_=>_!=="divider"&&_.positionOrder===49)&&m.push({divider:!0,command:"",positionOrder:49}),e.enableSorting&&o.sortable&&n&&!n.hideSortCommands&&(m.some(_=>_!=="divider"&&(_==null?void 0:_.command)==="sort-asc")||m.push({iconCssClass:n.iconSortAscCommand||"fa fa-sort-asc",titleKey:`${r}SORT_ASCENDING`,command:"sort-asc",positionOrder:50}),m.some(_=>_!=="divider"&&(_==null?void 0:_.command)==="sort-desc")||m.push({iconCssClass:n.iconSortDescCommand||"fa fa-sort-desc",titleKey:`${r}SORT_DESCENDING`,command:"sort-desc",positionOrder:51}),m.some(_=>_!=="divider"&&_.positionOrder===52)||m.push({divider:!0,command:"",positionOrder:52}),!n.hideClearSortCommand&&!m.some(_=>_!=="divider"&&(_==null?void 0:_.command)==="clear-sort")&&m.push({iconCssClass:n.iconClearSortCommand||"fa fa-unsorted",titleKey:`${r}REMOVE_SORT`,command:"clear-sort",positionOrder:54})),e.enableFiltering&&o.filterable&&n&&!n.hideFilterCommand&&!n.hideClearFilterCommand&&!m.some(_=>_!=="divider"&&(_==null?void 0:_.command)==="clear-filter")&&m.push({iconCssClass:n.iconClearFilterCommand||"fa fa-filter",titleKey:`${r}REMOVE_FILTER`,command:"clear-filter",positionOrder:53}),n&&!n.hideColumnHideCommand&&!m.some(_=>_!=="divider"&&(_==null?void 0:_.command)==="hide-column")&&m.push({iconCssClass:n.iconColumnHideCommand||"fa fa-times",titleKey:`${r}HIDE_COLUMN`,command:"hide-column",positionOrder:55}),this.extensionUtility.translateMenuItemsFromTitleKey(m),this.extensionUtility.sortItems(m,"positionOrder")}}),n}clearColumnFilter(t,e){e!=null&&e.column&&this.filterService.clearFilterByColumnId(t,e.column.id)}clearColumnSort(t,e){e!=null&&e.column&&this.sharedService&&this.sortService.clearSortByColumnId(t,e.column.id)}executeHeaderMenuInternalCommands(t,e){var n;if(e!=null&&e.command)switch(e.command){case"hide-column":this.hideColumn(e.column),!((n=this.sharedService.gridOptions)===null||n===void 0)&&n.enableAutoSizeColumns&&this.sharedService.slickGrid.autosizeColumns();break;case"clear-filter":this.clearColumnFilter(t,e);break;case"clear-sort":this.clearColumnSort(t,e);break;case"column-resize-by-content":this.pubSubService.publish("onHeaderMenuColumnResizeByContent",{columnId:e.column.id});break;case"freeze-columns":const r=[...this.sharedService.visibleColumns],s={frozenColumn:r.findIndex(c=>c.id===e.column.id),enableMouseWheelScrollHandler:!0},l=this.sharedService.slickGrid.getColumns();this.sharedService.slickGrid.setOptions(s,!1,!0),this.sharedService.gridOptions.frozenColumn=s.frozenColumn,this.sharedService.gridOptions.enableMouseWheelScrollHandler=s.enableMouseWheelScrollHandler,this.sharedService.frozenVisibleColumnId=e.column.id,this.sharedService.hasColumnsReordered||Array.isArray(r)&&Array.isArray(this.sharedService.allColumns)&&r.length!==this.sharedService.allColumns.length?this.sharedService.slickGrid.setColumns(r):this.sharedService.slickGrid.setColumns(l),this.sharedService.slickGrid.getOptions().enableAutoSizeColumns&&this.sharedService.slickGrid.autosizeColumns();break;case"sort-asc":case"sort-desc":const h=e.command==="sort-asc";this.sortColumn(t,e,h);break}}createParentMenu(t,e,n){var r,o,s,l,u;const h={grid:this.grid,column:e,menu:n};typeof t.stopPropagation=="function"&&(this.pubSubService.publish("onHeaderMenuBeforeMenuShow",h),typeof((r=this.addonOptions)===null||r===void 0?void 0:r.onBeforeMenuShow)=="function"&&((o=this.addonOptions)===null||o===void 0?void 0:o.onBeforeMenuShow(t,h))===!1)||(this._menuElm=this.createCommandMenu(n.commandItems||n.items,e),(s=this.grid.getContainerNode())===null||s===void 0||s.appendChild(this._menuElm),this.repositionMenu(t,this._menuElm),this.pubSubService.publish("onHeaderMenuAfterMenuShow",h),!(typeof((l=this.addonOptions)===null||l===void 0?void 0:l.onAfterMenuShow)=="function"&&((u=this.addonOptions)===null||u===void 0?void 0:u.onAfterMenuShow(t,h))===!1)&&(t.preventDefault(),t.stopPropagation()))}createCommandMenu(t,e,n=0,r){const o=r==null?void 0:r.command;let s=n===1&&o?o.replace(/\s/g,""):"";s&&(this._subMenuParentId=s),n>1&&(s=this._subMenuParentId);const l=`${this.menuCssClass} slick-menu-level-${n} ${this.gridUid}`,u=document.body.querySelector(`.${this.menuCssClass}.slick-menu-level-${n}${this.gridUidSelector}`);if(u){if(u.dataset.subMenuParent===s)return u;this.disposeSubMenus()}const h=Ie("div",{ariaExpanded:"true",ariaLabel:n>1?"SubMenu":"Header Menu",role:"menu",className:l,style:{minWidth:`${this.addonOptions.minWidth}px`}});n>0&&(h.classList.add("slick-submenu"),s&&(h.dataset.subMenuParent=s));const c=Ie("div",{className:`${this._menuCssPrefix}-command-list`,role:"menu"},h),p={grid:this.grid,column:e,level:n,menu:{commandItems:t}};return r&&n>0&&this.addSubMenuTitleWhenExists(r,c),this.populateCommandOrOptionItems("command",this.addonOptions,c,t,p,this.handleMenuItemCommandClick,this.handleMenuItemMouseOver),n++,h}resetHeaderMenuTranslations(t){t.forEach(e=>{var n,r,o,s,l;if(((o=(r=(n=e==null?void 0:e.header)===null||n===void 0?void 0:n.menu)===null||r===void 0?void 0:r.commandItems)!==null&&o!==void 0?o:!((l=(s=e==null?void 0:e.header)===null||s===void 0?void 0:s.menu)===null||l===void 0)&&l.items)&&!e.excludeFromHeaderMenu){const u=e.header.menu.commandItems||e.header.menu.items||[];this.extensionUtility.translateMenuItemsFromTitleKey(u)}})}sortColumn(t,e,n=!0){if(e!=null&&e.column){const r=e.column,o=this.sharedService.gridOptions.multiColumnSort?this.sortService.getCurrentColumnSorts(r.id+""):[];let s=en.local;o.push({columnId:r.id,sortCol:r,sortAsc:n}),this.sharedService.gridOptions.backendServiceApi?(this.sortService.onBackendSortChanged(t,{multiColumnSort:!0,sortCols:o,grid:this.sharedService.slickGrid}),s=en.remote):this.sharedService.dataView?(this.sortService.onLocalSortChanged(this.sharedService.slickGrid,o),s=en.local):e.grid.onSort.notify(o);const l=o.map(u=>{var h,c,p;return{columnId:(c=(h=u==null?void 0:u.sortCol)===null||h===void 0?void 0:h.id)!==null&&c!==void 0?c:"",sortAsc:(p=u==null?void 0:u.sortAsc)!==null&&p!==void 0?p:!0}});if(this.sharedService.slickGrid.setSortColumns(l),s){const u=[];l.forEach(h=>{u.push({columnId:`${h.columnId}`,direction:h.sortAsc?"ASC":"DESC"})}),this.sortService.emitSortChanged(s,u)}}}}class Nm{constructor(t){this.pubSubService=t,this._dragging=!1,this._handler=new Slick.EventHandler,this._defaults={autoScroll:!0,columnId:"_move",cssClass:"slick-row-move-column",cancelEditOnDrag:!1,disableRowSelection:!1,hideRowMoveShadow:!0,rowMoveShadowMarginTop:0,rowMoveShadowMarginLeft:0,rowMoveShadowOpacity:.9,rowMoveShadowScale:.75,singleRowMove:!1,width:40},this.onBeforeMoveRows=new Slick.Event,this.onMoveRows=new Slick.Event,this.pluginName="RowMoveManager",this._eventHandler=new Slick.EventHandler}get addonOptions(){return this._addonOptions}get eventHandler(){return this._eventHandler}get gridOptions(){var t,e,n;return(n=(e=(t=this._grid)===null||t===void 0?void 0:t.getOptions)===null||e===void 0?void 0:e.call(t))!==null&&n!==void 0?n:{}}init(t,e){var n;this._addonOptions={...this._defaults,...e},this._grid=t,this._canvas=this._grid.getCanvasNode(),typeof((n=this._addonOptions)===null||n===void 0?void 0:n.usabilityOverride)=="function"&&this.usabilityOverride(this._addonOptions.usabilityOverride),this._eventHandler.subscribe(this._grid.onDragInit,this.handleDragInit.bind(this)).subscribe(this._grid.onDragStart,this.handleDragStart.bind(this)).subscribe(this._grid.onDrag,this.handleDrag.bind(this)).subscribe(this._grid.onDragEnd,this.handleDragEnd.bind(this))}dispose(){var t;(t=this._eventHandler)===null||t===void 0||t.unsubscribeAll()}create(t,e){var n,r;if(this._addonOptions={...this._defaults,...e.rowMoveManager},Array.isArray(t)&&e){const o=this.getColumnDefinition();if(!t.some(s=>s.id===o.id)){const s=Array.isArray(t)&&t.find(h=>(h==null?void 0:h.behavior)==="selectAndMove"),l=s||o,u=(r=(n=e==null?void 0:e.rowMoveManager)===null||n===void 0?void 0:n.columnIndexPosition)!==null&&r!==void 0?r:0;u>0?t.splice(u,0,l):t.unshift(l),this.pubSubService.publish("onPluginColumnsChanged",{columns:t,pluginName:this.pluginName})}}return this}getColumnDefinition(){var t,e;const n=String((e=(t=this._addonOptions)===null||t===void 0?void 0:t.columnId)!==null&&e!==void 0?e:this._defaults.columnId);return{id:n,name:"",behavior:"selectAndMove",excludeFromExport:!0,excludeFromColumnPicker:!0,excludeFromGridMenu:!0,excludeFromQuery:!0,excludeFromHeaderMenu:!0,field:n,resizable:!1,selectable:!1,width:this._addonOptions.width||40,formatter:this.moveIconFormatter.bind(this)}}usabilityOverride(t){this._usabilityOverride=t}setOptions(t){this._addonOptions={...this._addonOptions,...t}}handleDragInit(t){t.stopImmediatePropagation()}handleDragEnd(t,e){var n,r,o;if(this._dragging&&(this._dragging=!1,t.stopImmediatePropagation(),(n=e.guide)===null||n===void 0||n.remove(),(r=e.selectionProxy)===null||r===void 0||r.remove(),(o=e.clonedSlickRow)===null||o===void 0||o.remove(),e.canMove)){const s={grid:this._grid,rows:e.selectedRows,insertBefore:e.insertBefore};typeof this._addonOptions.onMoveRows=="function"&&this._addonOptions.onMoveRows(t,s),this.onMoveRows.notify(s)}}handleDrag(t,e){var n,r,o,s,l,u;if(this._dragging){t.stopImmediatePropagation();const c=((r=(n=t==null?void 0:t.touches)===null||n===void 0?void 0:n[0])!==null&&r!==void 0?r:t).pageY-((s=(o=Un(this._canvas))===null||o===void 0?void 0:o.top)!==null&&s!==void 0?s:0);e.selectionProxy.style.top=`${c-5}px`,e.selectionProxy.style.display="block",e.clonedSlickRow&&(e.clonedSlickRow.style.top=`${c-6}px`,e.clonedSlickRow.style.display="block");const p=Math.max(0,Math.min(Math.round(c/(this.gridOptions.rowHeight||0)),this._grid.getDataLength()));if(p!==e.insertBefore){const m={grid:this._grid,rows:e.selectedRows,insertBefore:p};if(((u=(l=this._addonOptions)===null||l===void 0?void 0:l.onBeforeMoveRows)===null||u===void 0?void 0:u.call(l,t,m))===!1||this.onBeforeMoveRows.notify(m).getReturnValue()===!1?e.canMove=!1:e.canMove=!0,this._usabilityOverride&&e.canMove){const v=this._grid.getDataItem(p);e.canMove=this.checkUsabilityOverride(p,v,this._grid)}e.canMove?e.guide.style.top=`${p*(this.gridOptions.rowHeight||0)}px`:e.guide.style.top="-1000px",e.insertBefore=p}}}handleDragStart(t,e){var n,r,o,s,l,u,h;const c=this._grid.getCellFromEvent(t)||{cell:-1,row:-1},p=c.row,m=this._grid.getDataItem(p);if(this.checkUsabilityOverride(p,m,this._grid)){if(this._addonOptions.cancelEditOnDrag&&this._grid.getEditorLock().isActive()&&this._grid.getEditorLock().cancelCurrentEdit(),this._grid.getEditorLock().isActive()||!/move|selectAndMove/.test(this._grid.getColumns()[c.cell].behavior||""))return!1;if(this._dragging=!0,t.stopImmediatePropagation(),!this.addonOptions.hideRowMoveShadow){const C=(n=this._grid.getCellNode(c.row,c.cell))===null||n===void 0?void 0:n.closest(".slick-row");C&&(e.clonedSlickRow=C.cloneNode(!0),e.clonedSlickRow.classList.add("slick-reorder-shadow-row"),e.clonedSlickRow.style.display="none",e.clonedSlickRow.style.marginLeft=js((r=this._addonOptions)===null||r===void 0?void 0:r.rowMoveShadowMarginLeft,"0px"),e.clonedSlickRow.style.marginTop=js((o=this._addonOptions)===null||o===void 0?void 0:o.rowMoveShadowMarginTop,"0px"),e.clonedSlickRow.style.opacity=`${(l=(s=this._addonOptions)===null||s===void 0?void 0:s.rowMoveShadowOpacity)!==null&&l!==void 0?l:.95}`,e.clonedSlickRow.style.transform=`scale(${(h=(u=this.addonOptions)===null||u===void 0?void 0:u.rowMoveShadowScale)!==null&&h!==void 0?h:.75})`,this._canvas.appendChild(e.clonedSlickRow))}let v=this._addonOptions.singleRowMove?[c.row]:this._grid.getSelectedRows();(v.length===0||!v.some(C=>C===c.row))&&(v=[c.row],this._addonOptions.disableRowSelection||this._grid.setSelectedRows(v));const _=this.gridOptions.rowHeight;e.selectedRows=v,e.selectionProxy=Ie("div",{className:"slick-reorder-proxy",style:{display:"none",position:"absolute",zIndex:"99999",width:`${this._canvas.clientWidth}px`,height:`${_*v.length}px`}},this._canvas),e.guide=Ie("div",{className:"slick-reorder-guide",style:{position:"absolute",zIndex:"99999",width:`${this._canvas.clientWidth}px`,top:"-1000px"}},this._canvas),e.insertBefore=-1}}checkUsabilityOverride(t,e,n){return typeof this._usabilityOverride=="function"?this._usabilityOverride(t,e,n):!0}moveIconFormatter(t,e,n,r,o,s){return this.checkUsabilityOverride(t,o,s)?{addClasses:`cell-reorder dnd ${this._addonOptions.cssClass||""}`,text:""}:""}}class w0{get extensionList(){return this._extensionList}get gridOptions(){return this.sharedService.gridOptions||{}}constructor(t,e,n,r,o,s,l){this.extensionUtility=t,this.filterService=e,this.pubSubService=n,this.sharedService=r,this.sortService=o,this.treeDataService=s,this.translaterService=l,this._extensionCreatedList={},this._extensionList={}}dispose(){var t;this.sharedService.visibleColumns=[];for(const e of Object.keys(this._extensionList))if(this._extensionList.hasOwnProperty(e)){const n=this._extensionList[e];!((t=n==null?void 0:n.instance)===null||t===void 0)&&t.dispose&&n.instance.dispose()}for(const e of Object.keys(this._extensionList))delete this._extensionList[e];this._cellMenuPlugin=null,this._cellExcelCopyManagerPlugin=null,this._checkboxSelectColumn=null,this._contextMenuPlugin=null,this._columnPickerControl=null,this._draggleGroupingPlugin=null,this._gridMenuControl=null,this._groupItemMetadataProviderService=null,this._headerMenuPlugin=null,this._rowMoveManagerPlugin=null,this._rowSelectionModel=null,this._extensionCreatedList=null,this._extensionList=null}addExtensionToList(t,e){this._extensionList[t]=e}getAllColumns(){return this.sharedService.allColumns||[]}getVisibleColumns(){return this.sharedService.visibleColumns||[]}getCreatedExtensionByName(t){var e;if(!((e=this._extensionCreatedList)===null||e===void 0)&&e.hasOwnProperty(t))return this._extensionCreatedList[t]}getExtensionByName(t){var e;return(e=this._extensionList)===null||e===void 0?void 0:e[t]}getExtensionInstanceByName(t){var e;return(e=this.getExtensionByName(t))===null||e===void 0?void 0:e.instance}autoResizeColumns(){this.sharedService.slickGrid.autosizeColumns()}bindDifferentExtensions(){var t,e,n,r,o,s,l,u,h,c,p;if(this.gridOptions){if(this.gridOptions.enableTranslate&&this.translateItems(this.sharedService.allColumns,"nameKey","name"),this.gridOptions.enableAutoTooltip){const m=new P_((t=this.gridOptions)===null||t===void 0?void 0:t.autoTooltipOptions);this.sharedService.slickGrid.registerPlugin(m),this._extensionList[ri.autoTooltip]={name:ri.autoTooltip,instance:m}}if(this.gridOptions.enableExcelCopyBuffer&&(this._cellExcelCopyManagerPlugin=new F_,this._cellExcelCopyManagerPlugin.init(this.sharedService.slickGrid,this.sharedService.gridOptions.excelCopyBufferOptions),!((e=this.gridOptions.excelCopyBufferOptions)===null||e===void 0)&&e.onExtensionRegistered&&this.gridOptions.excelCopyBufferOptions.onExtensionRegistered(this._cellExcelCopyManagerPlugin),this._extensionList[ri.cellExternalCopyManager]={name:ri.cellExternalCopyManager,instance:this._cellExcelCopyManagerPlugin}),this.gridOptions.enableCellMenu&&(this._cellMenuPlugin=new L_(this.extensionUtility,this.pubSubService,this.sharedService),!((n=this.gridOptions.cellMenu)===null||n===void 0)&&n.onExtensionRegistered&&this.gridOptions.cellMenu.onExtensionRegistered(this._cellMenuPlugin),this._extensionList[ri.cellMenu]={name:ri.cellMenu,instance:this._cellMenuPlugin}),!this._rowSelectionModel&&(this.gridOptions.enableRowSelection||this.gridOptions.enableCheckboxSelector||this.gridOptions.enableRowDetailView||this.gridOptions.enableRowMoveManager)){if(!this._rowSelectionModel||!this.sharedService.slickGrid.getSelectionModel()){const m=(r=this.gridOptions.rowSelectionOptions)!==null&&r!==void 0?r:{};this.gridOptions.enableRowMoveManager&&((o=this.gridOptions.rowMoveManager)===null||o===void 0?void 0:o.dragToSelect)!==!1&&(m.dragToSelect=!0),this._rowSelectionModel=new Ch(m),this.sharedService.slickGrid.setSelectionModel(this._rowSelectionModel)}this._extensionList[ri.rowSelection]={name:ri.rowSelection,instance:this._rowSelectionModel}}if(this.gridOptions.enableCheckboxSelector){this._checkboxSelectColumn=this._checkboxSelectColumn||new om(this.pubSubService,this.gridOptions.checkboxSelector),this._checkboxSelectColumn.init(this.sharedService.slickGrid);const m=this.getCreatedExtensionByName(ri.checkboxSelector);m&&m.instance&&(this._extensionList[ri.checkboxSelector]={name:ri.checkboxSelector,instance:this._checkboxSelectColumn})}if(this.gridOptions.enableColumnPicker&&(this._columnPickerControl=new yh(this.extensionUtility,this.pubSubService,this.sharedService),!((s=this.gridOptions.columnPicker)===null||s===void 0)&&s.onExtensionRegistered&&this.gridOptions.columnPicker.onExtensionRegistered(this._columnPickerControl),this._extensionList[ri.columnPicker]={name:ri.columnPicker,instance:this._columnPickerControl}),this.gridOptions.enableContextMenu&&(this._contextMenuPlugin=new V_(this.extensionUtility,this.pubSubService,this.sharedService,this.treeDataService),!((l=this.gridOptions.contextMenu)===null||l===void 0)&&l.onExtensionRegistered&&this.gridOptions.contextMenu.onExtensionRegistered(this._contextMenuPlugin),this._extensionList[ri.contextMenu]={name:ri.contextMenu,instance:this._contextMenuPlugin}),this.gridOptions.enableDraggableGrouping&&(this._draggleGroupingPlugin&&(this._draggleGroupingPlugin.init(this.sharedService.slickGrid,this.gridOptions.draggableGrouping),!((u=this.gridOptions.draggableGrouping)===null||u===void 0)&&u.onExtensionRegistered&&this.gridOptions.draggableGrouping.onExtensionRegistered(this._draggleGroupingPlugin),this._extensionList[ri.contextMenu]={name:ri.contextMenu,instance:this._draggleGroupingPlugin}),this._extensionList[ri.draggableGrouping]={name:ri.draggableGrouping,instance:this._draggleGroupingPlugin}),this.gridOptions.enableGridMenu&&(this._gridMenuControl=new sm(this.extensionUtility,this.filterService,this.pubSubService,this.sharedService,this.sortService),!((h=this.gridOptions.gridMenu)===null||h===void 0)&&h.onExtensionRegistered&&this.gridOptions.gridMenu.onExtensionRegistered(this._gridMenuControl),this._extensionList[ri.gridMenu]={name:ri.gridMenu,instance:this._gridMenuControl}),(this.gridOptions.enableDraggableGrouping||this.gridOptions.enableGrouping)&&(this._groupItemMetadataProviderService=this._groupItemMetadataProviderService?this._groupItemMetadataProviderService:new Mm,this._groupItemMetadataProviderService.init(this.sharedService.slickGrid),this._extensionList[ri.groupItemMetaProvider]={name:ri.groupItemMetaProvider,instance:this._groupItemMetadataProviderService}),this.gridOptions.enableHeaderButton){const m=new E0(this.extensionUtility,this.pubSubService,this.sharedService);!((c=this.gridOptions.headerButton)===null||c===void 0)&&c.onExtensionRegistered&&this.gridOptions.headerButton.onExtensionRegistered(m),this._extensionList[ri.headerButton]={name:ri.headerButton,instance:m}}if(this.gridOptions.enableHeaderMenu&&(this._headerMenuPlugin=new S0(this.extensionUtility,this.filterService,this.pubSubService,this.sharedService,this.sortService),!((p=this.gridOptions.headerMenu)===null||p===void 0)&&p.onExtensionRegistered&&this.gridOptions.headerMenu.onExtensionRegistered(this._headerMenuPlugin),this._extensionList[ri.headerMenu]={name:ri.headerMenu,instance:this._headerMenuPlugin}),this.gridOptions.enableRowMoveManager){this._rowMoveManagerPlugin=this._rowMoveManagerPlugin||new Nm(this.pubSubService),this._rowMoveManagerPlugin.init(this.sharedService.slickGrid,this.gridOptions.rowMoveManager);const m=this.getCreatedExtensionByName(ri.rowMoveManager);(m==null?void 0:m.instance)&&(this._extensionList[ri.rowMoveManager]={name:ri.rowMoveManager,instance:this._rowMoveManagerPlugin})}}}createExtensionsBeforeGridCreation(t,e){var n,r,o,s;const l=[];e.enableCheckboxSelector&&(this.getCreatedExtensionByName(ri.checkboxSelector)||(this._checkboxSelectColumn=new om(this.pubSubService,this.sharedService.gridOptions.checkboxSelector),l.push({name:ri.checkboxSelector,extension:this._checkboxSelectColumn,columnIndexPosition:(r=(n=e==null?void 0:e.checkboxSelector)===null||n===void 0?void 0:n.columnIndexPosition)!==null&&r!==void 0?r:l.length}))),e.enableRowMoveManager&&(this.getCreatedExtensionByName(ri.rowMoveManager)||(this._rowMoveManagerPlugin=new Nm(this.pubSubService),l.push({name:ri.rowMoveManager,extension:this._rowMoveManagerPlugin,columnIndexPosition:(s=(o=e==null?void 0:e.rowMoveManager)===null||o===void 0?void 0:o.columnIndexPosition)!==null&&s!==void 0?s:l.length}))),this.createExtensionByTheirColumnIndex(l,t,e),e.enableDraggableGrouping&&(this.getCreatedExtensionByName(ri.draggableGrouping)||(this._draggleGroupingPlugin=new y0(this.extensionUtility,this.pubSubService,this.sharedService),this._draggleGroupingPlugin&&(e.enableColumnReorder=this._draggleGroupingPlugin.setupColumnReorder.bind(this._draggleGroupingPlugin),this._extensionCreatedList[ri.draggableGrouping]={name:ri.draggableGrouping,instance:this._draggleGroupingPlugin})))}hideColumn(t){var e,n;if(typeof((n=(e=this.sharedService)===null||e===void 0?void 0:e.slickGrid)===null||n===void 0?void 0:n.getColumns)=="function"){const r=this.sharedService.slickGrid.getColumnIndex(t.id);this.sharedService.visibleColumns=this.removeColumnByIndex(this.sharedService.slickGrid.getColumns(),r),this.sharedService.slickGrid.setColumns(this.sharedService.visibleColumns)}}refreshBackendDataset(t){this.extensionUtility.refreshBackendDataset(t)}removeColumnByIndex(t,e){return Array.isArray(t)?t.filter((n,r)=>e!==r):t}translateAllExtensions(){this.translateCellMenu(),this.translateColumnHeaders(),this.translateColumnPicker(),this.translateContextMenu(),this.translateGridMenu(),this.translateHeaderMenu()}translateCellMenu(){var t,e;(e=(t=this._cellMenuPlugin)===null||t===void 0?void 0:t.translateCellMenu)===null||e===void 0||e.call(t)}translateColumnPicker(){var t;!((t=this._columnPickerControl)===null||t===void 0)&&t.translateColumnPicker&&this._columnPickerControl.translateColumnPicker()}translateContextMenu(){var t,e;(e=(t=this._contextMenuPlugin)===null||t===void 0?void 0:t.translateContextMenu)===null||e===void 0||e.call(t)}translateGridMenu(){var t,e;(e=(t=this._gridMenuControl)===null||t===void 0?void 0:t.translateGridMenu)===null||e===void 0||e.call(t)}translateHeaderMenu(){var t,e;(e=(t=this._headerMenuPlugin)===null||t===void 0?void 0:t.translateHeaderMenu)===null||e===void 0||e.call(t)}translateColumnHeaders(t,e){var n,r,o;if(this.sharedService&&this.gridOptions&&this.gridOptions.enableTranslate&&(!this.translaterService||!this.translaterService.translate))throw new Error('[Slickgrid-Universal] requires a Translate Service to be installed and configured when the grid option "enableTranslate" is enabled.');t&&(!((n=this.translaterService)===null||n===void 0)&&n.use)&&this.translaterService.use(t);let s=e;s||(s=this.sharedService.columnDefinitions),this.translateItems(s,"nameKey","name"),this.translateItems(this.sharedService.allColumns,"nameKey","name"),this.renderColumnHeaders(s,Array.isArray(e)),(o=(r=this._gridMenuControl)===null||r===void 0?void 0:r.translateGridMenu)===null||o===void 0||o.call(r)}renderColumnHeaders(t,e=!1){var n;let r=t;r||(r=this.sharedService.columnDefinitions),Array.isArray(r)&&this.sharedService.slickGrid&&this.sharedService.slickGrid.setColumns&&((r.length>this.sharedService.allColumns.length||e)&&(this.sharedService.allColumns=r),this.sharedService.slickGrid.setColumns(r)),this.gridOptions.enableColumnPicker&&this._columnPickerControl&&(this._columnPickerControl.columns=this.sharedService.allColumns),this.gridOptions.enableGridMenu&&this._gridMenuControl&&(this._gridMenuControl.columns=(n=this.sharedService.allColumns)!==null&&n!==void 0?n:[],this._gridMenuControl.recreateGridMenu())}createExtensionByTheirColumnIndex(t,e,n){t.sort((r,o)=>r.columnIndexPosition-o.columnIndexPosition),t.forEach(r=>{const o=r.extension.create(e,n);o&&(this._extensionCreatedList[r.name]={name:r.name,instance:o})})}translateItems(t,e,n){var r,o,s;if(!((r=this.gridOptions)===null||r===void 0)&&r.enableTranslate&&!(!((o=this.translaterService)===null||o===void 0)&&o.translate))throw new Error('[Slickgrid-Universal] requires a Translate Service to be installed and configured when the grid option "enableTranslate" is enabled.');if(Array.isArray(t))for(const l of t)l[e]&&(l[n]=(s=this.translaterService)===null||s===void 0?void 0:s.translate(l[e]))}}var Lm=Object.prototype.hasOwnProperty;function Jo(a,t){var e,n;if(a===t)return!0;if(a&&t&&(e=a.constructor)===t.constructor){if(e===Date)return a.getTime()===t.getTime();if(e===RegExp)return a.toString()===t.toString();if(e===Array){if((n=a.length)===t.length)for(;n--&&Jo(a[n],t[n]););return n===-1}if(!e||typeof a=="object"){n=0;for(e in a)if(Lm.call(a,e)&&++n&&!Lm.call(t,e)||!(e in t)||!Jo(a[e],t[e]))return!1;return Object.keys(t).length===n}}return a!==a&&t!==t}function Hm(a,t,e){if(e&&(a!=null&&a.hasOwnProperty(e)||t!=null&&t.hasOwnProperty(e)))return a[e]===t||a===t[e]||a[e]===t[e];for(const n in a)if(a.hasOwnProperty(n)&&a[n]!==t[n])return!1;return!0}function x0(a){switch(a&&a.toUpperCase()||""){case"IN":case"NIN":case"NOT_IN":case"IN_CONTAINS":case"NIN_CONTAINS":case"NOT_IN_CONTAINS":case"IN_COLLECTION":case"NOT_IN_COLLECTION":return!0;default:return!1}}const ys=(a,t,e)=>{switch(a.toUpperCase()){case"<":case"LT":return t<e;case"<=":case"LE":return t<=e;case">":case"GT":return t>e;case">=":case"GE":return t>=e;case"!=":case"<>":case"NE":return t!==e;case"=":case"==":case"EQ":return t===e;case"IN":return e&&Array.isArray(e)?e.includes(t):!1;case"NIN":case"NOT_IN":return e&&Array.isArray(e)?!e.includes(t):!1;case"IN_CONTAINS":return e&&Array.isArray(e)&&typeof t=="string"?e.some(n=>t.split(/[,]+/).map(r=>r.trim()).includes(n)):!1;case"NIN_CONTAINS":case"NOT_IN_CONTAINS":return e&&Array.isArray(e)&&typeof t=="string"?!e.some(n=>t.split(/[,]+/).map(r=>r.trim()).includes(n)):!1;case"IN_COLLECTION":return t&&e&&Array.isArray(t)&&Array.isArray(e)?e.some(n=>t.includes(n)):!1;case"NOT_IN_COLLECTION":return t&&e&&Array.isArray(t)&&Array.isArray(e)?!e.some(n=>t.includes(n)):!1}return!0},Bm=(a,t)=>{var e;let[n,r]=t;if(n===void 0&&!a.operator)return!0;a.cellValue=a.cellValue===void 0||a.cellValue===null?"":a.cellValue.toString();const o=a!=null&&a.ignoreAccentOnStringFilterAndSort?Ql(a.cellValue,!0):a.cellValue.toLowerCase();if(typeof n=="string"&&(n=a!=null&&a.ignoreAccentOnStringFilterAndSort?Ql(n,!0):n.toLowerCase()),typeof r=="string"&&(r=a!=null&&a.ignoreAccentOnStringFilterAndSort?Ql(r,!0):r.toLowerCase()),n!==void 0&&r!==void 0){let l=(e=a==null?void 0:a.operator)!==null&&e!==void 0?e:a.defaultFilterRangeOperator;l!==Lt.rangeInclusive&&l!==Lt.rangeExclusive&&(l=a.defaultFilterRangeOperator);const u=l===Lt.rangeInclusive,h=Wh(u?">=":">",o,n,a.searchInputLastChar),c=Wh(u?"<=":"<",o,r,a.searchInputLastChar);return h&&c}return Wh(a.operator,o,n,a.searchInputLastChar)};function T0(a){const t="",e=Array.isArray(a)&&a||[t],n=[];let r,o;if(e.length===2||typeof e[0]=="string"&&e[0].indexOf("..")>0){const s=e.length===2?e:e[0].split("..");r=`${Array.isArray(s)?s[0]:""}`,o=`${Array.isArray(s)?s[1]:""}`}else{const s=Array.isArray(a)&&a.length>0?a[0]:"";r=s==null?"":`${s}`}return r!==void 0&&o!==void 0?n.push(r,o):r!==void 0&&n.push(r),n}function Wh(a,t,e,n){return a==="*"||a===Lt.endsWith||a==="*z"?t.endsWith(e):a===""&&n==="*"||a===Lt.startsWith||a==="a*"?t.startsWith(e):a===""||a===Lt.contains?t.indexOf(e)>-1:a==="<>"||a===Lt.notContains?t.indexOf(e)===-1:ys(a||"==",t,e)}const O0=(a,t)=>{if(t===void 0&&!a.operator)return!0;switch((a.operator||"").toUpperCase()){case"!=":case"<>":case"NE":return!Hm(a.cellValue,t,a.dataKey);case"=":case"==":case"EQ":default:return Hm(a.cellValue,t,a.dataKey)}};function A0(a){return(Array.isArray(a)&&a.length>0?a[0]:"")||""}const Vm=(a,t)=>{var e;const n=parseFloat(a.cellValue),[r,o]=t;if(r===void 0&&!a.operator)return!0;if(r!==void 0&&o!==void 0){let s=(e=a==null?void 0:a.operator)!==null&&e!==void 0?e:a.defaultFilterRangeOperator;s!==Lt.rangeInclusive&&s!==Lt.rangeExclusive&&(s=a.defaultFilterRangeOperator);const l=s===Lt.rangeInclusive,u=ys(l?">=":">",n,+r),h=ys(l?"<=":"<",n,+o);return u&&h}return ys(a.operator||"==",n,+r)};function k0(a){const e=Array.isArray(a)&&a||[0],n=[];let r,o;if(e.length===2||typeof e[0]=="string"&&e[0].indexOf("..")>0){const s=e.length===2?e:e[0].split("..");r=parseFloat(Array.isArray(s)?s[0]:""),o=parseFloat(Array.isArray(s)?s[1]:"")}else r=parseFloat(e[0]);return tn(r,!0)&&tn(o,!0)?n.push(r,o):tn(r,!0)&&n.push(r),n}const zm=(a,t)=>jd(a.cellValue)===jd(t);function I0(a){const t=Array.isArray(a)&&a[0]||!1;return jd(t)}const Um=a=>{const t=a.operator;let e;return Array.isArray(a.cellValue)&&(t==="IN_COLLECTION"||t==="NOT_IN_COLLECTION")?e=a.cellValue.length?a.cellValue.map(n=>`${n}`):[]:e=a.cellValue===void 0||a.cellValue===null?"":`${a.cellValue}`,ys(t||"IN",e,a.searchTerms||[])},xu=$s||ps;function D0(a,t){var e;const n=a&&(a.filterSearchType||a.fieldType)||ie.dateIso,r=Fr(n),[o,s]=t,l=xu(a.cellValue,r,!0);if(!o&&!s||!l.isValid())return!1;const u=r.toLowerCase().includes("h")?l.valueOf():l.clone().startOf("day").valueOf();if(o&&s){let c=(e=a==null?void 0:a.operator)!==null&&e!==void 0?e:a.defaultFilterRangeOperator;c!==Lt.rangeInclusive&&c!==Lt.rangeExclusive&&(c=a.defaultFilterRangeOperator);const p=c===Lt.rangeInclusive,m=ys(p?">=":">",u,o.valueOf()),v=ys(p?"<=":"<",u,s.valueOf());return m&&v}const h=r.toLowerCase().includes("h")?o.valueOf():o.clone().startOf("day").valueOf();return ys(a.operator||"==",u,h)}function R0(a,t){const e=Array.isArray(a)&&a||[],n=t||ie.dateIso,r=Fr(n),o=[];if(e.length===2||typeof e[0]=="string"&&e[0].indexOf("..")>0){const s=e.length===2?e:e[0].split(".."),l=Array.isArray(s)&&s[0]||"",u=Array.isArray(s)&&s[1]||"",h=xu(l,r,!0),c=xu(u,r,!0);if(!h.isValid()||!c.isValid())return[];o.push(h,c)}else{const s=xu(e[0],r,!0);if(!s.isValid())return[];o.push(s)}return o}const P0=(a,t)=>{if(x0(a.operator))return Um(a);switch(Gm(a.filterSearchType||a.fieldType)){case"boolean":return zm(a,t);case"date":return D0(a,t||[]);case"number":return Vm(a,t||[]);case"object":return O0(a,t);case"string":default:return Bm(a,t||[])}};function Tu(a,t){const e=Gm(t);let n;switch(e){case"boolean":n=I0(a);break;case"date":n=R0(a,t);break;case"number":n=k0(a);break;case"object":n=A0(a);break;case"string":n=T0(a);break}return n}function Gm(a){switch(a){case ie.boolean:return"boolean";case ie.date:case ie.dateIso:case ie.dateUtc:case ie.dateTime:case ie.dateTimeIso:case ie.dateTimeIsoAmPm:case ie.dateTimeIsoAM_PM:case ie.dateTimeShortIso:case ie.dateEuro:case ie.dateEuroShort:case ie.dateTimeShortEuro:case ie.dateTimeEuro:case ie.dateTimeEuroAmPm:case ie.dateTimeEuroAM_PM:case ie.dateTimeEuroShort:case ie.dateTimeEuroShortAmPm:case ie.dateTimeEuroShortAM_PM:case ie.dateUs:case ie.dateUsShort:case ie.dateTimeShortUs:case ie.dateTimeUs:case ie.dateTimeUsAmPm:case ie.dateTimeUsAM_PM:case ie.dateTimeUsShort:case ie.dateTimeUsShortAmPm:case ie.dateTimeUsShortAM_PM:return"date";case ie.integer:case ie.float:case ie.number:return"number";case ie.object:return"object";case ie.string:case ie.text:case ie.password:case ie.readonly:default:return"string"}}const Wm={executeFilterConditionTest:P0,booleanFilter:zm,collectionSearchFilter:Um,numberFilter:Vm,stringFilter:Bm,testFilter:ys};class F0{constructor(t,e,n,r,o){this.filterFactory=t,this.pubSubService=e,this.sharedService=n,this.backendUtilities=r,this.rxjs=o,this._isFilterFirstRender=!0,this._firstColumnIdRendered="",this._filtersMetadata=[],this._columnFilters={},this._isTreePresetExecuted=!1,this._previousFilters=[],this._onSearchChange=new Slick.Event,this._eventHandler=new Slick.EventHandler,this.rxjs&&(this.httpCancelRequests$=this.rxjs.createSubject())}get eventHandler(){return this._eventHandler}get isFilterFirstRender(){return this._isFilterFirstRender}get onSearchChange(){return this._onSearchChange}get _gridOptions(){var t,e;return(e=(t=this._grid)===null||t===void 0?void 0:t.getOptions())!==null&&e!==void 0?e:{}}get _columnDefinitions(){var t,e;return(e=(t=this._grid)===null||t===void 0?void 0:t.getColumns())!==null&&e!==void 0?e:[]}get _dataView(){var t,e,n;return(n=(e=(t=this._grid)===null||t===void 0?void 0:t.getData)===null||e===void 0?void 0:e.call(t))!==null&&n!==void 0?n:{}}addRxJsResource(t){this.rxjs=t}init(t){this._grid=t,this._gridOptions&&this._gridOptions.enableTreeData&&this._gridOptions.treeDataOptions&&this._grid.setSortColumns([{columnId:this._gridOptions.treeDataOptions.columnId,sortAsc:!0}])}dispose(){var t;this._eventHandler.unsubscribeAll(),this.httpCancelRequests$&&(!((t=this.rxjs)===null||t===void 0)&&t.isObservable(this.httpCancelRequests$))&&(this.httpCancelRequests$.next(),this.httpCancelRequests$.complete()),this.disposeColumnFilters(),this._onSearchChange=null}disposeColumnFilters(){if(this.removeAllColumnFiltersProperties(),Array.isArray(this._filtersMetadata)){let t=this._filtersMetadata.pop();for(;t;)typeof(t==null?void 0:t.destroy)=="function"&&t.destroy(),t=this._filtersMetadata.pop()}}bindBackendOnFilter(t){this._filtersMetadata=[],this._eventHandler.subscribe(t.onHeaderRowCellRendered,(e,n)=>{n.column.id===this._firstColumnIdRendered&&(this._isFilterFirstRender=!1),this.addFilterTemplateToHeaderRow(n,this._isFilterFirstRender),this._firstColumnIdRendered===""&&(this._firstColumnIdRendered=n.column.id)}),this.subscribeToOnHeaderRowCellRendered(t),this._onSearchChange&&this._eventHandler.subscribe(this._onSearchChange,this.onBackendFilterChange.bind(this))}bindLocalOnFilter(t){this._filtersMetadata=[],this._dataView.setFilterArgs({columnFilters:this._columnFilters,grid:this._grid,dataView:this._dataView}),this._dataView.setFilter(this.customLocalFilter.bind(this)),this._onSearchChange&&this._eventHandler.subscribe(this._onSearchChange,async(e,n)=>{var r;const o=(r=n==null?void 0:n.clearFilterTriggered)!==null&&r!==void 0?r:!1;o||await this.emitFilterChanged(en.local,!0),this._gridOptions.enableTreeData===!0&&(this._tmpPreFilteredData=this.preFilterTreeData(this._dataView.getItems(),this._columnFilters)),n.columnId!==null&&this._dataView.refresh(),o||await this.emitFilterChanged(en.local),this._previousFilters=this.extractBasicFilterDetails(this._columnFilters)}),this._eventHandler.subscribe(t.onHeaderRowCellRendered,(e,n)=>{this.addFilterTemplateToHeaderRow(n)}),this.subscribeToOnHeaderRowCellRendered(t)}async clearFilterByColumnId(t,e){var n;await this.pubSubService.publish("onBeforeFilterClear",{columnId:e},0);const r=(n=this._gridOptions.backendServiceApi)!==null&&n!==void 0?n:!1,o=r?en.remote:en.local,s=Object.keys(this._columnFilters);let l;Array.isArray(s)&&(l=s.find(h=>h===`${e}`));const u=this._filtersMetadata.find(h=>h.columnDef.id===e);return u!=null&&u.clear&&u.clear(!0),r&&l!==void 0&&this.onBackendFilterChange(t,{grid:this._grid,columnFilters:this._columnFilters}),await this.emitFilterChanged(o),!0}async clearFilters(t=!0){var e,n,r;t&&await this.pubSubService.publish("onBeforeFilterClear",!0,0),this._filtersMetadata.forEach(s=>{s!=null&&s.clear&&s.clear(!1)}),this.removeAllColumnFiltersProperties(),Array.isArray(this._columnDefinitions)&&this._columnDefinitions.forEach(s=>{var l;!((l=s.filter)===null||l===void 0)&&l.searchTerms&&delete s.filter.searchTerms}),this._dataView&&this._grid&&(this._dataView.refresh(),this._grid.invalidate());const o=this._gridOptions.backendServiceApi;if(o&&t){const s={clearFilterTriggered:!0,shouldTriggerQuery:t,grid:this._grid,columnFilters:this._columnFilters},u=o.service.processOnFilterChanged(void 0,s),h=(n=(e=this._gridOptions.pagination)===null||e===void 0?void 0:e.totalItems)!==null&&n!==void 0?n:0;(r=this.backendUtilities)===null||r===void 0||r.executeBackendCallback(o,u,s,new Date,h,{errorCallback:this.resetToPreviousSearchFilters.bind(this),successCallback:c=>this._previousFilters=this.extractBasicFilterDetails(c.columnFilters),emitActionChangedCallback:this.emitFilterChanged.bind(this)})}else this._previousFilters=this.extractBasicFilterDetails(this._columnFilters);t&&this.pubSubService.publish("onFilterCleared",!0)}customLocalFilter(t,e){var n,r,o,s,l,u,h;const c=e==null?void 0:e.grid,p=(n=e==null?void 0:e.columnFilters)!==null&&n!==void 0?n:{},m=(r=this._gridOptions.enableTreeData)!==null&&r!==void 0?r:!1,v=this._gridOptions.treeDataOptions;if(m&&v){const _=(o=v.collapsedPropName)!==null&&o!==void 0?o:je.treeDataProperties.COLLAPSED_PROP,C=(s=v.parentPropName)!==null&&s!==void 0?s:je.treeDataProperties.PARENT_PROP,x=(l=v==null?void 0:v.childrenPropName)!==null&&l!==void 0?l:je.treeDataProperties.CHILDREN_PROP,S=(u=this._gridOptions.datasetIdPropertyName)!==null&&u!==void 0?u:"id",y=(h=v.autoRecalcTotalsOnFilterChange)!==null&&h!==void 0?h:!1;let D=!1;if(t[C]!==null){let A=this._dataView.getItemById(t[C]);for(;A;){if(A[_])if(y)D=!0;else return!1;A=this._dataView.getItemById(A[C])}}if(this._tmpPreFilteredData instanceof Set){const A=this._tmpPreFilteredData.has(t[S]);if(y){const P=Ba(this.sharedService.hierarchicalDataset,M=>M[S]===t[S],x);if(P&&(P.__filteredOut=!A),D)return!1}return A}}else if(typeof p=="object")for(const _ of Object.keys(p)){const C=p[_],x=this.preProcessFilterConditionOnDataContext(t,C,c);if(typeof x=="boolean")return x;let S=C==null?void 0:C.parsedSearchTerms;if(S===void 0&&(S=Tu(C.searchTerms,C.columnDef.type||ie.string),S!==void 0&&(C.parsedSearchTerms=S)),!Wm.executeFilterConditionTest(x,S))return!1}return!0}parseFormInputFilterConditions(t,e){var n,r,o,s;const l=uo(t)||[];let u=Array.isArray(l)&&l.length===1?l[0]:"";const h=e.columnDef,c=(o=(r=(n=h.filter)===null||n===void 0?void 0:n.type)!==null&&r!==void 0?r:h.type)!==null&&o!==void 0?o:ie.string;let p=null;c!==ie.object&&(u=u==null?"":`${u}`,p=((s=h.autoParseInputFilterOperator)!==null&&s!==void 0?s:this._gridOptions.autoParseInputFilterOperator)!==!1?u.match(/^([<>!=\*]{0,2})(.*[^<>!=\*])?([\*]?)$/):[u,"",u,""]);let m=(p==null?void 0:p[1])||e.operator;const v=(p==null?void 0:p[2])||"",_=(p==null?void 0:p[3])||(m==="*z"?"*":"");return typeof u=="string"&&(u=u.replace("'","''"),m==="*"||m==="*z"?m=Lt.endsWith:(m==="a*"||_==="*")&&(m=Lt.startsWith)),Array.isArray(p)&&p.length>=1&&Array.isArray(l)&&l.length===1&&(l[0]=v),{dataKey:h.dataKey,fieldType:c,searchTerms:l||[],operator:m,searchInputLastChar:_,filterSearchType:h.filterSearchType,defaultFilterRangeOperator:this._gridOptions.defaultFilterRangeOperator}}preProcessFilterConditionOnDataContext(t,e,n){var r,o,s,l,u,h;const c=e.columnDef,p=e.columnId;let m=n.getColumnIndex(p);if(!c&&this.sharedService&&Array.isArray(this.sharedService.allColumns)&&(m=this.sharedService.allColumns.findIndex(y=>y.field===p)),!c)return!0;if(this._gridOptions.enableRowDetailView){const y=this._gridOptions.rowDetailView&&this._gridOptions.rowDetailView.keyPrefix||"__";t[`${y}isPadding`]&&t[`${y}parent`]&&(t=t[`${y}parent`])}let v=((r=c.filter)===null||r===void 0?void 0:r.queryField)||c.queryFieldFilter||c.queryField||c.field||"";typeof c.queryFieldNameGetterFn=="function"&&(v=c.queryFieldNameGetterFn(t));const _=(l=(s=(o=c.filter)===null||o===void 0?void 0:o.type)!==null&&s!==void 0?s:c.type)!==null&&l!==void 0?l:ie.string;let C=t[v];(v==null?void 0:v.indexOf("."))>=0&&(C=bn(t,v));const x=e.operator,S=e.searchTerms||[];if(!S||Array.isArray(S)&&(S.length===0||S.length===1&&x===S[0]))return!0;if(S&&Array.isArray(S)&&_!==ie.object)for(let y=0,D=S.length;y<D;y++)S[y]=(S[y]===void 0||S[y]===null?"":S[y])+"";if(((u=c==null?void 0:c.params)===null||u===void 0?void 0:u.useFormatterOuputToFilter)===!0){const y=n.getData(),D=this._gridOptions.datasetIdPropertyName||"id",A=y&&typeof y.getIdxById=="function"?y.getIdxById(t[D]):0,P=c&&typeof c.formatter=="function"?c.formatter(A||0,m,C,c,t,this._grid):"";C=sr(P)}return typeof C=="number"&&(C=C.toString()),{dataKey:c.dataKey,fieldType:_,searchTerms:S,cellValue:C,operator:x,searchInputLastChar:e.searchInputLastChar,filterSearchType:c.filterSearchType,ignoreAccentOnStringFilterAndSort:(h=this._gridOptions.ignoreAccentOnStringFilterAndSort)!==null&&h!==void 0?h:!1,defaultFilterRangeOperator:this._gridOptions.defaultFilterRangeOperator}}preFilterTreeData(t,e){var n,r,o,s,l,u,h,c,p,m,v,_,C,x,S,y,D;const A=this._gridOptions.treeDataOptions,P=(n=A==null?void 0:A.collapsedPropName)!==null&&n!==void 0?n:je.treeDataProperties.COLLAPSED_PROP,M=(r=A==null?void 0:A.parentPropName)!==null&&r!==void 0?r:je.treeDataProperties.PARENT_PROP,B=(o=A==null?void 0:A.hasChildrenPropName)!==null&&o!==void 0?o:je.treeDataProperties.HAS_CHILDREN_PROP,Q=(s=this._gridOptions.datasetIdPropertyName)!==null&&s!==void 0?s:"id",L=(u=(l=this._gridOptions.presets)===null||l===void 0?void 0:l.treeData)===null||u===void 0?void 0:u.toggledItems,le=(c=(h=this._gridOptions.treeDataOptions)===null||h===void 0?void 0:h.initiallyCollapsed)!==null&&c!==void 0?c:!1,_e=(p=this._gridOptions.treeDataOptions)===null||p===void 0?void 0:p.columnId,J=(m=this._gridOptions.treeDataOptions)===null||m===void 0?void 0:m.excludeChildrenWhenFilteringTree,z=!J&&((v=this._gridOptions.treeDataOptions)===null||v===void 0?void 0:v.autoApproveParentItemWhenTreeColumnIsValid)===!0,F={},ae=new Set,qe=new Map;if(Array.isArray(t)){for(const De of t)F[De[Q]]=De,delete F[De[Q]].__used;for(const De of Object.keys(e)){const xe=e[De],Te=xe!=null&&xe.searchTerms?uo(xe.searchTerms):[],Re=this.parseFormInputFilterConditions(Te,xe),ne=xe.columnDef,fe=(x=(C=(_=ne==null?void 0:ne.filter)===null||_===void 0?void 0:_.type)!==null&&C!==void 0?C:ne==null?void 0:ne.type)!==null&&x!==void 0?x:ie.string,Be=Tu(Re.searchTerms,fe);Be!==void 0&&(xe.parsedSearchTerms=Be)}for(const De of t){const xe=De[B];let Te=!0;for(const Re of Object.keys(e)){const ne=e[Re],fe=this.preProcessFilterConditionOnDataContext(De,ne,this._grid);if(fe){const Be=ne==null?void 0:ne.parsedSearchTerms,Ye=typeof fe=="boolean"?fe:Wm.executeFilterConditionTest(fe,Be);if(Ye&&z&&xe&&ne.columnId===_e){qe.set(De[Q],!0);break}if(Ye||!J&&qe.get(De[M])===!0){if(xe&&ne.columnId===_e&&qe.set(De[Q],!0),Ye||!J&&ne.columnId===_e)continue}else xe&&qe.get(De[M])!==!0&&ne.columnId!==_e&&qe.set(De[Q],!1)}Te=!1}if(Te){ae.add(De[Q]);let Re=(S=F[De[M]])!==null&&S!==void 0?S:!1;const ne=!le;for(!this._isTreePresetExecuted&&Array.isArray(L)&&L.some(fe=>fe.itemId===Re.id&&fe.isCollapsed===ne)&&(Re[P]=ne);Re;)(y=Re.__used)!==null&&y!==void 0||ae.add(Re[Q]),F[Re[Q]].__used=!0,Re=(D=F[Re[M]])!==null&&D!==void 0?D:!1}}}return this._isTreePresetExecuted=!0,ae}getColumnFilters(){return this._columnFilters}getPreviousFilters(){return this._previousFilters}getFiltersMetadata(){return this._filtersMetadata}getCurrentLocalFilters(){var t,e;const n=[];if(this._columnFilters)for(const r of Object.keys(this._columnFilters)){const o=this._columnFilters[r],s={columnId:r||""},l=this.sharedService.allColumns.find(h=>h.id===s.columnId),u=(e=(t=l==null?void 0:l.filter)===null||t===void 0?void 0:t.emptySearchTermReturnAllValues)!==null&&e!==void 0?e:!0;o!=null&&o.searchTerms&&(s.searchTerms=o.searchTerms),o.operator&&(s.operator=o.operator),o.targetSelector&&(s.targetSelector=o.targetSelector),Array.isArray(s.searchTerms)&&s.searchTerms.length>0&&(!u||s.searchTerms[0]!=="")&&n.push(s)}return n}emitFilterChanged(t,e=!1){const n=e?"onBeforeFilterChange":"onFilterChanged";if(t===en.remote&&this._gridOptions.backendServiceApi){let r=[];const o=this._gridOptions.backendServiceApi.service;return o!=null&&o.getCurrentFilters&&(r=o.getCurrentFilters()),this.pubSubService.publish(n,r)}else if(t===en.local)return this.pubSubService.publish(n,this.getCurrentLocalFilters())}async onBackendFilterChange(t,e){var n,r,o;const s=e==null?void 0:e.shouldTriggerQuery;if(s&&await this.emitFilterChanged(en.remote,!0),!e||!e.grid)throw new Error('Something went wrong when trying to bind the "onBackendFilterChange(event, args)" function, it seems that "args" is not populated correctly');const l=this._gridOptions.backendServiceApi;if(!l||!l.process||!l.service)throw new Error('BackendServiceApi requires at least a "process" function and a "service" defined');const u=new Date;if(l.preProcess&&l.preProcess(),s){const h=await l.service.processOnFilterChanged(t,e),c=(r=(n=this._gridOptions.pagination)===null||n===void 0?void 0:n.totalItems)!==null&&r!==void 0?r:0;(o=this.backendUtilities)===null||o===void 0||o.executeBackendCallback(l,h,e,u,c,{errorCallback:this.resetToPreviousSearchFilters.bind(this),successCallback:p=>this._previousFilters=this.extractBasicFilterDetails(p.columnFilters),emitActionChangedCallback:this.emitFilterChanged.bind(this),httpCancelRequestSubject:this.httpCancelRequests$})}}populateColumnFilterSearchTermPresets(t){return Array.isArray(t)&&(this._columnDefinitions.forEach(e=>{var n;!((n=e.filter)===null||n===void 0)&&n.searchTerms&&delete e.filter.searchTerms;const r=t.find(o=>o.columnId===e.id);r&&Array.isArray(r==null?void 0:r.searchTerms)&&(e.filter=e.filter||{},e.filter.operator=r.operator||e.filter.operator||"",e.filter.searchTerms=r.searchTerms)}),this._gridOptions.enableTreeData&&this.refreshTreeDataFilters(),this._previousFilters=this.extractBasicFilterDetails(this._columnFilters)),this._columnDefinitions}refreshTreeDataFilters(t){var e,n,r;const o=(r=t??((n=(e=this._dataView)===null||e===void 0?void 0:e.getItems)===null||n===void 0?void 0:n.call(e)))!==null&&r!==void 0?r:[];this._dataView&&this._gridOptions.enableTreeData&&o.length>0?(this._tmpPreFilteredData=this.preFilterTreeData(o,this._columnFilters),this._dataView.refresh()):o.length===0&&Array.isArray(this.sharedService.hierarchicalDataset)&&this.sharedService.hierarchicalDataset.length>0&&setTimeout(()=>this.refreshTreeDataFilters())}disableFilterFunctionality(t=!0,e=!0){const r=!this._gridOptions.enableFiltering;r!==t&&(e&&t&&this.clearFilters(),this.disableAllFilteringCommands(t),this._grid.setOptions({enableFiltering:r},!1,!0),this._grid.setHeaderRowVisibility(r),this._gridOptions.enableFiltering=!t,this.sharedService.gridOptions=this._gridOptions,this._grid.setColumns(this.sharedService.columnDefinitions))}resetToPreviousSearchFilters(){this.updateFilters(this._previousFilters,!1,!1,!1)}toggleFilterFunctionality(t=!0){const e=this._gridOptions.enableFiltering;this.disableFilterFunctionality(e,t)}toggleHeaderFilterRow(){var t;let e=(t=this._gridOptions.showHeaderRow)!==null&&t!==void 0?t:!1;e=!e,this._grid.setHeaderRowVisibility(e),e===!0&&this._grid.setColumns(this.sharedService.columnDefinitions)}setSortColumnIcons(t){this._grid&&Array.isArray(t)&&this._grid.setSortColumns(t)}async updateFilters(t,e=!0,n=!0,r=!1){var o;if(!this._filtersMetadata||this._filtersMetadata.length===0||!this._gridOptions||!this._gridOptions.enableFiltering)throw new Error('[Slickgrid-Universal] in order to use "updateFilters" method, you need to have Filterable Columns defined in your grid and "enableFiltering" set in your Grid Options');if(Array.isArray(t)){this.clearFilters(!1),t.forEach(u=>{const h=this._filtersMetadata.find(c=>u.columnId===c.columnDef.id);if(u&&h){const c=u.operator||h.defaultOperator;this.updateColumnFilters(u.searchTerms,h.columnDef,c),h.setValues(u.searchTerms||[],c),(r||this._gridOptions.enableTreeData)&&this.callbackSearchEvent(void 0,{columnDef:h.columnDef,operator:c,searchTerms:u.searchTerms,shouldTriggerQuery:!0,forceOnSearchChangeEvent:!0})}});const s=this._gridOptions.backendServiceApi,l=s?en.remote:en.local;if(e&&await this.emitFilterChanged(l,!0),this._dataView.refresh(),s){const u=s==null?void 0:s.service;u!=null&&u.updateFilters&&(u.updateFilters(t,!0),n&&((o=this.backendUtilities)===null||o===void 0||o.refreshBackendDataset(this._gridOptions)))}e&&await this.emitFilterChanged(l)}return!0}async updateSingleFilter(t,e=!0,n=!0){var r,o,s,l;const u=this.sharedService.allColumns.find(h=>h.id===t.columnId);if(u&&t.columnId){this._columnFilters={};const h=(o=(r=u.filter)===null||r===void 0?void 0:r.emptySearchTermReturnAllValues)!==null&&o!==void 0?o:!0;Array.isArray(t.searchTerms)&&(t.searchTerms.length>1||t.searchTerms.length===1&&(!h||t.searchTerms[0]!==""))&&(this._columnFilters[t.columnId]={columnId:t.columnId,operator:t.operator,searchTerms:t.searchTerms,columnDef:u,type:(s=u.type)!==null&&s!==void 0?s:ie.string});const c=this._gridOptions.backendServiceApi,p=c?en.remote:en.local;if(e&&await this.emitFilterChanged(p,!0),c){const m=c==null?void 0:c.service;m!=null&&m.updateFilters&&(m.updateFilters(this._columnFilters,!0),n&&((l=this.backendUtilities)===null||l===void 0||l.refreshBackendDataset(this._gridOptions)))}else this._dataView.setFilterArgs({columnFilters:this._columnFilters,grid:this._grid}),this._gridOptions.enableTreeData&&this.refreshTreeDataFilters(),this._dataView.refresh();e&&await this.emitFilterChanged(p)}return!0}drawFilterTemplate(t,e){var n;let r;if(typeof e=="string"){if(r=document.querySelector(e),r===null)return null}else r=e;const o=typeof t=="string"?this.sharedService.allColumns.find(l=>l.id===t):t;if(((n=o==null?void 0:o.id)!==null&&n!==void 0?n:"")!=="selector"&&(o!=null&&o.filterable)){let l,u;const h=this.filterFactory.createFilter(o.filter);u=o&&o.filter&&o.filter.operator||h&&h.operator,this._columnFilters[o.id]?(l=this._columnFilters[o.id].searchTerms||void 0,u=this._columnFilters[o.id].operator||void 0):o.filter&&(l=o.filter.searchTerms||void 0,this.updateColumnFilters(l,o,u));const c={grid:this._grid,operator:u,searchTerms:l,columnDef:o,filterContainerElm:r,callback:this.callbackSearchEvent.bind(this)};return h&&(h.init(c),l&&h.setValues&&h.setValues(l,u)),h}return null}addFilterTemplateToHeaderRow(t,e=!0){var n;const r=t.column,o=(n=r==null?void 0:r.id)!==null&&n!==void 0?n:"";if(o!=="selector"&&(r!=null&&r.filterable)){let s,l;const u=this.filterFactory.createFilter(r.filter);l=r&&r.filter&&r.filter.operator||u&&u.operator,this._columnFilters[r.id]?(s=this._columnFilters[r.id].searchTerms||void 0,l=this._columnFilters[r.id].operator||void 0):r.filter&&(s=r.filter.searchTerms||void 0,this.updateColumnFilters(s,r,l));const h={grid:this._grid,operator:l,searchTerms:s,columnDef:r,filterContainerElm:this._grid.getHeaderRowColumn(o),callback:this.callbackSearchEvent.bind(this)};if(u){u.init(h,e);const c=this._filtersMetadata.findIndex(p=>u.columnDef.id===p.columnDef.id);c===-1?this._filtersMetadata.push(u):this._filtersMetadata[c]=u,s&&u.setValues&&u.setValues(s,l)}}}callbackSearchEvent(t,e){var n,r,o,s,l,u;if(e){const h=t!=null&&t.target?t.target.value:void 0,c=e.searchTerms&&Array.isArray(e.searchTerms)?e.searchTerms:h?[h]:void 0,p=e.columnDef||null,m=(n=p==null?void 0:p.id)!==null&&n!==void 0?n:"",v=(s=(o=(r=p==null?void 0:p.filter)===null||r===void 0?void 0:r.type)!==null&&o!==void 0?o:p==null?void 0:p.type)!==null&&s!==void 0?s:ie.string,_=e.operator||void 0,C=c&&Array.isArray(c),x=C&&c&&c.length,S={...this._columnFilters},y=(u=(l=p.filter)===null||l===void 0?void 0:l.emptySearchTermReturnAllValues)!==null&&u!==void 0?u:!0;let D;if(p&&m)if(!C||x===0||x===1&&Array.isArray(c)&&y&&c[0]==="")delete this._columnFilters[m];else{const B=`${m}`,Q={columnId:B,columnDef:p,parsedSearchTerms:[],type:v,targetSelector:O_(t==null?void 0:t.target)},L=this.parseFormInputFilterConditions(c,Q);Q.operator=_||L.operator||rh(v),D=Tu(L.searchTerms,v),D!==void 0&&(Q.parsedSearchTerms=D),Q.searchTerms=L.searchTerms||[],this._columnFilters[B]=Q}const A=t&&typeof t.isPropagationStopped!="function"?Slick.Utils.extend({},new Slick.EventData,t):t,P=t==null?void 0:t.key,M=t==null?void 0:t.keyCode;if(this._onSearchChange&&(e.forceOnSearchChangeEvent||P==="Enter"||M===xi.ENTER||!Jo(S,this._columnFilters))){const B={clearFilterTriggered:e.clearFilterTriggered,shouldTriggerQuery:e.shouldTriggerQuery,columnId:m,columnDef:p,columnFilters:this._columnFilters,operator:_||rh(v),searchTerms:c,parsedSearchTerms:D,grid:this._grid,target:t==null?void 0:t.target};this.pubSubService.publish("onBeforeSearchChange",B)===!1?this._gridOptions.resetFilterSearchValueAfterOnBeforeCancellation&&this.resetToPreviousSearchFilters():this._onSearchChange.notify(B,A)}}}disableAllFilteringCommands(t=!0){var e;const n=this._grid.getColumns();n.forEach(o=>{var s,l;!((s=o==null?void 0:o.header)===null||s===void 0)&&s.menu&&((l=o.header.menu.commandItems||o.header.menu.items)===null||l===void 0||l.forEach(u=>{u&&typeof u!="string"&&u.command==="clear-filter"&&(u.hidden=t)}))});const r=(e=this._gridOptions.gridMenu)===null||e===void 0?void 0:e.commandItems;return r&&r.forEach(o=>{if(o&&typeof o!="string"){const s=o.command;(s==="clear-filter"||s==="toggle-filter")&&(o.hidden=t)}}),n}extractBasicFilterDetails(t){const e=[];if(t&&typeof t=="object")for(const n of Object.keys(t)){const{operator:r,searchTerms:o}=t[`${n}`];e.push({columnId:n,operator:r,searchTerms:o})}return e}removeAllColumnFiltersProperties(){if(typeof this._columnFilters=="object")for(const t in this._columnFilters)t&&this._columnFilters[t]&&delete this._columnFilters[t]}subscribeToOnHeaderRowCellRendered(t){this._eventHandler.subscribe(t.onBeforeHeaderRowCellDestroy,(e,n)=>{var r;const o=this._filtersMetadata.find(s=>s.columnDef.id===n.column.id);(r=o==null?void 0:o.destroy)===null||r===void 0||r.call(o)})}updateColumnFilters(t,e,n){var r,o,s;const l=(s=(o=(r=e.filter)===null||r===void 0?void 0:r.type)!==null&&o!==void 0?o:e.type)!==null&&s!==void 0?s:ie.string,u=Tu(t,l);t&&e&&(this._columnFilters[e.id]={columnId:e.id,columnDef:e,searchTerms:t,operator:n,parsedSearchTerms:u,type:l})}}const Ou={skipError:!1,triggerEvent:!0},ad={highlightRow:!0,resortGrid:!1,selectRow:!1,scrollRowIntoView:!0,skipError:!1,triggerEvent:!0},$h={highlightRow:!1,selectRow:!1,scrollRowIntoView:!1,skipError:!1,triggerEvent:!0},$m={autoResizeColumns:!0,triggerEvent:!0,hideFromColumnPicker:!1,hideFromGridMenu:!1};class M0{constructor(t,e,n,r,o,s,l){this.gridStateService=t,this.filterService=e,this.pubSubService=n,this.paginationService=r,this.sharedService=o,this.sortService=s,this.treeDataService=l}get _dataView(){var t;return((t=this._grid)===null||t===void 0?void 0:t.getData)&&this._grid.getData()}get _gridOptions(){var t;return!((t=this._grid)===null||t===void 0)&&t.getOptions?this._grid.getOptions():{}}dispose(){var t;this.clearHighlightTimer(),(t=this._rowSelectionPlugin)===null||t===void 0||t.dispose()}init(t){this._grid=t}clearAllFiltersAndSorts(){this.sortService&&this.sortService.clearSorting&&this.sortService.clearSorting(!1),this.filterService&&this.filterService.clearFilters&&this.filterService.clearFilters()}clearHighlightTimer(){clearTimeout(this._highlightTimer),clearTimeout(this._highlightTimerEnd)}clearPinning(t=!0){const e=[...this.sharedService.visibleColumns];this.sharedService.slickGrid.setOptions({frozenColumn:-1,frozenRow:-1,frozenBottom:!1,enableMouseWheelScrollHandler:!1}),t&&Array.isArray(e)&&this.sharedService.slickGrid.setColumns(e)}setPinning(t,e=!0,n=!1,r=!0){Dp(t)?this.clearPinning():(this.sharedService.slickGrid.setOptions(t,n,r),this.sharedService.gridOptions={...this.sharedService.gridOptions,...t}),e&&this.sharedService.slickGrid.autosizeColumns()}getAllColumnDefinitions(){return this.sharedService.allColumns}getVisibleColumnDefinitions(){return this.sharedService.visibleColumns}getColumnFromEventArguments(t){if(!t||!t.grid||!t.grid.getColumns||!t.grid.getDataItem)throw new Error("[Slickgrid-Universal] To get the column definition and data, we need to have these arguments passed as objects (row, cell, grid)");return{row:t.row,cell:t.cell,columnDef:t.grid.getColumns()[t.cell],dataContext:t.grid.getDataItem(t.row),dataView:this._dataView,grid:this._grid}}getDataItemByRowNumber(t){if(!this._grid||typeof this._grid.getDataItem!="function")throw new Error(`[Slickgrid-Universal] We could not find SlickGrid Grid object or it's "getDataItem" method`);return this._grid.getDataItem(t)}getItemRowMetadataToHighlight(t){return e=>{const n=this._dataView.getItem(e);let r={cssClasses:""};return typeof t=="function"&&(r=t(e)),r||(r={cssClasses:""}),n&&n._dirty&&(r.cssClasses=(r&&r.cssClasses||"")+" dirty"),n&&n.rowClass&&r&&(r.cssClasses+=` ${n.rowClass}`,r.cssClasses+=` row${e}`),r}}getDataItemByRowIndex(t){if(!this._grid||typeof this._grid.getDataItem!="function")throw new Error('[Slickgrid-Universal] We could not find SlickGrid Grid object and/or "getDataItem" method');return this._grid.getDataItem(t)}getDataItemByRowIndexes(t){if(!this._grid||typeof this._grid.getDataItem!="function")throw new Error('[Slickgrid-Universal] We could not find SlickGrid Grid object and/or "getDataItem" method');const e=[];return Array.isArray(t)&&t.forEach(n=>{e.push(this._grid.getDataItem(n))}),e}getSelectedRows(){if(!this._grid||typeof this._grid.getSelectedRows!="function")throw new Error('[Slickgrid-Universal] We could not find SlickGrid Grid object and/or "getSelectedRows" method');return this._grid.getSelectedRows()}getSelectedRowsDataItem(){if(!this._grid||typeof this._grid.getSelectedRows!="function")throw new Error('[Slickgrid-Universal] We could not find SlickGrid Grid object and/or "getSelectedRows" method');const t=this._grid.getSelectedRows();return this.getDataItemByRowIndexes(t)}hideColumnById(t,e){if(e={...$m,...e},this._grid&&this._grid.getColumns&&this._grid.setColumns){const n=this._grid.getColumns(),r=n.findIndex(o=>o.id===t);if(r>=0){const o=oh(n,r);this.sharedService.visibleColumns=o,this._grid.setColumns(o);const s=this.sharedService.allColumns.findIndex(l=>l.id===t);return s&&(e!=null&&e.hideFromColumnPicker&&(this.sharedService.allColumns[s].excludeFromColumnPicker=!0),e!=null&&e.hideFromGridMenu&&(this.sharedService.allColumns[s].excludeFromGridMenu=!0)),e!=null&&e.autoResizeColumns&&this._grid.autosizeColumns(),e!=null&&e.triggerEvent&&this.pubSubService.publish("onHeaderMenuHideColumns",{columns:o}),r}}return-1}hideColumnByIds(t,e){if(e={...$m,...e},Array.isArray(t)){for(const n of t)this.hideColumnById(n,{...e,triggerEvent:!1,autoResizeColumns:!1});e!=null&&e.autoResizeColumns&&this._grid.autosizeColumns(),e!=null&&e.triggerEvent&&this.pubSubService.publish("onHeaderMenuHideColumns",{columns:this.sharedService.visibleColumns})}}highlightRow(t,e=1500,n=300){this._grid.getSelectionModel()||(this._rowSelectionPlugin=new Ch(this._gridOptions.rowSelectionOptions),this._grid.setSelectionModel(this._rowSelectionPlugin)),Array.isArray(t)?t.forEach(r=>this.highlightRowByMetadata(r,e,n)):this.highlightRowByMetadata(t,e,n)}highlightRowByMetadata(t,e=1500,n=300){this._dataView.getItemMetadata=this.getItemRowMetadataToHighlight(this._dataView.getItemMetadata);const r=this._dataView.getItem(t),o=this._gridOptions.datasetIdPropertyName||"id";(r==null?void 0:r[o])!==void 0&&(r.rowClass="highlight",this._dataView.updateItem(r[o],r),this.renderGrid(),this.clearHighlightTimer(),this._highlightTimerEnd=setTimeout(()=>{r.rowClass="highlight-end",this._dataView.updateItem(r[o],r),this.renderGrid()},n),this._highlightTimer=setTimeout(()=>{(r==null?void 0:r[o])!==void 0&&(delete r.rowClass,this._dataView.getIdxById(r[o])!==void 0&&(this._dataView.updateItem(r[o],r),this.renderGrid()))},e+n))}setSelectedRow(t){var e;!((e=this._grid)===null||e===void 0)&&e.setSelectedRows&&this._grid.setSelectedRows([t])}setSelectedRows(t){var e;!((e=this._grid)===null||e===void 0)&&e.setSelectedRows&&this._grid.setSelectedRows(t)}renderGrid(){this._grid&&typeof this._grid.invalidate=="function"&&(this._grid.invalidate(),this._grid.render())}resetGrid(t){var e,n,r;if(this.clearPinning(!1),this._grid){const o=this.sharedService.allColumns||[];Array.isArray(o)&&o.length>0&&(this._grid.setColumns(o),!((e=this._gridOptions)===null||e===void 0)&&e.enableAutoSizeColumns&&this._grid.autosizeColumns(),this.gridStateService.resetColumns(t))}typeof((n=this.filterService)===null||n===void 0?void 0:n.clearFilters)=="function"&&this.filterService.clearFilters(),typeof((r=this.sortService)===null||r===void 0?void 0:r.clearSorting)=="function"&&this.sortService.clearSorting()}addItem(t,e){var n,r,o,s,l;const u={...ad,...e};if(!(u!=null&&u.skipError)&&(!this._grid||!this._gridOptions||!this._dataView))throw new Error("[Slickgrid-Universal] We could not find SlickGrid Grid, DataView objects");const h=this._gridOptions.datasetIdPropertyName||"id";if(!(u!=null&&u.skipError)&&(!t||!t.hasOwnProperty(h)))throw new Error(`[Slickgrid-Universal] Adding an item requires the item to include an "${h}" property`);if(!((n=this._gridOptions)===null||n===void 0)&&n.enableTreeData&&(e==null?void 0:e.position)==="top")throw new Error('[Slickgrid-Universal] Please note that `addItem({ position: "top" })` is not supported when used with Tree Data because of the extra complexity.');const c=u==null?void 0:u.position;c==="bottom"||!((r=this._gridOptions)===null||r===void 0)&&r.enableTreeData?this._dataView.addItem(t):this._dataView.insertItem(0,t);let p=0;const m=(o=t==null?void 0:t[h])!==null&&o!==void 0?o:"";return!((s=this._gridOptions)===null||s===void 0)&&s.enableTreeData?(this.invalidateHierarchicalDataset(),p=this._dataView.getRowById(m),u.scrollRowIntoView&&this._grid.scrollRowIntoView(p??0,!1)):u.resortGrid?(this._dataView.reSort(),p=this._dataView.getRowById(m)):(p=c==="bottom"?this._dataView.getRowById(m):0,u.scrollRowIntoView&&this._grid.scrollRowIntoView(p??0)),u.highlightRow&&p!==void 0&&this.highlightRow(p),p!==void 0&&u.selectRow&&this._gridOptions&&(this._gridOptions.enableCheckboxSelector||this._gridOptions.enableRowSelection)&&this.setSelectedRow(p),u.triggerEvent&&this.pubSubService.publish("onItemAdded",t),!(!((l=this._gridOptions)===null||l===void 0)&&l.backendServiceApi)&&this._gridOptions.enablePagination&&(c==="bottom"?this.paginationService.goToLastPage():this.paginationService.goToFirstPage()),p}addItems(t,e){var n,r,o,s,l;const u={...ad,...e},h=this._gridOptions.datasetIdPropertyName||"id",c=u==null?void 0:u.position,p=[];if(Array.isArray(t))this._dataView.beginUpdate(!0),c==="bottom"||!((n=this._gridOptions)===null||n===void 0)&&n.enableTreeData?this._dataView.addItems(t):this._dataView.insertItems(0,t),this._dataView.endUpdate();else return[this.addItem(t,u)||0];if(!((r=this._gridOptions)===null||r===void 0)&&r.enableTreeData){this.invalidateHierarchicalDataset();const m=(s=(o=t[0])===null||o===void 0?void 0:o[h])!==null&&s!==void 0?s:"",v=this._dataView.getRowById(m);u.scrollRowIntoView&&this._grid.scrollRowIntoView(v??0,!1)}else u.resortGrid&&this._dataView.reSort();return c&&u.scrollRowIntoView&&!(!((l=this._gridOptions)===null||l===void 0)&&l.enableTreeData)&&(c==="bottom"?this._grid.navigateBottom():this._grid.navigateTop()),t.forEach(m=>p.push(this._dataView.getRowById(m[h]))),u.highlightRow&&this.highlightRow(p),u.selectRow&&this._gridOptions&&(this._gridOptions.enableCheckboxSelector||this._gridOptions.enableRowSelection)&&this.setSelectedRows(p),u.triggerEvent&&this.pubSubService.publish("onItemAdded",t),p}deleteItem(t,e){e={...Ou,...e};const n=this._gridOptions.datasetIdPropertyName||"id";if(!(e!=null&&e.skipError)&&(!t||!t.hasOwnProperty(n)))throw new Error(`[Slickgrid-Universal] Deleting an item requires the item to include an "${n}" property`);return this.deleteItemById(t[n],e)}deleteItems(t,e){e={...Ou,...e};const n=this._gridOptions.datasetIdPropertyName||"id";if(!Array.isArray(t))return this.deleteItem(t,e),[t[n]];this._dataView.beginUpdate(!0);const r=[];return t.forEach(o=>{(o==null?void 0:o[n])!==void 0&&r.push(o[n])}),this._dataView.deleteItems(r),this._dataView.endUpdate(),e.triggerEvent&&this.pubSubService.publish("onItemDeleted",t),r}deleteItemById(t,e){if(e={...Ou,...e},!(e!=null&&e.skipError)&&t==null)throw new Error('[Slickgrid-Universal] Cannot delete a row without a valid "id"');return!(this.gridStateService&&this.gridStateService.needToPreserveRowSelection()||!1)&&this._grid&&this._gridOptions&&(this._gridOptions.enableCheckboxSelector||this._gridOptions.enableRowSelection)&&this.setSelectedRows([]),this._dataView.deleteItem(t),e.triggerEvent&&this.pubSubService.publish("onItemDeleted",t),t}deleteItemByIds(t,e){if(e={...Ou,...e},Array.isArray(t)){this._dataView.beginUpdate(!0);for(let n=0;n<t.length;n++)t[n]!==null&&this.deleteItemById(t[n],{triggerEvent:!1});return this._dataView.endUpdate(),e.triggerEvent&&this.pubSubService.publish("onItemDeleted",t),t}return[]}updateItem(t,e){e={...$h,...e};const n=this._gridOptions.datasetIdPropertyName||"id",r=!t||!t.hasOwnProperty(n)?void 0:t[n];if(!(e!=null&&e.skipError)&&r===void 0)throw new Error(`[Slickgrid-Universal] Calling Update of an item requires the item to include an "${n}" property`);return this.updateItemById(r,t,e)}updateItems(t,e){var n;e={...$h,...e};const r=this._gridOptions.datasetIdPropertyName||"id";if(!Array.isArray(t))return[this.updateItem(t,e)];this._dataView.beginUpdate(!0);const o=[],s=[];return t.forEach(l=>{const u=!l||!l.hasOwnProperty(r)?void 0:l[r];if(s.push(u),this._dataView.getIdxById(u)!==void 0){const h=this._dataView.getRowById(u);h!==void 0&&(o.push(h),this._grid.updateRow(h))}}),this._dataView.updateItems(s,t),this._dataView.endUpdate(),!((n=this._gridOptions)===null||n===void 0)&&n.enableTreeData&&this.invalidateHierarchicalDataset(),e.highlightRow&&this.highlightRow(o),e.selectRow&&this._gridOptions&&(this._gridOptions.enableCheckboxSelector||this._gridOptions.enableRowSelection)&&this.setSelectedRows(o),e.triggerEvent&&this.pubSubService.publish("onItemUpdated",t),o}updateItemById(t,e,n){var r;if(n={...$h,...n},!(n!=null&&n.skipError)&&t===void 0)throw new Error('[Slickgrid-Universal] Cannot update a row without a valid "id"');const o=this._dataView.getRowById(t);if(!(n!=null&&n.skipError)&&!e&&!this._gridOptions.enablePagination)throw new Error(`[Slickgrid-Universal] The item to update in the grid was not found with id: ${t}`);return this._dataView.getIdxById(t)!==void 0&&(this._dataView.updateItem(t,e),o!==void 0&&this._grid.updateRow(o),!((r=this._gridOptions)===null||r===void 0)&&r.enableTreeData&&this.invalidateHierarchicalDataset(),n.scrollRowIntoView&&o!==void 0&&this._grid.scrollRowIntoView(o),n.highlightRow&&o!==void 0&&this.highlightRow(o),o!==void 0&&n.selectRow&&this._gridOptions&&(this._gridOptions.enableCheckboxSelector||this._gridOptions.enableRowSelection)&&this.setSelectedRow(o),n.triggerEvent&&this.pubSubService.publish("onItemUpdated",e)),o}upsertItem(t,e){e={...ad,...e};const n=this._gridOptions.datasetIdPropertyName||"id",r=!t||!t.hasOwnProperty(n)?void 0:t[n];if(!(e!=null&&e.skipError)&&r===void 0)throw new Error(`[Slickgrid-Universal] Calling Upsert of an item requires the item to include an "${n}" property`);return this.upsertItemById(r,t,e)}upsertItems(t,e){if(e={...ad,...e},!Array.isArray(t))return[this.upsertItem(t,e)];this._dataView.beginUpdate(!0);const n=[];t.forEach(o=>{n.push(this.upsertItem(o,{...e,highlightRow:!1,resortGrid:!1,selectRow:!1,triggerEvent:!1}))}),this._dataView.endUpdate();const r=n.map(o=>o.added!==void 0?o.added:o.updated);if(e.highlightRow&&this.highlightRow(r),e.selectRow&&this._gridOptions&&(this._gridOptions.enableCheckboxSelector||this._gridOptions.enableRowSelection)&&this.setSelectedRows(r),e.triggerEvent){this.pubSubService.publish("onItemUpserted",t);const o=n.filter(l=>l.added!==void 0);Array.isArray(o)&&o.length>0&&this.pubSubService.publish("onItemAdded",o);const s=n.filter(l=>l.updated!==void 0);Array.isArray(s)&&s.length>0&&this.pubSubService.publish("onItemUpdated",s)}return n}upsertItemById(t,e,n){let r=!1;if(n={...ad,...n},!(n!=null&&n.skipError)&&t===void 0&&!this.hasRowSelectionEnabled())throw new Error('[Slickgrid-Universal] Calling Upsert of an item requires the item to include a valid and unique "id" property');let o,s;return this._dataView.getRowById(t)===void 0?(o=this.addItem(e,n),r=!0):(s=this.updateItem(e,{highlightRow:n.highlightRow,selectRow:n.selectRow,triggerEvent:n.triggerEvent}),r=!1),n.triggerEvent&&(this.pubSubService.publish("onItemUpserted",e),r?this.pubSubService.publish("onItemAdded",e):this.pubSubService.publish("onItemUpdated",e)),{added:o,updated:s}}invalidateHierarchicalDataset(t){var e;if(!((e=this._gridOptions)===null||e===void 0)&&e.enableTreeData&&this.treeDataService){const n=t??this._dataView.getItems(),r=this.treeDataService.convertFlatParentChildToTreeDatasetAndSort(n||[],this.sharedService.allColumns,this._gridOptions);this.sharedService.hierarchicalDataset=r.hierarchical,this.filterService.refreshTreeDataFilters(t),this._dataView.setItems(r.flat),this._grid.invalidate()}}hasRowSelectionEnabled(){const t=this._grid.getSelectionModel();return(this._gridOptions.enableRowSelection||this._gridOptions.enableCheckboxSelector)&&t}}class N0{get eventHandler(){return this._eventHandler}constructor(){this._eventHandler=new Slick.EventHandler}dispose(){this._eventHandler.unsubscribeAll()}bindOnBeforeEditCell(t){var e;const n=(e=t==null?void 0:t.getData)===null||e===void 0?void 0:e.call(t);this._eventHandler.subscribe(t.onBeforeEditCell,(r,o)=>{if(!r||!o||!t||o.cell===void 0||!t.getColumns||!t.getDataItem)return;const s=t.getColumns()[o.cell];if(typeof s.onBeforeEditCell=="function"){const l={row:o.row,cell:o.cell,dataView:n,grid:t,columnDef:s,dataContext:t.getDataItem(o.row)};s.onBeforeEditCell(r,l)}})}bindOnCellChange(t){var e;const n=(e=t==null?void 0:t.getData)===null||e===void 0?void 0:e.call(t);this._eventHandler.subscribe(t.onCellChange,(r,o)=>{if(!r||!o||!t||o.cell===void 0||!t.getColumns||!t.getDataItem)return;const s=t.getColumns()[o.cell];if(typeof s.onCellChange=="function"){const l={row:o.row,cell:o.cell,dataView:n,grid:t,columnDef:s,dataContext:t.getDataItem(o.row)};s.onCellChange(r,l)}})}bindOnClick(t){var e;const n=(e=t==null?void 0:t.getData)===null||e===void 0?void 0:e.call(t);this._eventHandler.subscribe(t.onClick,(r,o)=>{var s;if(!r||!o||!t||o.cell===void 0||!t.getColumns||!t.getDataItem)return;const l=(s=t.getColumns)===null||s===void 0?void 0:s.call(t)[o.cell];if(typeof l.onCellClick=="function"){const u={row:o.row,cell:o.cell,dataView:n,grid:t,columnDef:l,dataContext:t.getDataItem(o.row)};l.onCellClick(r,u)}})}}class L0{constructor(t,e,n,r,o,s){this.extensionService=t,this.filterService=e,this.pubSubService=n,this.sharedService=r,this.sortService=o,this.treeDataService=s,this._eventHandler=new Slick.EventHandler,this._columns=[],this._subscriptions=[],this._selectedRowIndexes=[],this._selectedRowDataContextIds=[],this._wasRecheckedAfterPageChange=!0}get _dataView(){var t,e,n;return(n=(e=(t=this._grid)===null||t===void 0?void 0:t.getData)===null||e===void 0?void 0:e.call(t))!==null&&n!==void 0?n:{}}get _gridOptions(){var t,e,n;return(n=(e=(t=this._grid)===null||t===void 0?void 0:t.getOptions)===null||e===void 0?void 0:e.call(t))!==null&&n!==void 0?n:{}}get selectedRowDataContextIds(){return this._selectedRowDataContextIds}set selectedRowDataContextIds(t){this._selectedRowDataContextIds=t}init(t){this._grid=t,this.subscribeToAllGridChanges(t)}dispose(){this._columns=[],this._eventHandler.unsubscribeAll(),this.pubSubService.unsubscribeAll(this._subscriptions)}changeColumnsArrangement(t,e=!0,n=!1){var r,o,s,l,u,h,c,p,m;if(Array.isArray(t)&&t.length>0){const v=this.getAssociatedGridColumns(this._grid,t);if(v&&Array.isArray(v)&&v.length>0){if(Array.isArray(this.sharedService.allColumns)){const _=[];if(this._gridOptions.enableCheckboxSelector){const C=(s=(o=(r=this._gridOptions)===null||r===void 0?void 0:r.checkboxSelector)===null||o===void 0?void 0:o.columnIndexPosition)!==null&&s!==void 0?s:0;_.push({columnId:"_checkbox_selector",columnIndexPosition:C})}if(this._gridOptions.enableRowDetailView){const C=(h=(u=(l=this._gridOptions)===null||l===void 0?void 0:l.rowDetailView)===null||u===void 0?void 0:u.columnIndexPosition)!==null&&h!==void 0?h:0;_.push({columnId:"_detail_selector",columnIndexPosition:C})}if(this._gridOptions.enableRowMoveManager){const C=(m=(p=(c=this._gridOptions)===null||c===void 0?void 0:c.rowMoveManager)===null||p===void 0?void 0:p.columnIndexPosition)!==null&&m!==void 0?m:0;_.push({columnId:"_move",columnIndexPosition:C})}this.addColumnDynamicWhenFeatureEnabled(_,this.sharedService.allColumns,v)}v.forEach(_=>_.originalWidth=_.width||_.originalWidth),this._grid.setColumns(v),this.sharedService.visibleColumns=v,e?this._grid.autosizeColumns():(n||this._gridOptions.enableAutoResizeColumnsByCellContent&&!this._gridOptions.autosizeColumnsByCellContentOnFirstLoad)&&this.pubSubService.publish("onFullResizeByContentRequested",{caller:"GridStateService"})}}}getCurrentGridState(){var t;const{frozenColumn:e,frozenRow:n,frozenBottom:r}=this.sharedService.gridOptions,o={columns:this.getCurrentColumns(),filters:this.getCurrentFilters(),sorters:this.getCurrentSorters(),pinning:{frozenColumn:e,frozenRow:n,frozenBottom:r}},s=this.getCurrentPagination();if(s&&(o.pagination=s),this.hasRowSelectionEnabled()){const l=this.getCurrentRowSelections();l&&(o.rowSelection=l)}if(!((t=this._gridOptions)===null||t===void 0)&&t.enableTreeData){const l=this.getCurrentTreeDataToggleState();l&&(o.treeData=l)}return o}getColumns(){return this._columns}getAssociatedCurrentColumns(t){const e=[];return t&&Array.isArray(t)&&t.forEach(n=>{n!=null&&n.id&&e.push({columnId:n.id,cssClass:n.cssClass||"",headerCssClass:n.headerCssClass||"",width:n.width||0})}),e}getAssociatedGridColumns(t,e){const n=[],r=this.sharedService.allColumns||t.getColumns();return e&&Array.isArray(e)&&e.forEach(o=>{const s=r.find(l=>l.id===o.columnId);s!=null&&s.id&&n.push({...s,cssClass:o.cssClass||s.cssClass,headerCssClass:o.headerCssClass||s.headerCssClass,width:o.width})}),this._columns=n,n}getCurrentColumns(){return this.getAssociatedCurrentColumns(this._grid.getColumns()||[])}getCurrentFilters(){var t,e;if(!((t=this._gridOptions)===null||t===void 0)&&t.backendServiceApi){const n=this._gridOptions.backendServiceApi.service;if(n!=null&&n.getCurrentFilters)return n.getCurrentFilters()}else if(!((e=this.filterService)===null||e===void 0)&&e.getCurrentLocalFilters)return this.filterService.getCurrentLocalFilters();return null}getCurrentPagination(){var t;if(!((t=this._gridOptions)===null||t===void 0)&&t.enablePagination)if(this._gridOptions.backendServiceApi){const e=this._gridOptions.backendServiceApi.service;if(e!=null&&e.getCurrentPagination)return e.getCurrentPagination()}else return this.sharedService.currentPagination;return null}getCurrentRowSelections(){return this._grid&&this._dataView&&this.hasRowSelectionEnabled()?{gridRowIndexes:this._grid.getSelectedRows()||[],dataContextIds:this._dataView.getAllSelectedIds()||[],filteredDataContextIds:this._dataView.getAllSelectedFilteredIds()||[]}:null}getCurrentSorters(){var t,e;if(!((t=this._gridOptions)===null||t===void 0)&&t.backendServiceApi){const n=this._gridOptions.backendServiceApi.service;if(n!=null&&n.getCurrentSorters)return n.getCurrentSorters()}else if(!((e=this.sortService)===null||e===void 0)&&e.getCurrentLocalSorters)return this.sortService.getCurrentLocalSorters();return null}getCurrentTreeDataToggleState(){var t;return!((t=this._gridOptions)===null||t===void 0)&&t.enableTreeData&&this.treeDataService?this.treeDataService.getCurrentToggleState():null}needToPreserveRowSelection(){var t;let e=!1;if(!((t=this._gridOptions)===null||t===void 0)&&t.dataView&&this._gridOptions.dataView.hasOwnProperty("syncGridSelection")){const n=this._gridOptions.dataView.syncGridSelection;typeof n=="boolean"?e=this._gridOptions.dataView.syncGridSelection:typeof n=="object"&&(e=n.preserveHidden||n.preserveHiddenOnSelectionChange),e&&this._gridOptions.backendServiceApi&&this._gridOptions.dataView.hasOwnProperty("syncGridSelectionWithBackendService")&&(e=this._gridOptions.dataView.syncGridSelectionWithBackendService)}return e}resetColumns(t){const e=t||this._columns,n=this.getAssociatedCurrentColumns(e);this.pubSubService.publish("onGridStateChanged",{change:{newValues:n,type:cr.columns},gridState:this.getCurrentGridState()})}resetToOriginalColumns(t=!0){this._grid.setColumns(this.sharedService.allColumns),this.sharedService.visibleColumns=this.sharedService.allColumns,t&&this._grid.autosizeColumns()}resetRowSelectionWhenRequired(){var t,e;if(!this.needToPreserveRowSelection()&&(this._gridOptions.enableRowSelection||this._gridOptions.enableCheckboxSelector)){const n=(e=(t=this.extensionService)===null||t===void 0?void 0:t.getExtensionByName)===null||e===void 0?void 0:e.call(t,ri.rowSelection);n!=null&&n.instance&&this._grid.setSelectedRows([])}}subscribeToAllGridChanges(t){this._subscriptions.push(this.pubSubService.subscribe("onFilterChanged",e=>{this.resetRowSelectionWhenRequired(),this.pubSubService.publish("onGridStateChanged",{change:{newValues:e,type:cr.filter},gridState:this.getCurrentGridState()})})),this._subscriptions.push(this.pubSubService.subscribe("onFilterCleared",()=>{this.resetRowSelectionWhenRequired(),this.pubSubService.publish("onGridStateChanged",{change:{newValues:[],type:cr.filter},gridState:this.getCurrentGridState()})})),this._subscriptions.push(this.pubSubService.subscribe("onSortChanged",e=>{this.resetRowSelectionWhenRequired(),this.pubSubService.publish("onGridStateChanged",{change:{newValues:e,type:cr.sorter},gridState:this.getCurrentGridState()})})),this._subscriptions.push(this.pubSubService.subscribe("onSortCleared",()=>{this.resetRowSelectionWhenRequired(),this.pubSubService.publish("onGridStateChanged",{change:{newValues:[],type:cr.sorter},gridState:this.getCurrentGridState()})})),this.bindExtensionAddonEventToGridStateChange(ri.columnPicker,"onColumnsChanged"),this.bindExtensionAddonEventToGridStateChange(ri.gridMenu,"onColumnsChanged"),this.bindSlickGridColumnChangeEventToGridStateChange("onColumnsReordered",t),this.bindSlickGridColumnChangeEventToGridStateChange("onColumnsResized",t),this.bindSlickGridOnSetOptionsEventToGridStateChange(t),(this._gridOptions.enableRowSelection||this._gridOptions.enableCheckboxSelector)&&this._eventHandler.subscribe(this._dataView.onSelectedRowIdsChanged,(e,n)=>{const r=(this._selectedRowIndexes||[]).slice(),o=(this.selectedRowDataContextIds||[]).slice();if(this.selectedRowDataContextIds=n.filteredIds,this._selectedRowIndexes=n.rows,!Jo(this.selectedRowDataContextIds,o)||!Jo(this._selectedRowIndexes,r)){const s={gridRowIndexes:this._selectedRowIndexes||[],dataContextIds:n.selectedRowIds,filteredDataContextIds:n.filteredIds};this.pubSubService.publish("onGridStateChanged",{change:{newValues:s,type:cr.rowSelection},gridState:this.getCurrentGridState()})}}),this._subscriptions.push(this.pubSubService.subscribe("onHeaderMenuHideColumns",e=>{const n=this.getAssociatedCurrentColumns(e);this.pubSubService.publish("onGridStateChanged",{change:{newValues:n,type:cr.columns},gridState:this.getCurrentGridState()})})),this._subscriptions.push(this.pubSubService.subscribe("onTreeItemToggled",e=>{this.pubSubService.publish("onGridStateChanged",{change:{newValues:e,type:cr.treeData},gridState:this.getCurrentGridState()})})),this._subscriptions.push(this.pubSubService.subscribe("onTreeFullToggleEnd",e=>{this.pubSubService.publish("onGridStateChanged",{change:{newValues:e,type:cr.treeData},gridState:this.getCurrentGridState()})}))}addColumnDynamicWhenFeatureEnabled(t,e,n){t.sort((r,o)=>r.columnIndexPosition-o.columnIndexPosition),t.forEach(r=>{const o=e.findIndex(l=>l.id===r.columnId),s=n.findIndex(l=>l.id===r.columnId);if(o>=0&&s===-1){const l=e[o];o===0?n.unshift(l):n.splice(o,0,l)}})}bindExtensionAddonEventToGridStateChange(t,e){var n,r,o;const s=(r=(n=this.extensionService)===null||n===void 0?void 0:n.getExtensionByName)===null||r===void 0?void 0:r.call(n,t),l=(o=s==null?void 0:s.instance)===null||o===void 0?void 0:o[e];l&&typeof l.subscribe=="function"&&this._eventHandler.subscribe(l,(u,h)=>{const c=h==null?void 0:h.columns,p=this.getAssociatedCurrentColumns(c);this.pubSubService.publish("onGridStateChanged",{change:{newValues:p,type:cr.columns},gridState:this.getCurrentGridState()})})}bindSlickGridColumnChangeEventToGridStateChange(t,e){const n=e==null?void 0:e[t];n&&typeof n.subscribe=="function"&&this._eventHandler.subscribe(n,()=>{const r=e.getColumns(),o=this.getAssociatedCurrentColumns(r);this.pubSubService.publish("onGridStateChanged",{change:{newValues:o,type:cr.columns},gridState:this.getCurrentGridState()})})}bindSlickGridOnSetOptionsEventToGridStateChange(t){const e=t.onSetOptions;this._eventHandler.subscribe(e,(n,r)=>{const{frozenBottom:o,frozenColumn:s,frozenRow:l}=r.optionsBefore,{frozenBottom:u,frozenColumn:h,frozenRow:c}=r.optionsAfter;if(o!==u||s!==h||l!==c){const p={frozenBottom:u,frozenColumn:h,frozenRow:c},m=this.getCurrentGridState();this.pubSubService.publish("onGridStateChanged",{change:{newValues:p,type:cr.pinning},gridState:m})}})}hasRowSelectionEnabled(){const t=this._grid.getSelectionModel();return(this._gridOptions.enableRowSelection||this._gridOptions.enableCheckboxSelector)&&t}}class H0{constructor(t,e){this.extensionUtility=t,this.pubSubService=e,this._subscriptions=[],this._eventHandler=new Slick.EventHandler}get _dataView(){var t;return((t=this._grid)===null||t===void 0?void 0:t.getData)&&this._grid.getData()}get eventHandler(){return this._eventHandler}get _gridOptions(){var t;return!((t=this._grid)===null||t===void 0)&&t.getOptions?this._grid.getOptions():{}}get _columnDefinitions(){return this._grid&&this._grid.getColumns?this._grid.getColumns():[]}init(t){if(this._grid=t,t&&this._gridOptions&&this._gridOptions.createPreHeaderPanel){this._gridOptions.enableTranslate&&this.translateGroupingAndColSpan(),this._eventHandler.subscribe(t.onSort,()=>this.renderPreHeaderRowGroupingTitles()),this._eventHandler.subscribe(t.onRendered,()=>this.renderPreHeaderRowGroupingTitles()),this._eventHandler.subscribe(t.onAutosizeColumns,()=>this.renderPreHeaderRowGroupingTitles()),this._eventHandler.subscribe(t.onColumnsResized,()=>this.renderPreHeaderRowGroupingTitles()),this._eventHandler.subscribe(t.onColumnsReordered,()=>this.renderPreHeaderRowGroupingTitles()),this._eventHandler.subscribe(this._dataView.onRowCountChanged,()=>this.delayRenderPreHeaderRowGroupingTitles(0)),this._subscriptions.push(this.pubSubService.subscribe("onColumnPickerColumnsChanged",()=>this.renderPreHeaderRowGroupingTitles()),this.pubSubService.subscribe("onHeaderMenuHideColumns",()=>this.delayRenderPreHeaderRowGroupingTitles(0)),this.pubSubService.subscribe("onGridMenuColumnsChanged",()=>this.renderPreHeaderRowGroupingTitles()),this.pubSubService.subscribe("onGridMenuMenuClose",()=>this.renderPreHeaderRowGroupingTitles()));const e=t.getPluginByName("Resizer");e!=null&&e.onGridAfterResize&&this._eventHandler.subscribe(e.onGridAfterResize,()=>this.renderPreHeaderRowGroupingTitles()),this._eventHandler.subscribe(t.onSetOptions,(n,r)=>{var o,s;((o=r==null?void 0:r.optionsBefore)===null||o===void 0?void 0:o.frozenColumn)!==((s=r==null?void 0:r.optionsAfter)===null||s===void 0?void 0:s.frozenColumn)&&this.delayRenderPreHeaderRowGroupingTitles(0)}),this.delayRenderPreHeaderRowGroupingTitles(75)}}dispose(){this._eventHandler.unsubscribeAll(),this.pubSubService.unsubscribeAll(this._subscriptions)}delayRenderPreHeaderRowGroupingTitles(t=0){setTimeout(()=>this.renderPreHeaderRowGroupingTitles(),t)}renderPreHeaderRowGroupingTitles(){var t;if(this._gridOptions&&this._gridOptions.frozenColumn!==void 0&&this._gridOptions.frozenColumn>=0){let e=this._grid.getPreHeaderPanelLeft();this.renderHeaderGroups(e,0,this._gridOptions.frozenColumn+1),e=this._grid.getPreHeaderPanelRight(),this.renderHeaderGroups(e,((t=this._gridOptions)===null||t===void 0?void 0:t.frozenColumn)+1,this._columnDefinitions.length)}else{const e=this._grid.getPreHeaderPanel();this.renderHeaderGroups(e,0,this._columnDefinitions.length)}}renderHeaderGroups(t,e,n){var r,o,s;sn(t),t.className="slick-header-columns",t.style.left="-1000px",t.style.width=`${this._grid.getHeadersWidth()}px`,t.parentElement&&t.parentElement.classList.add("slick-header");const l=this._grid.getHeaderColumnWidthDiff();let u,h=null,c="",p=0;const m=(o=(r=this._gridOptions)===null||r===void 0?void 0:r.frozenHeaderWidthCalcDifferential)!==null&&o!==void 0?o:0,v=((s=this._gridOptions)===null||s===void 0?void 0:s.frozenColumn)!==void 0&&this._gridOptions.frozenColumn>=0;for(let _=e;_<n;_++)u=this._columnDefinitions[_],u&&(c===u.columnGroup&&_>0?(p+=u.width||0,h!=null&&h.style&&(h.style.width=`${p-l-m}px`)):(p=u.width||0,h=Ie("div",{className:`ui-state-default slick-header-column ${v?"frozen":""}`,style:{width:`${p-l}px`}}),Ie("span",{className:"slick-column-name",textContent:u.columnGroup||""},h),t.appendChild(h)),c=u.columnGroup||"")}translateGroupingAndColSpan(){const t=this._grid.getColumns();this.extensionUtility.translateItems(t,"columnGroupKey","columnGroup"),this._grid.setColumns(t),this.renderPreHeaderRowGroupingTitles()}}class B0{constructor(t,e,n,r){this.pubSubService=t,this.sharedService=e,this.backendUtilities=n,this.rxjs=r,this._eventHandler=new Slick.EventHandler,this._initialized=!1,this._isLocalGrid=!0,this._dataFrom=1,this._dataTo=1,this._itemsPerPage=0,this._pageCount=1,this._pageNumber=1,this._totalItems=0,this._availablePageSizes=[],this._subscriptions=[]}get dataView(){var t,e,n;return(n=(e=(t=this.grid)===null||t===void 0?void 0:t.getData)===null||e===void 0?void 0:e.call(t))!==null&&n!==void 0?n:{}}set paginationOptions(t){this._paginationOptions=t}get paginationOptions(){return this._paginationOptions}get availablePageSizes(){return this._availablePageSizes}get dataFrom(){return this._dataFrom}get dataTo(){return this._dataTo}get itemsPerPage(){return this._itemsPerPage}get pageCount(){return this._pageCount}get pageNumber(){return this._pageNumber}get totalItems(){return this._totalItems}set totalItems(t){this._totalItems=t,this._initialized&&this.refreshPagination()}get isCursorBased(){var t;return!!(!((t=this._backendServiceApi)===null||t===void 0)&&t.options.isWithCursor)}addRxJsResource(t){this.rxjs=t}init(t,e,n){if(this._availablePageSizes=e.pageSizes,this.grid=t,this._backendServiceApi=n,this._paginationOptions=e,this._isLocalGrid=!n,this._pageNumber=e.pageNumber||1,n&&(!n.service||!n.process))throw new Error('BackendServiceApi requires the following 2 properties "process" and "service" to be defined.');this._isLocalGrid&&this.dataView&&(this._eventHandler.subscribe(this.dataView.onPagingInfoChanged,(o,s)=>{this._totalItems!==s.totalRows&&(this.updateTotalItems(s.totalRows),this._previousPagination={pageNumber:s.pageNum,pageSize:s.pageSize,pageSizes:this.availablePageSizes,totalItems:s.totalRows})}),setTimeout(()=>{this.dataView&&(this.dataView.setRefreshHints({isFilterUnchanged:!0}),this.dataView.setPagingOptions({pageSize:this.paginationOptions.pageSize,pageNum:this._pageNumber-1}))})),this._subscriptions.push(this.pubSubService.subscribe("onFilterChanged",()=>this.resetPagination())),this._subscriptions.push(this.pubSubService.subscribe("onFilterCleared",()=>this.resetPagination())),this.dataView&&(this._subscriptions.push(this.pubSubService.subscribe("onItemAdded",o=>this.processOnItemAddedOrRemoved(o,!0))),this._subscriptions.push(this.pubSubService.subscribe("onItemDeleted",o=>this.processOnItemAddedOrRemoved(o,!1)))),this.refreshPagination(!1,!1,!0);const r=this.getFullPagination();this._previousPagination={pageNumber:r.pageNumber,pageSize:r.pageSize,pageSizes:r.pageSizes,totalItems:this.totalItems},this._initialized=!0}dispose(){this._initialized=!1,this._eventHandler.unsubscribeAll(),this.pubSubService.unsubscribeAll(this._subscriptions)}getCurrentPagination(){return{pageNumber:this._pageNumber,pageSize:this._itemsPerPage,pageSizes:this._availablePageSizes}}getFullPagination(){return{pageCount:this._pageCount,pageNumber:this._pageNumber,pageSize:this._itemsPerPage,pageSizes:this._availablePageSizes,totalItems:this._totalItems,dataFrom:this._dataFrom,dataTo:this._dataTo}}getCurrentPageNumber(){return this._pageNumber}getCurrentItemPerPage(){return this._itemsPerPage}changeItemPerPage(t,e,n=!0){return this._pageNumber=1,this._pageCount=Math.ceil(this._totalItems/t),this._itemsPerPage=t,n?this.processOnPageChanged(this._pageNumber,e):Promise.resolve(this.getFullPagination())}goToFirstPage(t,e=!0){return this._pageNumber=1,e?this.isCursorBased&&this._cursorPageInfo?this.processOnPageChanged(this._pageNumber,t,{newPage:this._pageNumber,pageSize:this._itemsPerPage,first:this._itemsPerPage}):this.processOnPageChanged(this._pageNumber,t):Promise.resolve(this.getFullPagination())}goToLastPage(t,e=!0){return this._pageNumber=this._pageCount||1,e?this.isCursorBased&&this._cursorPageInfo?this.processOnPageChanged(this._pageNumber,t,{newPage:this._pageNumber,pageSize:this._itemsPerPage,last:this._itemsPerPage}):this.processOnPageChanged(this._pageNumber,t):Promise.resolve(this.getFullPagination())}goToNextPage(t,e=!0){return this._pageNumber<this._pageCount?(this._pageNumber++,e?this.isCursorBased&&this._cursorPageInfo?this.processOnPageChanged(this._pageNumber,t,{newPage:this._pageNumber,pageSize:this._itemsPerPage,first:this._itemsPerPage,after:this._cursorPageInfo.endCursor}):this.processOnPageChanged(this._pageNumber,t):Promise.resolve(this.getFullPagination())):Promise.resolve(!1)}goToPageNumber(t,e,n=!0){if(this.isCursorBased)return console.assert(!0,"Cursor based navigation cannot navigate to arbitrary page"),Promise.resolve(!1);const r=this._pageNumber;return t<1?this._pageNumber=1:t>this._pageCount?this._pageNumber=this._pageCount:this._pageNumber=t,this._pageNumber!==r?n?this.processOnPageChanged(this._pageNumber,e):Promise.resolve(this.getFullPagination()):Promise.resolve(!1)}goToPreviousPage(t,e=!0){return this._pageNumber>1?(this._pageNumber--,e?this.isCursorBased&&this._cursorPageInfo?this.processOnPageChanged(this._pageNumber,t,{newPage:this._pageNumber,pageSize:this._itemsPerPage,last:this._itemsPerPage,before:this._cursorPageInfo.startCursor}):this.processOnPageChanged(this._pageNumber,t):Promise.resolve(this.getFullPagination())):Promise.resolve(!1)}refreshPagination(t=!1,e=!0,n=!1){var r,o,s;const l={...this.getFullPagination()};if(this._paginationOptions){const h=this._paginationOptions;this._itemsPerPage||(this._isLocalGrid?this._itemsPerPage=h.pageSize:this._itemsPerPage=+(!((s=(o=(r=this._backendServiceApi)===null||r===void 0?void 0:r.options)===null||o===void 0?void 0:o.paginationOptions)===null||s===void 0)&&s.first?this._backendServiceApi.options.paginationOptions.first:h.pageSize)),(t||this._totalItems!==h.totalItems)&&(t?(this._pageNumber=1,this.paginationOptions.pageNumber=1):!this._initialized&&h.pageNumber&&h.pageNumber>1&&(this._pageNumber=h.pageNumber||1),this._pageNumber===1&&this._backendServiceApi&&this._backendServiceApi.service.resetPaginationOptions()),this._availablePageSizes=h.pageSizes,!this._totalItems&&h.totalItems&&(this._totalItems=h.totalItems),this.recalculateFromToIndexes()}this._pageCount=Math.ceil(this._totalItems/this._itemsPerPage),this.sharedService.currentPagination=this.getCurrentPagination(),this.pubSubService.publish("onPaginationRefreshed",this.getFullPagination()),e&&!Jo(l,this.getFullPagination())&&this.pubSubService.publish("onPaginationChanged",this.getFullPagination()),n&&!Jo(l,this.getFullPagination())&&this.pubSubService.publish("onPaginationPresetsInitialized",this.getFullPagination());const u=this.getFullPagination();this._previousPagination={pageNumber:u.pageNumber,pageSize:u.pageSize,pageSizes:u.pageSizes,totalItems:this.totalItems}}resetPagination(t=!0){var e,n;this._isLocalGrid&&this.dataView&&(!((n=(e=this.sharedService)===null||e===void 0?void 0:e.gridOptions)===null||n===void 0)&&n.enablePagination)&&this.dataView.setPagingOptions({pageSize:this._itemsPerPage,pageNum:0}),this._cursorPageInfo=void 0,this.refreshPagination(!0,t)}togglePaginationVisibility(t){var e;if(this.grid&&(!((e=this.sharedService)===null||e===void 0)&&e.gridOptions)){const n=t!==void 0?t:!this.sharedService.gridOptions.enablePagination;if(n&&this.goToFirstPage(),this._isLocalGrid&&this.dataView){const r=t?this._itemsPerPage:0;this.dataView.setPagingOptions({pageSize:r,pageNum:0})}this.sharedService.gridOptions.enablePagination=n,this.pubSubService.publish("onPaginationVisibilityChanged",{visible:n})}}processOnPageChanged(t,e,n){return console.assert(!this.isCursorBased||n,"Configured for cursor based pagination - cursorArgs expected"),this.pubSubService.publish("onBeforePaginationChange",this.getFullPagination())===!1?(this.resetToPreviousPagination(),Promise.resolve(this.getFullPagination())):new Promise((r,o)=>{var s,l,u;if(this.recalculateFromToIndexes(),this._isLocalGrid&&this.dataView)this.dataView.setPagingOptions({pageSize:this._itemsPerPage,pageNum:t-1}),this.pubSubService.publish("onPaginationChanged",this.getFullPagination()),this.pubSubService.publish("onPaginationRefreshed",this.getFullPagination()),r(this.getFullPagination());else{const h=+this._itemsPerPage,c=new Date;if(!((s=this._backendServiceApi)===null||s===void 0)&&s.preProcess&&this._backendServiceApi.preProcess(),!((l=this._backendServiceApi)===null||l===void 0)&&l.process){const p=this.isCursorBased&&n?this._backendServiceApi.service.processOnPaginationChanged(e,n):this._backendServiceApi.service.processOnPaginationChanged(e,{newPage:t,pageSize:h}),m=this._backendServiceApi.process(p);m instanceof Promise?m.then(v=>{var _;(_=this.backendUtilities)===null||_===void 0||_.executeBackendProcessesCallback(c,v,this._backendServiceApi,this._totalItems);const C=this.getFullPagination();this._previousPagination={pageNumber:C.pageNumber,pageSize:C.pageSize,pageSizes:C.pageSizes,totalItems:this.totalItems},r(this.getFullPagination())}).catch(v=>{var _,C,x;this.resetToPreviousPagination(),(_=this.backendUtilities)===null||_===void 0||_.onBackendError(v,this._backendServiceApi),(!(!((C=this._backendServiceApi)===null||C===void 0)&&C.onError)||!(!((x=this.backendUtilities)===null||x===void 0)&&x.onBackendError))&&o(m)}):!((u=this.rxjs)===null||u===void 0)&&u.isObservable(m)&&this._subscriptions.push(m.subscribe(v=>{var _;const C=this.getFullPagination();this._previousPagination={pageNumber:C.pageNumber,pageSize:C.pageSize,pageSizes:C.pageSizes,totalItems:this.totalItems},r((_=this.backendUtilities)===null||_===void 0?void 0:_.executeBackendProcessesCallback(c,v,this._backendServiceApi,this._totalItems))},v=>{var _,C,x;this.resetToPreviousPagination(),(_=this.backendUtilities)===null||_===void 0||_.onBackendError(v,this._backendServiceApi),(!(!((C=this._backendServiceApi)===null||C===void 0)&&C.onError)||!(!((x=this.backendUtilities)===null||x===void 0)&&x.onBackendError))&&o(m)})),this.pubSubService.publish("onPaginationRefreshed",this.getFullPagination()),this.pubSubService.publish("onPaginationChanged",this.getFullPagination())}}})}recalculateFromToIndexes(){this._totalItems===0?(this._dataFrom=0,this._dataTo=1,this._pageNumber=0):(this._dataFrom=this._pageNumber>1?this._pageNumber*this._itemsPerPage-this._itemsPerPage+1:1,this._dataTo=this._totalItems<this._itemsPerPage?this._totalItems:(this._pageNumber||1)*this._itemsPerPage,this._dataTo>this._totalItems&&(this._dataTo=this._totalItems)),this._pageNumber=this._totalItems>0&&this._pageNumber===0?1:this._pageNumber,this._dataTo>this._totalItems?this._dataTo=this._totalItems:this._totalItems<this._itemsPerPage&&(this._dataTo=this._totalItems)}resetToPreviousPagination(){var t,e,n,r,o,s,l,u,h,c,p,m,v;const _=((t=this._previousPagination)===null||t===void 0?void 0:t.pageNumber)!==this.getFullPagination().pageNumber,C=((e=this._previousPagination)===null||e===void 0?void 0:e.pageSize)!==this.getFullPagination().pageSize;C&&this.changeItemPerPage((r=(n=this._previousPagination)===null||n===void 0?void 0:n.pageSize)!==null&&r!==void 0?r:0,null,!1),_&&this.goToPageNumber((s=(o=this._previousPagination)===null||o===void 0?void 0:o.pageNumber)!==null&&s!==void 0?s:0,null,!1),(_||C)&&(this.refreshPagination(),(h=(u=(l=this._backendServiceApi)===null||l===void 0?void 0:l.service)===null||u===void 0?void 0:u.updatePagination)===null||h===void 0||h.call(u,(p=(c=this._previousPagination)===null||c===void 0?void 0:c.pageNumber)!==null&&p!==void 0?p:0,(v=(m=this._previousPagination)===null||m===void 0?void 0:m.pageSize)!==null&&v!==void 0?v:0))}setCursorPageInfo(t){this._cursorPageInfo=t}updateTotalItems(t,e=!1){this._totalItems=t,this._paginationOptions&&(this._paginationOptions.totalItems=t,this.refreshPagination(!1,e))}processOnItemAddedOrRemoved(t,e=!0){if(t!==null){const n=this._dataTo,r=Array.isArray(t)?t.length:1,o=e?+r:-r;this._totalItems+=o,this.recalculateFromToIndexes(),this._dataTo=n+o,this.pubSubService.publish("onPaginationChanged",this.getFullPagination())}}}const V0=20,z0=25,U0=35,G0=180,W0=300,$0=200;class Y0{get eventHandler(){return this._eventHandler}get gridOptions(){var t,e,n;return(n=(e=(t=this._grid)===null||t===void 0?void 0:t.getOptions)===null||e===void 0?void 0:e.call(t))!==null&&n!==void 0?n:{}}get dataView(){var t;return(t=this._grid)===null||t===void 0?void 0:t.getData()}get gridUid(){var t,e;return(e=(t=this._grid)===null||t===void 0?void 0:t.getUID())!==null&&e!==void 0?e:""}get gridUidSelector(){return this.gridUid?`.${this.gridUid}`:""}get intervalRetryDelay(){return this._intervalRetryDelay}set intervalRetryDelay(t){this._intervalRetryDelay=t}get resizeByContentOptions(){var t,e;return(e=(t=this.gridOptions)===null||t===void 0?void 0:t.resizeByContentOptions)!==null&&e!==void 0?e:{}}constructor(t){this.pubSubService=t,this._intervalRetryDelay=$0,this._isStopResizeIntervalRequested=!1,this._hasResizedByContentAtLeastOnce=!1,this._totalColumnsWidthByContent=0,this._resizePaused=!1,this._subscriptions=[],this._eventHandler=new Slick.EventHandler,this._bindingEventService=new Fn}dispose(){var t,e;(t=this._eventHandler)===null||t===void 0||t.unsubscribeAll(),this.pubSubService.unsubscribeAll(this._subscriptions),this._intervalId&&clearInterval(this._intervalId),clearTimeout(this._timer),((e=this.gridOptions.autoResize)===null||e===void 0?void 0:e.resizeDetection)==="container"&&this._resizeObserver&&this._resizeObserver.disconnect(),this._bindingEventService.unbindAll()}init(t,e){var n,r,o,s,l,u,h,c;if(!t||!this.gridOptions||!e)throw new Error(`
      [Slickgrid-Universal] Resizer Service requires a valid Grid object and DOM Element Container to be provided.
      You can fix this by setting your gridOption to use "enableAutoResize" or create an instance of the ResizerService by calling bindAutoResizeDataGrid() once.`);this._grid=t,this._gridContainerElm=e;const p=!((n=this.gridOptions)===null||n===void 0)&&n.gridHeight||!((r=this.gridOptions)===null||r===void 0)&&r.gridWidth?{height:(o=this.gridOptions)===null||o===void 0?void 0:o.gridHeight,width:(s=this.gridOptions)===null||s===void 0?void 0:s.gridWidth}:void 0;this._autoResizeOptions=(u=(l=this.gridOptions)===null||l===void 0?void 0:l.autoResize)!==null&&u!==void 0?u:{container:"grid1",bottomPadding:0},p!=null&&p.width&&(e!=null&&e.style)&&(e.style.width=typeof p.width=="string"?p.width:`${p.width}px`),this._gridDomElm=(h=t==null?void 0:t.getContainerNode)===null||h===void 0?void 0:h.call(t),typeof this._autoResizeOptions.container=="string"?this._pageContainerElm=typeof this._autoResizeOptions.container=="string"?document.querySelector(this._autoResizeOptions.container):this._autoResizeOptions.container:this._pageContainerElm=this._autoResizeOptions.container,p&&(this._fixedHeight=p.height,this._fixedWidth=p.width),this.gridOptions&&this.gridOptions.enableAutoResize&&this.bindAutoResizeDataGrid(),this.gridOptions.autoResize&&this._subscriptions.push(this.pubSubService.subscribe("onFullResizeByContentRequested",()=>this.resizeColumnsByCellContent(!0))),!((c=this.gridOptions)===null||c===void 0)&&c.enableColumnResizeOnDoubleClick&&(this._subscriptions.push(this.pubSubService.subscribe("onHeaderMenuColumnResizeByContent",m=>{this.handleSingleColumnResizeByContent(m.columnId)})),this._eventHandler.subscribe(this._grid.onColumnsResizeDblClick,(m,v)=>{this.handleSingleColumnResizeByContent(v.triggeredByColumn)}))}bindAutoResizeDataGrid(t){var e;if(((e=this.gridOptions.autoResize)===null||e===void 0?void 0:e.resizeDetection)==="container"){if(!this._pageContainerElm||!this._pageContainerElm)throw new Error(`
          [Slickgrid-Universal] Resizer Service requires a container when gridOption.autoResize.resizeDetection="container"
          You can fix this by setting your gridOption.autoResize.container`);this._resizeObserver||(this._resizeObserver=new ResizeObserver(()=>this.resizeObserverCallback())),this._resizeObserver.observe(this._pageContainerElm)}else{if(this._gridDomElm===void 0||Un(this._gridDomElm)===void 0)return null;this.resizeGrid().then(()=>this.resizeGridWhenStylingIsBrokenUntilCorrected()).catch(n=>console.log("Error:",n)),this.resizeGrid(10,t),this._bindingEventService.bind(window,"resize",this.handleResizeGrid.bind(this,t))}}handleResizeGrid(t){this.pubSubService.publish("onGridBeforeResize"),this._resizePaused||(this.resizeGrid(0,t),this.resizeGrid(0,t))}resizeObserverCallback(){this._resizePaused||this.resizeGrid()}calculateGridNewDimensions(t){var e,n,r,o,s,l,u;const h=(e=t==null?void 0:t.autoResize)!==null&&e!==void 0?e:{},c=Un(this._gridDomElm);if(!window||c===void 0)return null;let p=(h==null?void 0:h.bottomPadding)!==void 0?h.bottomPadding:V0;if(p&&t.enablePagination&&(p+=U0),p&&t.showCustomFooter){const M=(o=(r=(n=this.gridOptions)===null||n===void 0?void 0:n.customFooterOptions)===null||r===void 0?void 0:r.footerHeight)!==null&&o!==void 0?o:z0;p+=parseInt(`${M}`,10)}let m=0,v=0;h.calculateAvailableSizeBy==="container"?m=tm(this._pageContainerElm,"height")||0:(m=window.innerHeight||0,v=(s=c==null?void 0:c.top)!==null&&s!==void 0?s:0);const _=m-v-p,C=tm(this._pageContainerElm,"width")||window.innerWidth||0,x=h==null?void 0:h.maxHeight,S=(l=h==null?void 0:h.minHeight)!==null&&l!==void 0?l:G0,y=h==null?void 0:h.maxWidth,D=(u=h==null?void 0:h.minWidth)!==null&&u!==void 0?u:W0;let A=_,P=h!=null&&h.rightPadding?C-h.rightPadding:C;return A<S&&(A=S),x&&A>x&&(A=x),P<D&&(P=D),y&&P>y&&(P=y),{height:this._fixedHeight||A,width:this._fixedWidth||P}}getLastResizeDimensions(){return this._lastDimensions}pauseResizer(t){this._resizePaused=t}resizeGrid(t,e){return new Promise(n=>{t=t||0,t>0?(clearTimeout(this._timer),this._timer=setTimeout(()=>n(this.resizeGridCallback(e)),t)):n(this.resizeGridCallback(e))})}resizeGridCallback(t){var e,n;const r=this.resizeGridWithDimensions(t);return this.pubSubService.publish("onGridAfterResize",r),this.gridOptions.enableAutoResizeColumnsByCellContent&&(!(!((e=this._lastDimensions)===null||e===void 0)&&e.width)||(r==null?void 0:r.width)!==((n=this._lastDimensions)===null||n===void 0?void 0:n.width))&&this.resizeColumnsByCellContent(!1),this._lastDimensions=r,r}resizeGridWithDimensions(t){var e,n,r,o;const s=this.calculateGridNewDimensions(this.gridOptions);if((t||s)&&this._gridDomElm){const l=t!=null&&t.height?t.height:s==null?void 0:s.height,u=t!=null&&t.width?t.width:s==null?void 0:s.width;this.gridOptions.autoHeight||(this._gridDomElm.style.height=`${l}px`),this._gridDomElm.style.width=`${u}px`,this._gridContainerElm&&(this._gridContainerElm.style.width=`${u}px`),!((e=this._grid)===null||e===void 0)&&e.resizeCanvas&&this._gridContainerElm&&this._grid.resizeCanvas(),!((n=this.gridOptions)===null||n===void 0)&&n.enableAutoSizeColumns&&this._grid.autosizeColumns?this.gridUid&&document.querySelector(this.gridUidSelector)&&this._grid.autosizeColumns():this.gridOptions.enableAutoResizeColumnsByCellContent&&(!(!((r=this._lastDimensions)===null||r===void 0)&&r.width)||u!==((o=this._lastDimensions)===null||o===void 0?void 0:o.width))&&this.resizeColumnsByCellContent(!1),this._lastDimensions={height:l||0,width:u||0}}return this._lastDimensions}requestStopOfAutoFixResizeGrid(t=!0){this._isStopResizeIntervalRequested=t}resizeColumnsByCellContent(t=!1){var e,n,r,o,s,l,u;const h=this._grid.getColumns(),c=this.dataView.getItems(),p={};let m=!1,v=0;const _=(n=(e=this._gridContainerElm)===null||e===void 0?void 0:e.offsetWidth)!==null&&n!==void 0?n:0;if(!Array.isArray(c)||c.length===0||!t&&this._totalColumnsWidthByContent>0&&this._totalColumnsWidthByContent<_){this._grid.autosizeColumns();return}if(this._hasResizedByContentAtLeastOnce&&(!((r=this.gridOptions)===null||r===void 0)&&r.resizeByContentOnlyOnFirstLoad)&&!t)return;if(this.pubSubService.publish("onBeforeResizeByContent",void 0,0),this._totalColumnsWidthByContent===0||t){for(const S of h)p[S.id]=(s=(o=S.originalWidth)!==null&&o!==void 0?o:S.minWidth)!==null&&s!==void 0?s:0;v=this.calculateCellWidthByReadingDataset(h,p,this.resizeByContentOptions.maxItemToInspectCellContentWidth);let x=0;for(const S of h){const y=(u=(l=S.resizeAlwaysRecalculateWidth)!==null&&l!==void 0?l:this.resizeByContentOptions.alwaysRecalculateColumnWidth)!==null&&u!==void 0?u:!1;S.originalWidth&&!y?S.width=S.originalWidth:p[S.id]!==void 0&&(S.rerenderOnResize&&(m=!0),this.applyNewCalculatedColumnWidthByReference(S,p[S.id])),x+=S.width||0,this._totalColumnsWidthByContent=x}}this._grid.setColumns(h),this._hasResizedByContentAtLeastOnce=!0;const C={};for(const x of h)C[x.id]=x.width;this._totalColumnsWidthByContent>_?this._grid.reRenderColumns(m):this._grid.autosizeColumns(),this.pubSubService.publish("onAfterResizeByContent",{readItemCount:v,calculateColumnWidths:C})}calculateCellWidthByReadingDataset(t,e,n=1e3,r){const o=Array.isArray(t)?t:[t],s=this.dataView.getItems();let l=0;for(const[u,h]of s.entries()){if(u>n)break;Array.isArray(o)&&typeof e=="object"&&o.forEach((c,p)=>{const m=this.calculateCellWidthByContent(h,c,u,r??p,e[c.id]);m!==void 0&&(e[c.id]=m)}),l=u+1}return l}calculateCellWidthByContent(t,e,n,r,o){var s,l;const u=(s=this.resizeByContentOptions.cellCharWidthInPx)!==null&&s!==void 0?s:7;if(!e.originalWidth){const h=(l=e==null?void 0:e.resizeCharWidthInPx)!==null&&l!==void 0?l:u,c=su(e==null?void 0:e.formatter,n,r,e,t,this._grid),p=sr(c),m=Math.ceil(p.length*h),v=e.resizeMaxWidthThreshold;e&&(o===void 0||m>o)&&(o=v!==void 0&&m>v?v:e.maxWidth!==void 0&&m>e.maxWidth?e.maxWidth:m)}return o}applyNewCalculatedColumnWidthByReference(t,e){var n,r,o,s,l,u,h;const c=(n=this.resizeByContentOptions.cellPaddingWidthInPx)!==null&&n!==void 0?n:6,p=(r=this.resizeByContentOptions.formatterPaddingWidthInPx)!==null&&r!==void 0?r:6,m=(l=(s=(o=t==null?void 0:t.filter)===null||o===void 0?void 0:o.type)!==null&&s!==void 0?s:t==null?void 0:t.type)!==null&&l!==void 0?l:ie.string;let v=e;const _=(h=(u=t==null?void 0:t.resizeCalcWidthRatio)!==null&&u!==void 0?u:this.resizeByContentOptions.defaultRatioForStringType)!==null&&h!==void 0?h:.9;v*=m==="string"?_:1,v+=c,t.resizeExtraWidthPadding&&(v+=t.resizeExtraWidthPadding),t.editor&&this.gridOptions.editable&&(v+=p),t.maxWidth!==void 0&&v>t.maxWidth&&(v=t.maxWidth),t.resizeMaxWidthThreshold!==void 0&&v>t.resizeMaxWidthThreshold&&(v=t.resizeMaxWidthThreshold),v=Math.ceil(v),(t.originalWidth===void 0||t.resizeAlwaysRecalculateWidth===!0||this.resizeByContentOptions.alwaysRecalculateColumnWidth===!0)&&(t.width=this.readjustNewColumnWidthWhenOverLimit(t,v))}handleSingleColumnResizeByContent(t){var e,n,r;const o=this._grid.getColumns(),s=o.findIndex(l=>l.id===t);if(s>=0){const l=o[s],u={[t]:(n=(e=l.originalWidth)!==null&&e!==void 0?e:l.minWidth)!==null&&n!==void 0?n:0};l.originalWidth=void 0,this.calculateCellWidthByReadingDataset(l,u,this.resizeByContentOptions.maxItemToInspectSingleColumnWidthByContent,s),this.applyNewCalculatedColumnWidthByReference(l,u[t]),this._grid.reRenderColumns((r=l==null?void 0:l.rerenderOnResize)!==null&&r!==void 0?r:!1)}}readjustNewColumnWidthWhenOverLimit(t,e){var n,r,o,s,l,u,h,c;const p=(n=this.gridOptions.frozenColumn)!==null&&n!==void 0?n:-1,m=(r=this._grid.getColumns().findIndex(_=>_.id===t.id))!==null&&r!==void 0?r:0;let v=e;if(p>=0&&m<=p){const _=Array.from(this._grid.getViewports());if(_){const C=(s=(o=_.find(A=>A.classList.contains("slick-viewport-left")))===null||o===void 0?void 0:o.clientWidth)!==null&&s!==void 0?s:0,x=(u=(l=_.find(A=>A.classList.contains("slick-viewport-right")))===null||l===void 0?void 0:l.clientWidth)!==null&&u!==void 0?u:0,S=C+x,y=C-((h=t.width)!==null&&h!==void 0?h:0);if(y+e>S){const A=(c=this.resizeByContentOptions.widthToRemoveFromExceededWidthReadjustment)!==null&&c!==void 0?c:50;v=C-y+x-A}}}return Math.ceil(v)}checkIsGridShown(){var t,e;return!!((e=(t=document.querySelector(`${this.gridUidSelector}`))===null||t===void 0?void 0:t.offsetParent)!==null&&e!==void 0&&e)}resizeGridWhenStylingIsBrokenUntilCorrected(){var t,e,n,r;const o=(e=(t=this.gridOptions)===null||t===void 0?void 0:t.autoFixResizeTimeout)!==null&&e!==void 0?e:18e3,s=(r=(n=this.gridOptions)===null||n===void 0?void 0:n.autoFixResizeRequiredGoodCount)!==null&&r!==void 0?r:5,l=this._gridContainerElm.querySelector(`${this.gridUidSelector} .slick-header`),u=this._gridContainerElm.querySelector(`${this.gridUidSelector} .slick-viewport`);let h=0,c=0;if(l&&u&&this.gridOptions.autoFixResizeWhenBrokenStyleDetected){const p=this.dataView.getItemCount(),m=this._grid.getColumns()||[];this._intervalId=setInterval(async()=>{var v,_,C,x,S,y;const A=Un(l);let P=(v=A==null?void 0:A.top)!==null&&v!==void 0?v:0;this.gridOptions&&this.gridOptions.enableFiltering&&this.gridOptions.headerRowHeight&&(P+=this.gridOptions.headerRowHeight),this.gridOptions&&this.gridOptions.createPreHeaderPanel&&this.gridOptions.showPreHeaderPanel&&this.gridOptions.preHeaderPanelHeight&&(P+=this.gridOptions.preHeaderPanelHeight),P+=44;const M=Un(u),B=(_=M==null?void 0:M.top)!==null&&_!==void 0?_:0,Q=Un(this._gridContainerElm);let L=(A==null?void 0:A.top)===0||P-B>2||(Q==null?void 0:Q.left)===0&&(Q==null?void 0:Q.top)===0;const le=(y=(S=(x=(C=this._grid).getRenderedRange)===null||x===void 0?void 0:x.call(C))===null||S===void 0?void 0:S.rightPx)!==null&&y!==void 0?y:0;!L&&p>0&&le===0&&m.length>1&&(L=!0),this._isStopResizeIntervalRequested&&(L=!1,h=o),this.checkIsGridShown()&&(L||(Q==null?void 0:Q.left)===0||(Q==null?void 0:Q.top)===0)&&(await this.resizeGrid(),this.checkIsGridShown()&&(L=!1)),this.checkIsGridShown()&&c++,this.checkIsGridShown()&&!L&&(c>=s||h++>=o)&&clearInterval(this._intervalId)},this.intervalRetryDelay)}}}class j0{constructor(){this._hasColumnsReordered=!1,this._hideHeaderRowAfterPageLoad=!1}get allColumns(){return this._allColumns}set allColumns(t){this._allColumns=t}get columnDefinitions(){return this._grid&&this._grid.getColumns?this._grid.getColumns():[]}get currentPagination(){return this._currentPagination}set currentPagination(t){this._currentPagination=t}get dataView(){return this._dataView}set dataView(t){this._dataView=t}get frozenVisibleColumnId(){return this._frozenVisibleColumnId}set frozenVisibleColumnId(t){this._frozenVisibleColumnId=t}get hasColumnsReordered(){return this._hasColumnsReordered}set hasColumnsReordered(t){this._hasColumnsReordered=t}get slickGrid(){return this._grid}set slickGrid(t){this._grid=t}get gridContainerElement(){return this._gridContainerElm}set gridContainerElement(t){this._gridContainerElm=t}get gridOptions(){var t;return this._gridOptions||((t=this._grid)===null||t===void 0?void 0:t.getOptions())||{}}set gridOptions(t){this._gridOptions=t}get groupItemMetadataProvider(){return this._groupItemMetadataProvider}set groupItemMetadataProvider(t){this._groupItemMetadataProvider=t}get hideHeaderRowAfterPageLoad(){return this._hideHeaderRowAfterPageLoad}set hideHeaderRowAfterPageLoad(t){this._hideHeaderRowAfterPageLoad=t}get externalRegisteredResources(){return this._externalRegisteredResources}set externalRegisteredResources(t){this._externalRegisteredResources=t}get visibleColumns(){return this._visibleColumns}set visibleColumns(t){this._visibleColumns=t}get hierarchicalDataset(){return this._hierarchicalDataset}set hierarchicalDataset(t){this._hierarchicalDataset=t}}class X0{constructor(t,e,n,r){this.sharedService=t,this.pubSubService=e,this.backendUtilities=n,this.rxjs=r,this._currentLocalSorters=[],this._isBackendGrid=!1,this._eventHandler=new Slick.EventHandler,this.rxjs&&(this.httpCancelRequests$=this.rxjs.createSubject())}get eventHandler(){return this._eventHandler}get _gridOptions(){return this._grid&&this._grid.getOptions?this._grid.getOptions():{}}get _columnDefinitions(){return this._grid&&this._grid.getColumns?this._grid.getColumns():[]}dispose(){var t,e;!((t=this._eventHandler)===null||t===void 0)&&t.unsubscribeAll&&this._eventHandler.unsubscribeAll(),this.httpCancelRequests$&&(!((e=this.rxjs)===null||e===void 0)&&e.isObservable(this.httpCancelRequests$))&&(this.httpCancelRequests$.next(),this.httpCancelRequests$.complete())}addRxJsResource(t){this.rxjs=t}bindBackendOnSort(t){var e,n;this._isBackendGrid=!0,this._grid=t,this._dataView=(n=(e=t==null?void 0:t.getData)===null||e===void 0?void 0:e.call(t))!==null&&n!==void 0?n:{},this._eventHandler.subscribe(t.onSort,this.onBackendSortChanged.bind(this))}bindLocalOnSort(t){this._isBackendGrid=!1,this._grid=t,this._dataView=t.getData(),this.processTreeDataInitialSort(),this._eventHandler.subscribe(t.onSort,this.handleLocalOnSort.bind(this))}handleLocalOnSort(t,e){var n,r;const o=e.multiColumnSort?e.sortCols:new Array({columnId:(r=(n=e.sortCol)===null||n===void 0?void 0:n.id)!==null&&r!==void 0?r:"",sortAsc:e.sortAsc,sortCol:e.sortCol});this._currentLocalSorters=[],Array.isArray(o)&&o.forEach(s=>{s.sortCol&&this._currentLocalSorters.push({columnId:s.sortCol.id,direction:s.sortAsc?Io.ASC:Io.DESC})}),this.onLocalSortChanged(this._grid,o),this.emitSortChanged(en.local)}clearSortByColumnId(t,e){var n,r;const o=this.getCurrentColumnSorts(),s=this.getCurrentColumnSorts(`${e}`);if(Array.isArray(o)&&Array.isArray(s)&&o.length!==s.length){if(this._gridOptions.backendServiceApi)this.onBackendSortChanged(t,{multiColumnSort:!0,sortCols:s,grid:this._grid});else if(this._dataView)this.onLocalSortChanged(this._grid,s,!0,!0);else{const h=((r=(n=this._gridOptions)===null||n===void 0?void 0:n.multiColumnSort)!==null&&r!==void 0?r:!1)?s:s[0];this._grid.onSort.notify(h)}const l=s.map(u=>({columnId:u&&u.sortCol&&u.sortCol.id,sortAsc:u&&u.sortAsc,sortCol:u&&u.sortCol}));this._grid.setSortColumns(l)}Array.isArray(s)&&s.length===0&&this.sortLocalGridByDefaultSortFieldId()}clearSorting(t=!0){var e,n;if(this._grid&&this._gridOptions&&this._dataView){if(this._grid.setSortColumns([]),t)this._isBackendGrid?this.onBackendSortChanged(void 0,{grid:this._grid,multiColumnSort:!0,sortCols:[],clearSortTriggered:!0}):this._columnDefinitions&&Array.isArray(this._columnDefinitions)&&this._columnDefinitions.length>0&&this.sortLocalGridByDefaultSortFieldId();else if(this._isBackendGrid){const r=(n=(e=this._gridOptions)===null||e===void 0?void 0:e.backendServiceApi)===null||n===void 0?void 0:n.service;r!=null&&r.clearSorters&&r.clearSorters()}}this._currentLocalSorters=[],this.pubSubService.publish("onSortCleared",!0)}disableSortFunctionality(t=!0,e=!0){const r=!this._gridOptions.enableSorting;this._gridOptions.enableSorting=r;let o;t?(e&&this.clearSorting(),this._eventHandler.unsubscribeAll(),o=this.disableAllSortingCommands(!0)):(o=this.disableAllSortingCommands(!1),this._eventHandler.subscribe(this._grid.onSort,(s,l)=>this.handleLocalOnSort(s,l))),this._grid.setOptions({enableSorting:this._gridOptions.enableSorting},!1,!0),this.sharedService.gridOptions=this._gridOptions,this._grid.setColumns(o)}toggleSortFunctionality(t=!0){const e=this._gridOptions.enableSorting;this.disableSortFunctionality(e,t)}emitSortChanged(t,e){var n;if(t===en.remote&&(!((n=this._gridOptions)===null||n===void 0)&&n.backendServiceApi)){let r=[];const o=this._gridOptions.backendServiceApi.service;o!=null&&o.getCurrentSorters&&(r=o.getCurrentSorters()),this.pubSubService.publish("onSortChanged",r)}else t===en.local&&(e&&(this._currentLocalSorters=e),this.pubSubService.publish("onSortChanged",this.getCurrentLocalSorters()))}getCurrentLocalSorters(){return this._currentLocalSorters}getCurrentColumnSorts(t){if(this._grid){const e=this._grid.getSortColumns();if(Array.isArray(e))return e.reduce((r,o)=>(o&&(!t||o.columnId!==t)&&r.push({columnId:o.columnId||"",sortCol:this._columnDefinitions[this._grid.getColumnIndex(o.columnId||"")],sortAsc:o.sortAsc}),r),[])}return[]}loadGridSorters(t){this._currentLocalSorters=[];const e=[];return Array.isArray(t)&&((this._gridOptions.multiColumnSort?t:t.slice(0,1)).forEach(r=>{const o=this._columnDefinitions.find(s=>s.id===r.columnId);o&&(e.push({columnId:o.id,sortAsc:r.direction.toUpperCase()===Io.ASC,sortCol:o}),this._currentLocalSorters.push({columnId:o.id+"",direction:r.direction.toUpperCase()}))}),this.onLocalSortChanged(this._grid,e),this._grid.setSortColumns(e.map(r=>({columnId:r.columnId,sortAsc:r.sortAsc})))),e}processTreeDataInitialSort(){var t,e,n;if(!((t=this._gridOptions)===null||t===void 0)&&t.enableTreeData&&this._gridOptions.treeDataOptions){const r=this._gridOptions.treeDataOptions,o=this._columnDefinitions.find(s=>s.id===r.columnId);if(o){let s=Io.ASC,l={columnId:r.columnId,sortCol:o,sortAsc:!0};if(!((e=r==null?void 0:r.initialSort)===null||e===void 0)&&e.columnId){const u=r.initialSort.columnId,h=this._columnDefinitions.find(c=>c.id===u);s=(r.initialSort.direction||Io.ASC).toUpperCase(),l={columnId:u,sortCol:h,sortAsc:s===Io.ASC}}l!=null&&l.columnId&&(!((n=this.sharedService)===null||n===void 0)&&n.hierarchicalDataset)&&this.updateSorting([{columnId:l.columnId||"",direction:s}])}}}onBackendSortChanged(t,e){var n,r;if(!e||!e.grid)throw new Error('Something went wrong when trying to bind the "onBackendSortChanged(event, args)" function, it seems that "args" is not populated correctly');const o=e.grid&&e.grid.getOptions?e.grid.getOptions():{},s=o.backendServiceApi;if(!s||!s.process||!s.service)throw new Error('BackendServiceApi requires at least a "process" function and a "service" defined');const l=new Date;s.preProcess&&s.preProcess();const u=s.service.processOnSortChanged(t,e),h=((n=o==null?void 0:o.pagination)===null||n===void 0?void 0:n.totalItems)||0;(r=this.backendUtilities)===null||r===void 0||r.executeBackendCallback(s,u,e,l,h,{emitActionChangedCallback:this.emitSortChanged.bind(this),errorCallback:()=>{var c,p,m;this._grid.setSortColumns(e.previousSortColumns||[]);const v=(c=e.previousSortColumns)===null||c===void 0?void 0:c.map(_=>({columnId:_.columnId,sortAsc:_.sortAsc,sortCol:this._columnDefinitions.find(C=>C.id===_.columnId)}));(m=(p=s==null?void 0:s.service)===null||p===void 0?void 0:p.updateSorters)===null||m===void 0||m.call(p,v||[])},httpCancelRequestSubject:this.httpCancelRequests$})}async onLocalSortChanged(t,e,n=!1,r=!1){var o,s,l,u,h;const c=(s=(o=this._gridOptions)===null||o===void 0?void 0:o.datasetIdPropertyName)!==null&&s!==void 0?s:"id",p=(u=(l=this._gridOptions)===null||l===void 0?void 0:l.enableTreeData)!==null&&u!==void 0?u:!1,m=(h=t.getData)===null||h===void 0?void 0:h.call(t);if(await this.pubSubService.publish("onBeforeSortChange",{sortColumns:e},0),t&&m){if(n&&!p&&m.reSort(),p&&this.sharedService&&Array.isArray(this.sharedService.hierarchicalDataset)){const v=this.sortHierarchicalDataset(this.sharedService.hierarchicalDataset,e);this._dataView.setItems(v.flat,c),this._dataView.onRowCountChanged.notify({previous:this._dataView.getFilteredItemCount(),current:this._dataView.getLength(),itemCount:this._dataView.getItemCount(),dataView:this._dataView,callingOnRowsChanged:!0})}else m.sort(this.sortComparers.bind(this,e));t.invalidate(),r&&this.emitSortChanged(en.local,e.map(v=>{var _,C;return{columnId:(C=(_=v.sortCol)===null||_===void 0?void 0:_.id)!==null&&C!==void 0?C:"id",direction:v.sortAsc?Io.ASC:Io.DESC}}))}}sortHierarchicalDataset(t,e,n=!1){var r,o,s,l,u,h;this.sortTreeData(t,e);const c=(o=(r=this._gridOptions)===null||r===void 0?void 0:r.datasetIdPropertyName)!==null&&o!==void 0?o:"id",p=(l=(s=this._gridOptions)===null||s===void 0?void 0:s.treeDataOptions)!==null&&l!==void 0?l:{columnId:""},m={...p,identifierPropName:(u=p.identifierPropName)!==null&&u!==void 0?u:c,shouldAddTreeLevelNumber:!0},v=Op(t,m);if(n){this._currentLocalSorters=[];for(const C of e)this._currentLocalSorters.push({columnId:C.columnId,direction:C.sortAsc?"ASC":"DESC"});const _=!((h=this._gridOptions)===null||h===void 0)&&h.backendServiceApi?en.remote:en.local;this.emitSortChanged(_)}return{hierarchical:t,flat:v}}sortLocalGridByDefaultSortFieldId(){const t=this._gridOptions&&this._gridOptions.defaultColumnSortFieldId||this._gridOptions.datasetIdPropertyName||"id",e={id:t,field:t};this.onLocalSortChanged(this._grid,new Array({columnId:e.id,sortAsc:!0,sortCol:e,clearSortTriggered:!0}),!1,!0)}sortComparers(t,e,n){if(Array.isArray(t))for(const r of t){const o=this.sortComparer(r,e,n);if(o!==void 0)return o}return Xi.neutral}sortComparer(t,e,n,r){if(t!=null&&t.sortCol){const o=t.sortCol,s=t.sortAsc?Xi.asc:Xi.desc;let l=r||o.queryFieldSorter||o.queryField||o.field,u=l;const h=o.type||ie.string;typeof o.queryFieldNameGetterFn=="function"&&(l=o.queryFieldNameGetterFn(e),u=o.queryFieldNameGetterFn(n));let c=e[l],p=n[u];if(l&&l.indexOf(".")>=0&&(c=bn(e,l)),u&&u.indexOf(".")>=0&&(p=bn(n,u)),o.sortComparer){const m=o.sortComparer(c,p,s,o,this._gridOptions);if(m!==Xi.neutral)return m}else{const m=Jl(h,c,p,s,o,this._gridOptions);if(m!==Xi.neutral)return m}}}sortTreeData(t,e){if(Array.isArray(e))for(const n of e)this.sortTreeChildren(t,n,0)}sortTreeChildren(t,e,n){var r,o;const s=(r=this._gridOptions)===null||r===void 0?void 0:r.treeDataOptions,l=(o=s==null?void 0:s.childrenPropName)!==null&&o!==void 0?o:"children";t.sort((u,h)=>{var c;return(c=this.sortComparer(e,u,h))!==null&&c!==void 0?c:Xi.neutral});for(const u of t)u&&u.hasOwnProperty(l)&&Array.isArray(u[l])&&(n++,this.sortTreeChildren(u[l],e,n),n--)}updateSorting(t,e=!0,n=!0){var r,o;if(!this._gridOptions||!this._gridOptions.enableSorting)throw new Error('[Slickgrid-Universal] in order to use "updateSorting" method, you need to have Sortable Columns defined in your grid and "enableSorting" set in your Grid Options');if(Array.isArray(t)){const s=(r=this._gridOptions)===null||r===void 0?void 0:r.backendServiceApi;if(s){const l=s==null?void 0:s.service;l!=null&&l.updateSorters&&(l.updateSorters(void 0,t),n&&((o=this.backendUtilities)===null||o===void 0||o.refreshBackendDataset(this._gridOptions)))}else this.loadGridSorters(t);if(e){const l=s?en.remote:en.local;this.emitSortChanged(l)}}}disableAllSortingCommands(t=!0){var e,n;const r=this._grid.getColumns();r.forEach(s=>{var l,u;typeof s.sortable!==void 0&&(s.sortable=!t),!((l=s==null?void 0:s.header)===null||l===void 0)&&l.menu&&((u=s.header.menu.commandItems||s.header.menu.items)===null||u===void 0||u.forEach(h=>{if(h&&typeof h!="string"){const c=h.command;(c==="sort-asc"||c==="sort-desc"||c==="clear-sort")&&(h.hidden=t)}}))});const o=(n=(e=this._gridOptions)===null||e===void 0?void 0:e.gridMenu)===null||n===void 0?void 0:n.commandItems;return o&&o.forEach(s=>{s&&typeof s!="string"&&s.command==="clear-sorting"&&(s.hidden=t)}),r}}class q0{constructor(t,e,n){this.pubSubService=t,this.sharedService=e,this.sortService=n,this._currentToggledItems=[],this._isLastFullToggleCollapsed=!1,this._isOneCpuCyclePassed=!1,this._isTreeDataEnabled=!1,this._subscriptions=[],this._treeDataRecalcHandler=null,this._eventHandler=new Slick.EventHandler,setTimeout(()=>this._isOneCpuCyclePassed=!0)}set currentToggledItems(t){this._currentToggledItems=t}get dataset(){var t;return(t=this.dataView)===null||t===void 0?void 0:t.getItems()}get datasetHierarchical(){return this.sharedService.hierarchicalDataset}get dataView(){var t,e,n;return(n=(e=(t=this._grid)===null||t===void 0?void 0:t.getData)===null||e===void 0?void 0:e.call(t))!==null&&n!==void 0?n:{}}get eventHandler(){return this._eventHandler}get gridOptions(){var t,e,n;return(n=(e=(t=this._grid)===null||t===void 0?void 0:t.getOptions)===null||e===void 0?void 0:e.call(t))!==null&&n!==void 0?n:{}}get treeDataOptions(){return this.gridOptions.treeDataOptions}dispose(){this._eventHandler.unsubscribeAll(),this.pubSubService.unsubscribeAll(this._subscriptions)}init(t){var e,n,r,o,s,l,u,h,c,p,m;if(this._grid=t,this._isTreeDataEnabled=(n=(e=this.gridOptions)===null||e===void 0?void 0:e.enableTreeData)!==null&&n!==void 0?n:!1,this._isLastFullToggleCollapsed=(o=(r=this.treeDataOptions)===null||r===void 0?void 0:r.initiallyCollapsed)!==null&&o!==void 0?o:!1,this._currentToggledItems=(u=(l=(s=this.gridOptions.presets)===null||s===void 0?void 0:s.treeData)===null||l===void 0?void 0:l.toggledItems)!==null&&u!==void 0?u:[],this._lastToggleStateChange={type:this._isLastFullToggleCollapsed?"full-collapse":"full-expand",previousFullToggleType:this._isLastFullToggleCollapsed?"full-collapse":"full-expand",toggledItems:this._currentToggledItems},this._isTreeDataEnabled){if(!((h=this.gridOptions)===null||h===void 0)&&h.multiColumnSort)throw new Error('[Slickgrid-Universal] It looks like you are trying to use Tree Data with multi-column sorting, unfortunately it is not supported because of its complexity, you can disable it via "multiColumnSort: false" grid option and/or help in providing support for this feature.');if(!(!((c=this.gridOptions)===null||c===void 0)&&c.enableFiltering))throw new Error('[Slickgrid-Universal] It looks like you are trying to use Tree Data without using the filtering option, unfortunately that is not possible with Tree Data since it relies heavily on the filters to expand/collapse the tree. You need to enable it via "enableFiltering: true"');if(!((p=this.gridOptions)===null||p===void 0)&&p.backendServiceApi||!((m=this.gridOptions)===null||m===void 0)&&m.enablePagination)throw new Error("[Slickgrid-Universal] It looks like you are trying to use Tree Data with Pagination and/or a Backend Service (OData, GraphQL) but unfortunately that is simply not supported because of its complexity.");if(!this.gridOptions.treeDataOptions||!this.gridOptions.treeDataOptions.columnId)throw new Error('[Slickgrid-Universal] When enabling tree data, you must also provide the "treeDataOption" property in your Grid Options with "childrenPropName" or "parentPropName" (depending if your array is hierarchical or flat) for the Tree Data to work properly.')}this._eventHandler.subscribe(t.onClick,this.handleOnCellClick.bind(this)),this._subscriptions.push(this.pubSubService.subscribe("onGridMenuClearAllSorting",this.clearSorting.bind(this))),this._treeDataRecalcHandler=this.setAutoRecalcTotalsCallbackWhenFeatEnabled(this.gridOptions),this._eventHandler.subscribe(this.dataView.onRowCountChanged,()=>{var v,_;typeof this._treeDataRecalcHandler=="function"&&this._isOneCpuCyclePassed&&(clearTimeout(this._timer),this._timer=setTimeout(()=>{var C;return(C=this._treeDataRecalcHandler)===null||C===void 0?void 0:C.call(this)},(_=(v=this.treeDataOptions)===null||v===void 0?void 0:v.autoRecalcTotalsDebounce)!==null&&_!==void 0?_:0))})}applyToggledItemStateChanges(t,e,n=!0,r=!1){if(Array.isArray(t)){const o=this.getTreeDataOptionPropName("collapsedPropName"),s=this.getTreeDataOptionPropName("hasChildrenPropName");this.dataView.beginUpdate(!0);const u=(e??this._lastToggleStateChange.previousFullToggleType)==="full-collapse";e&&(this._lastToggleStateChange.previousFullToggleType=e),n&&(this.dataView.getItems()||[]).forEach(h=>{h[s]&&(h[o]=u)}),this.dynamicallyToggleItemState(t,r)}}dynamicallyToggleItemState(t,e=!0){if(Array.isArray(t)){this.dataView.beginUpdate(!0);for(const n of t){const r=this.dataView.getItemById(n.itemId);if(this.updateToggledItem(r,n.isCollapsed),e){const o=this._currentToggledItems.findIndex(s=>s.itemId===n.itemId);o>=0?this._currentToggledItems[o].isCollapsed=n.isCollapsed:this._currentToggledItems.push({itemId:n.itemId,isCollapsed:n.isCollapsed}),this.pubSubService.publish("onTreeItemToggled",{...this._lastToggleStateChange,fromItemId:n.itemId,toggledItems:this._currentToggledItems,type:n.isCollapsed?vs.toggleCollapse:vs.toggleExpand})}}this.dataView.endUpdate(),this.dataView.refresh()}}getCurrentToggleState(){return this._lastToggleStateChange}getInitialSort(t,e){var n,r,o;const s=e==null?void 0:e.treeDataOptions,l=(n=s==null?void 0:s.initialSort)!==null&&n!==void 0?n:{columnId:(r=s==null?void 0:s.columnId)!==null&&r!==void 0?r:"",direction:"ASC"},u=t.find(h=>h.id===l.columnId);return{columnId:l.columnId,sortAsc:((o=l==null?void 0:l.direction)===null||o===void 0?void 0:o.toUpperCase())!=="DESC",sortCol:u}}getItemCount(t){if(t!==void 0){const e=this.getTreeDataOptionPropName("levelPropName");return this.dataView.getItems().filter(n=>n[e]===t).length}return this.dataView.getItemCount()}getToggledItems(){return this._currentToggledItems}getTreeDataOptionPropName(t){var e,n,r,o,s,l,u,h,c,p,m,v,_,C;let x="";switch(t){case"childrenPropName":x=(n=(e=this.treeDataOptions)===null||e===void 0?void 0:e.childrenPropName)!==null&&n!==void 0?n:je.treeDataProperties.CHILDREN_PROP;break;case"collapsedPropName":x=(o=(r=this.treeDataOptions)===null||r===void 0?void 0:r.collapsedPropName)!==null&&o!==void 0?o:je.treeDataProperties.COLLAPSED_PROP;break;case"hasChildrenPropName":x=(l=(s=this.treeDataOptions)===null||s===void 0?void 0:s.hasChildrenPropName)!==null&&l!==void 0?l:je.treeDataProperties.HAS_CHILDREN_PROP;break;case"identifierPropName":x=(p=(h=(u=this.treeDataOptions)===null||u===void 0?void 0:u.identifierPropName)!==null&&h!==void 0?h:(c=this.gridOptions)===null||c===void 0?void 0:c.datasetIdPropertyName)!==null&&p!==void 0?p:"id";break;case"levelPropName":x=(v=(m=this.treeDataOptions)===null||m===void 0?void 0:m.levelPropName)!==null&&v!==void 0?v:je.treeDataProperties.TREE_LEVEL_PROP;break;case"parentPropName":x=(C=(_=this.treeDataOptions)===null||_===void 0?void 0:_.parentPropName)!==null&&C!==void 0?C:je.treeDataProperties.PARENT_PROP;break}return x}clearSorting(){const t=this.getInitialSort(this.sharedService.columnDefinitions,this.sharedService.gridOptions);this.sortService.loadGridSorters([{columnId:t.columnId,direction:t.sortAsc?"ASC":"DESC"}])}convertFlatParentChildToTreeDatasetAndSort(t,e,n){var r;const o=this.convertFlatParentChildToTreeDataset(t,n),s=this.getInitialSort(e,n),l=this.sortService.sortHierarchicalDataset(o,[s],!0);return(r=this._grid)===null||r===void 0||r.setSortColumns([s]),l}convertFlatParentChildToTreeDataset(t,e){var n,r,o;const s=(n=e==null?void 0:e.datasetIdPropertyName)!==null&&n!==void 0?n:"id",l=(r=e==null?void 0:e.treeDataOptions)!==null&&r!==void 0?r:{columnId:"id"},u={...l,identifierPropName:(o=l.identifierPropName)!==null&&o!==void 0?o:s,initiallyCollapsed:this._isLastFullToggleCollapsed};return Ap(t,u)}enableAutoRecalcTotalsFeature(t=!0){t&&this._isTreeDataEnabled?this._treeDataRecalcHandler=this.recalculateTreeTotals.bind(this,this.gridOptions):this._treeDataRecalcHandler=null}recalculateTreeTotals(t){var e,n;const r=t.treeDataOptions,o=(e=r==null?void 0:r.childrenPropName)!==null&&e!==void 0?e:je.treeDataProperties.CHILDREN_PROP,s=(n=r==null?void 0:r.levelPropName)!==null&&n!==void 0?n:je.treeDataProperties.TREE_LEVEL_PROP;r!=null&&r.aggregators&&(r.aggregators.forEach(l=>{Ha(this.sharedService.hierarchicalDataset||[],{childrenPropName:o,levelPropName:s,aggregator:l})}),this._grid.invalidate())}sortHierarchicalDataset(t,e){const n=e??this.getInitialSort(this.sharedService.allColumns,this.gridOptions),r=Array.isArray(n)?n:[n];return this.sortService.sortHierarchicalDataset(t,r)}async toggleTreeDataCollapse(t,e=!0){var n;if(!((n=this.gridOptions)===null||n===void 0)&&n.enableTreeData){const o=this.getTreeDataOptionPropName("hasChildrenPropName");e&&await this.pubSubService.publish("onTreeFullToggleStart",{collapsing:t}),this.dataView.beginUpdate(!0),(this.dataView.getItems()||[]).forEach(s=>{s[o]&&this.updateToggledItem(s,t)}),this.dataView.endUpdate(),this.dataView.refresh(),this._isLastFullToggleCollapsed=t}const r=t?vs.fullCollapse:vs.fullExpand;this._lastToggleStateChange={type:r,previousFullToggleType:r,toggledItems:null},e&&this.pubSubService.publish("onTreeFullToggleEnd",this._lastToggleStateChange)}handleOnCellClick(t,e){var n;if(t&&e){const r=t.target||{},o=(n=this.gridOptions.datasetIdPropertyName)!==null&&n!==void 0?n:"id",s=this.getTreeDataOptionPropName("collapsedPropName"),l=this.getTreeDataOptionPropName("childrenPropName");if(typeof(r==null?void 0:r.className)=="string"&&(r.className.indexOf("toggle")>=0||!1)){const h=this.dataView.getItem(e.row);if(h){h[s]=!h[s];const c=h[s],p=h[o],m=this._currentToggledItems.findIndex(C=>C.itemId===p);m>=0?this._currentToggledItems[m].isCollapsed=c:this._currentToggledItems.push({itemId:p,isCollapsed:c}),this.dataView.updateItem(p,h);const v=C=>C[o]===p,_=Ba(this.sharedService.hierarchicalDataset||[],v,l);_&&(_[s]=c),this._grid.invalidate(),this._lastToggleStateChange={type:c?vs.toggleCollapse:vs.toggleExpand,previousFullToggleType:this._isLastFullToggleCollapsed?"full-collapse":"full-expand",toggledItems:this._currentToggledItems},this.pubSubService.publish("onTreeItemToggled",{...this._lastToggleStateChange,fromItemId:p})}t.stopImmediatePropagation()}}}updateToggledItem(t,e){var n,r;const o=(r=(n=this.gridOptions)===null||n===void 0?void 0:n.datasetIdPropertyName)!==null&&r!==void 0?r:"id",s=this.getTreeDataOptionPropName("childrenPropName"),l=this.getTreeDataOptionPropName("collapsedPropName");if(t){t[l]=e,this.dataView.updateItem(t[o],t);const u=c=>c[o]===t[o],h=Ba(this.sharedService.hierarchicalDataset||[],u,s);h&&(h[l]=e)}}setAutoRecalcTotalsCallbackWhenFeatEnabled(t){var e,n;return t!=null&&t.enableTreeData&&(!((e=t==null?void 0:t.treeDataOptions)===null||e===void 0)&&e.autoRecalcTotalsOnFilterChange)&&(!((n=t==null?void 0:t.treeDataOptions)===null||n===void 0)&&n.aggregators)?this.recalculateTreeTotals.bind(this,t):null}}function Yh(a,t){const e=Ie("select",{className:"form-control"});for(const n of a)e.appendChild(Ie("option",{value:n.operator,innerHTML:Mn(t,`${I_(n.operator,3)}${n.description}`)}));return e}function Qn(a,t,e,n="Slider"){var r,o,s;let l;return((r=a.filterOptions)===null||r===void 0?void 0:r[t])!==void 0?l=a.filterOptions[t]:((o=a==null?void 0:a.params)===null||o===void 0?void 0:o[t])!==void 0&&(console.warn(`[Slickgrid-Universal] All filter.params from ${n} Filter are moving to "filterOptions" for better typing support and "params" will be deprecated in future release.`),l=(s=a==null?void 0:a.params)===null||s===void 0?void 0:s[t]),l??e}function K0(a,t,e){var n,r;const o=(n=t==null?void 0:t.filter)!==null&&n!==void 0?n:{},s=(r=o==null?void 0:o.collectionOptions)!==null&&r!==void 0?r:{};if(s&&s.collectionInsideObjectProperty){const l=s.collectionInsideObjectProperty;a=bn(a,l)}if(!Array.isArray(a))throw new Error('Something went wrong while trying to pull the collection from the "collectionAsync" call in the Filter, the collection is not a valid array.');o.collection=a,e(a)}async function Ym(a,t,e,n,r){var o,s,l;const u=(o=t==null?void 0:t.filter)!==null&&o!==void 0?o:{},h=(s=u==null?void 0:u.collectionOptions)!==null&&s!==void 0?s:{};let c=null;if(a){const p=(l=n==null?void 0:n.isObservable(a))!==null&&l!==void 0?l:!1;p&&n&&(c=await Tp(n,a));const m=await a;if(Array.isArray(m)?c=m:(m==null?void 0:m.status)>=200&&m.status<300&&typeof m.json=="function"?c=await m.json():m&&m.content&&(c=m.content),!Array.isArray(c)&&(h!=null&&h.collectionInsideObjectProperty)){const v=c||m,_=h.collectionInsideObjectProperty;c=bn(v,_||"")}if(!Array.isArray(c))throw new Error('Something went wrong while trying to pull the collection from the "collectionAsync" call in the Filter, the collection is not a valid array.');u.collection=c,e(c),p&&Z0(t,e,n,r)}return c}function Z0(a,t,e,n){var r;const o=(r=a==null?void 0:a.filter)!==null&&r!==void 0?r:{},s=e==null?void 0:e.createSubject();o.collectionAsync=s,n&&s&&n.push(s.subscribe(l=>K0(l,a,t)))}function po(a,t,e,n,r){var o;if(n!=null&&n.enableTranslate&&(r!=null&&r.translate)){const l=ao(n);return r.translate(`${l}${a}`)}const s=n.locales||je.locales;return(o=s==null?void 0:s[t])!==null&&o!==void 0?o:e}function Q0(a,t){return[{operator:"",description:po("CONTAINS","TEXT_CONTAINS","Contains",a,t)},{operator:"<>",description:po("NOT_CONTAINS","TEXT_NOT_CONTAINS","Not Contains",a,t)},{operator:"=",description:po("EQUALS","TEXT_EQUALS","Equals",a,t)},{operator:"!=",description:po("NOT_EQUAL_TO","TEXT_NOT_EQUAL_TO","Not equal to",a,t)},{operator:"a*",description:po("STARTS_WITH","TEXT_STARTS_WITH","Starts with",a,t)},{operator:"*z",description:po("ENDS_WITH","TEXT_ENDS_WITH","Ends with",a,t)}]}function jh(a,t){return[{operator:"",description:""},{operator:"=",description:po("EQUAL_TO","TEXT_EQUAL_TO","Equal to",a,t)},{operator:"<",description:po("LESS_THAN","TEXT_LESS_THAN","Less than",a,t)},{operator:"<=",description:po("LESS_THAN_OR_EQUAL_TO","TEXT_LESS_THAN_OR_EQUAL_TO","Less than or equal to",a,t)},{operator:">",description:po("GREATER_THAN","TEXT_GREATER_THAN","Greater than",a,t)},{operator:">=",description:po("GREATER_THAN_OR_EQUAL_TO","TEXT_GREATER_THAN_OR_EQUAL_TO","Greater than or equal to",a,t)},{operator:"<>",description:po("NOT_EQUAL_TO","TEXT_NOT_EQUAL_TO","Not equal to",a,t)}]}const jm=qd&&dh||qd;class J0{constructor(t,e,n){this.translaterService=t,this.collectionService=e,this.rxjs=n,this._clearFilterTriggered=!1,this._shouldTriggerQuery=!0,this.searchTerms=[],this.isFilled=!1,this.isItemSelected=!1,this.valueName="label",this.enableTranslateLabel=!1,this.subscriptions=[],this._bindEventService=new Fn}get autocompleterOptions(){return this._autocompleterOptions||{}}get collectionOptions(){var t,e,n;return(n=(e=(t=this.columnDef)===null||t===void 0?void 0:t.filter)===null||e===void 0?void 0:e.collectionOptions)!==null&&n!==void 0?n:{}}get collection(){return this._collection}get columnFilter(){var t;return((t=this.columnDef)===null||t===void 0?void 0:t.filter)||{}}get filterDomElement(){return this._filterElm}get filterOptions(){var t;return((t=this.columnFilter)===null||t===void 0?void 0:t.filterOptions)||{}}get customStructure(){var t,e,n,r,o,s;let l=(t=this.columnFilter)===null||t===void 0?void 0:t.customStructure;const u=(n=(e=this.columnFilter)===null||e===void 0?void 0:e.type)!==null&&n!==void 0?n:(r=this.columnDef)===null||r===void 0?void 0:r.type;return!l&&u===ie.object&&(!((o=this.columnDef)===null||o===void 0)&&o.dataKey)&&(!((s=this.columnDef)===null||s===void 0)&&s.labelKey)&&(l={label:this.columnDef.labelKey,value:this.columnDef.dataKey}),l}get defaultOperator(){return Lt.equal}get gridOptions(){return this.grid&&this.grid.getOptions?this.grid.getOptions():{}}get instance(){return this._instance}get operator(){var t,e;return(e=(t=this.columnFilter)===null||t===void 0?void 0:t.operator)!==null&&e!==void 0?e:this.defaultOperator}set operator(t){this.columnFilter&&(this.columnFilter.operator=t)}init(t){var e,n,r,o,s,l,u,h,c,p,m,v;if(!t)throw new Error('[Slickgrid-Universal] A filter must always have an "init()" with valid arguments.');if(this.grid=t.grid,this.callback=t.callback,this.columnDef=t.columnDef,this.searchTerms=(t.hasOwnProperty("searchTerms")?t.searchTerms:[])||[],this.filterContainerElm=t.filterContainerElm,!this.grid||!this.columnDef||!this.columnFilter||!this.columnFilter.collection&&!this.columnFilter.collectionAsync&&!this.columnFilter.filterOptions)throw new Error(`[Slickgrid-Universal] You need to pass a "collection" (or "collectionAsync") for the AutoComplete Filter to work correctly. Also each option should include a value/label pair (or value/labelKey when using Locale). For example:: { filter: model: Filters.autocompleter, collection: [{ value: true, label: 'True' }, { value: false, label: 'False'}] }`);this.enableTranslateLabel=(n=(e=this.columnFilter)===null||e===void 0?void 0:e.enableTranslateLabel)!==null&&n!==void 0?n:!1,this.labelName=(o=(r=this.customStructure)===null||r===void 0?void 0:r.label)!==null&&o!==void 0?o:"label",this.valueName=(l=(s=this.customStructure)===null||s===void 0?void 0:s.value)!==null&&l!==void 0?l:"value",this.labelPrefixName=(h=(u=this.customStructure)===null||u===void 0?void 0:u.labelPrefix)!==null&&h!==void 0?h:"labelPrefix",this.labelSuffixName=(p=(c=this.customStructure)===null||c===void 0?void 0:c.labelSuffix)!==null&&p!==void 0?p:"labelSuffix",this._locales=(v=(m=this.gridOptions)===null||m===void 0?void 0:m.locales)!==null&&v!==void 0?v:je.locales;const _=this.columnFilter.collection;return this._collection=_,this.renderDomElement(_),new Promise(async(C,x)=>{try{const S=this.columnFilter.collectionAsync;let y;S&&!this.columnFilter.collection?(y=Ym(S,this.columnDef,this.renderDomElement.bind(this),this.rxjs,this.subscriptions),C(y)):(y=_,C(_)),(S||this.columnFilter.enableCollectionWatch)&&(await(y??S),this.watchCollectionChanges())}catch(S){x(S)}})}clear(t=!0){this._filterElm&&(this._clearFilterTriggered=!0,this._shouldTriggerQuery=t,this.searchTerms=[],this._filterElm.value="",this._filterElm.dispatchEvent(new CustomEvent("input")),this._filterElm.classList.remove("filled"))}destroy(){var t,e,n;typeof((t=this._instance)===null||t===void 0?void 0:t.destroy)=="function"&&this._instance.destroy(),this._filterElm,(n=(e=this._filterElm)===null||e===void 0?void 0:e.remove)===null||n===void 0||n.call(e),this._collection=void 0,this._bindEventService.unbindAll(),Wd(this.subscriptions)}getValues(){var t;return(t=this._filterElm)===null||t===void 0?void 0:t.value}setValues(t,e){var n;t&&this._filterElm&&(this._filterElm.value=t);const r=this.getValues()!==""?"add":"remove";(n=this._filterElm)===null||n===void 0||n.classList[r]("filled"),this.operator=e||this.defaultOperator}filterCollection(t){let e=t;if(this.columnFilter&&this.columnFilter.collectionFilterBy){const n=this.columnFilter.collectionFilterBy,r=this.columnFilter.collectionOptions&&this.columnFilter.collectionOptions.filterResultAfterEachPass||null;e=this.collectionService.filterCollection(e,n,r)}return e}sortCollection(t){let e=t;if(this.columnFilter&&this.columnFilter.collectionSortBy){const n=this.columnFilter.collectionSortBy;e=this.collectionService.sortCollection(this.columnDef,e,n,this.enableTranslateLabel)}return e}watchCollectionChanges(){var t;!((t=this.columnFilter)===null||t===void 0)&&t.collection&&(Ma(this.columnFilter.collection,e=>{this.renderDomElement(this.columnFilter.collection||e||[])}),Jc(this.columnFilter,"collection",e=>{this.renderDomElement(e||[]),this.columnFilter.collection&&Ma(this.columnFilter.collection,n=>{this.renderDomElement(this.columnFilter.collection||n||[])})}))}renderDomElement(t){var e;if(!Array.isArray(t)&&(!((e=this.collectionOptions)===null||e===void 0)&&e.collectionInsideObjectProperty)){const o=this.collectionOptions.collectionInsideObjectProperty;t=bn(t,o||"")}let n=t;n&&(n=this.filterCollection(n),n=this.sortCollection(n));const r=Array.isArray(this.searchTerms)&&this.searchTerms.length>=0?this.searchTerms[0]:"";this._collection=n,this._filterElm=this.createFilterElement(n,r),this._bindEventService.bind(this._filterElm,"input",this.handleOnInputChange.bind(this)),this._bindEventService.bind(this._filterElm,"blur",()=>{this.isItemSelected||this.clear()})}createFilterElement(t,e){var n,r,o,s,l,u,h,c,p,m,v,_,C,x,S,y;this._collection=t;const D=(r=(n=this.columnDef)===null||n===void 0?void 0:n.id)!==null&&r!==void 0?r:"";sn(this.filterContainerElm);let A=(s=(o=this.gridOptions)===null||o===void 0?void 0:o.defaultFilterPlaceholder)!==null&&s!==void 0?s:"";!((l=this.columnFilter)===null||l===void 0)&&l.placeholder&&(A=this.columnFilter.placeholder),this._filterElm=Ie("input",{type:"text",ariaLabel:(h=(u=this.columnFilter)===null||u===void 0?void 0:u.ariaLabel)!==null&&h!==void 0?h:`${jr(D+"")} Search Filter`,autocomplete:"off",ariaAutoComplete:"none",placeholder:A,className:`form-control search-filter filter-${D} slick-autocomplete-container`,value:e??"",dataset:{columnid:`${D}`}});const P=e;Array.isArray(t)&&(t.every(B=>$d(B))?t=t.map(B=>({label:B,value:B})):t=t.map(B=>{var Q,L;return{label:B==null?void 0:B[this.labelName],value:B==null?void 0:B[this.valueName],labelPrefix:(Q=B==null?void 0:B[this.labelPrefixName])!==null&&Q!==void 0?Q:"",labelSuffix:(L=B==null?void 0:B[this.labelSuffixName])!==null&&L!==void 0?L:""}})),this._autocompleterOptions={input:this._filterElm,debounceWaitMs:200,className:`slick-autocomplete ${(p=(c=this.filterOptions)===null||c===void 0?void 0:c.className)!==null&&p!==void 0?p:""}`.trim(),emptyMsg:this.gridOptions.enableTranslate&&(!((m=this.translaterService)===null||m===void 0)&&m.translate)?this.translaterService.translate("NO_ELEMENTS_FOUND"):(_=(v=this._locales)===null||v===void 0?void 0:v.TEXT_NO_ELEMENTS_FOUND)!==null&&_!==void 0?_:"No elements found",customize:(B,Q,L)=>{L.style.width=""},onSelect:B=>{this.isItemSelected=!0,this.handleSelect(B)},...this.filterOptions},!((C=this._autocompleterOptions.renderItem)===null||C===void 0)&&C.layout?(this._autocompleterOptions.className+=` autocomplete-custom-${Wa(this._autocompleterOptions.renderItem.layout)}`,this._autocompleterOptions.render=this.renderCustomItem.bind(this)):Array.isArray(t)?this._autocompleterOptions.render=(S=(x=this._autocompleterOptions.render)===null||x===void 0?void 0:x.bind(this))!==null&&S!==void 0?S:this.renderCollectionItem.bind(this):this._autocompleterOptions.render||(this._autocompleterOptions.render=this.renderRegularItem.bind(this)),!((y=this.filterOptions)===null||y===void 0)&&y.fetch?(Hp(this._filterElm,this._autocompleterOptions),this._instance=jm(this._autocompleterOptions)):this._instance=jm({...this._autocompleterOptions,fetch:(B,Q)=>{t&&Q(t.filter(L=>((typeof L=="string"?L:L==null?void 0:L.label)||"").toLowerCase().includes(B.toLowerCase())))}}),this._filterElm.value=P??"";const M=Ie("div",{className:"autocomplete-filter-container"});return M.appendChild(this._filterElm),M.appendChild(Ie("span")),e&&this._filterElm.classList.add("filled"),this.filterContainerElm.appendChild(M),this.filterContainerElm.appendChild(document.createElement("span")),this._filterElm}handleSelect(t){var e,n,r,o;if(t!==void 0){const l=(r=(n=(e=this.columnFilter)===null||e===void 0?void 0:e.filterOptions)===null||n===void 0?void 0:n.renderItem)!==null&&r!==void 0?r:!1,u=typeof t=="string"?t:l?t[this.labelName]:t.label;let h=typeof t=="string"?t:l?t[this.valueName]:t.value;h=this.trimWhitespaceWhenEnabled(h);const c=h===""?"remove":"add";(o=this._filterElm)===null||o===void 0||o.classList[c]("filled"),this.setValues(u),this.callback(void 0,{columnDef:this.columnDef,operator:this.operator,searchTerms:[h],shouldTriggerQuery:this._shouldTriggerQuery}),this._clearFilterTriggered=!1,this._shouldTriggerQuery=!0}return!1}handleOnInputChange(t){var e,n,r,o,s;let l=(n=(e=t==null?void 0:t.target)===null||e===void 0?void 0:e.value)!==null&&n!==void 0?n:"";const u=(r=this.filterOptions.triggerOnEveryKeyStroke)!==null&&r!==void 0?r:!1;if(l=this.trimWhitespaceWhenEnabled(l),this._clearFilterTriggered||l===""||u){const h={columnDef:this.columnDef,shouldTriggerQuery:this._shouldTriggerQuery};this._clearFilterTriggered?h.clearFilterTriggered=this._clearFilterTriggered:(h.operator=this.operator,h.searchTerms=[l]),l!==""?(this.isItemSelected=!0,(o=this._filterElm)===null||o===void 0||o.classList.add("filled")):(this.isItemSelected=!1,(s=this._filterElm)===null||s===void 0||s.classList.remove("filled")),this.callback(t,h)}this._clearFilterTriggered=!1,this._shouldTriggerQuery=!0}renderRegularItem(t){var e;const n=typeof t=="string"?t:(e=t==null?void 0:t.label)!==null&&e!==void 0?e:"";return Ie("div",{textContent:n||""})}renderCustomItem(t){var e,n,r;const o=(r=(n=(e=this._autocompleterOptions)===null||e===void 0?void 0:e.renderItem)===null||n===void 0?void 0:n.templateCallback(t))!==null&&r!==void 0?r:"",s=Mn(this.gridOptions,o)||"";return Ie("div",{innerHTML:s})}renderCollectionItem(t){var e,n;const r=(n=(e=this.columnFilter)===null||e===void 0?void 0:e.enableRenderHtml)!==null&&n!==void 0?n:!1,o=t.labelPrefix||"",s=t.label||"",l=t.labelSuffix||"",u=o+s+l,h=Mn(this.gridOptions,u)||"",c=document.createElement("div");return c[r?"innerHTML":"textContent"]=h,c}trimWhitespaceWhenEnabled(t){let e=t;const n=this.gridOptions.enableFilterTrimWhiteSpace||this.columnFilter.enableTrimWhiteSpace;return typeof t=="string"&&n&&(e=t.trim()),e}}var Xh=["onChange","onClose","onDayCreate","onDestroy","onKeyDown","onMonthChange","onOpen","onParseConfig","onReady","onValueUpdate","onYearChange","onPreCalendarPosition"],aa={_disable:[],allowInput:!1,allowInvalidPreload:!1,altFormat:"F j, Y",altInput:!1,altInputClass:"form-control input",animate:typeof window=="object"&&window.navigator.userAgent.indexOf("MSIE")===-1,ariaDateFormat:"F j, Y",autoFillDefaultTime:!0,clickOpens:!0,closeOnSelect:!0,conjunction:", ",dateFormat:"Y-m-d",defaultHour:12,defaultMinute:0,defaultSeconds:0,disable:[],disableMobile:!1,enableSeconds:!1,enableTime:!1,errorHandler:function(a){return typeof console<"u"&&console.warn(a)},getWeek:function(a){var t=new Date(a.getTime());t.setHours(0,0,0,0),t.setDate(t.getDate()+3-(t.getDay()+6)%7);var e=new Date(t.getFullYear(),0,4);return 1+Math.round(((t.getTime()-e.getTime())/864e5-3+(e.getDay()+6)%7)/7)},hourIncrement:1,ignoredFocusElements:[],inline:!1,locale:"default",minuteIncrement:5,mode:"single",monthSelectorType:"dropdown",nextArrow:"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M13.207 8.472l-7.854 7.854-0.707-0.707 7.146-7.146-7.146-7.148 0.707-0.707 7.854 7.854z' /></svg>",noCalendar:!1,now:new Date,onChange:[],onClose:[],onDayCreate:[],onDestroy:[],onKeyDown:[],onMonthChange:[],onOpen:[],onParseConfig:[],onReady:[],onValueUpdate:[],onYearChange:[],onPreCalendarPosition:[],plugins:[],position:"auto",positionElement:void 0,prevArrow:"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M5.207 8.471l7.146 7.147-0.707 0.707-7.853-7.854 7.854-7.853 0.707 0.707-7.147 7.146z' /></svg>",shorthandCurrentMonth:!1,showMonths:1,static:!1,time_24hr:!1,weekNumbers:!1,wrap:!1},dd={weekdays:{shorthand:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],longhand:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},months:{shorthand:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],longhand:["January","February","March","April","May","June","July","August","September","October","November","December"]},daysInMonth:[31,28,31,30,31,30,31,31,30,31,30,31],firstDayOfWeek:0,ordinal:function(a){var t=a%100;if(t>3&&t<21)return"th";switch(t%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}},rangeSeparator:" to ",weekAbbreviation:"Wk",scrollTitle:"Scroll to increment",toggleTitle:"Click to toggle",amPM:["AM","PM"],yearAriaLabel:"Year",monthAriaLabel:"Month",hourAriaLabel:"Hour",minuteAriaLabel:"Minute",time_24hr:!1},Lr=function(a,t){return t===void 0&&(t=2),("000"+a).slice(t*-1)},mo=function(a){return a===!0?1:0};function Xm(a,t){var e;return function(){var n=this,r=arguments;clearTimeout(e),e=setTimeout(function(){return a.apply(n,r)},t)}}var qh=function(a){return a instanceof Array?a:[a]};function xr(a,t,e){if(e===!0)return a.classList.add(t);a.classList.remove(t)}function Pi(a,t,e){var n=window.document.createElement(a);return t=t||"",e=e||"",n.className=t,e!==void 0&&(n.textContent=e),n}function Au(a){for(;a.firstChild;)a.removeChild(a.firstChild)}function qm(a,t){if(t(a))return a;if(a.parentNode)return qm(a.parentNode,t)}function ku(a,t){var e=Pi("div","numInputWrapper"),n=Pi("input","numInput "+a),r=Pi("span","arrowUp"),o=Pi("span","arrowDown");if(navigator.userAgent.indexOf("MSIE 9.0")===-1?n.type="number":(n.type="text",n.pattern="\\d*"),t!==void 0)for(var s in t)n.setAttribute(s,t[s]);return e.appendChild(n),e.appendChild(r),e.appendChild(o),e}function Zr(a){try{if(typeof a.composedPath=="function"){var t=a.composedPath();return t[0]}return a.target}catch{return a.target}}var Kh=function(){},Iu=function(a,t,e){return e.months[t?"shorthand":"longhand"][a]},eb={D:Kh,F:function(a,t,e){a.setMonth(e.months.longhand.indexOf(t))},G:function(a,t){a.setHours((a.getHours()>=12?12:0)+parseFloat(t))},H:function(a,t){a.setHours(parseFloat(t))},J:function(a,t){a.setDate(parseFloat(t))},K:function(a,t,e){a.setHours(a.getHours()%12+12*mo(new RegExp(e.amPM[1],"i").test(t)))},M:function(a,t,e){a.setMonth(e.months.shorthand.indexOf(t))},S:function(a,t){a.setSeconds(parseFloat(t))},U:function(a,t){return new Date(parseFloat(t)*1e3)},W:function(a,t,e){var n=parseInt(t),r=new Date(a.getFullYear(),0,2+(n-1)*7,0,0,0,0);return r.setDate(r.getDate()-r.getDay()+e.firstDayOfWeek),r},Y:function(a,t){a.setFullYear(parseFloat(t))},Z:function(a,t){return new Date(t)},d:function(a,t){a.setDate(parseFloat(t))},h:function(a,t){a.setHours((a.getHours()>=12?12:0)+parseFloat(t))},i:function(a,t){a.setMinutes(parseFloat(t))},j:function(a,t){a.setDate(parseFloat(t))},l:Kh,m:function(a,t){a.setMonth(parseFloat(t)-1)},n:function(a,t){a.setMonth(parseFloat(t)-1)},s:function(a,t){a.setSeconds(parseFloat(t))},u:function(a,t){return new Date(parseFloat(t))},w:Kh,y:function(a,t){a.setFullYear(2e3+parseFloat(t))}},Ol={D:"",F:"",G:"(\\d\\d|\\d)",H:"(\\d\\d|\\d)",J:"(\\d\\d|\\d)\\w+",K:"",M:"",S:"(\\d\\d|\\d)",U:"(.+)",W:"(\\d\\d|\\d)",Y:"(\\d{4})",Z:"(.+)",d:"(\\d\\d|\\d)",h:"(\\d\\d|\\d)",i:"(\\d\\d|\\d)",j:"(\\d\\d|\\d)",l:"",m:"(\\d\\d|\\d)",n:"(\\d\\d|\\d)",s:"(\\d\\d|\\d)",u:"(.+)",w:"(\\d\\d|\\d)",y:"(\\d{2})"},ud={Z:function(a){return a.toISOString()},D:function(a,t,e){return t.weekdays.shorthand[ud.w(a,t,e)]},F:function(a,t,e){return Iu(ud.n(a,t,e)-1,!1,t)},G:function(a,t,e){return Lr(ud.h(a,t,e))},H:function(a){return Lr(a.getHours())},J:function(a,t){return t.ordinal!==void 0?a.getDate()+t.ordinal(a.getDate()):a.getDate()},K:function(a,t){return t.amPM[mo(a.getHours()>11)]},M:function(a,t){return Iu(a.getMonth(),!0,t)},S:function(a){return Lr(a.getSeconds())},U:function(a){return a.getTime()/1e3},W:function(a,t,e){return e.getWeek(a)},Y:function(a){return Lr(a.getFullYear(),4)},d:function(a){return Lr(a.getDate())},h:function(a){return a.getHours()%12?a.getHours()%12:12},i:function(a){return Lr(a.getMinutes())},j:function(a){return a.getDate()},l:function(a,t){return t.weekdays.longhand[a.getDay()]},m:function(a){return Lr(a.getMonth()+1)},n:function(a){return a.getMonth()+1},s:function(a){return a.getSeconds()},u:function(a){return a.getTime()},w:function(a){return a.getDay()},y:function(a){return String(a.getFullYear()).substring(2)}},Km=function(a){var t=a.config,e=t===void 0?aa:t,n=a.l10n,r=n===void 0?dd:n,o=a.isMobile,s=o===void 0?!1:o;return function(l,u,h){var c=h||r;return e.formatDate!==void 0&&!s?e.formatDate(l,u,c):u.split("").map(function(p,m,v){return ud[p]&&v[m-1]!=="\\"?ud[p](l,c,e):p!=="\\"?p:""}).join("")}},Zh=function(a){var t=a.config,e=t===void 0?aa:t,n=a.l10n,r=n===void 0?dd:n;return function(o,s,l,u){if(!(o!==0&&!o)){var h=u||r,c,p=o;if(o instanceof Date)c=new Date(o.getTime());else if(typeof o!="string"&&o.toFixed!==void 0)c=new Date(o);else if(typeof o=="string"){var m=s||(e||aa).dateFormat,v=String(o).trim();if(v==="today")c=new Date,l=!0;else if(e&&e.parseDate)c=e.parseDate(o,m);else if(/Z$/.test(v)||/GMT$/.test(v))c=new Date(o);else{for(var _=void 0,C=[],x=0,S=0,y="";x<m.length;x++){var D=m[x],A=D==="\\",P=m[x-1]==="\\"||A;if(Ol[D]&&!P){y+=Ol[D];var M=new RegExp(y).exec(o);M&&(_=!0)&&C[D!=="Y"?"push":"unshift"]({fn:eb[D],val:M[++S]})}else A||(y+=".")}c=!e||!e.noCalendar?new Date(new Date().getFullYear(),0,1,0,0,0,0):new Date(new Date().setHours(0,0,0,0)),C.forEach(function(B){var Q=B.fn,L=B.val;return c=Q(c,L,h)||c}),c=_?c:void 0}}if(!(c instanceof Date&&!isNaN(c.getTime()))){e.errorHandler(new Error("Invalid date provided: "+p));return}return l===!0&&c.setHours(0,0,0,0),c}}};function Qr(a,t,e){return e===void 0&&(e=!0),e!==!1?new Date(a.getTime()).setHours(0,0,0,0)-new Date(t.getTime()).setHours(0,0,0,0):a.getTime()-t.getTime()}var tb=function(a,t,e){return a>Math.min(t,e)&&a<Math.max(t,e)},Qh=function(a,t,e){return a*3600+t*60+e},ib=function(a){var t=Math.floor(a/3600),e=(a-t*3600)/60;return[t,e,a-t*3600-e*60]},nb={DAY:864e5};function Jh(a){var t=a.defaultHour,e=a.defaultMinute,n=a.defaultSeconds;if(a.minDate!==void 0){var r=a.minDate.getHours(),o=a.minDate.getMinutes(),s=a.minDate.getSeconds();t<r&&(t=r),t===r&&e<o&&(e=o),t===r&&e===o&&n<s&&(n=a.minDate.getSeconds())}if(a.maxDate!==void 0){var l=a.maxDate.getHours(),u=a.maxDate.getMinutes();t=Math.min(t,l),t===l&&(e=Math.min(u,e)),t===l&&e===u&&(n=a.maxDate.getSeconds())}return{hours:t,minutes:e,seconds:n}}typeof Object.assign!="function"&&(Object.assign=function(a){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];if(!a)throw TypeError("Cannot convert undefined or null to object");for(var n=function(l){l&&Object.keys(l).forEach(function(u){return a[u]=l[u]})},r=0,o=t;r<o.length;r++){var s=o[r];n(s)}return a});var mr=globalThis&&globalThis.__assign||function(){return mr=Object.assign||function(a){for(var t,e=1,n=arguments.length;e<n;e++){t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(a[r]=t[r])}return a},mr.apply(this,arguments)},Zm=globalThis&&globalThis.__spreadArrays||function(){for(var a=0,t=0,e=arguments.length;t<e;t++)a+=arguments[t].length;for(var n=Array(a),r=0,t=0;t<e;t++)for(var o=arguments[t],s=0,l=o.length;s<l;s++,r++)n[r]=o[s];return n},rb=300;function ob(a,t){var e={config:mr(mr({},aa),On.defaultConfig),l10n:dd};e.parseDate=Zh({config:e.config,l10n:e.l10n}),e._handlers=[],e.pluginElements=[],e.loadedPlugins=[],e._bind=C,e._setHoursFromDate=m,e._positionCalendar=re,e.changeMonth=ne,e.changeYear=Ce,e.clear=fe,e.close=Be,e.onMouseOver=yt,e._createElement=Pi,e.createDay=M,e.destroy=Ye,e.isEnabled=be,e.jumpToDate=y,e.updateValue=Zt,e.open=k,e.redraw=pe,e.set=Ne,e.setDate=It,e.toggle=st;function n(){e.utils={getDaysInMonth:function(U,Z){return U===void 0&&(U=e.currentMonth),Z===void 0&&(Z=e.currentYear),U===1&&(Z%4===0&&Z%100!==0||Z%400===0)?29:e.l10n.daysInMonth[U]}}}function r(){e.element=e.input=a,e.isOpen=!1,ge(),X(),W(),q(),n(),e.isMobile||P(),S(),(e.selectedDates.length||e.config.noCalendar)&&(e.config.enableTime&&m(e.config.noCalendar?e.latestSelectedDateObj:void 0),Zt(!1)),l();var U=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);!e.isMobile&&U&&re(),rt("onReady")}function o(){var U;return((U=e.calendarContainer)===null||U===void 0?void 0:U.getRootNode()).activeElement||document.activeElement}function s(U){return U.bind(e)}function l(){var U=e.config;U.weekNumbers===!1&&U.showMonths===1||U.noCalendar!==!0&&window.requestAnimationFrame(function(){if(e.calendarContainer!==void 0&&(e.calendarContainer.style.visibility="hidden",e.calendarContainer.style.display="block"),e.daysContainer!==void 0){var Z=(e.days.offsetWidth+1)*U.showMonths;e.daysContainer.style.width=Z+"px",e.calendarContainer.style.width=Z+(e.weekWrapper!==void 0?e.weekWrapper.offsetWidth:0)+"px",e.calendarContainer.style.removeProperty("visibility"),e.calendarContainer.style.removeProperty("display")}})}function u(U){if(e.selectedDates.length===0){var Z=e.config.minDate===void 0||Qr(new Date,e.config.minDate)>=0?new Date:new Date(e.config.minDate.getTime()),ce=Jh(e.config);Z.setHours(ce.hours,ce.minutes,ce.seconds,Z.getMilliseconds()),e.selectedDates=[Z],e.latestSelectedDateObj=Z}U!==void 0&&U.type!=="blur"&&Mi(U);var Ee=e._input.value;p(),Zt(),e._input.value!==Ee&&e._debouncedChange()}function h(U,Z){return U%12+12*mo(Z===e.l10n.amPM[1])}function c(U){switch(U%24){case 0:case 12:return 12;default:return U%12}}function p(){if(!(e.hourElement===void 0||e.minuteElement===void 0)){var U=(parseInt(e.hourElement.value.slice(-2),10)||0)%24,Z=(parseInt(e.minuteElement.value,10)||0)%60,ce=e.secondElement!==void 0?(parseInt(e.secondElement.value,10)||0)%60:0;e.amPM!==void 0&&(U=h(U,e.amPM.textContent));var Ee=e.config.minTime!==void 0||e.config.minDate&&e.minDateHasTime&&e.latestSelectedDateObj&&Qr(e.latestSelectedDateObj,e.config.minDate,!0)===0,ot=e.config.maxTime!==void 0||e.config.maxDate&&e.maxDateHasTime&&e.latestSelectedDateObj&&Qr(e.latestSelectedDateObj,e.config.maxDate,!0)===0;if(e.config.maxTime!==void 0&&e.config.minTime!==void 0&&e.config.minTime>e.config.maxTime){var pt=Qh(e.config.minTime.getHours(),e.config.minTime.getMinutes(),e.config.minTime.getSeconds()),ct=Qh(e.config.maxTime.getHours(),e.config.maxTime.getMinutes(),e.config.maxTime.getSeconds()),St=Qh(U,Z,ce);if(St>ct&&St<pt){var Bt=ib(pt);U=Bt[0],Z=Bt[1],ce=Bt[2]}}else{if(ot){var Ct=e.config.maxTime!==void 0?e.config.maxTime:e.config.maxDate;U=Math.min(U,Ct.getHours()),U===Ct.getHours()&&(Z=Math.min(Z,Ct.getMinutes())),Z===Ct.getMinutes()&&(ce=Math.min(ce,Ct.getSeconds()))}if(Ee){var vt=e.config.minTime!==void 0?e.config.minTime:e.config.minDate;U=Math.max(U,vt.getHours()),U===vt.getHours()&&Z<vt.getMinutes()&&(Z=vt.getMinutes()),Z===vt.getMinutes()&&(ce=Math.max(ce,vt.getSeconds()))}}v(U,Z,ce)}}function m(U){var Z=U||e.latestSelectedDateObj;Z&&Z instanceof Date&&v(Z.getHours(),Z.getMinutes(),Z.getSeconds())}function v(U,Z,ce){e.latestSelectedDateObj!==void 0&&e.latestSelectedDateObj.setHours(U%24,Z,ce||0,0),!(!e.hourElement||!e.minuteElement||e.isMobile)&&(e.hourElement.value=Lr(e.config.time_24hr?U:(12+U)%12+12*mo(U%12===0)),e.minuteElement.value=Lr(Z),e.amPM!==void 0&&(e.amPM.textContent=e.l10n.amPM[mo(U>=12)]),e.secondElement!==void 0&&(e.secondElement.value=Lr(ce)))}function _(U){var Z=Zr(U),ce=parseInt(Z.value)+(U.delta||0);(ce/1e3>1||U.key==="Enter"&&!/[^\d]/.test(ce.toString()))&&Ce(ce)}function C(U,Z,ce,Ee){if(Z instanceof Array)return Z.forEach(function(ot){return C(U,ot,ce,Ee)});if(U instanceof Array)return U.forEach(function(ot){return C(ot,Z,ce,Ee)});U.addEventListener(Z,ce,Ee),e._handlers.push({remove:function(){return U.removeEventListener(Z,ce,Ee)}})}function x(){rt("onChange")}function S(){if(e.config.wrap&&["open","close","toggle","clear"].forEach(function(ce){Array.prototype.forEach.call(e.element.querySelectorAll("[data-"+ce+"]"),function(Ee){return C(Ee,"click",e[ce])})}),e.isMobile){ke();return}var U=Xm(at,50);if(e._debouncedChange=Xm(x,rb),e.daysContainer&&!/iPhone|iPad|iPod/i.test(navigator.userAgent)&&C(e.daysContainer,"mouseover",function(ce){e.config.mode==="range"&&yt(Zr(ce))}),C(e._input,"keydown",Ge),e.calendarContainer!==void 0&&C(e.calendarContainer,"keydown",Ge),!e.config.inline&&!e.config.static&&C(window,"resize",U),window.ontouchstart!==void 0?C(window.document,"touchstart",ue):C(window.document,"mousedown",ue),C(window.document,"focus",ue,{capture:!0}),e.config.clickOpens===!0&&(C(e._input,"focus",e.open),C(e._input,"click",e.open)),e.daysContainer!==void 0&&(C(e.monthNav,"click",Fi),C(e.monthNav,["keyup","increment"],_),C(e.daysContainer,"click",ft)),e.timeContainer!==void 0&&e.minuteElement!==void 0&&e.hourElement!==void 0){var Z=function(ce){return Zr(ce).select()};C(e.timeContainer,["increment"],u),C(e.timeContainer,"blur",u,{capture:!0}),C(e.timeContainer,"click",D),C([e.hourElement,e.minuteElement],["focus","click"],Z),e.secondElement!==void 0&&C(e.secondElement,"focus",function(){return e.secondElement&&e.secondElement.select()}),e.amPM!==void 0&&C(e.amPM,"click",function(ce){u(ce)})}e.config.allowInput&&C(e._input,"blur",nt)}function y(U,Z){var ce=U!==void 0?e.parseDate(U):e.latestSelectedDateObj||(e.config.minDate&&e.config.minDate>e.now?e.config.minDate:e.config.maxDate&&e.config.maxDate<e.now?e.config.maxDate:e.now),Ee=e.currentYear,ot=e.currentMonth;try{ce!==void 0&&(e.currentYear=ce.getFullYear(),e.currentMonth=ce.getMonth())}catch(pt){pt.message="Invalid date supplied: "+ce,e.config.errorHandler(pt)}Z&&e.currentYear!==Ee&&(rt("onYearChange"),z()),Z&&(e.currentYear!==Ee||e.currentMonth!==ot)&&rt("onMonthChange"),e.redraw()}function D(U){var Z=Zr(U);~Z.className.indexOf("arrow")&&A(U,Z.classList.contains("arrowUp")?1:-1)}function A(U,Z,ce){var Ee=U&&Zr(U),ot=ce||Ee&&Ee.parentNode&&Ee.parentNode.firstChild,pt=ut("increment");pt.delta=Z,ot&&ot.dispatchEvent(pt)}function P(){var U=window.document.createDocumentFragment();if(e.calendarContainer=Pi("div","flatpickr-calendar"),e.calendarContainer.tabIndex=-1,!e.config.noCalendar){if(U.appendChild(qe()),e.innerContainer=Pi("div","flatpickr-innerContainer"),e.config.weekNumbers){var Z=Re(),ce=Z.weekWrapper,Ee=Z.weekNumbers;e.innerContainer.appendChild(ce),e.weekNumbers=Ee,e.weekWrapper=ce}e.rContainer=Pi("div","flatpickr-rContainer"),e.rContainer.appendChild(xe()),e.daysContainer||(e.daysContainer=Pi("div","flatpickr-days"),e.daysContainer.tabIndex=-1),J(),e.rContainer.appendChild(e.daysContainer),e.innerContainer.appendChild(e.rContainer),U.appendChild(e.innerContainer)}e.config.enableTime&&U.appendChild(De()),xr(e.calendarContainer,"rangeMode",e.config.mode==="range"),xr(e.calendarContainer,"animate",e.config.animate===!0),xr(e.calendarContainer,"multiMonth",e.config.showMonths>1),e.calendarContainer.appendChild(U);var ot=e.config.appendTo!==void 0&&e.config.appendTo.nodeType!==void 0;if((e.config.inline||e.config.static)&&(e.calendarContainer.classList.add(e.config.inline?"inline":"static"),e.config.inline&&(!ot&&e.element.parentNode?e.element.parentNode.insertBefore(e.calendarContainer,e._input.nextSibling):e.config.appendTo!==void 0&&e.config.appendTo.appendChild(e.calendarContainer)),e.config.static)){var pt=Pi("div","flatpickr-wrapper");e.element.parentNode&&e.element.parentNode.insertBefore(pt,e.element),pt.appendChild(e.element),e.altInput&&pt.appendChild(e.altInput),pt.appendChild(e.calendarContainer)}!e.config.static&&!e.config.inline&&(e.config.appendTo!==void 0?e.config.appendTo:window.document.body).appendChild(e.calendarContainer)}function M(U,Z,ce,Ee){var ot=be(Z,!0),pt=Pi("span",U,Z.getDate().toString());return pt.dateObj=Z,pt.$i=Ee,pt.setAttribute("aria-label",e.formatDate(Z,e.config.ariaDateFormat)),U.indexOf("hidden")===-1&&Qr(Z,e.now)===0&&(e.todayDateElem=pt,pt.classList.add("today"),pt.setAttribute("aria-current","date")),ot?(pt.tabIndex=-1,Rt(Z)&&(pt.classList.add("selected"),e.selectedDateElem=pt,e.config.mode==="range"&&(xr(pt,"startRange",e.selectedDates[0]&&Qr(Z,e.selectedDates[0],!0)===0),xr(pt,"endRange",e.selectedDates[1]&&Qr(Z,e.selectedDates[1],!0)===0),U==="nextMonthDay"&&pt.classList.add("inRange")))):pt.classList.add("flatpickr-disabled"),e.config.mode==="range"&&Ht(Z)&&!Rt(Z)&&pt.classList.add("inRange"),e.weekNumbers&&e.config.showMonths===1&&U!=="prevMonthDay"&&Ee%7===6&&e.weekNumbers.insertAdjacentHTML("beforeend","<span class='flatpickr-day'>"+e.config.getWeek(Z)+"</span>"),rt("onDayCreate",pt),pt}function B(U){U.focus(),e.config.mode==="range"&&yt(U)}function Q(U){for(var Z=U>0?0:e.config.showMonths-1,ce=U>0?e.config.showMonths:-1,Ee=Z;Ee!=ce;Ee+=U)for(var ot=e.daysContainer.children[Ee],pt=U>0?0:ot.children.length-1,ct=U>0?ot.children.length:-1,St=pt;St!=ct;St+=U){var Bt=ot.children[St];if(Bt.className.indexOf("hidden")===-1&&be(Bt.dateObj))return Bt}}function L(U,Z){for(var ce=U.className.indexOf("Month")===-1?U.dateObj.getMonth():e.currentMonth,Ee=Z>0?e.config.showMonths:-1,ot=Z>0?1:-1,pt=ce-e.currentMonth;pt!=Ee;pt+=ot)for(var ct=e.daysContainer.children[pt],St=ce-e.currentMonth===pt?U.$i+Z:Z<0?ct.children.length-1:0,Bt=ct.children.length,Ct=St;Ct>=0&&Ct<Bt&&Ct!=(Z>0?Bt:-1);Ct+=ot){var vt=ct.children[Ct];if(vt.className.indexOf("hidden")===-1&&be(vt.dateObj)&&Math.abs(U.$i-Ct)>=Math.abs(Z))return B(vt)}e.changeMonth(ot),le(Q(ot),0)}function le(U,Z){var ce=o(),Ee=Le(ce||document.body),ot=U!==void 0?U:Ee?ce:e.selectedDateElem!==void 0&&Le(e.selectedDateElem)?e.selectedDateElem:e.todayDateElem!==void 0&&Le(e.todayDateElem)?e.todayDateElem:Q(Z>0?1:-1);ot===void 0?e._input.focus():Ee?L(ot,Z):B(ot)}function _e(U,Z){for(var ce=(new Date(U,Z,1).getDay()-e.l10n.firstDayOfWeek+7)%7,Ee=e.utils.getDaysInMonth((Z-1+12)%12,U),ot=e.utils.getDaysInMonth(Z,U),pt=window.document.createDocumentFragment(),ct=e.config.showMonths>1,St=ct?"prevMonthDay hidden":"prevMonthDay",Bt=ct?"nextMonthDay hidden":"nextMonthDay",Ct=Ee+1-ce,vt=0;Ct<=Ee;Ct++,vt++)pt.appendChild(M("flatpickr-day "+St,new Date(U,Z-1,Ct),Ct,vt));for(Ct=1;Ct<=ot;Ct++,vt++)pt.appendChild(M("flatpickr-day",new Date(U,Z,Ct),Ct,vt));for(var ti=ot+1;ti<=42-ce&&(e.config.showMonths===1||vt%7!==0);ti++,vt++)pt.appendChild(M("flatpickr-day "+Bt,new Date(U,Z+1,ti%ot),ti,vt));var ki=Pi("div","dayContainer");return ki.appendChild(pt),ki}function J(){if(e.daysContainer!==void 0){Au(e.daysContainer),e.weekNumbers&&Au(e.weekNumbers);for(var U=document.createDocumentFragment(),Z=0;Z<e.config.showMonths;Z++){var ce=new Date(e.currentYear,e.currentMonth,1);ce.setMonth(e.currentMonth+Z),U.appendChild(_e(ce.getFullYear(),ce.getMonth()))}e.daysContainer.appendChild(U),e.days=e.daysContainer.firstChild,e.config.mode==="range"&&e.selectedDates.length===1&&yt()}}function z(){if(!(e.config.showMonths>1||e.config.monthSelectorType!=="dropdown")){var U=function(Ee){return e.config.minDate!==void 0&&e.currentYear===e.config.minDate.getFullYear()&&Ee<e.config.minDate.getMonth()?!1:!(e.config.maxDate!==void 0&&e.currentYear===e.config.maxDate.getFullYear()&&Ee>e.config.maxDate.getMonth())};e.monthsDropdownContainer.tabIndex=-1,e.monthsDropdownContainer.innerHTML="";for(var Z=0;Z<12;Z++)if(U(Z)){var ce=Pi("option","flatpickr-monthDropdown-month");ce.value=new Date(e.currentYear,Z).getMonth().toString(),ce.textContent=Iu(Z,e.config.shorthandCurrentMonth,e.l10n),ce.tabIndex=-1,e.currentMonth===Z&&(ce.selected=!0),e.monthsDropdownContainer.appendChild(ce)}}}function F(){var U=Pi("div","flatpickr-month"),Z=window.document.createDocumentFragment(),ce;e.config.showMonths>1||e.config.monthSelectorType==="static"?ce=Pi("span","cur-month"):(e.monthsDropdownContainer=Pi("select","flatpickr-monthDropdown-months"),e.monthsDropdownContainer.setAttribute("aria-label",e.l10n.monthAriaLabel),C(e.monthsDropdownContainer,"change",function(ct){var St=Zr(ct),Bt=parseInt(St.value,10);e.changeMonth(Bt-e.currentMonth),rt("onMonthChange")}),z(),ce=e.monthsDropdownContainer);var Ee=ku("cur-year",{tabindex:"-1"}),ot=Ee.getElementsByTagName("input")[0];ot.setAttribute("aria-label",e.l10n.yearAriaLabel),e.config.minDate&&ot.setAttribute("min",e.config.minDate.getFullYear().toString()),e.config.maxDate&&(ot.setAttribute("max",e.config.maxDate.getFullYear().toString()),ot.disabled=!!e.config.minDate&&e.config.minDate.getFullYear()===e.config.maxDate.getFullYear());var pt=Pi("div","flatpickr-current-month");return pt.appendChild(ce),pt.appendChild(Ee),Z.appendChild(pt),U.appendChild(Z),{container:U,yearElement:ot,monthElement:ce}}function ae(){Au(e.monthNav),e.monthNav.appendChild(e.prevMonthNav),e.config.showMonths&&(e.yearElements=[],e.monthElements=[]);for(var U=e.config.showMonths;U--;){var Z=F();e.yearElements.push(Z.yearElement),e.monthElements.push(Z.monthElement),e.monthNav.appendChild(Z.container)}e.monthNav.appendChild(e.nextMonthNav)}function qe(){return e.monthNav=Pi("div","flatpickr-months"),e.yearElements=[],e.monthElements=[],e.prevMonthNav=Pi("span","flatpickr-prev-month"),e.prevMonthNav.innerHTML=e.config.prevArrow,e.nextMonthNav=Pi("span","flatpickr-next-month"),e.nextMonthNav.innerHTML=e.config.nextArrow,ae(),Object.defineProperty(e,"_hidePrevMonthArrow",{get:function(){return e.__hidePrevMonthArrow},set:function(U){e.__hidePrevMonthArrow!==U&&(xr(e.prevMonthNav,"flatpickr-disabled",U),e.__hidePrevMonthArrow=U)}}),Object.defineProperty(e,"_hideNextMonthArrow",{get:function(){return e.__hideNextMonthArrow},set:function(U){e.__hideNextMonthArrow!==U&&(xr(e.nextMonthNav,"flatpickr-disabled",U),e.__hideNextMonthArrow=U)}}),e.currentYearElement=e.yearElements[0],Tt(),e.monthNav}function De(){e.calendarContainer.classList.add("hasTime"),e.config.noCalendar&&e.calendarContainer.classList.add("noCalendar");var U=Jh(e.config);e.timeContainer=Pi("div","flatpickr-time"),e.timeContainer.tabIndex=-1;var Z=Pi("span","flatpickr-time-separator",":"),ce=ku("flatpickr-hour",{"aria-label":e.l10n.hourAriaLabel});e.hourElement=ce.getElementsByTagName("input")[0];var Ee=ku("flatpickr-minute",{"aria-label":e.l10n.minuteAriaLabel});if(e.minuteElement=Ee.getElementsByTagName("input")[0],e.hourElement.tabIndex=e.minuteElement.tabIndex=-1,e.hourElement.value=Lr(e.latestSelectedDateObj?e.latestSelectedDateObj.getHours():e.config.time_24hr?U.hours:c(U.hours)),e.minuteElement.value=Lr(e.latestSelectedDateObj?e.latestSelectedDateObj.getMinutes():U.minutes),e.hourElement.setAttribute("step",e.config.hourIncrement.toString()),e.minuteElement.setAttribute("step",e.config.minuteIncrement.toString()),e.hourElement.setAttribute("min",e.config.time_24hr?"0":"1"),e.hourElement.setAttribute("max",e.config.time_24hr?"23":"12"),e.hourElement.setAttribute("maxlength","2"),e.minuteElement.setAttribute("min","0"),e.minuteElement.setAttribute("max","59"),e.minuteElement.setAttribute("maxlength","2"),e.timeContainer.appendChild(ce),e.timeContainer.appendChild(Z),e.timeContainer.appendChild(Ee),e.config.time_24hr&&e.timeContainer.classList.add("time24hr"),e.config.enableSeconds){e.timeContainer.classList.add("hasSeconds");var ot=ku("flatpickr-second");e.secondElement=ot.getElementsByTagName("input")[0],e.secondElement.value=Lr(e.latestSelectedDateObj?e.latestSelectedDateObj.getSeconds():U.seconds),e.secondElement.setAttribute("step",e.minuteElement.getAttribute("step")),e.secondElement.setAttribute("min","0"),e.secondElement.setAttribute("max","59"),e.secondElement.setAttribute("maxlength","2"),e.timeContainer.appendChild(Pi("span","flatpickr-time-separator",":")),e.timeContainer.appendChild(ot)}return e.config.time_24hr||(e.amPM=Pi("span","flatpickr-am-pm",e.l10n.amPM[mo((e.latestSelectedDateObj?e.hourElement.value:e.config.defaultHour)>11)]),e.amPM.title=e.l10n.toggleTitle,e.amPM.tabIndex=-1,e.timeContainer.appendChild(e.amPM)),e.timeContainer}function xe(){e.weekdayContainer?Au(e.weekdayContainer):e.weekdayContainer=Pi("div","flatpickr-weekdays");for(var U=e.config.showMonths;U--;){var Z=Pi("div","flatpickr-weekdaycontainer");e.weekdayContainer.appendChild(Z)}return Te(),e.weekdayContainer}function Te(){if(e.weekdayContainer){var U=e.l10n.firstDayOfWeek,Z=Zm(e.l10n.weekdays.shorthand);U>0&&U<Z.length&&(Z=Zm(Z.splice(U,Z.length),Z.splice(0,U)));for(var ce=e.config.showMonths;ce--;)e.weekdayContainer.children[ce].innerHTML=`
      <span class='flatpickr-weekday'>
        `+Z.join("</span><span class='flatpickr-weekday'>")+`
      </span>
      `}}function Re(){e.calendarContainer.classList.add("hasWeeks");var U=Pi("div","flatpickr-weekwrapper");U.appendChild(Pi("span","flatpickr-weekday",e.l10n.weekAbbreviation));var Z=Pi("div","flatpickr-weeks");return U.appendChild(Z),{weekWrapper:U,weekNumbers:Z}}function ne(U,Z){Z===void 0&&(Z=!0);var ce=Z?U:U-e.currentMonth;ce<0&&e._hidePrevMonthArrow===!0||ce>0&&e._hideNextMonthArrow===!0||(e.currentMonth+=ce,(e.currentMonth<0||e.currentMonth>11)&&(e.currentYear+=e.currentMonth>11?1:-1,e.currentMonth=(e.currentMonth+12)%12,rt("onYearChange"),z()),J(),rt("onMonthChange"),Tt())}function fe(U,Z){if(U===void 0&&(U=!0),Z===void 0&&(Z=!0),e.input.value="",e.altInput!==void 0&&(e.altInput.value=""),e.mobileInput!==void 0&&(e.mobileInput.value=""),e.selectedDates=[],e.latestSelectedDateObj=void 0,Z===!0&&(e.currentYear=e._initialDate.getFullYear(),e.currentMonth=e._initialDate.getMonth()),e.config.enableTime===!0){var ce=Jh(e.config),Ee=ce.hours,ot=ce.minutes,pt=ce.seconds;v(Ee,ot,pt)}e.redraw(),U&&rt("onChange")}function Be(){e.isOpen=!1,e.isMobile||(e.calendarContainer!==void 0&&e.calendarContainer.classList.remove("open"),e._input!==void 0&&e._input.classList.remove("active")),rt("onClose")}function Ye(){e.config!==void 0&&rt("onDestroy");for(var U=e._handlers.length;U--;)e._handlers[U].remove();if(e._handlers=[],e.mobileInput)e.mobileInput.parentNode&&e.mobileInput.parentNode.removeChild(e.mobileInput),e.mobileInput=void 0;else if(e.calendarContainer&&e.calendarContainer.parentNode)if(e.config.static&&e.calendarContainer.parentNode){var Z=e.calendarContainer.parentNode;if(Z.lastChild&&Z.removeChild(Z.lastChild),Z.parentNode){for(;Z.firstChild;)Z.parentNode.insertBefore(Z.firstChild,Z);Z.parentNode.removeChild(Z)}}else e.calendarContainer.parentNode.removeChild(e.calendarContainer);e.altInput&&(e.input.type="text",e.altInput.parentNode&&e.altInput.parentNode.removeChild(e.altInput),delete e.altInput),e.input&&(e.input.type=e.input._type,e.input.classList.remove("flatpickr-input"),e.input.removeAttribute("readonly")),["_showTimeInput","latestSelectedDateObj","_hideNextMonthArrow","_hidePrevMonthArrow","__hideNextMonthArrow","__hidePrevMonthArrow","isMobile","isOpen","selectedDateElem","minDateHasTime","maxDateHasTime","days","daysContainer","_input","_positionElement","innerContainer","rContainer","monthNav","todayDateElem","calendarContainer","weekdayContainer","prevMonthNav","nextMonthNav","monthsDropdownContainer","currentMonthElement","currentYearElement","navigationCurrentMonth","selectedDateElem","config"].forEach(function(ce){try{delete e[ce]}catch{}})}function Ve(U){return e.calendarContainer.contains(U)}function ue(U){if(e.isOpen&&!e.config.inline){var Z=Zr(U),ce=Ve(Z),Ee=Z===e.input||Z===e.altInput||e.element.contains(Z)||U.path&&U.path.indexOf&&(~U.path.indexOf(e.input)||~U.path.indexOf(e.altInput)),ot=!Ee&&!ce&&!Ve(U.relatedTarget),pt=!e.config.ignoredFocusElements.some(function(ct){return ct.contains(Z)});ot&&pt&&(e.config.allowInput&&e.setDate(e._input.value,!1,e.config.altInput?e.config.altFormat:e.config.dateFormat),e.timeContainer!==void 0&&e.minuteElement!==void 0&&e.hourElement!==void 0&&e.input.value!==""&&e.input.value!==void 0&&u(),e.close(),e.config&&e.config.mode==="range"&&e.selectedDates.length===1&&e.clear(!1))}}function Ce(U){if(!(!U||e.config.minDate&&U<e.config.minDate.getFullYear()||e.config.maxDate&&U>e.config.maxDate.getFullYear())){var Z=U,ce=e.currentYear!==Z;e.currentYear=Z||e.currentYear,e.config.maxDate&&e.currentYear===e.config.maxDate.getFullYear()?e.currentMonth=Math.min(e.config.maxDate.getMonth(),e.currentMonth):e.config.minDate&&e.currentYear===e.config.minDate.getFullYear()&&(e.currentMonth=Math.max(e.config.minDate.getMonth(),e.currentMonth)),ce&&(e.redraw(),rt("onYearChange"),z())}}function be(U,Z){var ce;Z===void 0&&(Z=!0);var Ee=e.parseDate(U,void 0,Z);if(e.config.minDate&&Ee&&Qr(Ee,e.config.minDate,Z!==void 0?Z:!e.minDateHasTime)<0||e.config.maxDate&&Ee&&Qr(Ee,e.config.maxDate,Z!==void 0?Z:!e.maxDateHasTime)>0)return!1;if(!e.config.enable&&e.config.disable.length===0)return!0;if(Ee===void 0)return!1;for(var ot=!!e.config.enable,pt=(ce=e.config.enable)!==null&&ce!==void 0?ce:e.config.disable,ct=0,St=void 0;ct<pt.length;ct++){if(St=pt[ct],typeof St=="function"&&St(Ee))return ot;if(St instanceof Date&&Ee!==void 0&&St.getTime()===Ee.getTime())return ot;if(typeof St=="string"){var Bt=e.parseDate(St,void 0,!0);return Bt&&Bt.getTime()===Ee.getTime()?ot:!ot}else if(typeof St=="object"&&Ee!==void 0&&St.from&&St.to&&Ee.getTime()>=St.from.getTime()&&Ee.getTime()<=St.to.getTime())return ot}return!ot}function Le(U){return e.daysContainer!==void 0?U.className.indexOf("hidden")===-1&&U.className.indexOf("flatpickr-disabled")===-1&&e.daysContainer.contains(U):!1}function nt(U){var Z=U.target===e._input,ce=e._input.value.trimEnd()!==Ut();Z&&ce&&!(U.relatedTarget&&Ve(U.relatedTarget))&&e.setDate(e._input.value,!0,U.target===e.altInput?e.config.altFormat:e.config.dateFormat)}function Ge(U){var Z=Zr(U),ce=e.config.wrap?a.contains(Z):Z===e._input,Ee=e.config.allowInput,ot=e.isOpen&&(!Ee||!ce),pt=e.config.inline&&ce&&!Ee;if(U.keyCode===13&&ce){if(Ee)return e.setDate(e._input.value,!0,Z===e.altInput?e.config.altFormat:e.config.dateFormat),e.close(),Z.blur();e.open()}else if(Ve(Z)||ot||pt){var ct=!!e.timeContainer&&e.timeContainer.contains(Z);switch(U.keyCode){case 13:ct?(U.preventDefault(),u(),Ue()):ft(U);break;case 27:U.preventDefault(),Ue();break;case 8:case 46:ce&&!e.config.allowInput&&(U.preventDefault(),e.clear());break;case 37:case 39:if(!ct&&!ce){U.preventDefault();var St=o();if(e.daysContainer!==void 0&&(Ee===!1||St&&Le(St))){var Bt=U.keyCode===39?1:-1;U.ctrlKey?(U.stopPropagation(),ne(Bt),le(Q(1),0)):le(void 0,Bt)}}else e.hourElement&&e.hourElement.focus();break;case 38:case 40:U.preventDefault();var Ct=U.keyCode===40?1:-1;e.daysContainer&&Z.$i!==void 0||Z===e.input||Z===e.altInput?U.ctrlKey?(U.stopPropagation(),Ce(e.currentYear-Ct),le(Q(1),0)):ct||le(void 0,Ct*7):Z===e.currentYearElement?Ce(e.currentYear-Ct):e.config.enableTime&&(!ct&&e.hourElement&&e.hourElement.focus(),u(U),e._debouncedChange());break;case 9:if(ct){var vt=[e.hourElement,e.minuteElement,e.secondElement,e.amPM].concat(e.pluginElements).filter(function(Ui){return Ui}),ti=vt.indexOf(Z);if(ti!==-1){var ki=vt[ti+(U.shiftKey?-1:1)];U.preventDefault(),(ki||e._input).focus()}}else!e.config.noCalendar&&e.daysContainer&&e.daysContainer.contains(Z)&&U.shiftKey&&(U.preventDefault(),e._input.focus());break}}if(e.amPM!==void 0&&Z===e.amPM)switch(U.key){case e.l10n.amPM[0].charAt(0):case e.l10n.amPM[0].charAt(0).toLowerCase():e.amPM.textContent=e.l10n.amPM[0],p(),Zt();break;case e.l10n.amPM[1].charAt(0):case e.l10n.amPM[1].charAt(0).toLowerCase():e.amPM.textContent=e.l10n.amPM[1],p(),Zt();break}(ce||Ve(Z))&&rt("onKeyDown",U)}function yt(U,Z){if(Z===void 0&&(Z="flatpickr-day"),!(e.selectedDates.length!==1||U&&(!U.classList.contains(Z)||U.classList.contains("flatpickr-disabled")))){for(var ce=U?U.dateObj.getTime():e.days.firstElementChild.dateObj.getTime(),Ee=e.parseDate(e.selectedDates[0],void 0,!0).getTime(),ot=Math.min(ce,e.selectedDates[0].getTime()),pt=Math.max(ce,e.selectedDates[0].getTime()),ct=!1,St=0,Bt=0,Ct=ot;Ct<pt;Ct+=nb.DAY)be(new Date(Ct),!0)||(ct=ct||Ct>ot&&Ct<pt,Ct<Ee&&(!St||Ct>St)?St=Ct:Ct>Ee&&(!Bt||Ct<Bt)&&(Bt=Ct));var vt=Array.from(e.rContainer.querySelectorAll("*:nth-child(-n+"+e.config.showMonths+") > ."+Z));vt.forEach(function(ti){var ki=ti.dateObj,Ui=ki.getTime(),Qt=St>0&&Ui<St||Bt>0&&Ui>Bt;if(Qt){ti.classList.add("notAllowed"),["inRange","startRange","endRange"].forEach(function(Ni){ti.classList.remove(Ni)});return}else if(ct&&!Qt)return;["startRange","inRange","endRange","notAllowed"].forEach(function(Ni){ti.classList.remove(Ni)}),U!==void 0&&(U.classList.add(ce<=e.selectedDates[0].getTime()?"startRange":"endRange"),Ee<ce&&Ui===Ee?ti.classList.add("startRange"):Ee>ce&&Ui===Ee&&ti.classList.add("endRange"),Ui>=St&&(Bt===0||Ui<=Bt)&&tb(Ui,Ee,ce)&&ti.classList.add("inRange"))})}}function at(){e.isOpen&&!e.config.static&&!e.config.inline&&re()}function k(U,Z){if(Z===void 0&&(Z=e._positionElement),e.isMobile===!0){if(U){U.preventDefault();var ce=Zr(U);ce&&ce.blur()}e.mobileInput!==void 0&&(e.mobileInput.focus(),e.mobileInput.click()),rt("onOpen");return}else if(e._input.disabled||e.config.inline)return;var Ee=e.isOpen;e.isOpen=!0,Ee||(e.calendarContainer.classList.add("open"),e._input.classList.add("active"),rt("onOpen"),re(Z)),e.config.enableTime===!0&&e.config.noCalendar===!0&&e.config.allowInput===!1&&(U===void 0||!e.timeContainer.contains(U.relatedTarget))&&setTimeout(function(){return e.hourElement.select()},50)}function te(U){return function(Z){var ce=e.config["_"+U+"Date"]=e.parseDate(Z,e.config.dateFormat),Ee=e.config["_"+(U==="min"?"max":"min")+"Date"];ce!==void 0&&(e[U==="min"?"minDateHasTime":"maxDateHasTime"]=ce.getHours()>0||ce.getMinutes()>0||ce.getSeconds()>0),e.selectedDates&&(e.selectedDates=e.selectedDates.filter(function(ot){return be(ot)}),!e.selectedDates.length&&U==="min"&&m(ce),Zt()),e.daysContainer&&(pe(),ce!==void 0?e.currentYearElement[U]=ce.getFullYear().toString():e.currentYearElement.removeAttribute(U),e.currentYearElement.disabled=!!Ee&&ce!==void 0&&Ee.getFullYear()===ce.getFullYear())}}function ge(){var U=["wrap","weekNumbers","allowInput","allowInvalidPreload","clickOpens","time_24hr","enableTime","noCalendar","altInput","shorthandCurrentMonth","inline","static","enableSeconds","disableMobile"],Z=mr(mr({},JSON.parse(JSON.stringify(a.dataset||{}))),t),ce={};e.config.parseDate=Z.parseDate,e.config.formatDate=Z.formatDate,Object.defineProperty(e.config,"enable",{get:function(){return e.config._enable},set:function(vt){e.config._enable=Ci(vt)}}),Object.defineProperty(e.config,"disable",{get:function(){return e.config._disable},set:function(vt){e.config._disable=Ci(vt)}});var Ee=Z.mode==="time";if(!Z.dateFormat&&(Z.enableTime||Ee)){var ot=On.defaultConfig.dateFormat||aa.dateFormat;ce.dateFormat=Z.noCalendar||Ee?"H:i"+(Z.enableSeconds?":S":""):ot+" H:i"+(Z.enableSeconds?":S":"")}if(Z.altInput&&(Z.enableTime||Ee)&&!Z.altFormat){var pt=On.defaultConfig.altFormat||aa.altFormat;ce.altFormat=Z.noCalendar||Ee?"h:i"+(Z.enableSeconds?":S K":" K"):pt+(" h:i"+(Z.enableSeconds?":S":"")+" K")}Object.defineProperty(e.config,"minDate",{get:function(){return e.config._minDate},set:te("min")}),Object.defineProperty(e.config,"maxDate",{get:function(){return e.config._maxDate},set:te("max")});var ct=function(vt){return function(ti){e.config[vt==="min"?"_minTime":"_maxTime"]=e.parseDate(ti,"H:i:S")}};Object.defineProperty(e.config,"minTime",{get:function(){return e.config._minTime},set:ct("min")}),Object.defineProperty(e.config,"maxTime",{get:function(){return e.config._maxTime},set:ct("max")}),Z.mode==="time"&&(e.config.noCalendar=!0,e.config.enableTime=!0),Object.assign(e.config,ce,Z);for(var St=0;St<U.length;St++)e.config[U[St]]=e.config[U[St]]===!0||e.config[U[St]]==="true";Xh.filter(function(vt){return e.config[vt]!==void 0}).forEach(function(vt){e.config[vt]=qh(e.config[vt]||[]).map(s)}),e.isMobile=!e.config.disableMobile&&!e.config.inline&&e.config.mode==="single"&&!e.config.disable.length&&!e.config.enable&&!e.config.weekNumbers&&/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);for(var St=0;St<e.config.plugins.length;St++){var Bt=e.config.plugins[St](e)||{};for(var Ct in Bt)Xh.indexOf(Ct)>-1?e.config[Ct]=qh(Bt[Ct]).map(s).concat(e.config[Ct]):typeof Z[Ct]>"u"&&(e.config[Ct]=Bt[Ct])}Z.altInputClass||(e.config.altInputClass=$().className+" "+e.config.altInputClass),rt("onParseConfig")}function $(){return e.config.wrap?a.querySelector("[data-input]"):a}function X(){typeof e.config.locale!="object"&&typeof On.l10ns[e.config.locale]>"u"&&e.config.errorHandler(new Error("flatpickr: invalid locale "+e.config.locale)),e.l10n=mr(mr({},On.l10ns.default),typeof e.config.locale=="object"?e.config.locale:e.config.locale!=="default"?On.l10ns[e.config.locale]:void 0),Ol.D="("+e.l10n.weekdays.shorthand.join("|")+")",Ol.l="("+e.l10n.weekdays.longhand.join("|")+")",Ol.M="("+e.l10n.months.shorthand.join("|")+")",Ol.F="("+e.l10n.months.longhand.join("|")+")",Ol.K="("+e.l10n.amPM[0]+"|"+e.l10n.amPM[1]+"|"+e.l10n.amPM[0].toLowerCase()+"|"+e.l10n.amPM[1].toLowerCase()+")";var U=mr(mr({},t),JSON.parse(JSON.stringify(a.dataset||{})));U.time_24hr===void 0&&On.defaultConfig.time_24hr===void 0&&(e.config.time_24hr=e.l10n.time_24hr),e.formatDate=Km(e),e.parseDate=Zh({config:e.config,l10n:e.l10n})}function re(U){if(typeof e.config.position=="function")return void e.config.position(e,U);if(e.calendarContainer!==void 0){rt("onPreCalendarPosition");var Z=U||e._positionElement,ce=Array.prototype.reduce.call(e.calendarContainer.children,function(Wi,Li){return Wi+Li.offsetHeight},0),Ee=e.calendarContainer.offsetWidth,ot=e.config.position.split(" "),pt=ot[0],ct=ot.length>1?ot[1]:null,St=Z.getBoundingClientRect(),Bt=window.innerHeight-St.bottom,Ct=pt==="above"||pt!=="below"&&Bt<ce&&St.top>ce,vt=window.pageYOffset+St.top+(Ct?-ce-2:Z.offsetHeight+2);if(xr(e.calendarContainer,"arrowTop",!Ct),xr(e.calendarContainer,"arrowBottom",Ct),!e.config.inline){var ti=window.pageXOffset+St.left,ki=!1,Ui=!1;ct==="center"?(ti-=(Ee-St.width)/2,ki=!0):ct==="right"&&(ti-=Ee-St.width,Ui=!0),xr(e.calendarContainer,"arrowLeft",!ki&&!Ui),xr(e.calendarContainer,"arrowCenter",ki),xr(e.calendarContainer,"arrowRight",Ui);var Qt=window.document.body.offsetWidth-(window.pageXOffset+St.right),Ni=ti+Ee>window.document.body.offsetWidth,Ln=Qt+Ee>window.document.body.offsetWidth;if(xr(e.calendarContainer,"rightMost",Ni),!e.config.static)if(e.calendarContainer.style.top=vt+"px",!Ni)e.calendarContainer.style.left=ti+"px",e.calendarContainer.style.right="auto";else if(!Ln)e.calendarContainer.style.left="auto",e.calendarContainer.style.right=Qt+"px";else{var mn=Fe();if(mn===void 0)return;var _t=window.document.body.offsetWidth,Se=Math.max(0,_t/2-Ee/2),Xe=".flatpickr-calendar.centerMost:before",wt=".flatpickr-calendar.centerMost:after",ii=mn.cssRules.length,Gi="{left:"+St.left+"px;right:auto;}";xr(e.calendarContainer,"rightMost",!1),xr(e.calendarContainer,"centerMost",!0),mn.insertRule(Xe+","+wt+Gi,ii),e.calendarContainer.style.left=Se+"px",e.calendarContainer.style.right="auto"}}}}function Fe(){for(var U=null,Z=0;Z<document.styleSheets.length;Z++){var ce=document.styleSheets[Z];if(ce.cssRules){try{ce.cssRules}catch{continue}U=ce;break}}return U??Me()}function Me(){var U=document.createElement("style");return document.head.appendChild(U),U.sheet}function pe(){e.config.noCalendar||e.isMobile||(z(),Tt(),J())}function Ue(){e._input.focus(),window.navigator.userAgent.indexOf("MSIE")!==-1||navigator.msMaxTouchPoints!==void 0?setTimeout(e.close,0):e.close()}function ft(U){U.preventDefault(),U.stopPropagation();var Z=function(vt){return vt.classList&&vt.classList.contains("flatpickr-day")&&!vt.classList.contains("flatpickr-disabled")&&!vt.classList.contains("notAllowed")},ce=qm(Zr(U),Z);if(ce!==void 0){var Ee=ce,ot=e.latestSelectedDateObj=new Date(Ee.dateObj.getTime()),pt=(ot.getMonth()<e.currentMonth||ot.getMonth()>e.currentMonth+e.config.showMonths-1)&&e.config.mode!=="range";if(e.selectedDateElem=Ee,e.config.mode==="single")e.selectedDates=[ot];else if(e.config.mode==="multiple"){var ct=Rt(ot);ct?e.selectedDates.splice(parseInt(ct),1):e.selectedDates.push(ot)}else e.config.mode==="range"&&(e.selectedDates.length===2&&e.clear(!1,!1),e.latestSelectedDateObj=ot,e.selectedDates.push(ot),Qr(ot,e.selectedDates[0],!0)!==0&&e.selectedDates.sort(function(vt,ti){return vt.getTime()-ti.getTime()}));if(p(),pt){var St=e.currentYear!==ot.getFullYear();e.currentYear=ot.getFullYear(),e.currentMonth=ot.getMonth(),St&&(rt("onYearChange"),z()),rt("onMonthChange")}if(Tt(),J(),Zt(),!pt&&e.config.mode!=="range"&&e.config.showMonths===1?B(Ee):e.selectedDateElem!==void 0&&e.hourElement===void 0&&e.selectedDateElem&&e.selectedDateElem.focus(),e.hourElement!==void 0&&e.hourElement!==void 0&&e.hourElement.focus(),e.config.closeOnSelect){var Bt=e.config.mode==="single"&&!e.config.enableTime,Ct=e.config.mode==="range"&&e.selectedDates.length===2&&!e.config.enableTime;(Bt||Ct)&&Ue()}x()}}var ze={locale:[X,Te],showMonths:[ae,l,xe],minDate:[y],maxDate:[y],positionElement:[me],clickOpens:[function(){e.config.clickOpens===!0?(C(e._input,"focus",e.open),C(e._input,"click",e.open)):(e._input.removeEventListener("focus",e.open),e._input.removeEventListener("click",e.open))}]};function Ne(U,Z){if(U!==null&&typeof U=="object"){Object.assign(e.config,U);for(var ce in U)ze[ce]!==void 0&&ze[ce].forEach(function(Ee){return Ee()})}else e.config[U]=Z,ze[U]!==void 0?ze[U].forEach(function(Ee){return Ee()}):Xh.indexOf(U)>-1&&(e.config[U]=qh(Z));e.redraw(),Zt(!0)}function Xt(U,Z){var ce=[];if(U instanceof Array)ce=U.map(function(Ee){return e.parseDate(Ee,Z)});else if(U instanceof Date||typeof U=="number")ce=[e.parseDate(U,Z)];else if(typeof U=="string")switch(e.config.mode){case"single":case"time":ce=[e.parseDate(U,Z)];break;case"multiple":ce=U.split(e.config.conjunction).map(function(Ee){return e.parseDate(Ee,Z)});break;case"range":ce=U.split(e.l10n.rangeSeparator).map(function(Ee){return e.parseDate(Ee,Z)});break}else e.config.errorHandler(new Error("Invalid date supplied: "+JSON.stringify(U)));e.selectedDates=e.config.allowInvalidPreload?ce:ce.filter(function(Ee){return Ee instanceof Date&&be(Ee,!1)}),e.config.mode==="range"&&e.selectedDates.sort(function(Ee,ot){return Ee.getTime()-ot.getTime()})}function It(U,Z,ce){if(Z===void 0&&(Z=!1),ce===void 0&&(ce=e.config.dateFormat),U!==0&&!U||U instanceof Array&&U.length===0)return e.clear(Z);Xt(U,ce),e.latestSelectedDateObj=e.selectedDates[e.selectedDates.length-1],e.redraw(),y(void 0,Z),m(),e.selectedDates.length===0&&e.clear(!1),Zt(Z),Z&&rt("onChange")}function Ci(U){return U.slice().map(function(Z){return typeof Z=="string"||typeof Z=="number"||Z instanceof Date?e.parseDate(Z,void 0,!0):Z&&typeof Z=="object"&&Z.from&&Z.to?{from:e.parseDate(Z.from,void 0),to:e.parseDate(Z.to,void 0)}:Z}).filter(function(Z){return Z})}function q(){e.selectedDates=[],e.now=e.parseDate(e.config.now)||new Date;var U=e.config.defaultDate||((e.input.nodeName==="INPUT"||e.input.nodeName==="TEXTAREA")&&e.input.placeholder&&e.input.value===e.input.placeholder?null:e.input.value);U&&Xt(U,e.config.dateFormat),e._initialDate=e.selectedDates.length>0?e.selectedDates[0]:e.config.minDate&&e.config.minDate.getTime()>e.now.getTime()?e.config.minDate:e.config.maxDate&&e.config.maxDate.getTime()<e.now.getTime()?e.config.maxDate:e.now,e.currentYear=e._initialDate.getFullYear(),e.currentMonth=e._initialDate.getMonth(),e.selectedDates.length>0&&(e.latestSelectedDateObj=e.selectedDates[0]),e.config.minTime!==void 0&&(e.config.minTime=e.parseDate(e.config.minTime,"H:i")),e.config.maxTime!==void 0&&(e.config.maxTime=e.parseDate(e.config.maxTime,"H:i")),e.minDateHasTime=!!e.config.minDate&&(e.config.minDate.getHours()>0||e.config.minDate.getMinutes()>0||e.config.minDate.getSeconds()>0),e.maxDateHasTime=!!e.config.maxDate&&(e.config.maxDate.getHours()>0||e.config.maxDate.getMinutes()>0||e.config.maxDate.getSeconds()>0)}function W(){if(e.input=$(),!e.input){e.config.errorHandler(new Error("Invalid input element specified"));return}e.input._type=e.input.type,e.input.type="text",e.input.classList.add("flatpickr-input"),e._input=e.input,e.config.altInput&&(e.altInput=Pi(e.input.nodeName,e.config.altInputClass),e._input=e.altInput,e.altInput.placeholder=e.input.placeholder,e.altInput.disabled=e.input.disabled,e.altInput.required=e.input.required,e.altInput.tabIndex=e.input.tabIndex,e.altInput.type="text",e.input.setAttribute("type","hidden"),!e.config.static&&e.input.parentNode&&e.input.parentNode.insertBefore(e.altInput,e.input.nextSibling)),e.config.allowInput||e._input.setAttribute("readonly","readonly"),me()}function me(){e._positionElement=e.config.positionElement||e._input}function ke(){var U=e.config.enableTime?e.config.noCalendar?"time":"datetime-local":"date";e.mobileInput=Pi("input",e.input.className+" flatpickr-mobile"),e.mobileInput.tabIndex=1,e.mobileInput.type=U,e.mobileInput.disabled=e.input.disabled,e.mobileInput.required=e.input.required,e.mobileInput.placeholder=e.input.placeholder,e.mobileFormatStr=U==="datetime-local"?"Y-m-d\\TH:i:S":U==="date"?"Y-m-d":"H:i:S",e.selectedDates.length>0&&(e.mobileInput.defaultValue=e.mobileInput.value=e.formatDate(e.selectedDates[0],e.mobileFormatStr)),e.config.minDate&&(e.mobileInput.min=e.formatDate(e.config.minDate,"Y-m-d")),e.config.maxDate&&(e.mobileInput.max=e.formatDate(e.config.maxDate,"Y-m-d")),e.input.getAttribute("step")&&(e.mobileInput.step=String(e.input.getAttribute("step"))),e.input.type="hidden",e.altInput!==void 0&&(e.altInput.type="hidden");try{e.input.parentNode&&e.input.parentNode.insertBefore(e.mobileInput,e.input.nextSibling)}catch{}C(e.mobileInput,"change",function(Z){e.setDate(Zr(Z).value,!1,e.mobileFormatStr),rt("onChange"),rt("onClose")})}function st(U){if(e.isOpen===!0)return e.close();e.open(U)}function rt(U,Z){if(e.config!==void 0){var ce=e.config[U];if(ce!==void 0&&ce.length>0)for(var Ee=0;ce[Ee]&&Ee<ce.length;Ee++)ce[Ee](e.selectedDates,e.input.value,e,Z);U==="onChange"&&(e.input.dispatchEvent(ut("change")),e.input.dispatchEvent(ut("input")))}}function ut(U){var Z=document.createEvent("Event");return Z.initEvent(U,!0,!0),Z}function Rt(U){for(var Z=0;Z<e.selectedDates.length;Z++){var ce=e.selectedDates[Z];if(ce instanceof Date&&Qr(ce,U)===0)return""+Z}return!1}function Ht(U){return e.config.mode!=="range"||e.selectedDates.length<2?!1:Qr(U,e.selectedDates[0])>=0&&Qr(U,e.selectedDates[1])<=0}function Tt(){e.config.noCalendar||e.isMobile||!e.monthNav||(e.yearElements.forEach(function(U,Z){var ce=new Date(e.currentYear,e.currentMonth,1);ce.setMonth(e.currentMonth+Z),e.config.showMonths>1||e.config.monthSelectorType==="static"?e.monthElements[Z].textContent=Iu(ce.getMonth(),e.config.shorthandCurrentMonth,e.l10n)+" ":e.monthsDropdownContainer.value=ce.getMonth().toString(),U.value=ce.getFullYear().toString()}),e._hidePrevMonthArrow=e.config.minDate!==void 0&&(e.currentYear===e.config.minDate.getFullYear()?e.currentMonth<=e.config.minDate.getMonth():e.currentYear<e.config.minDate.getFullYear()),e._hideNextMonthArrow=e.config.maxDate!==void 0&&(e.currentYear===e.config.maxDate.getFullYear()?e.currentMonth+1>e.config.maxDate.getMonth():e.currentYear>e.config.maxDate.getFullYear()))}function Ut(U){var Z=U||(e.config.altInput?e.config.altFormat:e.config.dateFormat);return e.selectedDates.map(function(ce){return e.formatDate(ce,Z)}).filter(function(ce,Ee,ot){return e.config.mode!=="range"||e.config.enableTime||ot.indexOf(ce)===Ee}).join(e.config.mode!=="range"?e.config.conjunction:e.l10n.rangeSeparator)}function Zt(U){U===void 0&&(U=!0),e.mobileInput!==void 0&&e.mobileFormatStr&&(e.mobileInput.value=e.latestSelectedDateObj!==void 0?e.formatDate(e.latestSelectedDateObj,e.mobileFormatStr):""),e.input.value=Ut(e.config.dateFormat),e.altInput!==void 0&&(e.altInput.value=Ut(e.config.altFormat)),U!==!1&&rt("onValueUpdate")}function Fi(U){var Z=Zr(U),ce=e.prevMonthNav.contains(Z),Ee=e.nextMonthNav.contains(Z);ce||Ee?ne(ce?-1:1):e.yearElements.indexOf(Z)>=0?Z.select():Z.classList.contains("arrowUp")?e.changeYear(e.currentYear+1):Z.classList.contains("arrowDown")&&e.changeYear(e.currentYear-1)}function Mi(U){U.preventDefault();var Z=U.type==="keydown",ce=Zr(U),Ee=ce;e.amPM!==void 0&&ce===e.amPM&&(e.amPM.textContent=e.l10n.amPM[mo(e.amPM.textContent===e.l10n.amPM[0])]);var ot=parseFloat(Ee.getAttribute("min")),pt=parseFloat(Ee.getAttribute("max")),ct=parseFloat(Ee.getAttribute("step")),St=parseInt(Ee.value,10),Bt=U.delta||(Z?U.which===38?1:-1:0),Ct=St+ct*Bt;if(typeof Ee.value<"u"&&Ee.value.length===2){var vt=Ee===e.hourElement,ti=Ee===e.minuteElement;Ct<ot?(Ct=pt+Ct+mo(!vt)+(mo(vt)&&mo(!e.amPM)),ti&&A(void 0,-1,e.hourElement)):Ct>pt&&(Ct=Ee===e.hourElement?Ct-pt-mo(!e.amPM):ot,ti&&A(void 0,1,e.hourElement)),e.amPM&&vt&&(ct===1?Ct+St===23:Math.abs(Ct-St)>ct)&&(e.amPM.textContent=e.l10n.amPM[mo(e.amPM.textContent===e.l10n.amPM[0])]),Ee.value=Lr(Ct)}}return r(),e}function da(a,t){for(var e=Array.prototype.slice.call(a).filter(function(s){return s instanceof HTMLElement}),n=[],r=0;r<e.length;r++){var o=e[r];try{if(o.getAttribute("data-fp-omit")!==null)continue;o._flatpickr!==void 0&&(o._flatpickr.destroy(),o._flatpickr=void 0),o._flatpickr=ob(o,t||{}),n.push(o._flatpickr)}catch(s){console.error(s)}}return n.length===1?n[0]:n}typeof HTMLElement<"u"&&typeof HTMLCollection<"u"&&typeof NodeList<"u"&&(HTMLCollection.prototype.flatpickr=NodeList.prototype.flatpickr=function(a){return da(this,a)},HTMLElement.prototype.flatpickr=function(a){return da([this],a)});var On=function(a,t){return typeof a=="string"?da(window.document.querySelectorAll(a),t):a instanceof Node?da([a],t):da(a,t)};On.defaultConfig={},On.l10ns={en:mr({},dd),default:mr({},dd)},On.localize=function(a){On.l10ns.default=mr(mr({},On.l10ns.default),a)},On.setDefaults=function(a){On.defaultConfig=mr(mr({},On.defaultConfig),a)},On.parseDate=Zh({}),On.formatDate=Km({}),On.compareDates=Qr,typeof jQuery<"u"&&typeof jQuery.fn<"u"&&(jQuery.fn.flatpickr=function(a){return da(this,a)}),Date.prototype.fp_incr=function(a){return new Date(this.getFullYear(),this.getMonth(),this.getDate()+(typeof a=="string"?parseInt(a,10):a))},typeof window<"u"&&(window.flatpickr=On);const cd=Object.freeze(Object.defineProperty({__proto__:null,default:On},Symbol.toStringTag,{value:"Module"}));var ef,tf;const sb=(ef=cd==null?void 0:On)!==null&&ef!==void 0?ef:cd,Qm=(tf=ps==null?void 0:$s)!==null&&tf!==void 0?tf:ps;class Jm{constructor(t){this.translaterService=t,this._clearFilterTriggered=!1,this._shouldTriggerQuery=!0,this.inputFilterType="range",this.searchTerms=[],this._bindEventService=new Fn}get gridOptions(){return this.grid&&this.grid.getOptions?this.grid.getOptions():{}}get columnFilter(){return this.columnDef&&this.columnDef.filter||{}}get currentDateOrDates(){return this._currentDateOrDates}get defaultOperator(){return this.inputFilterType==="compound"?Lt.empty:this.gridOptions.defaultFilterRangeOperator||Lt.rangeInclusive}get flatpickrOptions(){return this._flatpickrOptions||{}}get operator(){var t,e;return this.inputFilterType==="compound"?this._operator||this.columnFilter.operator||this.defaultOperator:(e=(t=this.columnFilter)===null||t===void 0?void 0:t.operator)!==null&&e!==void 0?e:this.defaultOperator}set operator(t){this.inputFilterType==="compound"?this._operator=t:this.columnFilter&&(this.columnFilter.operator=t)}init(t){var e;if(!t)throw new Error('[Slickgrid-Universal] A filter must always have an "init()" with valid arguments.');this.grid=t.grid,this.callback=t.callback,this.columnDef=t.columnDef,this.inputFilterType==="compound"&&(this.operator=t.operator||""),this.searchTerms=(e=t==null?void 0:t.searchTerms)!==null&&e!==void 0?e:[],this.filterContainerElm=t.filterContainerElm;const n=this.inputFilterType==="compound"?Array.isArray(this.searchTerms)&&this.searchTerms.length>=0?this.searchTerms[0]:"":this.searchTerms;this._filterElm=this.createDomFilterElement(n),this._bindEventService.bind(this._filterDivInputElm,"keyup",this.onTriggerEvent.bind(this)),this._selectOperatorElm&&this._bindEventService.bind(this._selectOperatorElm,"change",this.onTriggerEvent.bind(this))}clear(t=!0){this.flatInstance&&(this._clearFilterTriggered=!0,this._shouldTriggerQuery=t,this.searchTerms=[],this._selectOperatorElm&&(this._selectOperatorElm.selectedIndex=0),this.flatInstance.input&&this.flatInstance.clear()),this._filterElm.classList.remove("filled"),this._filterDivInputElm.classList.remove("filled")}destroy(){var t,e,n,r,o;this._bindEventService.unbindAll(),typeof((t=this.flatInstance)===null||t===void 0?void 0:t.destroy)=="function"&&(this.flatInstance.destroy(),this.flatInstance.element&&bh(this.flatInstance)),sn(this.filterContainerElm),sn(this._filterDivInputElm),(e=this._filterDivInputElm)===null||e===void 0||e.remove(),(n=this.filterContainerElm)===null||n===void 0||n.remove(),(r=this._selectOperatorElm)===null||r===void 0||r.remove(),(o=this._filterElm)===null||o===void 0||o.remove()}hide(){var t;typeof((t=this.flatInstance)===null||t===void 0?void 0:t.close)=="function"&&this.flatInstance.close()}show(){var t;typeof((t=this.flatInstance)===null||t===void 0?void 0:t.open)=="function"&&this.flatInstance.open()}getValues(){return this._currentDateOrDates}setValues(t,e){let n;this.inputFilterType==="compound"?n=Array.isArray(t)?t[0]:t:typeof t=="string"||Array.isArray(t)&&typeof t[0]=="string"&&t[0].indexOf("..")>0?n=typeof t=="string"?[t]:t[0].split(".."):Array.isArray(t)&&(n=t),this.flatInstance&&(this._currentDateOrDates=t&&n?n:void 0,this.flatInstance.setDate(this._currentDateOrDates||""));const r=this.getValues()||[];if(this.getValues()||Array.isArray(r)&&r.length>0&&t?(this._filterElm.classList.add("filled"),this._filterDivInputElm.classList.add("filled")):(this._filterElm.classList.remove("filled"),this._filterDivInputElm.classList.remove("filled")),this.operator=e||this.defaultOperator,e&&this._selectOperatorElm){const o=Zl(this.operator);this._selectOperatorElm.value=o}}buildDatePickerInput(t){var e,n,r,o,s,l,u,h,c,p;const m=(n=(e=this.columnDef)===null||e===void 0?void 0:e.id)!==null&&n!==void 0?n:"",v=Ua(this.columnFilter.type||this.columnDef.type||ie.dateIso),_=Ua(this.columnDef.outputType||this.columnFilter.type||this.columnDef.type||ie.dateUtc),C=(o=(r=this.columnFilter)===null||r===void 0?void 0:r.filterOptions)!==null&&o!==void 0?o:{};let x=((s=C==null?void 0:C.locale)!==null&&s!==void 0?s:(u=(l=this.translaterService)===null||l===void 0?void 0:l.getCurrentLanguage)===null||u===void 0?void 0:u.call(l))||this.gridOptions.locale||"en";(x==null?void 0:x.length)>2&&(x=x.substring(0,2));let S;if(this.inputFilterType==="compound")t&&(S=t,this._currentDateOrDates=t);else if(typeof t=="string"||Array.isArray(t)&&typeof t[0]=="string"&&t[0].indexOf("..")>0?S=typeof t=="string"?[t]:t[0].split(".."):Array.isArray(t)&&(S=t),Array.isArray(S)){this._currentDateOrDates=S;const P=Fr(this.columnFilter.type||this.columnDef.type||ie.dateIso);this._currentDateStrings=S.map(M=>Qm(M).format(P))}const y={defaultDate:S||"",altInput:!0,altFormat:_,dateFormat:v,mode:this.inputFilterType==="range"?"range":"single",wrap:!0,closeOnSelect:!0,locale:x,onChange:(P,M)=>{if(this.inputFilterType==="compound")this._currentValue=M,this._currentDateOrDates=Array.isArray(P)&&P[0]||void 0;else if(Array.isArray(P)){this._currentDateOrDates=P;const Q=Fr(this.columnDef.outputType||this.columnFilter.type||this.columnDef.type||ie.dateIso);this._currentDateStrings=P.map(L=>Qm(L).format(Q)),this._currentValue=this._currentDateStrings.join("..")}const B=y.enableTime?new Event("keyup"):void 0;this.onTriggerEvent(B)},errorHandler:P=>{P.toString().includes("invalid locale")&&console.warn(`[Slickgrid-Universal] Flatpickr missing locale imports (${x}), will revert to English as the default locale.
          See Flatpickr Localization for more info, for example if we want to use French, then we can import it with:  import 'flatpickr/dist/l10n/fr';`)}};_&&(_==="Z"||_.toLowerCase().includes("h"))&&(y.enableTime=!0),this._flatpickrOptions={...y,...C};let D=(c=(h=this.gridOptions)===null||h===void 0?void 0:h.defaultFilterPlaceholder)!==null&&c!==void 0?c:"";!((p=this.columnFilter)===null||p===void 0)&&p.placeholder&&(D=this.columnFilter.placeholder);const A=Ie("div",{className:"flatpickr"});return this.inputFilterType==="range"&&A.classList.add("search-filter",`filter-${m}`),A.appendChild(Ie("input",{type:"text",className:"form-control",placeholder:D,dataset:{input:"",columnid:`${m}`}})),this.flatInstance=sb(A,this._flatpickrOptions),A}getOperatorOptionValues(){var t;return!((t=this.columnFilter)===null||t===void 0)&&t.compoundOperatorList?this.columnFilter.compoundOperatorList:jh(this.gridOptions,this.translaterService)}createDomFilterElement(t){var e,n;const r=(n=(e=this.columnDef)===null||e===void 0?void 0:e.id)!==null&&n!==void 0?n:"";if(sn(this.filterContainerElm),this._filterDivInputElm=this.buildDatePickerInput(t),this.inputFilterType==="range")return Array.isArray(t)&&t.length>0&&t[0]!==""&&(this._filterDivInputElm.classList.add("filled"),this._currentDateOrDates=t,this._currentValue=t[0]),this._filterDivInputElm&&this.filterContainerElm.appendChild(this._filterDivInputElm),this._filterDivInputElm;{this._selectOperatorElm=Yh(this.getOperatorOptionValues(),this.gridOptions);const o=Ie("div",{className:`form-group search-filter filter-${r}`}),s=Ie("div",{className:"input-group flatpickr"},o);if(Ie("div",{className:"input-group-addon input-group-prepend operator"},s).appendChild(this._selectOperatorElm),s.appendChild(this._filterDivInputElm),this.operator){const u=Zl(this.operator);this._selectOperatorElm.value=u}return t!==""&&(this._filterDivInputElm.classList.add("filled"),this._currentDateOrDates=t,this._currentValue=t),o&&this.filterContainerElm.appendChild(o),o}}onTriggerEvent(t){var e,n;if(this._clearFilterTriggered)this.callback(t,{columnDef:this.columnDef,clearFilterTriggered:this._clearFilterTriggered,shouldTriggerQuery:this._shouldTriggerQuery}),this._filterElm.classList.remove("filled");else if(this.inputFilterType==="range")this._currentDateStrings?this._filterElm.classList.add("filled"):this._filterElm.classList.remove("filled"),this.callback(t,{columnDef:this.columnDef,searchTerms:this._currentDateStrings?this._currentDateStrings:[this._currentValue],operator:this.operator||"",shouldTriggerQuery:this._shouldTriggerQuery});else if(this.inputFilterType==="compound"&&this._selectOperatorElm){const r=this._selectOperatorElm.value;this._currentValue?this._filterElm.classList.add("filled"):this._filterElm.classList.remove("filled"),(!((n=(e=this.columnFilter.skipCompoundOperatorFilterWithNullInput)!==null&&e!==void 0?e:this.gridOptions.skipCompoundOperatorFilterWithNullInput)!==null&&n!==void 0?n:this.gridOptions.skipCompoundOperatorFilterWithNullInput===void 0)||this._currentDateOrDates!==void 0)&&this.callback(t,{columnDef:this.columnDef,searchTerms:this._currentValue?[this._currentValue]:null,operator:r||"",shouldTriggerQuery:this._shouldTriggerQuery})}this._clearFilterTriggered=!1,this._shouldTriggerQuery=!0}}class lb extends Jm{constructor(t){super(t),this.translaterService=t,this.inputFilterType="compound"}}class Zs{constructor(t){this.translaterService=t,this._debounceTypingDelay=0,this._shouldTriggerQuery=!0,this._inputType="text",this.inputFilterType="single",this.searchTerms=[],this._bindEventService=new Fn}get columnFilter(){var t,e;return(e=(t=this.columnDef)===null||t===void 0?void 0:t.filter)!==null&&e!==void 0?e:{}}get defaultOperator(){return Lt.empty}get inputType(){return this._inputType}set inputType(t){this._inputType=t}get operator(){var t,e;return(e=(t=this.columnFilter)===null||t===void 0?void 0:t.operator)!==null&&e!==void 0?e:this.defaultOperator}set operator(t){this.columnFilter&&(this.columnFilter.operator=t)}get gridOptions(){var t,e;return(e=(t=this.grid)===null||t===void 0?void 0:t.getOptions())!==null&&e!==void 0?e:{}}init(t){var e,n,r,o,s,l;if(!t)throw new Error('[Slickgrid-Universal] A filter must always have an "init()" with valid arguments.');this.grid=t.grid,this.callback=t.callback,this.columnDef=t.columnDef,this.inputFilterType==="compound"&&(this.operator=t.operator||""),this.searchTerms=(e=t==null?void 0:t.searchTerms)!==null&&e!==void 0?e:[],this._cellContainerElm=t.filterContainerElm;const u=(n=this.gridOptions)===null||n===void 0?void 0:n.backendServiceApi;this._debounceTypingDelay=(l=u?(r=u==null?void 0:u.filterTypingDebounce)!==null&&r!==void 0?r:(o=this.gridOptions)===null||o===void 0?void 0:o.defaultBackendServiceFilterTypingDebounce:(s=this.gridOptions)===null||s===void 0?void 0:s.filterTypingDebounce)!==null&&l!==void 0?l:0;const h=Array.isArray(this.searchTerms)&&this.searchTerms.length>=0?this.searchTerms[0]:"";this.createDomFilterElement(h),this._bindEventService.bind(this._filterInputElm,["keyup","blur","change"],this.onTriggerEvent.bind(this)),this._bindEventService.bind(this._filterInputElm,"wheel",this.onTriggerEvent.bind(this),{passive:!0}),this.inputFilterType==="compound"&&this._selectOperatorElm&&this._bindEventService.bind(this._selectOperatorElm,"change",this.onTriggerEvent.bind(this))}clear(t=!0){this._filterInputElm&&(this._shouldTriggerQuery=t,this.searchTerms=[],this._filterInputElm.value="",this._currentValue=void 0,this.inputFilterType==="compound"&&this._selectOperatorElm&&(this._selectOperatorElm.selectedIndex=0,this._filterContainerElm.classList.remove("filled")),this._filterInputElm.classList.remove("filled"),this.onTriggerEvent(void 0,!0))}destroy(){var t,e,n,r;this._bindEventService.unbindAll(),(e=(t=this._selectOperatorElm)===null||t===void 0?void 0:t.remove)===null||e===void 0||e.call(t),(r=(n=this._filterInputElm)===null||n===void 0?void 0:n.remove)===null||r===void 0||r.call(n)}getValues(){return this._filterInputElm.value}setValues(t,e){const n=Array.isArray(t)?t:[t];let r="";for(const o of n)this.inputFilterType==="single"?r=e?this.addOptionalOperatorIntoSearchString(o,e):o:r=`${o}`,this._filterInputElm.value=`${r??""}`,this._currentValue=this._filterInputElm.value;if(this.getValues()!==""?(this._filterContainerElm.classList.add("filled"),this._filterInputElm.classList.add("filled")):(this._filterContainerElm.classList.remove("filled"),this._filterInputElm.classList.remove("filled")),this.operator=e||this.defaultOperator,e&&this._selectOperatorElm){const o=Zl(this.operator);this._selectOperatorElm.value=o}}addOptionalOperatorIntoSearchString(t,e){let n="",r="",o=t==null?"":`${t}`;if(e&&o){switch(e){case"<>":case"!=":case"=":case"==":case">":case">=":case"<":case"<=":n=e;break;case"EndsWith":case"*z":n="*";break;case"StartsWith":case"a*":r="*";break}o=`${n}${o}${r}`}return o}getCompoundOperatorOptionValues(){var t;const e=this.columnDef.type&&this.columnDef.type?this.columnDef.type:ie.string;let n=[];if(!((t=this.columnFilter)===null||t===void 0)&&t.compoundOperatorList)return this.columnFilter.compoundOperatorList;switch(e){case ie.string:case ie.text:case ie.readonly:case ie.password:n=Q0(this.gridOptions,this.translaterService);break;default:n=jh(this.gridOptions,this.translaterService);break}return n}createDomFilterElement(t){var e,n,r,o,s,l,u;const h=(n=(e=this.columnDef)===null||e===void 0?void 0:e.id)!==null&&n!==void 0?n:"";sn(this._cellContainerElm);let c=(o=(r=this.gridOptions)===null||r===void 0?void 0:r.defaultFilterPlaceholder)!==null&&o!==void 0?o:"";!((s=this.columnFilter)===null||s===void 0)&&s.placeholder&&(c=this.columnFilter.placeholder);const p=`${t??""}`;if(this._filterInputElm=Ie("input",{type:this._inputType||"text",autocomplete:"off",ariaAutoComplete:"none",placeholder:c,ariaLabel:(u=(l=this.columnFilter)===null||l===void 0?void 0:l.ariaLabel)!==null&&u!==void 0?u:`${jr(h+"")} Search Filter`,className:`form-control filter-${h}`,value:p,dataset:{columnid:`${h}`}}),t&&this._filterInputElm.classList.add("filled"),t!==void 0&&(this._currentValue=p),this.inputFilterType==="single")this._filterContainerElm=this._filterInputElm,this._filterInputElm.classList.add("search-filter"),this._cellContainerElm.appendChild(this._filterInputElm),this._cellContainerElm.appendChild(document.createElement("span"));else{this._filterInputElm.classList.add("compound-input"),this._selectOperatorElm=Yh(this.getCompoundOperatorOptionValues(),this.gridOptions),this._filterContainerElm=Ie("div",{className:`form-group search-filter filter-${h}`});const m=Ie("div",{className:"input-group"},this._filterContainerElm);Ie("div",{className:"input-group-addon input-group-prepend operator"},m).appendChild(this._selectOperatorElm),m.appendChild(this._filterInputElm),m.appendChild(Ie("span")),this.operator&&(this._selectOperatorElm.value=Zl(this.operator)),this._filterContainerElm&&this._cellContainerElm.appendChild(this._filterContainerElm)}}onTriggerEvent(t,e=!1){var n,r,o,s,l;if(e)this.callback(t,{columnDef:this.columnDef,clearFilterTriggered:e,shouldTriggerQuery:this._shouldTriggerQuery}),this._filterContainerElm.classList.remove("filled");else{const u=(n=t==null?void 0:t.type)!==null&&n!==void 0?n:"",h=(o=(r=this._selectOperatorElm)===null||r===void 0?void 0:r.value)!==null&&o!==void 0?o:this.operator;let c=this._filterInputElm.value;const p=this.gridOptions.enableFilterTrimWhiteSpace||this.columnFilter.enableTrimWhiteSpace;typeof c=="string"&&p&&(c=c.trim()),((s=t==null?void 0:t.target)===null||s===void 0?void 0:s.tagName.toLowerCase())!=="select"&&(this._currentValue=c),c===""?this._filterContainerElm.classList.remove("filled"):this._filterContainerElm.classList.add("filled");const m={columnDef:this.columnDef,operator:h,searchTerms:c?[c]:null,shouldTriggerQuery:this._shouldTriggerQuery},v=u==="keyup"&&(t==null?void 0:t.key)!=="Enter"?this._debounceTypingDelay:0,_=(l=this.columnFilter.skipCompoundOperatorFilterWithNullInput)!==null&&l!==void 0?l:this.gridOptions.skipCompoundOperatorFilterWithNullInput;(this.inputFilterType==="single"||!_||this._currentValue!==void 0)&&(v>0?(clearTimeout(this._timer),this._timer=setTimeout(()=>this.callback(t,m),v)):this.callback(t,m))}this._shouldTriggerQuery=!0}}class ev extends Zs{constructor(t){super(t),this.translaterService=t,this.inputType="text",this.inputFilterType="compound"}}class ab extends Zs{constructor(t){super(t),this.translaterService=t,this.inputType="number",this.inputFilterType="compound"}}class db extends Zs{constructor(t){super(t),this.translaterService=t,this.inputType="password",this.inputFilterType="compound"}}const nf="#86bff8",Du=0,ub=20;class rf{constructor(t){this.translaterService=t,this._clearFilterTriggered=!1,this._shouldTriggerQuery=!0,this._sliderTrackFilledColor=nf,this.sliderType="double",this.searchTerms=[],this._bindEventService=new Fn}get columnFilter(){var t,e;return(e=(t=this.columnDef)===null||t===void 0?void 0:t.filter)!==null&&e!==void 0?e:{}}get currentValue(){return this._currentValue}get currentValues(){return this._currentValues}get defaultOperator(){return this.sliderType==="compound"?Lt.empty:this.sliderType==="single"?Lt.greaterThanOrEqual:this.gridOptions.defaultFilterRangeOperator||Lt.rangeInclusive}get gridOptions(){var t,e;return(e=(t=this.grid)===null||t===void 0?void 0:t.getOptions())!==null&&e!==void 0?e:{}}get sliderOptions(){return this._sliderOptions}get operator(){var t,e;return this._operator||((e=(t=this.columnFilter)===null||t===void 0?void 0:t.operator)!==null&&e!==void 0?e:this.defaultOperator)}set operator(t){this._operator=t}init(t){var e;if(!t)throw new Error('[Slickgrid-Universal] A filter must always have an "init()" with valid arguments.');this.grid=t.grid,this.callback=t.callback,this.columnDef=t.columnDef,this.operator=t.operator||"",this.searchTerms=(e=t==null?void 0:t.searchTerms)!==null&&e!==void 0?e:[],this._argFilterContainerElm=t.filterContainerElm,this._sliderTrackFilledColor=window.getComputedStyle(document.documentElement).getPropertyValue("--slick-slider-filter-filled-track-color")||nf,this._filterElm=this.createDomFilterElement(this.searchTerms)}clear(t=!0){var e,n,r,o,s,l;if(this._filterElm){this._clearFilterTriggered=!0,this._shouldTriggerQuery=t,this.searchTerms=[];const u=+((e=Qn(this.columnFilter,"sliderStartValue"))!==null&&e!==void 0?e:je.SLIDER_DEFAULT_MIN_VALUE),h=+((n=Qn(this.columnFilter,"sliderEndValue"))!==null&&n!==void 0?n:je.SLIDER_DEFAULT_MAX_VALUE);this.sliderType==="double"?(this._sliderLeftInputElm&&(this._sliderLeftInputElm.value=`${u}`),this._sliderRightInputElm&&(this._sliderRightInputElm.value=`${h}`),this._currentValues=[u,h],(r=this._sliderLeftInputElm)===null||r===void 0||r.dispatchEvent(new Event("change")),(o=this._sliderRightInputElm)===null||o===void 0||o.dispatchEvent(new Event("change"))):(this._sliderRightInputElm&&(this._sliderRightInputElm.value=`${u}`),this._selectOperatorElm&&(this._selectOperatorElm.selectedIndex=0),this._currentValue=u,(s=this._sliderRightInputElm)===null||s===void 0||s.dispatchEvent(new Event("change"))),((l=Qn(this.columnFilter,"hideSliderNumber"))!==null&&l!==void 0?l:Qn(this.columnFilter,"hideSliderNumbers"))||(this.sliderType==="double"?this.renderSliderValues(u,h):this.renderSliderValues(void 0,u)),this._divContainerFilterElm.classList.remove("filled"),this._filterElm.classList.remove("filled"),this.callback(void 0,{columnDef:this.columnDef,clearFilterTriggered:!0,shouldTriggerQuery:t,searchTerms:[]})}}destroy(){var t,e,n;this._bindEventService.unbindAll(),(t=this._sliderTrackElm)===null||t===void 0||t.remove(),(e=this._sliderLeftInputElm)===null||e===void 0||e.remove(),(n=this._sliderRightInputElm)===null||n===void 0||n.remove()}renderSliderValues(t,e){var n,r;!((n=this._leftSliderNumberElm)===null||n===void 0)&&n.textContent&&t&&(this._leftSliderNumberElm.textContent=t.toString()),!((r=this._rightSliderNumberElm)===null||r===void 0)&&r.textContent&&e&&(this._rightSliderNumberElm.textContent=e.toString())}getValues(){return this.sliderType==="double"?this._currentValues:this._currentValue}setValues(t,e){var n;if(t){let s=[];const l=Array.isArray(t)?t==null?void 0:t[0]:t;if(Array.isArray(t)&&t.length===2?s=t:typeof l=="string"&&l.indexOf("..")>0?(s=l.split(".."),this._currentValue=+((n=s==null?void 0:s[0])!==null&&n!==void 0?n:0)):(Yd(l)||l==="")&&(this._currentValue=+l,s=[l]),this.sliderType!=="double"&&this._sliderRightInputElm)this._sliderRightInputElm.value=typeof t=="string"?t:`${l}`,this.renderSliderValues(void 0,this._sliderRightInputElm.value);else if(Array.isArray(s)&&s.length===2&&!Qn(this.columnFilter,"hideSliderNumbers")){const[u,h]=s;this._sliderLeftInputElm&&(this._sliderLeftInputElm.value=String(u??je.SLIDER_DEFAULT_MIN_VALUE)),this._sliderRightInputElm&&(this._sliderRightInputElm.value=String(h??je.SLIDER_DEFAULT_MAX_VALUE)),this.renderSliderValues(...s)}}else this._currentValue=void 0,this._currentValues=void 0;const r=this.getValues();if((r===void 0?[]:Array.isArray(r)?r:[r]).length>0?this._filterElm.classList.add("filled"):this._filterElm.classList.remove("filled"),e!==void 0&&(this.operator=e),this.operator&&this._selectOperatorElm){const s=Zl(this.operator);this._selectOperatorElm.value=s}}createDomFilterElement(t){var e,n,r,o,s,l,u,h,c,p,m,v,_,C,x,S,y,D;const A=(n=(e=this.columnDef)===null||e===void 0?void 0:e.id)!==null&&n!==void 0?n:"",P=+((o=(r=this.columnFilter)===null||r===void 0?void 0:r.minValue)!==null&&o!==void 0?o:je.SLIDER_DEFAULT_MIN_VALUE),M=+((l=(s=this.columnFilter)===null||s===void 0?void 0:s.maxValue)!==null&&l!==void 0?l:je.SLIDER_DEFAULT_MAX_VALUE),B=+((h=(u=this.columnFilter)===null||u===void 0?void 0:u.valueStep)!==null&&h!==void 0?h:je.SLIDER_DEFAULT_STEP);sn(this._argFilterContainerElm);const Q=+((p=(c=Array.isArray(t)&&(t==null?void 0:t[0]))!==null&&c!==void 0?c:Qn(this.columnFilter,"sliderStartValue"))!==null&&p!==void 0?p:P),L=+((v=(m=Array.isArray(t)&&(t==null?void 0:t[1]))!==null&&m!==void 0?m:Qn(this.columnFilter,"sliderEndValue"))!==null&&v!==void 0?v:M);if(this._sliderRangeContainElm=Ie("div",{className:`filter-input filter-${A} slider-input-container slider-values`,title:this.sliderType==="double"?`${Q} - ${L}`:`${Q}`}),this._sliderTrackElm=Ie("div",{className:"slider-track"}),this.sliderType==="compound"){const z=Ie("span",{className:"input-group-addon input-group-prepend operator"});this._selectOperatorElm=Yh(this.getOperatorOptionValues(),this.gridOptions),z.appendChild(this._selectOperatorElm)}this.sliderType==="double"&&(this._sliderLeftInputElm=Ie("input",{type:"range",className:"slider-filter-input",ariaLabel:(C=(_=this.columnFilter)===null||_===void 0?void 0:_.ariaLabel)!==null&&C!==void 0?C:`${jr(A+"")} Search Filter`,defaultValue:`${Q}`,value:`${Q}`,min:`${P}`,max:`${M}`,step:`${B}`}));const le=this.sliderType==="double"?L:Q;this._sliderRightInputElm=Ie("input",{type:"range",className:"slider-filter-input",ariaLabel:(S=(x=this.columnFilter)===null||x===void 0?void 0:x.ariaLabel)!==null&&S!==void 0?S:`${jr(A+"")} Search Filter`,defaultValue:`${le}`,value:`${le}`,min:`${P}`,max:`${M}`,step:`${B}`});const _e=(y=Qn(this.columnFilter,"hideSliderNumber"))!==null&&y!==void 0?y:Qn(this.columnFilter,"hideSliderNumbers"),J=_e?"":"input-group";if(this._divContainerFilterElm=Ie("div",{className:`${J} search-filter slider-container slider-values filter-${A}`.trim()}),this._sliderRangeContainElm.appendChild(this._sliderTrackElm),this.sliderType==="double"&&this._sliderLeftInputElm&&this._sliderRangeContainElm.appendChild(this._sliderLeftInputElm),this._sliderRangeContainElm.appendChild(this._sliderRightInputElm),_e)this._divContainerFilterElm.appendChild(this._sliderRangeContainElm);else{let z;this.sliderType==="compound"&&this._selectOperatorElm?(z=Ie("span",{className:"input-group-addon input-group-prepend operator"}),z.appendChild(this._selectOperatorElm)):this.sliderType==="double"&&(z=Ie("div",{className:"input-group-addon input-group-prepend slider-range-value"}),this._leftSliderNumberElm=Ie("span",{className:`input-group-text lowest-range-${A}`,textContent:`${Q}`}),z.appendChild(this._leftSliderNumberElm));const F=Ie("div",{className:"input-group-addon input-group-append slider-range-value"});this._rightSliderNumberElm=Ie("span",{className:`input-group-text highest-range-${A}`,textContent:`${le}`},F),z&&this._divContainerFilterElm.appendChild(z),this._divContainerFilterElm.appendChild(this._sliderRangeContainElm),this._divContainerFilterElm.appendChild(F)}return this._sliderOptions={minValue:P,maxValue:M,step:B},this._currentValues=[Q,L],Array.isArray(t)&&t.length>0&&t[0]!==""&&(this._divContainerFilterElm.classList.add("filled"),this._currentValue=Q),(Qn(this.columnFilter,"sliderStartValue")!==void 0||((D=this.columnFilter)===null||D===void 0?void 0:D.minValue)!==void 0)&&(this._currentValue=Q),this._argFilterContainerElm.appendChild(this._divContainerFilterElm),this.updateTrackFilledColorWhenEnabled(),this._bindEventService.bind(this._sliderTrackElm,"click",this.sliderTrackClicked.bind(this)),this._bindEventService.bind(this._sliderRightInputElm,["input","change"],this.slideRightInputChanged.bind(this)),this._bindEventService.bind(this._sliderRightInputElm,["change","mouseup","touchend"],this.onValueChanged.bind(this)),this.sliderType==="compound"&&this._selectOperatorElm?this._bindEventService.bind(this._selectOperatorElm,["change"],this.onValueChanged.bind(this)):this.sliderType==="double"&&this._sliderLeftInputElm&&(this._bindEventService.bind(this._sliderLeftInputElm,["input","change"],this.slideLeftInputChanged.bind(this)),this._bindEventService.bind(this._sliderLeftInputElm,["change","mouseup","touchend"],this.onValueChanged.bind(this))),this._divContainerFilterElm}getOperatorOptionValues(){var t;return!((t=this.columnFilter)===null||t===void 0)&&t.compoundOperatorList?this.columnFilter.compoundOperatorList:jh(this.gridOptions,this.translaterService)}onValueChanged(t){var e,n,r,o,s,l,u,h,c;const p=parseInt((n=(e=this._sliderRightInputElm)===null||e===void 0?void 0:e.value)!==null&&n!==void 0?n:"",10);let m,v;if(this.sliderType==="compound"||this.sliderType==="single")((o=(r=t==null?void 0:t.target)===null||r===void 0?void 0:r.tagName)===null||o===void 0?void 0:o.toLowerCase())!=="select"&&(this._currentValue=+p),m=this._currentValue,v=[m||"0"];else if(this.sliderType==="double"){const C=[parseInt((l=(s=this._sliderLeftInputElm)===null||s===void 0?void 0:s.value)!==null&&l!==void 0?l:"",10),p];m=C.join(".."),v=C}if(this._clearFilterTriggered)this._filterElm.classList.remove("filled"),this.callback(t,{columnDef:this.columnDef,clearFilterTriggered:this._clearFilterTriggered,searchTerms:[],shouldTriggerQuery:this._shouldTriggerQuery});else{const _=(h=(u=this._selectOperatorElm)===null||u===void 0?void 0:u.value)!==null&&h!==void 0?h:this.operator;m===""?this._filterElm.classList.remove("filled"):this._filterElm.classList.add("filled");const C=(c=this.columnFilter.skipCompoundOperatorFilterWithNullInput)!==null&&c!==void 0?c:this.gridOptions.skipCompoundOperatorFilterWithNullInput;(this.sliderType!=="compound"||!C||this._currentValue!==void 0)&&this.callback(t,{columnDef:this.columnDef,operator:_||"",searchTerms:v,shouldTriggerQuery:this._shouldTriggerQuery})}this._clearFilterTriggered=!1,this._shouldTriggerQuery=!0,this.changeBothSliderFocuses(!1),this.grid.onHeaderRowMouseEnter.notify({column:this.columnDef,grid:this.grid},{...new Slick.EventData,target:this._argFilterContainerElm})}changeBothSliderFocuses(t){var e,n;const r=t?"add":"remove";(e=this._sliderLeftInputElm)===null||e===void 0||e.classList[r]("focus"),(n=this._sliderRightInputElm)===null||n===void 0||n.classList[r]("focus")}slideLeftInputChanged(){var t,e,n,r;const o=parseInt((e=(t=this._sliderLeftInputElm)===null||t===void 0?void 0:t.value)!==null&&e!==void 0?e:"",10),s=parseInt((r=(n=this._sliderRightInputElm)===null||n===void 0?void 0:n.value)!==null&&r!==void 0?r:"",10);this._sliderLeftInputElm&&s-o<=Qn(this.columnFilter,"stopGapBetweenSliderHandles",Du)&&(this._sliderLeftInputElm.value=String(o-Qn(this.columnFilter,"stopGapBetweenSliderHandles",Du))),this._sliderLeftInputElm&&this._sliderRightInputElm&&(+this._sliderLeftInputElm.value>=+this._sliderRightInputElm.value-ub?(this._sliderLeftInputElm.style.zIndex="1",this._sliderRightInputElm.style.zIndex="0"):(this._sliderLeftInputElm.style.zIndex="0",this._sliderRightInputElm.style.zIndex="1")),this.sliderLeftOrRightChanged(o,s)}slideRightInputChanged(){var t,e,n,r;const o=parseInt((e=(t=this._sliderLeftInputElm)===null||t===void 0?void 0:t.value)!==null&&e!==void 0?e:"",10),s=parseInt((r=(n=this._sliderRightInputElm)===null||n===void 0?void 0:n.value)!==null&&r!==void 0?r:"",10);this.sliderType==="double"&&this._sliderRightInputElm&&s-o<=Qn(this.columnFilter,"stopGapBetweenSliderHandles",Du)&&(this._sliderRightInputElm.value=String(o+Qn(this.columnFilter,"stopGapBetweenSliderHandles",Du))),this.sliderLeftOrRightChanged(o,s)}sliderLeftOrRightChanged(t,e){var n,r,o,s,l,u,h;this.updateTrackFilledColorWhenEnabled(),this.changeBothSliderFocuses(!0),this._sliderRangeContainElm.title=this.sliderType==="double"?`${t} - ${e}`:`${e}`,((n=Qn(this.columnFilter,"hideSliderNumber"))!==null&&n!==void 0?n:Qn(this.columnFilter,"hideSliderNumbers"))||(!((r=this._leftSliderNumberElm)===null||r===void 0)&&r.textContent&&(this._leftSliderNumberElm.textContent=(s=(o=this._sliderLeftInputElm)===null||o===void 0?void 0:o.value)!==null&&s!==void 0?s:""),!((l=this._rightSliderNumberElm)===null||l===void 0)&&l.textContent&&(this._rightSliderNumberElm.textContent=(h=(u=this._sliderRightInputElm)===null||u===void 0?void 0:u.value)!==null&&h!==void 0?h:"")),this.grid.onHeaderRowMouseEnter.notify({column:this.columnDef,grid:this.grid},{...new Slick.EventData,target:this._argFilterContainerElm})}sliderTrackClicked(t){t.preventDefault();const e=t.offsetX,n=this._sliderTrackElm.offsetWidth,r=(e+0)*100/n;this._sliderRightInputElm&&this.sliderType!=="double"?(this._sliderRightInputElm.value=`${r}`,this._sliderRightInputElm.dispatchEvent(new Event("change"))):this._sliderLeftInputElm&&this._sliderRightInputElm&&(r<=50?(this._sliderLeftInputElm.value=`${r}`,this._sliderLeftInputElm.dispatchEvent(new Event("change"))):(this._sliderRightInputElm.value=`${r}`,this._sliderRightInputElm.dispatchEvent(new Event("change"))))}updateTrackFilledColorWhenEnabled(){var t,e,n,r;if(Qn(this.columnFilter,"enableSliderTrackColoring")&&this._sliderRightInputElm){let o=0;this._sliderLeftInputElm&&(o=(+this._sliderLeftInputElm.value-+this._sliderLeftInputElm.min)/((e=(t=this.sliderOptions)===null||t===void 0?void 0:t.maxValue)!==null&&e!==void 0?e:0-+this._sliderLeftInputElm.min)*100);const s=(+this._sliderRightInputElm.value-+this._sliderRightInputElm.min)/((r=(n=this.sliderOptions)===null||n===void 0?void 0:n.maxValue)!==null&&r!==void 0?r:0-+this._sliderRightInputElm.min)*100,l="linear-gradient(to right, %b %p1, %c %p1, %c %p2, %b %p2)".replace(/%b/g,"#eee").replace(/%c/g,Qn(this.columnFilter,"sliderTrackFilledColor")||this._sliderTrackFilledColor||nf).replace(/%p1/g,`${o}%`).replace(/%p2/g,`${s}%`);this._sliderTrackElm.style.background=l,this._sliderOptions.sliderTrackBackground=l}}}class cb extends rf{constructor(t){super(t),this.translaterService=t,super.sliderType="compound"}}class hb extends Jm{constructor(t){super(t),this.translaterService=t,this.inputFilterType="range"}}class fb extends Zs{constructor(t){super(t),this.translaterService=t,this._inputMask="",this.inputType="text"}get inputMask(){return this._inputMask}init(t){var e,n,r,o;if(!t)throw new Error('[Slickgrid-Universal] A filter must always have an "init()" with valid arguments.');if(this.grid=t.grid,this.callback=t.callback,this.columnDef=t.columnDef,this.searchTerms=(t.hasOwnProperty("searchTerms")?t.searchTerms:[])||[],this._cellContainerElm=t.filterContainerElm,!((n=(e=this.columnDef)===null||e===void 0?void 0:e.params)===null||n===void 0)&&n.mask?this._inputMask=this.columnDef.params.mask:!((o=(r=this.columnFilter)===null||r===void 0?void 0:r.params)===null||o===void 0)&&o.mask&&(this._inputMask=this.columnFilter.params.mask),!this._inputMask)throw new Error(`[Slickgrid-Universal] The Filters.inputMask requires the mask to be passed in the filter params or the column definition params
        for example:: this.columnDefinitions: [{ id: 'phone', field: 'phone', filter: { model: Filters.inputMask, params: { mask: '000-000-0000' }}}]`);const s=Array.isArray(this.searchTerms)&&this.searchTerms.length>=0?this.searchTerms[0]:"";this.createDomFilterElement(s),this._bindEventService.bind(this._filterInputElm,["keyup","blur","change"],this.onTriggerEvent.bind(this))}onTriggerEvent(t,e=!1){var n,r,o;let s="";if(!((n=t==null?void 0:t.target)===null||n===void 0)&&n.value){let l=(o=(r=t==null?void 0:t.target)===null||r===void 0?void 0:r.value)!==null&&o!==void 0?o:"";const u=this.gridOptions.enableFilterTrimWhiteSpace||this.columnFilter.enableTrimWhiteSpace;typeof l=="string"&&u&&(l=l.trim());const h=this.unmaskValue(l),c=this.maskValue(h);s=h,(t==null?void 0:t.keyCode)>=48&&(this._filterInputElm.value=c,t.preventDefault())}e?(this.callback(t,{columnDef:this.columnDef,clearFilterTriggered:e,shouldTriggerQuery:this._shouldTriggerQuery}),this._filterInputElm.classList.remove("filled")):(this._filterInputElm.classList.add("filled"),this.callback(t,{columnDef:this.columnDef,operator:this.operator,searchTerms:[s],shouldTriggerQuery:this._shouldTriggerQuery})),this._shouldTriggerQuery=!0}maskValue(t){let e=0,n="";return this._inputMask&&(n=this._inputMask.replace(/[09A]/gi,r=>((r==="0"||r==="9")&&/\d+/g.test(t[e])||r.toUpperCase()==="A"&&/[^\d]+/gi.test(t[e]))&&t[e++]||"")),n}unmaskValue(t){const e=t.replace(/[^0-9a-z]*/gi,""),n=this._inputMask.replace(/[^0-9a-z]*/gi,"");let r="";for(let o=0;o<n.length;o++)e[o]&&((n[o]==="0"||n[o]==="9")&&/\d+/g.test(e[o])||n[o].toUpperCase()==="A"&&/[^\d]+/gi.test(e[o]))&&(r+=e[o]);return r}}class pb extends Zs{constructor(t){super(t),this.translaterService=t,this.inputType="number"}}class mb extends Zs{constructor(t){super(t),this.translaterService=t,this.inputType="password"}}var vb=Object.defineProperty,gb=(a,t,e)=>t in a?vb(a,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):a[t]=e,jt=(a,t,e)=>(gb(a,typeof t!="symbol"?t+"":t,e),e),_b=class{constructor(a){jt(this,"_distinctEvent"),jt(this,"_boundedEvents",[]),this._distinctEvent=(a==null?void 0:a.distinctEvent)??!1}get boundedEvents(){return this._boundedEvents}dispose(){this.unbindAll(),this._boundedEvents=[]}bind(a,t,e,n){let r=Array.isArray(t)?t:[t];if(a!=null&&a.forEach)a==null||a.forEach(o=>{for(let s of r)(!this._distinctEvent||this._distinctEvent&&!this.hasBinding(o,s))&&(o.addEventListener(s,e,n),this._boundedEvents.push({element:o,eventName:s,listener:e}))});else for(let o of r)(!this._distinctEvent||this._distinctEvent&&!this.hasBinding(a,o))&&(a.addEventListener(o,e,n),this._boundedEvents.push({element:a,eventName:o,listener:e}))}hasBinding(a,t){return this._boundedEvents.some(e=>e.element===a&&(!t||e.eventName===t))}unbind(a,t,e){var n;if(a){let r=Array.isArray(a)?a:[a],o=Array.isArray(t)?t||"":[t||""];for(let s of r){e||(e=this._boundedEvents.find(l=>{if(l.element===s&&(!t||l.eventName===t))return l.listener}));for(let l of o)(n=s==null?void 0:s.removeEventListener)==null||n.call(s,l,e)}}}unbindAll(){for(;this._boundedEvents.length>0;){let a=this._boundedEvents.pop(),{element:t,eventName:e,listener:n}=a;this.unbind(t,e,n)}}},tv=typeof window<"u"&&window.multipleSelect!==void 0?window.multipleSelect:{locales:{}};tv.locales={"en-US":{formatSelectAll(){return"[Select all]"},formatAllSelected(){return"All selected"},formatCountSelected(a,t){return`${a} of ${t} selected`},formatNoMatchesFound(){return"No matches found"},formatOkButton(){return"OK"}}};var iv=tv.locales,bb=50,Cb=4,nv={name:"",placeholder:"",classes:"",classPrefix:"",data:void 0,locale:void 0,selectAll:!0,single:void 0,singleRadio:!1,multiple:!1,hideOptgroupCheckboxes:!1,multipleWidth:80,width:void 0,dropWidth:void 0,maxHeight:250,maxHeightUnit:"px",position:"bottom",displayValues:!1,displayTitle:!1,displayDelimiter:", ",minimumCountSelected:3,ellipsis:!1,isOpen:!1,keepOpen:!1,openOnHover:!1,container:null,filter:!1,filterGroup:!1,filterPlaceholder:"",filterAcceptOnEnter:!1,filterByDataLength:void 0,customFilter(a){let{text:t,label:e,search:n}=a;return(e||t||"").includes(n)},showClear:!1,autoAdjustDropHeight:!1,autoAdjustDropPosition:!1,autoAdjustDropWidthByTextSize:!1,adjustedHeightPadding:10,useSelectOptionLabel:!1,useSelectOptionLabelToHtml:!1,styler:()=>!1,textTemplate:a=>a.innerHTML.trim(),labelTemplate:a=>a.label,onOpen:()=>!1,onClose:()=>!1,onCheckAll:()=>!1,onUncheckAll:()=>!1,onFocus:()=>!1,onBlur:()=>!1,onOptgroupClick:()=>!1,onClick:()=>!1,onFilter:()=>!1,onClear:()=>!1,onAfterCreate:()=>!1,onDestroy:()=>!1,onAfterDestroy:()=>!1,onDestroyed:()=>!1},yb=["init","getOptions","refreshOptions","getSelects","setSelects","enable","disable","open","close","check","uncheck","checkAll","uncheckAll","checkInvert","focus","blur","refresh","destroy"];Object.assign(nv,iv["en-US"]);var Eb={BLOCK_ROWS:bb,CLUSTER_BLOCKS:Cb,DEFAULTS:nv,METHODS:yb},No=Eb,Sb=class{constructor(a){jt(this,"cache"),jt(this,"clusterRows"),jt(this,"dataStart"),jt(this,"dataEnd"),jt(this,"rows"),jt(this,"scrollEl"),jt(this,"blockHeight"),jt(this,"clusterHeight"),jt(this,"contentEl"),jt(this,"parentEl"),jt(this,"itemHeight"),jt(this,"lastCluster"),jt(this,"scrollTop"),jt(this,"destroy"),jt(this,"callback"),jt(this,"sanitizer"),this.rows=a.rows,this.scrollEl=a.scrollEl,this.contentEl=a.contentEl,this.parentEl=a.contentEl.parentElement,this.callback=a.callback,this.cache={},this.scrollTop=this.scrollEl.scrollTop,this.initDOM(this.rows),this.scrollEl.scrollTop=this.scrollTop,this.lastCluster=0;let t=()=>{this.lastCluster!==(this.lastCluster=this.getNum())&&(this.initDOM(this.rows),this.callback())};this.scrollEl.addEventListener("scroll",t,!1),this.destroy=()=>{this.contentEl.innerHTML="",this.scrollEl.removeEventListener("scroll",t,!1)}}initDOM(a){if(typeof this.clusterHeight>"u"){this.cache.scrollTop=this.scrollEl.scrollTop;let l=a[0]+a[0]+a[0];this.contentEl.innerHTML=this.sanitizer?this.sanitizer(`${l}`):`${l}`,this.cache.data=l,this.getRowsHeight()}let t=this.initData(a,this.getNum()),e=t.rows.join(""),n=this.checkChanges("data",e),r=this.checkChanges("top",t.topOffset),o=this.checkChanges("bottom",t.bottomOffset),s=[];n&&r?(t.topOffset&&s.push(this.getExtra("top",t.topOffset)),s.push(e),t.bottomOffset&&s.push(this.getExtra("bottom",t.bottomOffset)),this.contentEl.innerHTML=this.sanitizer?this.sanitizer(s.join("")):s.join("")):o&&this.contentEl.lastChild&&(this.contentEl.lastChild.style.height=`${t.bottomOffset}px`)}getRowsHeight(){var a;if(typeof this.itemHeight>"u"){let t=((a=this.parentEl)==null?void 0:a.style.display)||"";this.parentEl&&(t===""||t==="none")&&(this.parentEl.style.display="block");let e=this.contentEl.children,n=e[Math.floor(e.length/2)];this.itemHeight=n.offsetHeight,this.parentEl&&(this.parentEl.style.display=t)}this.blockHeight=this.itemHeight*No.BLOCK_ROWS,this.clusterRows=No.BLOCK_ROWS*No.CLUSTER_BLOCKS,this.clusterHeight=this.blockHeight*No.CLUSTER_BLOCKS}getNum(){this.scrollTop=this.scrollEl.scrollTop;let a=(this.clusterHeight||0)-(this.blockHeight||0);return a&&Math.floor(this.scrollTop/a)||0}initData(a,t){if(a.length<No.BLOCK_ROWS)return{topOffset:0,bottomOffset:0,rowsAbove:0,rows:a};let e=Math.max((this.clusterRows-No.BLOCK_ROWS)*t,0),n=e+this.clusterRows,r=Math.max(e*this.itemHeight,0),o=Math.max((a.length-n)*this.itemHeight,0),s=[],l=e;r<1&&l++;for(let u=e;u<n;u++)a[u]&&s.push(a[u]);return this.dataStart=e,this.dataEnd=n,{topOffset:r,bottomOffset:o,rowsAbove:l,rows:s}}checkChanges(a,t){let e=t!==this.cache[a];return this.cache[a]=t,e}getExtra(a,t){let e=document.createElement("li");return e.className=`virtual-scroll-${a}`,t&&(e.style.height=`${t}px`),e.outerHTML}};function of(a){let t=0,e=0,n=0,r=0,o=window.innerHeight??0,s=window.innerWidth??0,l=xb(),u=l.top,h=l.left,c=sf(a);if(c){let p=c.top??0,m=c.left??0;e=p-u,t=o-(p-u),n=m-h,r=s-(m-h)}return{top:e,bottom:t,left:n,right:r}}function vo(a,t,e){let n=document.createElement(a);return t&&Object.keys(t).forEach(r=>{let o=t[r];typeof o=="object"?Object.assign(n[r],o):n[r]=t[r]}),e&&e.appendChild&&e.appendChild(n),n}function sf(a){var s;if(!a)return;let t=(s=a==null?void 0:a.getBoundingClientRect)==null?void 0:s.call(a),e=0,n=0,r=0,o=0;return(t==null?void 0:t.top)!==void 0&&t.left!==void 0&&(e=t.top+window.pageYOffset,n=t.left+window.pageXOffset,o=t.right,r=t.bottom),{top:e,left:n,bottom:r,right:o}}function Ru(a,t,e){let n=parseFloat(a.style[e]);if(!n||isNaN(n)){switch(t){case"outer":n=a[e==="width"?"offsetWidth":"offsetHeight"];break;case"scroll":n=a[e==="width"?"scrollWidth":"scrollHeight"];break;case"inner":default:n=a[e==="width"?"clientWidth":"clientHeight"];break}n=a.getBoundingClientRect()[e]}if(!n||isNaN(n)){let r=a.style.display,o=a.style.position;a.style.display="block",a.style.position="absolute";let s=window.getComputedStyle(a)[e];n=parseFloat(s),isNaN(n)&&(n=0),a.style.display=r,a.style.position=o}return n||0}function rv(a,t){let e=null,n=a.parentElement;for(;n;){let[r,o,s,l]=t.match(/^([a-z]*)([#.]{1})([a-z\-]+)$/i)||[];if(s&&l)for(let u of l.replace(s,"").split(" "))n.classList.contains(u)&&(o?(n==null?void 0:n.tagName.toLowerCase())===o&&(e=n):e=n);n=n.parentElement}return e}function wb(a,t){var e;(e=a.parentNode)==null||e.insertBefore(t,a.nextSibling)}function ov(a){let t=typeof a=="string"?a:String(a),e={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};return(t||"").toString().replace(/[&<>"']/g,n=>e[n])}function sv(a,t){a!=null&&a.style&&(a.style.display=a.style.display==="none"&&t!==!1||t===!0?"block":"none")}function xb(){return{left:window.pageXOffset||document.documentElement.scrollLeft||0,top:window.pageYOffset||document.documentElement.scrollTop||0}}function Tb(a,t,e=!1){let n=Object.keys(a),r=Object.keys(t);if(e&&n.length!==r.length)return!1;for(let o of n)if(r.includes(o)&&a[o]!==t[o])return!1;return!0}function lf(a){let t=()=>{let r={};for(let o in a)Object.prototype.hasOwnProperty.call(a,o)&&(r[o]=lf(a[o]));return r},e=()=>a.map(r=>lf(r)),n=Object.prototype.toString.call(a).slice(8,-1).toLowerCase();return n==="object"?t():n==="array"?e():a}function Ob(a){let t=0;return a.forEach((e,n)=>{e.type==="optgroup"?(e._key=`group_${n}`,e.visible=typeof e.visible>"u"?!0:e.visible,e.children.forEach((r,o)=>{r&&(r.visible=typeof(r==null?void 0:r.visible)>"u"?!0:r.visible,r.divider||(r._key=`option_${n}_${o}`,t+=1))})):(e.visible=typeof e.visible>"u"?!0:e.visible,e.divider||(e._key=`option_${n}`,t+=1))}),t}function Pu(a,t,e){if(Array.isArray(a))for(let n of a){if(n[t]===e||n[t]===`${+n[t]}`&&+n[t]===e)return n;if(n.type==="optgroup"){for(let r of n.children)if(r&&(r[t]===e||r[t]===`${+r[t]}`&&+r[t]===e))return r}}}function Ab(a){var r;let t=document.createElement("div");t.innerHTML=a;let e=t.getElementsByTagName("script"),n=e.length;for(;n--;)(r=e[n].parentNode)==null||r.removeChild(e[n]);return t.innerHTML}function af(a){return Object.keys(a).forEach(t=>a[t]===void 0?delete a[t]:""),a}function ua(a){return typeof a!="string"?a:a.normalize?a.normalize("NFD").replace(/[\u0300-\u036F]/g,""):[{base:"A",letters:/[\u0041\u24B6\uFF21\u00C0\u00C1\u00C2\u1EA6\u1EA4\u1EAA\u1EA8\u00C3\u0100\u0102\u1EB0\u1EAE\u1EB4\u1EB2\u0226\u01E0\u00C4\u01DE\u1EA2\u00C5\u01FA\u01CD\u0200\u0202\u1EA0\u1EAC\u1EB6\u1E00\u0104\u023A\u2C6F]/g},{base:"AA",letters:/[\uA732]/g},{base:"AE",letters:/[\u00C6\u01FC\u01E2]/g},{base:"AO",letters:/[\uA734]/g},{base:"AU",letters:/[\uA736]/g},{base:"AV",letters:/[\uA738\uA73A]/g},{base:"AY",letters:/[\uA73C]/g},{base:"B",letters:/[\u0042\u24B7\uFF22\u1E02\u1E04\u1E06\u0243\u0182\u0181]/g},{base:"C",letters:/[\u0043\u24B8\uFF23\u0106\u0108\u010A\u010C\u00C7\u1E08\u0187\u023B\uA73E]/g},{base:"D",letters:/[\u0044\u24B9\uFF24\u1E0A\u010E\u1E0C\u1E10\u1E12\u1E0E\u0110\u018B\u018A\u0189\uA779]/g},{base:"DZ",letters:/[\u01F1\u01C4]/g},{base:"Dz",letters:/[\u01F2\u01C5]/g},{base:"E",letters:/[\u0045\u24BA\uFF25\u00C8\u00C9\u00CA\u1EC0\u1EBE\u1EC4\u1EC2\u1EBC\u0112\u1E14\u1E16\u0114\u0116\u00CB\u1EBA\u011A\u0204\u0206\u1EB8\u1EC6\u0228\u1E1C\u0118\u1E18\u1E1A\u0190\u018E]/g},{base:"F",letters:/[\u0046\u24BB\uFF26\u1E1E\u0191\uA77B]/g},{base:"G",letters:/[\u0047\u24BC\uFF27\u01F4\u011C\u1E20\u011E\u0120\u01E6\u0122\u01E4\u0193\uA7A0\uA77D\uA77E]/g},{base:"H",letters:/[\u0048\u24BD\uFF28\u0124\u1E22\u1E26\u021E\u1E24\u1E28\u1E2A\u0126\u2C67\u2C75\uA78D]/g},{base:"I",letters:/[\u0049\u24BE\uFF29\u00CC\u00CD\u00CE\u0128\u012A\u012C\u0130\u00CF\u1E2E\u1EC8\u01CF\u0208\u020A\u1ECA\u012E\u1E2C\u0197]/g},{base:"J",letters:/[\u004A\u24BF\uFF2A\u0134\u0248]/g},{base:"K",letters:/[\u004B\u24C0\uFF2B\u1E30\u01E8\u1E32\u0136\u1E34\u0198\u2C69\uA740\uA742\uA744\uA7A2]/g},{base:"L",letters:/[\u004C\u24C1\uFF2C\u013F\u0139\u013D\u1E36\u1E38\u013B\u1E3C\u1E3A\u0141\u023D\u2C62\u2C60\uA748\uA746\uA780]/g},{base:"LJ",letters:/[\u01C7]/g},{base:"Lj",letters:/[\u01C8]/g},{base:"M",letters:/[\u004D\u24C2\uFF2D\u1E3E\u1E40\u1E42\u2C6E\u019C]/g},{base:"N",letters:/[\u004E\u24C3\uFF2E\u01F8\u0143\u00D1\u1E44\u0147\u1E46\u0145\u1E4A\u1E48\u0220\u019D\uA790\uA7A4]/g},{base:"NJ",letters:/[\u01CA]/g},{base:"Nj",letters:/[\u01CB]/g},{base:"O",letters:/[\u004F\u24C4\uFF2F\u00D2\u00D3\u00D4\u1ED2\u1ED0\u1ED6\u1ED4\u00D5\u1E4C\u022C\u1E4E\u014C\u1E50\u1E52\u014E\u022E\u0230\u00D6\u022A\u1ECE\u0150\u01D1\u020C\u020E\u01A0\u1EDC\u1EDA\u1EE0\u1EDE\u1EE2\u1ECC\u1ED8\u01EA\u01EC\u00D8\u01FE\u0186\u019F\uA74A\uA74C]/g},{base:"OI",letters:/[\u01A2]/g},{base:"OO",letters:/[\uA74E]/g},{base:"OU",letters:/[\u0222]/g},{base:"P",letters:/[\u0050\u24C5\uFF30\u1E54\u1E56\u01A4\u2C63\uA750\uA752\uA754]/g},{base:"Q",letters:/[\u0051\u24C6\uFF31\uA756\uA758\u024A]/g},{base:"R",letters:/[\u0052\u24C7\uFF32\u0154\u1E58\u0158\u0210\u0212\u1E5A\u1E5C\u0156\u1E5E\u024C\u2C64\uA75A\uA7A6\uA782]/g},{base:"S",letters:/[\u0053\u24C8\uFF33\u1E9E\u015A\u1E64\u015C\u1E60\u0160\u1E66\u1E62\u1E68\u0218\u015E\u2C7E\uA7A8\uA784]/g},{base:"T",letters:/[\u0054\u24C9\uFF34\u1E6A\u0164\u1E6C\u021A\u0162\u1E70\u1E6E\u0166\u01AC\u01AE\u023E\uA786]/g},{base:"TZ",letters:/[\uA728]/g},{base:"U",letters:/[\u0055\u24CA\uFF35\u00D9\u00DA\u00DB\u0168\u1E78\u016A\u1E7A\u016C\u00DC\u01DB\u01D7\u01D5\u01D9\u1EE6\u016E\u0170\u01D3\u0214\u0216\u01AF\u1EEA\u1EE8\u1EEE\u1EEC\u1EF0\u1EE4\u1E72\u0172\u1E76\u1E74\u0244]/g},{base:"V",letters:/[\u0056\u24CB\uFF36\u1E7C\u1E7E\u01B2\uA75E\u0245]/g},{base:"VY",letters:/[\uA760]/g},{base:"W",letters:/[\u0057\u24CC\uFF37\u1E80\u1E82\u0174\u1E86\u1E84\u1E88\u2C72]/g},{base:"X",letters:/[\u0058\u24CD\uFF38\u1E8A\u1E8C]/g},{base:"Y",letters:/[\u0059\u24CE\uFF39\u1EF2\u00DD\u0176\u1EF8\u0232\u1E8E\u0178\u1EF6\u1EF4\u01B3\u024E\u1EFE]/g},{base:"Z",letters:/[\u005A\u24CF\uFF3A\u0179\u1E90\u017B\u017D\u1E92\u1E94\u01B5\u0224\u2C7F\u2C6B\uA762]/g},{base:"a",letters:/[\u0061\u24D0\uFF41\u1E9A\u00E0\u00E1\u00E2\u1EA7\u1EA5\u1EAB\u1EA9\u00E3\u0101\u0103\u1EB1\u1EAF\u1EB5\u1EB3\u0227\u01E1\u00E4\u01DF\u1EA3\u00E5\u01FB\u01CE\u0201\u0203\u1EA1\u1EAD\u1EB7\u1E01\u0105\u2C65\u0250]/g},{base:"aa",letters:/[\uA733]/g},{base:"ae",letters:/[\u00E6\u01FD\u01E3]/g},{base:"ao",letters:/[\uA735]/g},{base:"au",letters:/[\uA737]/g},{base:"av",letters:/[\uA739\uA73B]/g},{base:"ay",letters:/[\uA73D]/g},{base:"b",letters:/[\u0062\u24D1\uFF42\u1E03\u1E05\u1E07\u0180\u0183\u0253]/g},{base:"c",letters:/[\u0063\u24D2\uFF43\u0107\u0109\u010B\u010D\u00E7\u1E09\u0188\u023C\uA73F\u2184]/g},{base:"d",letters:/[\u0064\u24D3\uFF44\u1E0B\u010F\u1E0D\u1E11\u1E13\u1E0F\u0111\u018C\u0256\u0257\uA77A]/g},{base:"dz",letters:/[\u01F3\u01C6]/g},{base:"e",letters:/[\u0065\u24D4\uFF45\u00E8\u00E9\u00EA\u1EC1\u1EBF\u1EC5\u1EC3\u1EBD\u0113\u1E15\u1E17\u0115\u0117\u00EB\u1EBB\u011B\u0205\u0207\u1EB9\u1EC7\u0229\u1E1D\u0119\u1E19\u1E1B\u0247\u025B\u01DD]/g},{base:"f",letters:/[\u0066\u24D5\uFF46\u1E1F\u0192\uA77C]/g},{base:"g",letters:/[\u0067\u24D6\uFF47\u01F5\u011D\u1E21\u011F\u0121\u01E7\u0123\u01E5\u0260\uA7A1\u1D79\uA77F]/g},{base:"h",letters:/[\u0068\u24D7\uFF48\u0125\u1E23\u1E27\u021F\u1E25\u1E29\u1E2B\u1E96\u0127\u2C68\u2C76\u0265]/g},{base:"hv",letters:/[\u0195]/g},{base:"i",letters:/[\u0069\u24D8\uFF49\u00EC\u00ED\u00EE\u0129\u012B\u012D\u00EF\u1E2F\u1EC9\u01D0\u0209\u020B\u1ECB\u012F\u1E2D\u0268\u0131]/g},{base:"j",letters:/[\u006A\u24D9\uFF4A\u0135\u01F0\u0249]/g},{base:"k",letters:/[\u006B\u24DA\uFF4B\u1E31\u01E9\u1E33\u0137\u1E35\u0199\u2C6A\uA741\uA743\uA745\uA7A3]/g},{base:"l",letters:/[\u006C\u24DB\uFF4C\u0140\u013A\u013E\u1E37\u1E39\u013C\u1E3D\u1E3B\u017F\u0142\u019A\u026B\u2C61\uA749\uA781\uA747]/g},{base:"lj",letters:/[\u01C9]/g},{base:"m",letters:/[\u006D\u24DC\uFF4D\u1E3F\u1E41\u1E43\u0271\u026F]/g},{base:"n",letters:/[\u006E\u24DD\uFF4E\u01F9\u0144\u00F1\u1E45\u0148\u1E47\u0146\u1E4B\u1E49\u019E\u0272\u0149\uA791\uA7A5]/g},{base:"nj",letters:/[\u01CC]/g},{base:"o",letters:/[\u006F\u24DE\uFF4F\u00F2\u00F3\u00F4\u1ED3\u1ED1\u1ED7\u1ED5\u00F5\u1E4D\u022D\u1E4F\u014D\u1E51\u1E53\u014F\u022F\u0231\u00F6\u022B\u1ECF\u0151\u01D2\u020D\u020F\u01A1\u1EDD\u1EDB\u1EE1\u1EDF\u1EE3\u1ECD\u1ED9\u01EB\u01ED\u00F8\u01FF\u0254\uA74B\uA74D\u0275]/g},{base:"oi",letters:/[\u01A3]/g},{base:"ou",letters:/[\u0223]/g},{base:"oo",letters:/[\uA74F]/g},{base:"p",letters:/[\u0070\u24DF\uFF50\u1E55\u1E57\u01A5\u1D7D\uA751\uA753\uA755]/g},{base:"q",letters:/[\u0071\u24E0\uFF51\u024B\uA757\uA759]/g},{base:"r",letters:/[\u0072\u24E1\uFF52\u0155\u1E59\u0159\u0211\u0213\u1E5B\u1E5D\u0157\u1E5F\u024D\u027D\uA75B\uA7A7\uA783]/g},{base:"s",letters:/[\u0073\u24E2\uFF53\u00DF\u015B\u1E65\u015D\u1E61\u0161\u1E67\u1E63\u1E69\u0219\u015F\u023F\uA7A9\uA785\u1E9B]/g},{base:"t",letters:/[\u0074\u24E3\uFF54\u1E6B\u1E97\u0165\u1E6D\u021B\u0163\u1E71\u1E6F\u0167\u01AD\u0288\u2C66\uA787]/g},{base:"tz",letters:/[\uA729]/g},{base:"u",letters:/[\u0075\u24E4\uFF55\u00F9\u00FA\u00FB\u0169\u1E79\u016B\u1E7B\u016D\u00FC\u01DC\u01D8\u01D6\u01DA\u1EE7\u016F\u0171\u01D4\u0215\u0217\u01B0\u1EEB\u1EE9\u1EEF\u1EED\u1EF1\u1EE5\u1E73\u0173\u1E77\u1E75\u0289]/g},{base:"v",letters:/[\u0076\u24E5\uFF56\u1E7D\u1E7F\u028B\uA75F\u028C]/g},{base:"vy",letters:/[\uA761]/g},{base:"w",letters:/[\u0077\u24E6\uFF57\u1E81\u1E83\u0175\u1E87\u1E85\u1E98\u1E89\u2C73]/g},{base:"x",letters:/[\u0078\u24E7\uFF58\u1E8B\u1E8D]/g},{base:"y",letters:/[\u0079\u24E8\uFF59\u1EF3\u00FD\u0177\u1EF9\u0233\u1E8F\u00FF\u1EF7\u1E99\u1EF5\u01B4\u024F\u1EFF]/g},{base:"z",letters:/[\u007A\u24E9\uFF5A\u017A\u1E91\u017C\u017E\u1E93\u1E95\u01B6\u0225\u0240\u2C6C\uA763]/g}].reduce((t,{letters:e,base:n})=>t.replace(e,n),a)}var kb=class{constructor(a,t){this.elm=a,jt(this,"_bindEventService"),jt(this,"allSelected",!1),jt(this,"fromHtml",!1),jt(this,"choiceElm"),jt(this,"closeElm"),jt(this,"filterText",""),jt(this,"updateData",[]),jt(this,"data",[]),jt(this,"dataTotal"),jt(this,"dropElm"),jt(this,"okButtonElm"),jt(this,"filterParentElm"),jt(this,"ulElm"),jt(this,"parentElm"),jt(this,"labelElm"),jt(this,"selectAllParentElm"),jt(this,"selectAllElm"),jt(this,"searchInputElm"),jt(this,"selectGroupElms"),jt(this,"selectItemElms"),jt(this,"disableItemElms"),jt(this,"noResultsElm"),jt(this,"options"),jt(this,"selectAllName",""),jt(this,"selectGroupName",""),jt(this,"selectItemName",""),jt(this,"tabIndex"),jt(this,"updateDataStart"),jt(this,"updateDataEnd"),jt(this,"virtualScroll"),jt(this,"locales",{}),this.options=Object.assign({},No.DEFAULTS,this.elm.dataset,t),this._bindEventService=new _b({distinctEvent:!0})}init(){this.initLocale(),this.initContainer(),this.initData(),this.initSelected(!0),this.initFilter(),this.initDrop(),this.initView(),this.options.onAfterCreate()}destroy(a=!0){var t,e,n,r,o;this.parentElm&&(this.options.onDestroy({hardDestroy:a}),a&&this.options.onHardDestroy(),this.elm.parentElement&&this.parentElm.parentElement&&this.elm.parentElement.insertBefore(this.elm,this.parentElm.parentElement.firstChild),this.elm.classList.remove("ms-offscreen"),this._bindEventService.unbindAll(),this.tabIndex&&(this.elm.tabIndex=+this.tabIndex),(t=this.virtualScroll)==null||t.destroy(),(e=this.dropElm)==null||e.remove(),(n=this.parentElm.parentNode)==null||n.removeChild(this.parentElm),this.fromHtml&&(delete this.options.data,this.fromHtml=!1),this.options.onAfterDestroy({hardDestroy:a}),a&&((o=(r=this.options).onAfterHardDestroy)==null||o.call(r),Object.keys(this.options).forEach(s=>delete this[s])))}initLocale(){if(this.options.locale){let a=window.multipleSelect.locales,t=this.options.locale.split(/-|_/);if(t[0]=t[0].toLowerCase(),t[1]&&(t[1]=t[1].toUpperCase()),a[this.options.locale])Object.assign(this.options,a[this.options.locale]);else if(a[t.join("-")])Object.assign(this.options,a[t.join("-")]);else if(a[t[0]])Object.assign(this.options,a[t[0]]);else throw new Error(`[multiple-select-vanilla] invalid locales "${this.options.locale}", make sure to import it before using it`)}}initContainer(){var r;let a=this.elm.getAttribute("name")||this.options.name||"";this.options.classes&&this.elm.classList.add(this.options.classes),this.options.classPrefix&&(this.elm.classList.add(this.options.classPrefix),this.options.size&&this.elm.classList.add(`${this.options.classPrefix}-${this.options.size}`)),this.elm.style.display="none",this.labelElm=this.elm.closest("label"),!this.labelElm&&this.elm.id&&(this.labelElm=document.createElement("label"),this.labelElm.htmlFor=this.elm.id),(r=this.labelElm)!=null&&r.querySelector("input")&&(this.labelElm=null),typeof this.options.single>"u"&&(this.options.single=!this.elm.multiple),this.parentElm=vo("div",{className:`ms-parent ${this.elm.className||""} ${this.options.classes}`,dataset:{test:"sel"}});let t=this.elm.getAttribute("title")||"";t&&(this.parentElm.title=t),this.options.placeholder=this.options.placeholder||this.elm.getAttribute("placeholder")||"",this.tabIndex=this.elm.getAttribute("tabindex");let e="";this.tabIndex!==null&&(this.elm.tabIndex=-1,e=this.tabIndex&&`tabindex="${this.tabIndex}"`),this.choiceElm=vo("button",{className:"ms-choice",type:"button"},this.parentElm),isNaN(e)&&(this.choiceElm.tabIndex=+e),this.choiceElm.appendChild(vo("span",{className:"ms-placeholder",textContent:this.options.placeholder})),this.options.showClear&&this.choiceElm.appendChild(vo("div",{className:"icon-close"})),this.choiceElm.appendChild(vo("div",{className:"icon-caret"})),this.dropElm=vo("div",{className:`ms-drop ${this.options.position}`},this.parentElm),a&&(this.dropElm.dataset.name=a);let n=this.elm.getAttribute("data-test")||this.options.dataTest;n&&(this.parentElm.dataset.test=n,this.dropElm.dataset.test=n),this.closeElm=this.choiceElm.querySelector(".icon-close"),this.options.dropWidth&&(this.dropElm.style.width=typeof this.options.dropWidth=="string"?this.options.dropWidth:`${this.options.dropWidth}px`),wb(this.elm,this.parentElm),this.elm.disabled&&this.choiceElm.classList.add("disabled"),this.selectAllName=`data-name="selectAll${a}"`,this.selectGroupName=`data-name="selectGroup${a}"`,this.selectItemName=`data-name="selectItem${a}"`,this.options.keepOpen||(this._bindEventService.unbind(document.body,"click"),this._bindEventService.bind(document.body,"click",o=>{o.target===this.choiceElm||rv(o.target,".ms-choice")===this.choiceElm||(o.target===this.dropElm||rv(o.target,".ms-drop")!==this.dropElm&&o.target!==this.elm)&&this.options.isOpen&&this.close()}))}initData(){let a=[];if(this.options.data){if(Array.isArray(this.options.data))this.data=this.options.data.map(t=>typeof t=="string"||typeof t=="number"?{text:t,value:t}:t);else if(typeof this.options.data=="object"){for(let[t,e]of Object.entries(this.options.data))a.push({value:t,text:`${e}`});this.data=a}}else this.elm.childNodes.forEach(t=>{this.initRow(t)&&a.push(this.initRow(t))}),this.options.data=a,this.data=a,this.fromHtml=!0;this.dataTotal=Ob(this.data||[])}initRow(a,t){var n,r;let e={};return((n=a.tagName)==null?void 0:n.toLowerCase())==="option"?(e.type="option",e.text=this.options.textTemplate(a),e.value=a.value,e.visible=!0,e.selected=!!a.selected,e.disabled=t||a.disabled,e.classes=a.getAttribute("class")||"",e.title=a.getAttribute("title")||"",a.dataset.value&&(e._value=a.dataset.value),Object.keys(a.dataset).length&&(e._data=a.dataset,e._data.divider&&(e.divider=e._data.divider)),e):((r=a.tagName)==null?void 0:r.toLowerCase())==="optgroup"?(e.type="optgroup",e.label=this.options.labelTemplate(a),e.visible=!0,e.selected=!!a.selected,e.disabled=a.disabled,e.children=[],Object.keys(a.dataset).length&&(e._data=a.dataset),a.childNodes.forEach(o=>{e.children.push(this.initRow(o,e.disabled))}),e):null}initDrop(){this.initList(),this.update(!0),this.options.isOpen&&this.open(10),this.options.openOnHover&&this.parentElm&&(this._bindEventService.bind(this.parentElm,"mouseover",()=>this.open(null)),this._bindEventService.bind(this.parentElm,"mouseout",()=>this.close()))}initFilter(){if(this.filterText="",this.options.filter||!this.options.filterByDataLength)return;let a=0;for(let t of this.data||[])t.type==="optgroup"?a+=t.children.length:a+=1;this.options.filter=a>this.options.filterByDataLength}initList(){if(this.options.filter&&(this.filterParentElm=vo("div",{className:"ms-search"},this.dropElm),this.filterParentElm.appendChild(vo("input",{autocomplete:"off",autocapitalize:"off",spellcheck:!1,type:"text",placeholder:this.options.filterPlaceholder||""}))),this.options.selectAll&&!this.options.single){let a=this.elm.getAttribute("name")||this.options.name||"";this.selectAllParentElm=vo("div",{className:"ms-select-all"});let t=document.createElement("label");vo("input",{type:"checkbox",checked:this.allSelected,dataset:{name:`selectAll${a}`}},t),t.appendChild(vo("span",{textContent:this.formatSelectAll()})),this.selectAllParentElm.appendChild(t),this.dropElm.appendChild(this.selectAllParentElm)}this.ulElm=document.createElement("ul"),this.dropElm.appendChild(this.ulElm),this.options.showOkButton&&!this.options.single&&(this.okButtonElm=vo("button",{className:"ms-ok-button",type:"button",textContent:this.formatOkButton()},this.dropElm)),this.initListItems()}initListItems(){var e;let a=this.getListRows(),t=0;if(this.options.selectAll&&!this.options.single&&(t=-1),a.length>No.BLOCK_ROWS*No.CLUSTER_BLOCKS){(e=this.virtualScroll)==null||e.destroy();let n=this.dropElm.style.display!=="none";n||(this.dropElm.style.left="-10000",this.dropElm.style.display="block");let r=()=>{var o,s;this.virtualScroll&&(this.updateDataStart=this.virtualScroll.dataStart+t,this.updateDataEnd=this.virtualScroll.dataEnd+t,this.updateDataStart<0&&(this.updateDataStart=0),this.updateDataEnd>(((o=this.data)==null?void 0:o.length)??0)&&(this.updateDataEnd=((s=this.data)==null?void 0:s.length)??0))};this.ulElm&&(this.virtualScroll=new Sb({rows:a,scrollEl:this.ulElm,contentEl:this.ulElm,sanitizer:this.options.sanitizer,callback:()=>{r(),this.events()}})),r(),n||(this.dropElm.style.left="0",this.dropElm.style.display="none")}else this.ulElm&&(this.ulElm.innerHTML=this.options.sanitizer?this.options.sanitizer(a.join("")):a.join("")),this.updateDataStart=0,this.updateDataEnd=this.updateData.length,this.virtualScroll=null;this.events()}getListRows(){var t;let a=[];return this.updateData=[],(t=this.data)==null||t.forEach(e=>{a.push(...this.initListItem(e))}),a.push(`<li class="ms-no-results">${this.formatNoMatchesFound()}</li>`),a}initListItem(a,t=0){let e=this.options.renderOptionLabelAsHtml||this.options.useSelectOptionLabelToHtml,n=a!=null&&a.title?`title="${a.title}"`:"",r=this.options.multiple?"multiple":"",o=this.options.single?"radio":"checkbox",s="";if(!(a!=null&&a.visible))return[];if(this.updateData.push(a),this.options.single&&!this.options.singleRadio&&(s="hide-radio "),a.selected&&(s+="selected "),a.type==="optgroup"){let h=this.options.styler(a),c=h?`style="${h}"`:"",p=[],m=this.options.hideOptgroupCheckboxes||this.options.single?`<span ${this.selectGroupName} data-key="${a._key}"></span>`:`<input type="checkbox"
          ${this.selectGroupName}
          data-key="${a._key}"
          ${a.selected?' checked="checked"':""}
          ${a.disabled?' disabled="disabled"':""}
        >`;return!s.includes("hide-radio")&&(this.options.hideOptgroupCheckboxes||this.options.single)&&(s+="hide-radio "),p.push(`
        <li class="${`group ${s}`.trim()}" ${c}>
        <label class="optgroup${this.options.single||a.disabled?" disabled":""}">
        ${m}${e?a.label:ov(a.label)}
        </label>
        </li>
      `),a.children.forEach(v=>{p.push(...this.initListItem(v,1))}),p}let l=this.options.styler(a),u=l?`style="${l}"`:"";return s+=a.classes||"",t&&this.options.single&&(s+=`option-level-${t} `),a.divider?'<li class="option-divider"/>':[`
      <li ${r||s?`class="${(r+s).trim()}"`:""} ${n} ${u}>
      <label ${a.disabled?'class="disabled"':""}>
      <input type="${o}"
        value="${encodeURI(a.value)}"
        data-key="${a._key}"
        ${this.selectItemName}
        ${a.selected?' checked="checked"':""}
        ${a.disabled?' disabled="disabled"':""}
      >
      <span>${e?a.text:ov(a.text)}</span>
      </label>
      </li>
    `]}initSelected(a=!1){var e,n;let t=0;for(let r of this.data||[])if(r.type==="optgroup"){let o=r.children.filter(s=>s&&s.selected&&!s.disabled&&s.visible).length;r.children.length&&(r.selected=!this.options.single&&o&&o===r.children.filter(s=>s&&!s.disabled&&s.visible&&!s.divider).length),t+=o}else t+=r.selected&&!r.disabled&&r.visible?1:0;this.allSelected=((e=this.data)==null?void 0:e.filter(r=>r.selected&&!r.disabled&&r.visible).length)===((n=this.data)==null?void 0:n.filter(r=>!r.disabled&&r.visible&&!r.divider).length),a||(this.allSelected?this.options.onCheckAll():t===0&&this.options.onUncheckAll())}initView(){let a;window.getComputedStyle?(a=window.getComputedStyle(this.elm).width,a==="auto"&&(a=Ru(this.dropElm,"outer","width")+20)):a=Ru(this.elm,"outer","width")+20,this.parentElm.style.width=`${this.options.width||a}px`,this.elm.classList.add("ms-offscreen")}events(){this._bindEventService.unbind(this.okButtonElm),this._bindEventService.unbind(this.searchInputElm),this._bindEventService.unbind(this.selectAllElm),this._bindEventService.unbind(this.selectGroupElms),this._bindEventService.unbind(this.selectItemElms),this._bindEventService.unbind(this.disableItemElms),this._bindEventService.unbind(this.noResultsElm),this.searchInputElm=this.dropElm.querySelector(".ms-search input"),this.selectAllElm=this.dropElm.querySelector(`input[${this.selectAllName}]`),this.selectGroupElms=this.dropElm.querySelectorAll(`input[${this.selectGroupName}],span[${this.selectGroupName}]`),this.selectItemElms=this.dropElm.querySelectorAll(`input[${this.selectItemName}]:enabled`),this.disableItemElms=this.dropElm.querySelectorAll(`input[${this.selectItemName}]:disabled`),this.noResultsElm=this.dropElm.querySelector(".ms-no-results");let a=t=>{t.preventDefault(),!t.target.classList.contains("icon-close")&&this[this.options.isOpen?"close":"open"]()};this.labelElm&&this._bindEventService.bind(this.labelElm,"click",t=>{t.target.nodeName.toLowerCase()==="label"&&(a(t),(!this.options.filter||!this.options.isOpen)&&this.focus(),t.stopPropagation())}),this._bindEventService.bind(this.choiceElm,"click",a),this.options.onFocus&&this._bindEventService.bind(this.choiceElm,"focus",this.options.onFocus),this.options.onBlur&&this._bindEventService.bind(this.choiceElm,"blur",this.options.onBlur),this._bindEventService.bind(this.parentElm,"keydown",t=>{t.code==="Escape"&&!this.options.keepOpen&&(this.close(),this.choiceElm.focus())}),this.closeElm&&this._bindEventService.bind(this.closeElm,"click",t=>{t.preventDefault(),this._checkAll(!1,!0),this.initSelected(!1),this.updateSelected(),this.update(),this.options.onClear()}),this.searchInputElm&&(this._bindEventService.bind(this.searchInputElm,"keydown",t=>{t.code==="Tab"&&t.shiftKey&&this.close()}),this._bindEventService.bind(this.searchInputElm,"keyup",t=>{var e,n,r;if(this.options.filterAcceptOnEnter&&["Enter","Space"].includes(t.code)&&((e=this.searchInputElm)!=null&&e.value)){if(this.options.single){let o=[];if((n=this.selectItemElms)==null||n.forEach(s=>{var l;((l=s.closest("li"))==null?void 0:l.style.display)!=="none"&&o.push(s)}),o.length){let[s]=this.selectItemName.split("=");o[0].hasAttribute(s)&&this.setSelects([o[0].value])}}else(r=this.selectAllElm)==null||r.click();this.close(),this.focus();return}this.filter()})),this.selectAllElm&&(this._bindEventService.unbind(this.selectAllElm,"click"),this._bindEventService.bind(this.selectAllElm,"click",t=>{var e;this._checkAll((e=t.currentTarget)==null?void 0:e.checked)})),this.okButtonElm&&(this._bindEventService.unbind(this.okButtonElm,"click"),this._bindEventService.bind(this.okButtonElm,"click",t=>{a(t),t.stopPropagation()})),this._bindEventService.bind(this.selectGroupElms,"click",t=>{let e=t.currentTarget,n=e.checked,r=Pu(this.data,"_key",e.dataset.key);this._checkGroup(r,n),this.options.onOptgroupClick(af({label:r.label,selected:r.selected,data:r._data,children:r.children.map(o=>{if(o)return af({text:o.text,value:o.value,selected:o.selected,disabled:o.disabled,data:o._data})})}))}),this._bindEventService.bind(this.selectItemElms,"click",t=>{let e=t.currentTarget,n=e.checked,r=Pu(this.data,"_key",e.dataset.key);this._check(r,n),this.options.onClick(af({text:r.text,value:r.value,selected:r.selected,data:r._data})),this.options.single&&this.options.isOpen&&!this.options.keepOpen&&this.close()})}open(a=0){if(a!==null&&a>=0){let t;clearTimeout(t),t=setTimeout(()=>this.openDrop(),a)}else this.openDrop()}openDrop(){var r,o,s,l,u,h,c;if((r=this.choiceElm)!=null&&r.classList.contains("disabled"))return;if(this.options.isOpen=!0,this.parentElm.classList.add("ms-parent-open"),(s=(o=this.choiceElm)==null?void 0:o.querySelector("div"))==null||s.classList.add("open"),this.dropElm.style.display="block",(l=this.selectAllElm)!=null&&l.parentElement&&(this.selectAllElm.parentElement.style.display="block"),this.noResultsElm&&(this.noResultsElm.style.display="none"),(u=this.data)!=null&&u.length||((h=this.selectAllElm)!=null&&h.parentElement&&(this.selectAllElm.parentElement.style.display="none"),this.noResultsElm&&(this.noResultsElm.style.display="block")),this.options.container){let p=sf(this.dropElm),m;this.options.container instanceof Node?m=this.options.container:typeof this.options.container=="string"&&(m=this.options.container==="body"?document.body:document.querySelector(this.options.container)),m.appendChild(this.dropElm),this.dropElm.style.top=`${(p==null?void 0:p.top)??0}px`,this.dropElm.style.left=`${(p==null?void 0:p.left)??0}px`,this.dropElm.style.minWidth="auto",this.dropElm.style.width=`${Ru(this.parentElm,"outer","width")}px`}let a=this.options.minHeight,t=this.options.maxHeight;if(this.options.maxHeightUnit==="row"){let p=this.dropElm.querySelector("ul>li");t=Ru(p,"outer","height")*this.options.maxHeight}let e=this.dropElm.querySelector("ul");e&&(a&&(e.style.minHeight=`${a}px`),e.style.maxHeight=`${t}px`),this.dropElm.querySelectorAll(".multiple").forEach(p=>p.style.width=`${this.options.multipleWidth}px`),(c=this.data)!=null&&c.length&&this.options.filter&&(this.searchInputElm&&(this.searchInputElm.value="",this.searchInputElm.focus()),this.filter(!0)),this.options.autoAdjustDropWidthByTextSize&&this.adjustDropWidthByText();let n=this.options.position;if(this.options.autoAdjustDropHeight){if(this.options.autoAdjustDropPosition){let{bottom:p,top:m}=of(this.dropElm),v=this.dropElm.getBoundingClientRect().height;n=p<v&&m>p?"top":"bottom"}this.adjustDropHeight(n)}this.options.autoAdjustDropPosition&&this.adjustDropPosition(!0),this.options.onOpen()}close(){var a,t;this.options.isOpen=!1,this.parentElm.classList.remove("ms-parent-open"),(t=(a=this.choiceElm)==null?void 0:a.querySelector("div"))==null||t.classList.remove("open"),this.dropElm.style.display="none",this.options.container&&(this.parentElm.appendChild(this.dropElm),this.dropElm.style.top="auto",this.dropElm.style.left="auto"),this.options.onClose()}update(a=!1){var u;let t=this.getSelects(),e=this.getSelects("text");this.options.displayValues&&(e=t);let n=(u=this.choiceElm)==null?void 0:u.querySelector("span"),r=t.length,o=null,s=()=>{if(this.options.useSelectOptionLabel||this.options.useSelectOptionLabelToHtml){let h=t.join(this.options.displayDelimiter);return this.options.useSelectOptionLabelToHtml?Ab(h):h}return e.join(this.options.displayDelimiter)};if(n){if(r===0){let h=this.options.placeholder||"";n.classList.add("ms-placeholder"),n.innerHTML=this.options.sanitizer?this.options.sanitizer(h):h}else r<this.options.minimumCountSelected?o=s():this.formatAllSelected()&&r===this.dataTotal?o=this.formatAllSelected():this.options.ellipsis&&r>this.options.minimumCountSelected?o=`${e.slice(0,this.options.minimumCountSelected).join(this.options.displayDelimiter)}...`:this.formatCountSelected(r,this.dataTotal)&&r>this.options.minimumCountSelected?o=this.formatCountSelected(r,this.dataTotal):o=s();if(o!==null&&(n==null||n.classList.remove("ms-placeholder"),this.options.renderOptionLabelAsHtml||this.options.useSelectOptionLabelToHtml?n.innerHTML=this.options.sanitizer?this.options.sanitizer(o):o:n.textContent=o),this.options.displayTitle||this.options.addTitle){this.options.addTitle&&console.warn("[Multiple-Select-Vanilla] Please note that the `addTitle` option was replaced with `displayTitle`.");let h=this.options.useSelectOptionLabel||this.options.useSelectOptionLabelToHtml?"value":"text";n.title=this.getSelects(h).join(this.options.displayDelimiter)}}let l=this.getSelects();this.options.single?this.elm.value=l.length?l[0]:"":Array.from(this.elm.options).forEach(h=>{h.selected=l.some(c=>c===h.value)}),a||this.elm.dispatchEvent(new Event("change"))}updateSelected(){var t;for(let e=this.updateDataStart;e<this.updateDataEnd;e++){let n=this.updateData[e],r=this.dropElm.querySelector(`input[data-key=${n._key}]`);if(r){r.checked=n.selected;let o=r.closest("li");o&&(n.selected&&!o.classList.contains("selected")?o.classList.add("selected"):n.selected||o.classList.remove("selected"))}}let a=((t=this.data)==null?void 0:t.filter(e=>e.visible).length)===0;this.selectAllElm&&(this.selectAllElm.checked=this.allSelected,sv(this.selectAllElm.closest("li"),!a)),sv(this.noResultsElm,a),this.virtualScroll&&(this.virtualScroll.rows=this.getListRows())}getData(){return this.options.data}getOptions(a=!0){let t=Object.assign({},this.options);return delete t.data,a?lf(t):this.options}refreshOptions(a){Tb(this.options,a,!0)||(this.options=Object.assign(this.options,a),this.destroy(!1),this.init())}getDropElement(){return this.dropElm}getParentElement(){return this.parentElm}getSelects(a="value"){let t=[];for(let e of this.data||[])if(e.type==="optgroup"){let n=e.children.filter(r=>r==null?void 0:r.selected);if(!n.length)continue;if(a==="value"||this.options.single)t.push(...n.map(r=>a==="value"&&r._value||r[a]));else{let r=[];r.push("["),r.push(e.label),r.push(`: ${n.map(o=>o[a]).join(", ")}`),r.push("]"),t.push(r.join(""))}}else e.selected&&t.push(a==="value"&&e._value||e[a]);return t}setSelects(a,t="value",e=!1){let n=!1,r=o=>{var s;for(let l of o){let u=!1;if(t==="text"){let h=document.createElement("div");h.innerHTML=l.text,u=a.includes(((s=h.textContent)==null?void 0:s.trim())??"")}else u=a.includes(l._value||l.value),!u&&l.value===`${+l.value}`&&(u=a.includes(+l.value));l.selected!==u&&(n=!0),l.selected=u}};for(let o of this.data||[])o.type==="optgroup"?r(o.children):r([o]);n&&(this.initSelected(e),this.updateSelected(),this.update(e))}enable(){var a;(a=this.choiceElm)==null||a.classList.remove("disabled")}disable(){var a;(a=this.choiceElm)==null||a.classList.add("disabled")}check(a){let t=Pu(this.data,"value",a);t&&this._check(t,!0)}uncheck(a){let t=Pu(this.data,"value",a);t&&this._check(t,!1)}_check(a,t){this.options.single&&this._checkAll(!1,!0),a.selected=t,this.initSelected(),this.updateSelected(),this.update()}checkAll(){this._checkAll(!0)}uncheckAll(){this._checkAll(!1)}_checkAll(a,t){for(let e of this.data||[])e.type==="optgroup"?this._checkGroup(e,a,!0):!e.disabled&&!e.divider&&(t||e.visible)&&(e.selected=a);t||(this.initSelected(),this.updateSelected(),this.update())}_checkGroup(a,t,e){a.selected=t,a.children.forEach(n=>{n&&!n.disabled&&!n.divider&&(e||n.visible)&&(n.selected=t)}),e||(this.initSelected(),this.updateSelected(),this.update())}checkInvert(){if(!this.options.single){for(let a of this.data||[])if(a.type==="optgroup")for(let t of a.children)t&&(t.divider||(t.selected=!t.selected));else a&&!a.divider&&(a.selected=!a.selected);this.initSelected(),this.updateSelected(),this.update()}}focus(){var a;(a=this.choiceElm)==null||a.focus(),this.options.onFocus()}blur(){var a;(a=this.choiceElm)==null||a.blur(),this.options.onBlur()}refresh(){this.destroy(!1),this.init()}filter(a){var n;let t=((n=this.searchInputElm)==null?void 0:n.value.trim())??"",e=t.toLowerCase();if(this.filterText!==e){this.filterText=e;for(let r of this.data||[])if(r.type==="optgroup")if(this.options.filterGroup){let o=`${(r==null?void 0:r.label)??""}`;if(r!=null){let s=this.options.customFilter({label:ua(o.toLowerCase()),search:ua(e),originalLabel:o,originalSearch:t,row:r});r.visible=s;for(let l of r.children)l&&(l.visible=s)}}else{for(let o of r.children)if(o!=null){let s=`${(o==null?void 0:o.text)??""}`;o.visible=this.options.customFilter({text:ua(s.toLowerCase()),search:ua(e),originalText:s,originalSearch:t,row:o,parent:r})}r.visible=r.children.filter(o=>o==null?void 0:o.visible).length>0}else{let o=`${(r==null?void 0:r.text)??""}`;r.visible=this.options.customFilter({text:ua(o.toLowerCase()),search:ua(e),originalText:o,originalSearch:t,row:r})}this.initListItems(),this.initSelected(a),this.updateSelected(),a||this.options.onFilter(e)}}adjustDropHeight(a){var h,c,p,m;let t=a!=="top",e=((h=this.filterParentElm)==null?void 0:h.getBoundingClientRect().height)??0,n=((c=this.okButtonElm)==null?void 0:c.getBoundingClientRect().height)??0,r=this.options.single?0:((p=this.selectAllParentElm)==null?void 0:p.getBoundingClientRect().height)??0,o=e+n+r+5,{bottom:s,top:l}=of(this.parentElm),u=this.options.maxHeight;if(t?u=s-o-this.options.adjustedHeightPadding:u=l-o-this.options.adjustedHeightPadding,!this.options.maxHeight||this.options.maxHeight&&u<this.options.maxHeight){let v=(m=this.dropElm)==null?void 0:m.querySelector("ul");return v&&(v.style.maxHeight=`${u}px`),!0}return!1}adjustDropPosition(a){let t="bottom";if(this.dropElm&&this.parentElm){let{bottom:e,top:n}=of(this.dropElm),{top:r,left:o}=sf(this.parentElm),s=this.dropElm.getBoundingClientRect().height,l=this.dropElm.getBoundingClientRect().width,u=document.body.offsetWidth||window.innerWidth,h=this.parentElm.getBoundingClientRect().width;if(e>s)t="bottom";else if(s>e&&n>e){if(this.options.container){let c=r-s;c<0&&(c=0),(c>0||a)&&(t="top",this.dropElm.style.top=`${c<0?0:c}px`)}else t="top",this.dropElm.classList.add(t);this.dropElm.classList.remove("bottom")}if(u-l<o){let c=o-(l-h);this.dropElm.style.left=`${c}px`}}return t}adjustDropWidthByText(){let a=this.parentElm.scrollWidth;(this.options.dropWidth||this.options.width)&&(a=this.options.dropWidth||this.options.width||0);let t=this.dropElm.querySelector(".ms-select-all span"),e=this.dropElm.querySelector("ul"),n=26,r=(t==null?void 0:t.clientWidth)??0+n,o=e.scrollHeight>e.clientHeight?this.getScrollbarWidth():0,s=0;this.dropElm.querySelectorAll("li label").forEach(l=>{l.scrollWidth>s&&(s=l.scrollWidth)}),s+=n+o,s<r&&(s=r),this.options.maxWidth&&s>this.options.maxWidth&&(s=this.options.maxWidth),this.options.minWidth&&s<this.options.minWidth&&(s=this.options.minWidth),(a==="100%"||+a<s)&&(this.dropElm.style.width=`${s}px`,this.dropElm.style.maxWidth=`${s}px`)}getScrollbarWidth(){var r;let a=document.createElement("div");a.style.visibility="hidden",a.style.width="100px",document.body.appendChild(a);let t=a.offsetWidth;a.style.overflow="scroll";let e=document.createElement("div");e.style.width="100%",a.appendChild(e);let n=e.offsetWidth;return(r=a.parentNode)==null||r.removeChild(a),t-n}formatAllSelected(){return this.options.allSelectedText||this.options.formatAllSelected()}formatCountSelected(a,t){return this.options.countSelectedText?this.options.countSelectedText.replace("#",`${a}`).replace("%",`${t}`):this.options.formatCountSelected(a,t)}formatNoMatchesFound(){return this.options.noMatchesFoundText||this.options.formatNoMatchesFound()}formatOkButton(){return this.options.okButtonText||this.options.formatOkButton()}formatSelectAll(){return this.options.selectAllText||this.options.formatSelectAll()}},ca=function(a,t){return typeof a=="string"?df(document.querySelectorAll(a),t):a instanceof Node?df([a],t):df(a,t)};function df(a,t){let e=Array.from(a),n=[];for(let r=0;r<e.length;r++){let o=e[r];try{o._multipleSelect!==void 0&&(o._multipleSelect.destroy(),delete o._multipleSelect),o._multipleSelect=new kb(o,t||{}),o._multipleSelect.init();let s=o._multipleSelect.getOptions(!1);s.onHardDestroy=()=>delete o._multipleSelect,s.onAfterHardDestroyed=()=>n[r]=null,n.push(o._multipleSelect)}catch(s){console.error(s)}}return n.length===1?n[0]:n}ca.defaults=No.DEFAULTS,ca.locales={...iv},ca.methods=No.METHODS,typeof window<"u"&&(window.multipleSelect=ca);class lv{constructor(t,e,n,r=!0){this.translaterService=t,this.collectionService=e,this.rxjs=n,this._isMultipleSelect=!0,this._collectionLength=0,this._shouldTriggerQuery=!0,this.isFilled=!1,this.enableTranslateLabel=!1,this.subscriptions=[],this._isMultipleSelect=r}get collectionOptions(){var t,e,n;return(n=(e=(t=this.columnDef)===null||t===void 0?void 0:t.filter)===null||e===void 0?void 0:e.collectionOptions)!==null&&n!==void 0?n:{}}get columnFilter(){var t,e;return(e=(t=this.columnDef)===null||t===void 0?void 0:t.filter)!==null&&e!==void 0?e:{}}get customStructure(){var t,e;return(e=(t=this.columnDef)===null||t===void 0?void 0:t.filter)===null||e===void 0?void 0:e.customStructure}get gridOptions(){var t,e;return(e=(t=this.grid)===null||t===void 0?void 0:t.getOptions())!==null&&e!==void 0?e:{}}get defaultOperator(){return this.isMultipleSelect?Lt.in:Lt.equal}get isMultipleSelect(){return this._isMultipleSelect}get msInstance(){return this._msInstance}get selectOptions(){return this.defaultOptions}get operator(){var t,e;return(e=(t=this.columnFilter)===null||t===void 0?void 0:t.operator)!==null&&e!==void 0?e:this.defaultOperator}set operator(t){this.columnFilter&&(this.columnFilter.operator=t)}init(t){var e,n,r,o,s,l,u,h,c,p,m,v,_,C,x,S,y,D,A;if(!t)throw new Error('[Slickgrid-Universal] A filter must always have an "init()" with valid arguments.');if(this.grid=t.grid,this.callback=t.callback,this.columnDef=t.columnDef,this.searchTerms=(t.hasOwnProperty("searchTerms")?t.searchTerms:[])||[],this.filterContainerElm=t.filterContainerElm,!this.grid||!this.columnDef||!this.columnFilter||!this.columnFilter.collection&&!this.columnFilter.collectionAsync)throw new Error(`[Slickgrid-Universal] You need to pass a "collection" (or "collectionAsync") for the MultipleSelect/SingleSelect Filter to work correctly. Also each option should include a value/label pair (or value/labelKey when using Locale). For example:: { filter: model: Filters.multipleSelect, collection: [{ value: true, label: 'True' }, { value: false, label: 'False'}] }`);if(this.enableTranslateLabel=(n=(e=this.columnFilter)===null||e===void 0?void 0:e.enableTranslateLabel)!==null&&n!==void 0?n:!1,this.labelName=(o=(r=this.customStructure)===null||r===void 0?void 0:r.label)!==null&&o!==void 0?o:"label",this.labelPrefixName=(l=(s=this.customStructure)===null||s===void 0?void 0:s.labelPrefix)!==null&&l!==void 0?l:"labelPrefix",this.labelSuffixName=(h=(u=this.customStructure)===null||u===void 0?void 0:u.labelSuffix)!==null&&h!==void 0?h:"labelSuffix",this.optionLabel=(p=(c=this.customStructure)===null||c===void 0?void 0:c.optionLabel)!==null&&p!==void 0?p:"value",this.valueName=(v=(m=this.customStructure)===null||m===void 0?void 0:m.value)!==null&&v!==void 0?v:"value",this.enableTranslateLabel&&(!this.translaterService||typeof this.translaterService.translate!="function"))throw new Error('[select-filter] The Translate Service is required for the Select Filter to work correctly when "enableTranslateLabel" is set.');this._locales=(C=(_=this.gridOptions)===null||_===void 0?void 0:_.locales)!==null&&C!==void 0?C:je.locales,this.initMultipleSelectTemplate();let P=((x=this.gridOptions)===null||x===void 0?void 0:x.defaultFilterPlaceholder)||"";!((S=this.columnFilter)===null||S===void 0)&&S.placeholder&&(P=this.columnFilter.placeholder),this.defaultOptions.placeholder=P||"",this._isMultipleSelect&&(!((y=this.columnDef)===null||y===void 0)&&y.filter)&&(this.columnDef.filter.emptySearchTermReturnAllValues=(A=(D=this.columnDef.filter)===null||D===void 0?void 0:D.emptySearchTermReturnAllValues)!==null&&A!==void 0?A:!1);const M=this.columnFilter.collection||[];return this.renderDomElement(M),new Promise(async(B,Q)=>{try{const L=this.columnFilter.collectionAsync;let le;L&&!this.columnFilter.collection?(le=Ym(L,this.columnDef,this.renderDomElement.bind(this),this.rxjs,this.subscriptions),B(le)):(le=M,B(M)),(L||this.columnFilter.enableCollectionWatch)&&(await(le??L),this.watchCollectionChanges())}catch(L){Q(L)}})}clear(t=!0){var e,n,r;this._msInstance&&this._collectionLength>0&&(this._msInstance.setSelects([]),(e=this.filterElm)===null||e===void 0||e.classList.remove("filled"),(r=(n=this._msInstance)===null||n===void 0?void 0:n.getParentElement())===null||r===void 0||r.classList.remove("filled"),this.searchTerms=[],this._shouldTriggerQuery=t,this.callback(void 0,{columnDef:this.columnDef,clearFilterTriggered:!0,shouldTriggerQuery:this._shouldTriggerQuery}),this._shouldTriggerQuery=!0)}destroy(){var t,e;typeof((t=this._msInstance)===null||t===void 0?void 0:t.destroy)=="function"&&this._msInstance.destroy(),(e=this.filterElm)===null||e===void 0||e.remove(),Wd(this.subscriptions)}getValues(){var t,e;return(e=(t=this._msInstance)===null||t===void 0?void 0:t.getSelects())!==null&&e!==void 0?e:[]}setValues(t,e){t!==void 0&&this._msInstance&&(t=Array.isArray(t)?t.every(n=>$d(n))?t.map(String):t:[t],this._msInstance.setSelects(t)),this.updateFilterStyle(this.getValues().length>0),this.operator=e||this.defaultOperator}filterCollection(t){var e;let n=t;if(this.columnFilter&&this.columnFilter.collectionFilterBy){const r=this.columnFilter.collectionFilterBy,o=((e=this.columnFilter.collectionOptions)===null||e===void 0?void 0:e.filterResultAfterEachPass)||null;n=this.collectionService.filterCollection(n,r,o)}return n}sortCollection(t){let e=t;if(this.columnFilter&&this.columnFilter.collectionSortBy){const n=this.columnFilter.collectionSortBy;e=this.collectionService.sortCollection(this.columnDef,e,n,this.enableTranslateLabel)}return e}watchCollectionChanges(){var t;!((t=this.columnFilter)===null||t===void 0)&&t.collection&&(Ma(this.columnFilter.collection,e=>{this.renderDomElement(this.columnFilter.collection||e||[])}),Jc(this.columnFilter,"collection",e=>{this.renderDomElement(e||[]),this.columnFilter.collection&&Ma(this.columnFilter.collection,n=>{this.renderDomElement(this.columnFilter.collection||n||[])})}))}renderDomElement(t){var e,n,r,o;if(!Array.isArray(t)&&(!((e=this.collectionOptions)===null||e===void 0)&&e.collectionInsideObjectProperty)){const h=this.collectionOptions.collectionInsideObjectProperty;t=bn(t,h||"")}if(!Array.isArray(t))throw new Error('The "collection" passed to the Select Filter is not a valid array.');let s=[];if(t.length>0&&(s=[...t]),!((n=this.collectionOptions)===null||n===void 0)&&n.addBlankEntry&&Array.isArray(s)&&s.length>0&&s[0][this.valueName]!==""&&s.unshift(this.createBlankEntry()),!((r=this.collectionOptions)===null||r===void 0)&&r.addCustomFirstEntry&&Array.isArray(s)&&s.length>0&&s[0][this.valueName]!==this.collectionOptions.addCustomFirstEntry[this.valueName]&&s.unshift(this.collectionOptions.addCustomFirstEntry),!((o=this.collectionOptions)===null||o===void 0)&&o.addCustomLastEntry&&Array.isArray(s)&&s.length>0){const h=s.length-1;s[h][this.valueName]!==this.collectionOptions.addCustomLastEntry[this.valueName]&&s.push(this.collectionOptions.addCustomLastEntry)}let l=s;l=this.filterCollection(l),l=this.sortCollection(l);const u=em("filter",l,this.columnDef,this.grid,this.isMultipleSelect,this.translaterService,this.searchTerms||[]);this.isFilled=u.hasFoundSearchTerm,this.createFilterElement(u.selectElement,u.dataCollection),this._collectionLength=l.length}createBlankEntry(){const t={[this.labelName]:"",[this.valueName]:""};return this.labelPrefixName&&(t[this.labelPrefixName]=""),this.labelSuffixName&&(t[this.labelSuffixName]=""),t}createFilterElement(t,e){var n,r;const o=(r=(n=this.columnDef)===null||n===void 0?void 0:n.id)!==null&&r!==void 0?r:"";this.elementName=`filter-${o}`,this.defaultOptions.name=this.elementName,sn(this.filterContainerElm),this.filterElm=t,this.filterElm.dataset.columnId=`${o}`,this.updateFilterStyle(this.isFilled),this.filterContainerElm.appendChild(t);const s=this.columnFilter?this.columnFilter.filterOptions:{};this.filterElmOptions={...this.defaultOptions,...s,data:e},this._msInstance=ca(t,this.filterElmOptions)}initMultipleSelectTemplate(){var t,e,n,r,o,s,l,u,h,c,p,m,v,_,C,x;const S=(e=(t=this.gridOptions)===null||t===void 0?void 0:t.enableTranslate)!==null&&e!==void 0?e:!1,D={autoAdjustDropHeight:!0,autoAdjustDropPosition:!0,autoAdjustDropWidthByTextSize:!0,name:`${(r=(n=this.columnDef)===null||n===void 0?void 0:n.id)!==null&&r!==void 0?r:""}`,container:"body",filter:!1,maxHeight:275,single:!0,renderOptionLabelAsHtml:(s=(o=this.columnFilter)===null||o===void 0?void 0:o.enableRenderHtml)!==null&&s!==void 0?s:!1,sanitizer:A=>Mn(this.gridOptions,A),onClose:()=>this.onTriggerEvent()};if(this._isMultipleSelect){D.single=!1,D.showOkButton=!0,D.displayTitle=!0;const A=ao(this.gridOptions);D.countSelectedText=S&&(!((l=this.translaterService)===null||l===void 0)&&l.translate)?this.translaterService.translate(`${A}X_OF_Y_SELECTED`):(u=this._locales)===null||u===void 0?void 0:u.TEXT_X_OF_Y_SELECTED,D.allSelectedText=S&&(!((h=this.translaterService)===null||h===void 0)&&h.translate)?this.translaterService.translate(`${A}ALL_SELECTED`):(c=this._locales)===null||c===void 0?void 0:c.TEXT_ALL_SELECTED,D.noMatchesFoundText=S&&(!((p=this.translaterService)===null||p===void 0)&&p.translate)?this.translaterService.translate(`${A}NO_MATCHES_FOUND`):(m=this._locales)===null||m===void 0?void 0:m.TEXT_NO_MATCHES_FOUND,D.okButtonText=S&&(!((v=this.translaterService)===null||v===void 0)&&v.translate)?this.translaterService.translate(`${A}OK`):(_=this._locales)===null||_===void 0?void 0:_.TEXT_OK,D.selectAllText=S&&(!((C=this.translaterService)===null||C===void 0)&&C.translate)?this.translaterService.translate(`${A}SELECT_ALL`):(x=this._locales)===null||x===void 0?void 0:x.TEXT_SELECT_ALL}this.defaultOptions=D}onTriggerEvent(){if(this._msInstance){const t=this.getValues();this.updateFilterStyle(Array.isArray(t)&&t.length>1||t.length===1&&t[0]!==""),this.searchTerms=t,this.callback(void 0,{columnDef:this.columnDef,operator:this.operator,searchTerms:t,shouldTriggerQuery:this._shouldTriggerQuery}),this._shouldTriggerQuery=!0}}updateFilterStyle(t){var e,n,r,o,s,l;t?(this.isFilled=!0,(e=this.filterElm)===null||e===void 0||e.classList.add("filled"),(r=(n=this._msInstance)===null||n===void 0?void 0:n.getParentElement())===null||r===void 0||r.classList.add("filled")):(this.isFilled=!1,(o=this.filterElm)===null||o===void 0||o.classList.remove("filled"),(l=(s=this._msInstance)===null||s===void 0?void 0:s.getParentElement())===null||l===void 0||l.classList.remove("filled"))}}class Ib extends lv{constructor(t,e,n){super(t,e,n,!0),this.translaterService=t,this.collectionService=e,this.rxjs=n}}class Db{constructor(t){this.translater=t,this._clearFilterTriggered=!1,this._shouldTriggerQuery=!0,this._currentValues=[],this.searchTerms=[],this._bindEventService=new Fn}get columnFilter(){var t,e;return(e=(t=this.columnDef)===null||t===void 0?void 0:t.filter)!==null&&e!==void 0?e:{}}get defaultOperator(){return Lt.equal}get gridOptions(){return this.grid&&this.grid.getOptions?this.grid.getOptions():{}}get operator(){var t,e;return(e=(t=this.columnFilter)===null||t===void 0?void 0:t.operator)!==null&&e!==void 0?e:this.defaultOperator}set operator(t){this.columnFilter&&(this.columnFilter.operator=t)}init(t){if(!t)throw new Error('[Slickgrid-Universal] A filter must always have an "init()" with valid arguments.');if(this.grid=t.grid,this.callback=t.callback,this.columnDef=t.columnDef,this.searchTerms=(t.hasOwnProperty("searchTerms")?t.searchTerms:[])||[],this.filterContainerElm=t.filterContainerElm,!this.grid||!this.columnDef||!this.columnFilter||!this.columnFilter.collection)throw new Error('[Slickgrid-Universal] You need to pass a "collection" for the Native Select Filter to work correctly.');if(this.columnFilter.enableTranslateLabel&&!this.gridOptions.enableTranslate&&(!this.translater||typeof this.translater.translate!="function"))throw new Error('The I18N Service is required for the Native Select Filter to work correctly when "enableTranslateLabel" is set.');let e=Array.isArray(this.searchTerms)&&this.searchTerms.length>=0?this.searchTerms[0]:"";(typeof e=="boolean"||typeof e=="number")&&(e=`${e??""}`),this.filterElm=this.createFilterElement(e),this._bindEventService.bind(this.filterElm,"change",this.handleOnChange.bind(this))}clear(t=!0){this.filterElm&&(this._clearFilterTriggered=!0,this._shouldTriggerQuery=t,this.searchTerms=[],this._currentValues=[],this.filterElm.value="",this.filterElm.classList.remove("filled"),this.filterElm.dispatchEvent(new Event("change")))}destroy(){var t,e;this._bindEventService.unbindAll(),(e=(t=this.filterElm)===null||t===void 0?void 0:t.remove)===null||e===void 0||e.call(t)}getValues(){return this._currentValues||[]}setValues(t,e){var n;Array.isArray(t)?(this.filterElm.value=`${(n=t[0])!==null&&n!==void 0?n:""}`,this._currentValues=t):t&&(this.filterElm.value=`${t??""}`,this._currentValues=[t]),this.getValues().length>0?this.filterElm.classList.add("filled"):this.filterElm.classList.remove("filled"),this.operator=e||this.defaultOperator}buildFilterSelectFromCollection(t){var e,n,r,o,s,l,u,h,c,p,m,v;const _=(n=(e=this.columnDef)===null||e===void 0?void 0:e.id)!==null&&n!==void 0?n:"",C=Ie("select",{className:`form-control search-filter filter-${_}`,ariaLabel:(o=(r=this.columnFilter)===null||r===void 0?void 0:r.ariaLabel)!==null&&o!==void 0?o:`${jr(_+"")} Search Filter`}),x=(l=(s=this.columnFilter.customStructure)===null||s===void 0?void 0:s.label)!==null&&l!==void 0?l:"label",S=(h=(u=this.columnFilter.customStructure)===null||u===void 0?void 0:u.value)!==null&&h!==void 0?h:"value",y=(p=(c=this.columnFilter)===null||c===void 0?void 0:c.enableTranslateLabel)!==null&&p!==void 0?p:!1;if(t.every(D=>typeof D=="string"))for(const D of t)C.appendChild(Ie("option",{value:D,label:D,textContent:D}));else for(const D of t){if(!D||D[x]===void 0&&D.labelKey===void 0)throw new Error("A collection with value/label (or value/labelKey when using Locale) is required to populate the Native Select Filter list, for example:: { filter: model: Filters.select, collection: [ { value: '1', label: 'One' } ]')");const A=D.labelKey||D[x],P=(D.labelKey||y)&&typeof this.translater!==void 0&&(!((v=(m=this.translater).getCurrentLanguage)===null||v===void 0)&&v.call(m))?this.translater.translate(A||" "):A;C.appendChild(Ie("option",{value:D[S],textContent:P}))}return C}createFilterElement(t){var e,n,r,o;const s=(n=(e=this.columnDef)===null||e===void 0?void 0:e.id)!==null&&n!==void 0?n:"";sn(this.filterContainerElm);const l=t||"",u=(o=(r=this.columnFilter)===null||r===void 0?void 0:r.collection)!==null&&o!==void 0?o:[];if(!Array.isArray(u))throw new Error('The "collection" passed to the Native Select Filter is not a valid array.');const h=this.buildFilterSelectFromCollection(u);return h.value=l,h.dataset.columnid=`${s||""}`,l&&(this._currentValues=[l]),this.filterContainerElm.appendChild(h),h}handleOnChange(t){const e=t&&t.target&&t.target.value||"";this._currentValues=[e],this._clearFilterTriggered?(this.callback(t,{columnDef:this.columnDef,clearFilterTriggered:this._clearFilterTriggered,shouldTriggerQuery:this._shouldTriggerQuery}),this.filterElm.classList.remove("filled")):(e===""?this.filterElm.classList.remove("filled"):this.filterElm.classList.add("filled"),this.callback(t,{columnDef:this.columnDef,operator:this.operator,searchTerms:[e],shouldTriggerQuery:this._shouldTriggerQuery})),this._clearFilterTriggered=!1,this._shouldTriggerQuery=!0}}class Rb extends lv{constructor(t,e,n){super(t,e,n,!1),this.translaterService=t,this.collectionService=e,this.rxjs=n}}class Pb extends rf{constructor(t){super(t),this.translaterService=t,super.sliderType="single"}}class Fb extends rf{constructor(t){super(t),this.translaterService=t,super.sliderType="double"}}const Fu={autocompleter:J0,compoundDate:lb,compoundInput:ev,compoundInputNumber:ab,compoundInputPassword:db,compoundInputText:ev,compoundSlider:cb,dateRange:hb,input:Zs,inputMask:fb,inputNumber:pb,inputPassword:mb,inputText:Zs,multipleSelect:Ib,select:Db,singleSelect:Rb,slider:Pb,sliderRange:Fb};class Mb{constructor(t,e,n,r){var o,s;this.config=t,this.translaterService=e,this.collectionService=n,this.rxjs=r,this._options=(s=(o=this.config)===null||o===void 0?void 0:o.options)!==null&&s!==void 0?s:{}}addRxJsResource(t){this.rxjs=t}createFilter(t){let e;return t!=null&&t.model&&(e=typeof t.model=="function"?new t.model(this.translaterService,this.collectionService,this.rxjs):t.model),!e&&this._options.defaultFilter&&(e=new this._options.defaultFilter(this.translaterService,this.collectionService,this.rxjs)),e}}const uf={alwaysShowVerticalScroll:!0,autoEdit:!1,asyncEditorLoading:!1,autoFitColumnsOnFirstLoad:!0,autoFixResizeTimeout:5*60*5,autoFixResizeRequiredGoodCount:2,autoFixResizeWhenBrokenStyleDetected:!1,autoParseInputFilterOperator:!0,autoResize:{applyResizeToContainer:!0,calculateAvailableSizeBy:"window",bottomPadding:20,minHeight:180,minWidth:300,rightPadding:0},cellHighlightCssClass:"slick-cell-modified",checkboxSelector:{cssClass:"slick-cell-checkboxsel",width:40},columnGroupSeparator:" - ",columnPicker:{fadeSpeed:0,hideForceFitButton:!1,hideSyncResizeButton:!0,headerColumnValueExtractor:av},cellMenu:{autoAdjustDrop:!0,autoAlignSide:!0,hideCloseButton:!0,hideCommandSection:!1,hideOptionSection:!1,showBulletWhenIconMissing:!0,subItemChevronClass:"mdi mdi-chevron-down mdi-rotate-270"},compositeEditorOptions:{labels:{cancelButtonKey:"CANCEL",cloneButtonKey:"CLONE",resetEditorButtonTooltipKey:"RESET_INPUT_VALUE",resetFormButtonKey:"RESET_FORM",massSelectionButtonKey:"APPLY_TO_SELECTION",massSelectionStatusKey:"X_OF_Y_MASS_SELECTED",massUpdateButtonKey:"APPLY_MASS_UPDATE",massUpdateStatusKey:"ALL_X_RECORDS_SELECTED",saveButtonKey:"SAVE"}},contextMenu:{autoAdjustDrop:!0,autoAlignSide:!0,hideCloseButton:!0,hideClearAllGrouping:!1,hideCollapseAllGroups:!1,hideCommandSection:!1,hideCopyCellValueCommand:!1,hideExpandAllGroups:!1,hideExportCsvCommand:!1,hideExportExcelCommand:!1,hideExportTextDelimitedCommand:!0,hideMenuOnScroll:!0,hideOptionSection:!1,iconCollapseAllGroupsCommand:"fa fa-compress mdi mdi-arrow-collapse",iconExpandAllGroupsCommand:"fa fa-expand mdi mdi-arrow-expand",iconClearGroupingCommand:"fa fa-times mdi mdi-close",iconCopyCellValueCommand:"fa fa-clone mdi mdi-content-copy",iconExportCsvCommand:"fa fa-download mdi mdi-download",iconExportExcelCommand:"fa fa-file-excel-o mdi mdi-file-excel-outline",iconExportTextDelimitedCommand:"fa fa-download mdi mdi-download",showBulletWhenIconMissing:!0,subItemChevronClass:"mdi mdi-chevron-down mdi-rotate-270"},customFooterOptions:{dateFormat:"YYYY-MM-DD, hh:mm a",hideRowSelectionCount:!1,hideTotalItemCount:!1,hideLastUpdateTimestamp:!0,footerHeight:25,leftContainerClass:"col-xs-12 col-sm-5",rightContainerClass:"col-xs-6 col-sm-7",metricSeparator:"|",metricTexts:{itemsKey:"ITEMS",ofKey:"OF",itemsSelectedKey:"ITEMS_SELECTED"}},customTooltip:{tooltipTextMaxLength:700,maxWidth:500},dataView:{syncGridSelection:{preserveHidden:!1,preserveHiddenOnSelectionChange:!0},syncGridSelectionWithBackendService:!1},datasetIdPropertyName:"id",defaultFilter:Fu.input,defaultBackendServiceFilterTypingDebounce:500,enableFilterTrimWhiteSpace:!1,defaultFilterPlaceholder:"",defaultFilterRangeOperator:Lt.rangeInclusive,defaultColumnSortFieldId:"id",defaultComponentEventPrefix:"",defaultSlickgridEventPrefix:"",draggableGrouping:{hideToggleAllButton:!1,toggleAllButtonText:"",dropPlaceHolderTextKey:"DROP_COLUMN_HEADER_TO_GROUP_BY"},editable:!1,editorTypingDebounce:450,filterTypingDebounce:0,enableEmptyDataWarningMessage:!0,emptyDataWarning:{className:"slick-empty-data-warning",messageKey:"EMPTY_DATA_WARNING_MESSAGE",hideFrozenLeftWarning:!1,hideFrozenRightWarning:!1,leftViewportMarginLeft:"40%",rightViewportMarginLeft:"40%",frozenLeftViewportMarginLeft:"0px",frozenRightViewportMarginLeft:"40%"},enableAutoResize:!0,enableAutoSizeColumns:!0,enableCellNavigation:!1,enableColumnPicker:!0,enableColumnReorder:!0,enableColumnResizeOnDoubleClick:!0,enableContextMenu:!0,enableExcelExport:!1,enableTextExport:!1,enableGridMenu:!0,enableHeaderMenu:!0,enableMouseHoverHighlightRow:!0,enableSorting:!0,enableTextSelectionOnCells:!0,explicitInitialization:!0,excelExportOptions:{addGroupIndentation:!0,autoDetectCellFormat:!0,exportWithFormatter:!1,filename:"export",format:un.xlsx,groupingColumnHeaderTitle:"Group By",groupCollapsedSymbol:"",groupExpandedSymbol:"",groupingAggregatorRowText:"",sanitizeDataExport:!0},textExportOptions:{delimiter:ms.comma,exportWithFormatter:!1,filename:"export",format:un.csv,groupingColumnHeaderTitle:"Group By",groupingAggregatorRowText:"",sanitizeDataExport:!0,useUtf8WithBom:!0},gridAutosizeColsMode:Ud.none,eventNamingStyle:Do.lowerCase,forceFitColumns:!1,frozenHeaderWidthCalcDifferential:1,gridMenu:{dropSide:"left",commandLabels:{clearAllFiltersCommandKey:"CLEAR_ALL_FILTERS",clearAllSortingCommandKey:"CLEAR_ALL_SORTING",clearFrozenColumnsCommandKey:"CLEAR_PINNING",exportCsvCommandKey:"EXPORT_TO_CSV",exportExcelCommandKey:"EXPORT_TO_EXCEL",exportTextDelimitedCommandKey:"EXPORT_TO_TAB_DELIMITED",refreshDatasetCommandKey:"REFRESH_DATASET",toggleFilterCommandKey:"TOGGLE_FILTER_ROW",togglePreHeaderCommandKey:"TOGGLE_PRE_HEADER_ROW"},hideClearAllFiltersCommand:!1,hideClearAllSortingCommand:!1,hideClearFrozenColumnsCommand:!0,hideExportCsvCommand:!1,hideExportExcelCommand:!1,hideExportTextDelimitedCommand:!0,hideForceFitButton:!1,hideRefreshDatasetCommand:!1,hideSyncResizeButton:!0,hideToggleFilterCommand:!1,hideTogglePreHeaderCommand:!1,iconCssClass:"fa fa-bars mdi mdi-menu",iconClearAllFiltersCommand:"fa fa-filter mdi mdi-filter-remove-outline",iconClearAllSortingCommand:"fa fa-unsorted mdi mdi-swap-vertical",iconClearFrozenColumnsCommand:"fa fa-times mdi mdi-pin-off-outline",iconExportCsvCommand:"fa fa-download mdi mdi-download",iconExportExcelCommand:"fa fa-file-excel-o mdi mdi-file-excel-outline",iconExportTextDelimitedCommand:"fa fa-download mdi mdi-download",iconRefreshDatasetCommand:"fa fa-refresh mdi mdi-sync",iconToggleFilterCommand:"fa fa-random mdi mdi-flip-vertical",iconTogglePreHeaderCommand:"fa fa-random mdi mdi-flip-vertical",menuWidth:16,resizeOnShowHeaderRow:!0,showBulletWhenIconMissing:!0,subItemChevronClass:"mdi mdi-chevron-down mdi-rotate-270",headerColumnValueExtractor:av},headerMenu:{autoAlign:!0,autoAlignOffset:4,minWidth:140,iconClearFilterCommand:"fa fa-filter mdi mdi mdi-filter-remove-outline",iconClearSortCommand:"fa fa-unsorted mdi mdi-swap-vertical",iconFreezeColumns:"fa fa-thumb-tack mdi mdi-pin-outline",iconSortAscCommand:"fa fa-sort-amount-asc mdi mdi-flip-v mdi-sort-ascending",iconSortDescCommand:"fa fa-sort-amount-desc mdi mdi-flip-v mdi-sort-descending",iconColumnHideCommand:"fa fa-times mdi mdi-close",iconColumnResizeByContentCommand:"fa fa-arrows-h mdi mdi-arrow-expand-horizontal",hideColumnResizeByContentCommand:!1,hideColumnHideCommand:!1,hideClearFilterCommand:!1,hideClearSortCommand:!1,hideFreezeColumnsCommand:!0,hideSortCommands:!1,subItemChevronClass:"mdi mdi-chevron-down mdi-rotate-270"},ignoreAccentOnStringFilterAndSort:!1,multiColumnSort:!0,numberedMultiColumnSort:!0,tristateMultiColumnSort:!1,sortColNumberInSeparateSpan:!0,suppressActiveCellChangeOnEdit:!1,pagination:{pageSizes:[10,15,20,25,30,40,50,75,100],pageSize:25,totalItems:0},headerRowHeight:35,rowHeight:35,topPanelHeight:30,translationNamespaceSeparator:":",resetFilterSearchValueAfterOnBeforeCancellation:!0,resizeByContentOnlyOnFirstLoad:!0,resizeByContentOptions:{alwaysRecalculateColumnWidth:!1,cellCharWidthInPx:7.8,cellPaddingWidthInPx:14,defaultRatioForStringType:.88,formatterPaddingWidthInPx:0,maxItemToInspectCellContentWidth:1e3,maxItemToInspectSingleColumnWidthByContent:5e3,widthToRemoveFromExceededWidthReadjustment:50},treeDataOptions:{exportIndentMarginLeft:5,exportIndentationLeadingChar:""}};function av(a,t){var e,n;const r=(a==null?void 0:a.columnGroup)||"",o=(e=t==null?void 0:t.columnGroupSeparator)!==null&&e!==void 0?e:" - ";return r?r+o+a.name:(n=a==null?void 0:a.name)!==null&&n!==void 0?n:""}class Nb{constructor(t){this._isInitialized=!1,this._isTreeAggregator=!1,this._sum=0,this._itemCount=0,this._type="sum",this._field=t}get field(){return this._field}get isInitialized(){return this._isInitialized}get type(){return this._type}init(t,e=!1){this._isTreeAggregator=e,this._isInitialized=!0,this._sum=0,this._itemCount=0,e&&(t.__treeTotals||(t.__treeTotals={}),t.__treeTotals[this._type]===void 0&&(t.__treeTotals[this._type]={},t.__treeTotals.count={}),t.__treeTotals.count[this._field]=0,t.__treeTotals[this._type][this._field]=0)}accumulate(t,e=!1){var n,r;const o=t!=null&&t.hasOwnProperty(this._field)?t[this._field]:null;this._isTreeAggregator?e?(t.__treeTotals||(t.__treeTotals={}),this.addGroupTotalPropertiesWhenNotExist(t.__treeTotals),this._sum=parseFloat((n=t.__treeTotals[this._type][this._field])!==null&&n!==void 0?n:0),this._itemCount=(r=t.__treeTotals.count[this._field])!==null&&r!==void 0?r:0):tn(o)&&(this._sum=parseFloat(o),this._itemCount=1):o!==null&&o!==""&&!isNaN(o)&&(this._sum+=parseFloat(o))}storeResult(t){(!t||t[this._type]===void 0)&&(t[this._type]={}),this.addGroupTotalPropertiesWhenNotExist(t);let e=this._sum,n=this._itemCount;this._isTreeAggregator&&(e+=t[this._type][this._field],n+=t.count[this._field],t.count[this._field]=n),t[this._type][this._field]=e}addGroupTotalPropertiesWhenNotExist(t){t[this._type]===void 0&&(t[this._type]={}),this._isTreeAggregator&&t.count===void 0&&(t.count={})}}class Lb{constructor(t){this._isInitialized=!1,this._isTreeAggregator=!1,this._max=null,this._type="max",this._field=t}get field(){return this._field}get isInitialized(){return this._isInitialized}get type(){return this._type}init(t,e=!1){this._max=null,this._isInitialized=!0,this._isTreeAggregator=e,e&&(t.__treeTotals||(t.__treeTotals={}),t.__treeTotals[this._type]===void 0&&(t.__treeTotals[this._type]={}),t.__treeTotals[this._type][this._field]=null)}accumulate(t,e=!1){const n=t!=null&&t.hasOwnProperty(this._field)?t[this._field]:null;if(!this._isTreeAggregator)this.keepMaxValueWhenFound(n);else if(e){t.__treeTotals||(t.__treeTotals={}),this.addGroupTotalPropertiesWhenNotExist(t.__treeTotals);const r=t.__treeTotals[this._type][this._field]!==null?parseFloat(t.__treeTotals[this._type][this._field]):null;r!==null&&tn(r)&&(this._max===null||r>this._max)&&(this._max=r)}else tn(n)&&this.keepMaxValueWhenFound(n)}storeResult(t){let e=this._max;if(this.addGroupTotalPropertiesWhenNotExist(t),this._isTreeAggregator&&e!==null){const n=t[this._type][this._field];tn(n)&&n>e&&(e=n)}t[this._type][this._field]=e}addGroupTotalPropertiesWhenNotExist(t){t[this._type]===void 0&&(t[this._type]={})}keepMaxValueWhenFound(t){t!==null&&t!==""&&!isNaN(t)&&(this._max===null||t>this._max)&&(this._max=parseFloat(t))}}class Hb{constructor(t){this._isInitialized=!1,this._distinctValues=[],this._type="distinct",this._field=t}get field(){return this._field}get isInitialized(){return this._isInitialized}get type(){return this._type}init(t,e=!1){if(this._distinctValues=[],this._isInitialized=!0,e)throw new Error("[Slickgrid-Universal] CloneAggregator is not currently supported for use with Tree Data")}accumulate(t){const e=t&&t.hasOwnProperty(this._field)?t[this._field]:void 0;this._distinctValues.indexOf(e)===-1&&e!==void 0&&this._distinctValues.push(e)}storeResult(t){(!t||t[this._type]===void 0)&&(t[this._type]={}),t[this._type][this._field]=this._distinctValues}}class Bb{constructor(t){this._isInitialized=!1,this._isTreeAggregator=!1,this._min=null,this._type="min",this._field=t}get field(){return this._field}get isInitialized(){return this._isInitialized}get type(){return this._type}init(t,e=!1){this._min=null,this._isInitialized=!0,this._isTreeAggregator=e,e&&(t.__treeTotals||(t.__treeTotals={}),t.__treeTotals[this._type]===void 0&&(t.__treeTotals[this._type]={}),t.__treeTotals[this._type][this._field]=null)}accumulate(t,e=!1){const n=t!=null&&t.hasOwnProperty(this._field)?t[this._field]:null;if(!this._isTreeAggregator)this.keepMinValueWhenFound(n);else if(e){t.__treeTotals||(t.__treeTotals={}),this.addGroupTotalPropertiesWhenNotExist(t.__treeTotals);const r=t.__treeTotals[this._type][this._field]!==null?parseFloat(t.__treeTotals[this._type][this._field]):null;r!==null&&tn(r)&&(this._min===null||r<this._min)&&(this._min=r)}else tn(n)&&this.keepMinValueWhenFound(n)}storeResult(t){let e=this._min;if(this.addGroupTotalPropertiesWhenNotExist(t),this._isTreeAggregator&&e!==null){const n=t[this._type][this._field];tn(n)&&n<e&&(e=n)}t[this._type][this._field]=e}addGroupTotalPropertiesWhenNotExist(t){t[this._type]===void 0&&(t[this._type]={})}keepMinValueWhenFound(t){t!==null&&t!==""&&!isNaN(t)&&(this._min===null||t<this._min)&&(this._min=parseFloat(t))}}class Vb{constructor(t){this._isInitialized=!1,this._isTreeAggregator=!1,this._count=0,this._type="count",this._field=t}get field(){return this._field}get isInitialized(){return this._isInitialized}get type(){return this._type}init(t,e=!1){this._count=0,this._isInitialized=!0,this._isTreeAggregator=e,e&&(t.__treeTotals||(t.__treeTotals={}),t.__treeTotals[this._type]===void 0&&(t.__treeTotals[this._type]={}),t.__treeTotals[this._type][this._field]=0)}accumulate(t,e=!1){var n;const r=t!=null&&t.hasOwnProperty(this._field)?t[this._field]:null;this._isTreeAggregator&&(e?(t.__treeTotals||(t.__treeTotals={}),t.__treeTotals[this._type]===void 0&&(t.__treeTotals[this._type]={}),this._count=(n=t.__treeTotals[this._type][this._field])!==null&&n!==void 0?n:0):tn(r)&&(this._count=1))}storeResult(t){(!t||t[this._type]===void 0)&&(t[this._type]={});let e=this._count;this._isTreeAggregator?e+=t[this._type][this._field]:e=t.group.rows.length,t[this._type][this._field]=e}}class zb{constructor(t){this._isInitialized=!1,this._type="clone",this._field=t}get field(){return this._field}get isInitialized(){return this._isInitialized}get type(){return this._type}init(t,e=!1){if(this._data="",this._isInitialized=!0,e)throw new Error("[Slickgrid-Universal] CloneAggregator is not currently supported for use with Tree Data")}accumulate(t){const e=t&&t.hasOwnProperty(this._field)?t[this._field]:null;e!==null&&e!==""&&(this._data=e)}storeResult(t){(!t||t[this._type]===void 0)&&(t[this._type]={}),t[this._type][this._field]=this._data}}class Ub{constructor(t){this._isInitialized=!1,this._isTreeAggregator=!1,this._nonNullCount=0,this._sum=0,this._type="avg",this._field=t}get field(){return this._field}get isInitialized(){return this._isInitialized}get type(){return this._type}init(t,e=!1){this._sum=0,this._nonNullCount=0,this._isInitialized=!0,this._isTreeAggregator=e,e&&(t.__treeTotals||(t.__treeTotals={}),t.__treeTotals[this._type]===void 0&&(t.__treeTotals[this._type]={},t.__treeTotals.sum={},t.__treeTotals.count={}),t.__treeTotals[this._type][this._field]=0,t.__treeTotals.count[this._field]=0,t.__treeTotals.sum[this._field]=0)}accumulate(t,e=!1){var n,r;const o=t!=null&&t.hasOwnProperty(this._field)?t[this._field]:null;this._isTreeAggregator?e?(t.__treeTotals||(t.__treeTotals={}),this.addGroupTotalPropertiesWhenNotExist(t.__treeTotals),this._sum=parseFloat((n=t.__treeTotals.sum[this._field])!==null&&n!==void 0?n:0),this._nonNullCount=(r=t.__treeTotals.count[this._field])!==null&&r!==void 0?r:0):tn(o)&&(this._sum=parseFloat(o),this._nonNullCount=1):o!==null&&o!==""&&!isNaN(o)&&(this._nonNullCount++,this._sum+=parseFloat(o))}storeResult(t){let e=this._sum,n=this._nonNullCount;this.addGroupTotalPropertiesWhenNotExist(t),this._isTreeAggregator&&(e+=t.sum[this._field],n+=t.count[this._field],t.sum[this._field]=e,t.count[this._field]=n),n!==0&&(t[this._type][this._field]=n===0?e:e/n)}addGroupTotalPropertiesWhenNotExist(t){t[this._type]===void 0&&(t[this._type]={}),this._isTreeAggregator&&t.sum===void 0&&(t.sum={}),this._isTreeAggregator&&t.count===void 0&&(t.count={})}}const cf={Avg:Ub,Clone:zb,Count:Vb,Distinct:Hb,Min:Bb,Max:Lb,Sum:Nb};function Mu(a,t){var e;const n=t.errorMessage,r=t.required,o=t.minLength,s=t.maxLength,l=t.operatorConditionalType||"inclusive",u={"{{minLength}}":o,"{{maxLength}}":s};let h=!0,c="";const p=(e=a==null?void 0:a.length)!==null&&e!==void 0?e:0;if(t.validator)return t.validator(a,t.editorArgs);if(r&&a==="")h=!1,c=n||je.VALIDATION_REQUIRED_FIELD;else if(o!==void 0&&s!==void 0&&(l==="exclusive"&&(p<=o||p>=s)||l==="inclusive"&&(p<o||p>s)))h=!1,c=n||je.VALIDATION_EDITOR_TEXT_LENGTH_BETWEEN.replace(/{{minLength}}|{{maxLength}}/gi,m=>u[m]);else if(o!==void 0&&p!==null&&(l==="exclusive"&&p<=o||l==="inclusive"&&p!==null&&p<o)){h=!1;const m=l==="inclusive"?je.VALIDATION_EDITOR_TEXT_MIN_LENGTH_INCLUSIVE:je.VALIDATION_EDITOR_TEXT_MIN_LENGTH;c=n||m.replace(/{{minLength}}/gi,v=>u[v])}else if(s!==void 0&&p!==null&&(l==="exclusive"&&p>=s||l==="inclusive"&&p!==null&&p>s)){h=!1;const m=l==="inclusive"?je.VALIDATION_EDITOR_TEXT_MAX_LENGTH_INCLUSIVE:je.VALIDATION_EDITOR_TEXT_MAX_LENGTH;c=n||m.replace(/{{maxLength}}/gi,v=>u[v])}return{valid:h,msg:c}}function Al(a,t,e,n="Slider"){var r,o,s;let l;return((r=a.editorOptions)===null||r===void 0?void 0:r[t])!==void 0?l=a.editorOptions[t]:((o=a==null?void 0:a.params)===null||o===void 0?void 0:o[t])!==void 0&&(console.warn(`[Slickgrid-Universal] All editor.params from ${n} Editor are moving to "editorOptions" for better typing support and "params" will be deprecated in future release.`),l=(s=a==null?void 0:a.params)===null||s===void 0?void 0:s[t]),l??e}const dv=qd&&dh||qd,Gb=3;class Wb{constructor(t){var e;if(this.args=t,this._isValueTouched=!1,this._lastTriggeredByClearInput=!1,this.disabled=!1,this.forceUserInput=!1,this.finalCollection=[],!t)throw new Error("[Slickgrid-Universal] Something is wrong with this grid, an Editor must always have valid arguments.");this.grid=t.grid,this._bindEventService=new Fn,!((e=this.gridOptions)===null||e===void 0)&&e.translater&&(this._translater=this.gridOptions.translater),this._locales=this.gridOptions&&this.gridOptions.locales||je.locales,this.init()}get autocompleterOptions(){return this._autocompleterOptions||{}}get collection(){var t,e;return(e=(t=this.columnEditor)===null||t===void 0?void 0:t.collection)!==null&&e!==void 0?e:[]}get editorDomElement(){return this._inputElm}get elementCollection(){return this._elementCollection}get columnDef(){return this.args.column}get columnEditor(){var t;return((t=this.columnDef)===null||t===void 0?void 0:t.internalColumnEditor)||{}}get customStructure(){var t,e,n,r,o,s;let l=(t=this.columnEditor)===null||t===void 0?void 0:t.customStructure;const u=(n=(e=this.columnEditor)===null||e===void 0?void 0:e.type)!==null&&n!==void 0?n:(r=this.columnDef)===null||r===void 0?void 0:r.type;return!l&&u===ie.object&&(!((o=this.columnDef)===null||o===void 0)&&o.dataKey)&&(!((s=this.columnDef)===null||s===void 0)&&s.labelKey)&&(l={label:this.columnDef.labelKey,value:this.columnDef.dataKey}),l}get dataContext(){return this.args.item}get editorOptions(){var t;return((t=this.columnEditor)===null||t===void 0?void 0:t.editorOptions)||{}}get gridOptions(){var t,e,n;return(n=(e=(t=this.grid)===null||t===void 0?void 0:t.getOptions)===null||e===void 0?void 0:e.call(t))!==null&&n!==void 0?n:{}}get instance(){return this._instance}get hasAutoCommitEdit(){var t;return(t=this.gridOptions.autoCommitEdit)!==null&&t!==void 0?t:!1}get validator(){var t,e,n;return(e=(t=this.columnEditor)===null||t===void 0?void 0:t.validator)!==null&&e!==void 0?e:(n=this.columnDef)===null||n===void 0?void 0:n.validator}init(){var t,e,n,r,o,s,l,u,h,c;this.labelName=(e=(t=this.customStructure)===null||t===void 0?void 0:t.label)!==null&&e!==void 0?e:"label",this.valueName=(r=(n=this.customStructure)===null||n===void 0?void 0:n.value)!==null&&r!==void 0?r:"value",this.labelPrefixName=(s=(o=this.customStructure)===null||o===void 0?void 0:o.labelPrefix)!==null&&s!==void 0?s:"labelPrefix",this.labelSuffixName=(u=(l=this.customStructure)===null||l===void 0?void 0:l.labelSuffix)!==null&&u!==void 0?u:"labelSuffix";let p=this.columnEditor.collection;!((h=this.columnEditor)===null||h===void 0)&&h.collectionAsync&&!p&&(p=[]),this.renderDomElement(p),(this.disabled||!((c=this.columnEditor)===null||c===void 0)&&c.collectionAsync&&Array.isArray(p)&&p.length===0)&&this.disable(!0)}destroy(){var t,e,n;this._bindEventService.unbindAll(),typeof((t=this._instance)===null||t===void 0?void 0:t.destroy)=="function"&&this._instance.destroy(),(n=(e=this._inputElm)===null||e===void 0?void 0:e.remove)===null||n===void 0||n.call(e),this._elementCollection=null}disable(t=!0){var e;const n=this.disabled;if(this.disabled=t,this._inputElm)if(t){this._inputElm.disabled=!0;const r=this.getValue();n!==t&&(!((e=this.args)===null||e===void 0)&&e.compositeEditorOptions)&&r!==""&&this.clear(!0)}else this._inputElm.disabled=!1}focus(){this.grid.focus(),this._inputElm&&(this._inputElm.focus(),this._inputElm.select())}show(){var t;!!(!((t=this.args)===null||t===void 0)&&t.compositeEditorOptions)&&this.applyInputUsabilityState()}getValue(){return this._inputElm.value}setValue(t,e=!1,n=!0){var r;if(this._inputElm.value=t!=null&&t.hasOwnProperty(this.labelName)?t[this.labelName]:t,e){this._currentValue=t,this._defaultTextValue=typeof t=="string"?t:(r=t==null?void 0:t[this.labelName])!==null&&r!==void 0?r:"",this.applyValue(this.args.item,this.serializeValue());const o=this.args.compositeEditorOptions;o&&n&&this.handleChangeOnCompositeEditor(null,o,"system")}}applyValue(t,e){var n,r,o,s;let l=e;const u=(n=this.columnDef)===null||n===void 0?void 0:n.field;if(u!==void 0){Array.isArray(this.collection)&&this.collection.length>0&&(l=_s(this.collection,p=>p&&qo(e)&&p.hasOwnProperty(this.valueName)?p[this.valueName].toString()===(e.hasOwnProperty(this.valueName)&&e[this.valueName].toString()):p&&typeof e=="string"&&p.hasOwnProperty(this.valueName)?p[this.valueName].toString()===e:(p==null?void 0:p.toString())===e,""));const h=(u==null?void 0:u.indexOf("."))>0,c=this.validate(null,l);if(l=c!=null&&c.valid?l:"",h){const p=(s=(o=(r=this.columnEditor)===null||r===void 0?void 0:r.complexObjectPath)!==null&&o!==void 0?o:u)!==null&&s!==void 0?s:"";hr(t,p,l)}else t[u]=l}}isValueChanged(){var t,e;const n=this._inputElm.value,r=(t=this._lastInputKeyEvent)===null||t===void 0?void 0:t.keyCode;if(!((e=this.columnEditor)===null||e===void 0)&&e.alwaysSaveOnEnterKey&&r===xi.ENTER)return!0;const o=!(n===""&&(this._defaultTextValue===null||this._defaultTextValue===void 0))&&n!==this._defaultTextValue;return this._lastTriggeredByClearInput||o}isValueTouched(){return this._isValueTouched}loadValue(t){var e,n;const r=(e=this.columnDef)===null||e===void 0?void 0:e.field;if(t&&r!==void 0){const s=(r==null?void 0:r.indexOf("."))>0?bn(t,r):t[r];this._currentValue=s,this._originalValue=s,this._defaultTextValue=typeof s=="string"?s:(n=s==null?void 0:s[this.labelName])!==null&&n!==void 0?n:"",this._inputElm.value=this._defaultTextValue,this._inputElm.select()}}clear(t=!1){this._inputElm&&(this._currentValue="",this._defaultTextValue="",this.setValue("",!0)),this._isValueTouched=!0,this._lastTriggeredByClearInput=!0;const e=this.args.compositeEditorOptions;if(e){const n=!t;this.handleChangeOnCompositeEditor(null,e,"user",n)}else this.save()}reset(t,e=!0,n=!1){var r,o;const s=(r=t??this._originalValue)!==null&&r!==void 0?r:"";this._inputElm&&(this._currentValue=s,this._defaultTextValue=typeof s=="string"?s:(o=s==null?void 0:s[this.labelName])!==null&&o!==void 0?o:"",this._inputElm.value=this._defaultTextValue),this._isValueTouched=!1;const l=this.args.compositeEditorOptions;if(l&&e){const u=!n;this.handleChangeOnCompositeEditor(null,l,"user",u)}}save(){var t;const e=this.validate(),n=(t=e==null?void 0:e.valid)!==null&&t!==void 0?t:!1;this.hasAutoCommitEdit&&n?this.grid.getEditorLock().commitCurrentEdit():this.args.commitChanges()}serializeValue(){var t,e,n,r,o,s;if(this._inputElm&&this.editorOptions.forceUserInput){const l=(e=(t=this.editorOptions)===null||t===void 0?void 0:t.minLength)!==null&&e!==void 0?e:Gb;this._currentValue=this._inputElm.value.length>l?this._inputElm.value:this._currentValue}return this.customStructure&&this._currentValue&&this._currentValue.hasOwnProperty(this.valueName)&&((n=this.columnDef)===null||n===void 0?void 0:n.type)!==ie.object&&((r=this.columnEditor)===null||r===void 0?void 0:r.type)!==ie.object?this._currentValue[this.valueName]:this._currentValue&&this._currentValue.value!==void 0?((o=this.columnDef)===null||o===void 0?void 0:o.type)===ie.object||((s=this.columnEditor)===null||s===void 0?void 0:s.type)===ie.object?{[this.labelName]:this._currentValue.label,[this.valueName]:this._currentValue.value}:this._currentValue.value:this._currentValue}validate(t,e){var n,r;if(this.args.compositeEditorOptions&&this.applyInputUsabilityState(),this.disabled)return{valid:!0,msg:""};const o=e!==void 0?e:(n=this._inputElm)===null||n===void 0?void 0:n.value;return Mu(o,{editorArgs:this.args,errorMessage:this.columnEditor.errorMessage,minLength:this.columnEditor.minLength,maxLength:this.columnEditor.maxLength,operatorConditionalType:this.columnEditor.operatorConditionalType,required:!((r=this.args)===null||r===void 0)&&r.compositeEditorOptions?!1:this.columnEditor.required,validator:this.validator})}applyInputUsabilityState(){const t=this.grid.getActiveCell(),e=this.grid.onBeforeEditCell.notify({...t,item:this.dataContext,column:this.args.column,grid:this.grid,target:"composite",compositeEditorOptions:this.args.compositeEditorOptions}).getReturnValue();this.disable(e===!1)}handleChangeOnCompositeEditor(t,e,n="user",r=!1){var o,s,l,u,h;const c=this.grid.getActiveCell(),p=this.args.column,m=(s=(o=this.columnDef)===null||o===void 0?void 0:o.id)!==null&&s!==void 0?s:"",v=this.dataContext,_=this.grid,C=this.serializeValue();this.validate().valid&&this.applyValue(this.dataContext,C),this.applyValue(e.formValues,C);const x=(h=(u=(l=this.gridOptions)===null||l===void 0?void 0:l.compositeEditorOptions)===null||u===void 0?void 0:u.excludeDisabledFieldFormValues)!==null&&h!==void 0?h:!1;(r||this.disabled&&x&&e.formValues.hasOwnProperty(m))&&delete e.formValues[m],_.onCompositeEditorChange.notify({...c,item:v,grid:_,column:p,formValues:e.formValues,editors:e.editors,triggeredBy:n},{...new Slick.EventData,...t})}handleSelect(t){var e,n;if(t!==void 0){const o=t;this._currentValue=o,this._isValueTouched=!0;const s=this.args.compositeEditorOptions,l=(n=(e=this.editorOptions)===null||e===void 0?void 0:e.renderItem)!==null&&n!==void 0?n:!1,u=typeof o=="string"?o:l?o[this.labelName]:o.label;if(this.setValue(u),s?this.handleChangeOnCompositeEditor(null,s):this.save(),typeof this.editorOptions.onSelectItem=="function"){const{row:h,cell:c}=this.grid.getActiveCell();this.editorOptions.onSelectItem(t,h,c,this.args.column,this.args.item)}setTimeout(()=>this._lastTriggeredByClearInput=!1)}return!1}renderRegularItem(t){var e;const n=typeof t=="string"?t:(e=t==null?void 0:t.label)!==null&&e!==void 0?e:"";return Ie("div",{textContent:n||""})}renderCustomItem(t){var e,n,r;const o=(r=(n=(e=this._autocompleterOptions)===null||e===void 0?void 0:e.renderItem)===null||n===void 0?void 0:n.templateCallback(t))!==null&&r!==void 0?r:"",s=Mn(this.gridOptions,o)||"";return Ie("div",{innerHTML:s})}renderCollectionItem(t){var e,n;const r=(n=(e=this.columnEditor)===null||e===void 0?void 0:e.enableRenderHtml)!==null&&n!==void 0?n:!1,o=t.labelPrefix||"",s=t.label||"",l=t.labelSuffix||"",u=o+s+l,h=Mn(this.gridOptions,u)||"",c=document.createElement("div");return c[r?"innerHTML":"textContent"]=h,c}renderDomElement(t){var e,n,r,o,s,l,u,h,c,p,m,v,_,C,x,S;const y=(n=(e=this.columnDef)===null||e===void 0?void 0:e.id)!==null&&n!==void 0?n:"",D=(o=(r=this.columnEditor)===null||r===void 0?void 0:r.placeholder)!==null&&o!==void 0?o:"",A=(l=(s=this.columnEditor)===null||s===void 0?void 0:s.title)!==null&&l!==void 0?l:"";this._editorInputGroupElm=Ie("div",{className:"autocomplete-container input-group"});const P=Ie("span",{className:"input-group-btn input-group-append",dataset:{clear:""}});this._clearButtonElm=Ie("button",{type:"button",className:"btn btn-default icon-clear"}),this._inputElm=Ie("input",{type:"text",placeholder:D,title:A,autocomplete:"off",ariaAutoComplete:"none",className:`autocomplete form-control editor-text input-group-editor editor-${y}`,dataset:{input:""}},this._editorInputGroupElm),this._editorInputGroupElm.appendChild(document.createElement("span")),Al(this.columnEditor,"hideClearButton",void 0,"autocomplete")||(P.appendChild(this._clearButtonElm),this._editorInputGroupElm.appendChild(P),this._bindEventService.bind(this._clearButtonElm,"click",()=>this.clear())),this._bindEventService.bind(this._inputElm,"focus",()=>{var B;return(B=this._inputElm)===null||B===void 0?void 0:B.select()}),this._bindEventService.bind(this._inputElm,"keydown",B=>{this._lastInputKeyEvent=B,(B.keyCode===xi.LEFT||B.keyCode===xi.RIGHT||B.key==="ArrowLeft"||B.key==="ArrowRight")&&B.stopImmediatePropagation(),this.columnEditor.alwaysSaveOnEnterKey&&(B.keyCode===xi.ENTER||B.key==="Enter")&&(this._currentValue=null)});let M=t;if(M&&(!((u=this.columnEditor)===null||u===void 0)&&u.collectionOverride)){const B={column:this.columnDef,dataContext:this.dataContext,grid:this.grid,originalCollections:this.collection};if(this.args.compositeEditorOptions){const{formValues:Q,modalType:L}=this.args.compositeEditorOptions;B.compositeEditorOptions={formValues:Q,modalType:L}}M=this.columnEditor.collectionOverride(M,B)}M&&(this.finalCollection=M),Array.isArray(M)&&(this.collection.every(B=>$d(B))?M=M.map(B=>({label:B,value:B})):M=M.map(B=>{var Q,L;return{label:B==null?void 0:B[this.labelName],value:B==null?void 0:B[this.valueName],labelPrefix:(Q=B==null?void 0:B[this.labelPrefixName])!==null&&Q!==void 0?Q:"",labelSuffix:(L=B==null?void 0:B[this.labelSuffixName])!==null&&L!==void 0?L:""}}),this._elementCollection=M),this._autocompleterOptions={input:this._inputElm,debounceWaitMs:200,className:`slick-autocomplete ${(c=(h=this.editorOptions)===null||h===void 0?void 0:h.className)!==null&&c!==void 0?c:""}`.trim(),emptyMsg:this.gridOptions.enableTranslate&&(!((p=this._translater)===null||p===void 0)&&p.translate)?this._translater.translate("NO_ELEMENTS_FOUND"):(v=(m=this._locales)===null||m===void 0?void 0:m.TEXT_NO_ELEMENTS_FOUND)!==null&&v!==void 0?v:"No elements found",customize:(B,Q,L)=>{L.style.width=""},onSelect:this.handleSelect.bind(this),...this.editorOptions},!((_=this._autocompleterOptions.renderItem)===null||_===void 0)&&_.layout?(this._autocompleterOptions.className+=` autocomplete-custom-${Wa(this._autocompleterOptions.renderItem.layout)}`,this._autocompleterOptions.render=this.renderCustomItem.bind(this)):Array.isArray(t)?this._autocompleterOptions.render=(x=(C=this._autocompleterOptions.render)===null||C===void 0?void 0:C.bind(this))!==null&&x!==void 0?x:this.renderCollectionItem.bind(this):this._autocompleterOptions.render||(this._autocompleterOptions.render=this.renderRegularItem.bind(this)),!((S=this._autocompleterOptions)===null||S===void 0)&&S.fetch?(Hp(this._inputElm,this._autocompleterOptions),this._instance=dv(this._autocompleterOptions)):this._instance=dv({...this._autocompleterOptions,fetch:(B,Q)=>{M&&Q(M.filter(L=>((typeof L=="string"?L:L==null?void 0:L.label)||"").toLowerCase().includes(B.toLowerCase())))}}),this.args.container.appendChild(this._editorInputGroupElm),this.args.compositeEditorOptions||setTimeout(()=>this.focus(),50)}}class $b{constructor(t){if(this.args=t,this._isValueTouched=!1,this.disabled=!1,!t)throw new Error("[Slickgrid-Universal] Something is wrong with this grid, an Editor must always have valid arguments.");this.grid=t.grid,this.gridOptions=this.grid.getOptions()||{},this._bindEventService=new Fn,this.init()}get columnDef(){return this.args.column}get columnEditor(){return this.columnDef&&this.columnDef.internalColumnEditor||{}}get dataContext(){return this.args.item}get editorDomElement(){return this._input}get hasAutoCommitEdit(){var t;return(t=this.gridOptions.autoCommitEdit)!==null&&t!==void 0?t:!1}get validator(){var t,e,n;return(e=(t=this.columnEditor)===null||t===void 0?void 0:t.validator)!==null&&e!==void 0?e:(n=this.columnDef)===null||n===void 0?void 0:n.validator}init(){var t,e,n,r,o,s,l;const u=(e=(t=this.columnDef)===null||t===void 0?void 0:t.id)!==null&&e!==void 0?e:"",h=this.args.compositeEditorOptions;this._checkboxContainerElm=Ie("div",{className:`checkbox-editor-container editor-${u}`}),this._input=Ie("input",{type:"checkbox",value:"true",ariaLabel:(r=(n=this.columnEditor)===null||n===void 0?void 0:n.ariaLabel)!==null&&r!==void 0?r:`${jr(u+"")} Checkbox Editor`,className:`editor-checkbox editor-${u}`,title:(s=(o=this.columnEditor)===null||o===void 0?void 0:o.title)!==null&&s!==void 0?s:""});const c=(l=this.args)===null||l===void 0?void 0:l.container;c&&typeof c.appendChild=="function"&&(h?(this._checkboxContainerElm.appendChild(this._input),c.appendChild(this._checkboxContainerElm)):c.appendChild(this._input)),this.hasAutoCommitEdit&&!h&&this._bindEventService.bind(this._input,"click",()=>{this._isValueTouched=!0,this.save()}),h?this._bindEventService.bind(this._input,"change",p=>{this._isValueTouched=!0,this.handleChangeOnCompositeEditor(p,h)}):this.focus()}destroy(){var t,e;this._bindEventService.unbindAll(),(e=(t=this._input)===null||t===void 0?void 0:t.remove)===null||e===void 0||e.call(t)}disable(t=!0){var e;const n=this.disabled;if(this.disabled=t,this._input)if(t){this._input.setAttribute("disabled","disabled"),this._checkboxContainerElm.classList.add("disabled");const r=this.getValue();n!==t&&(!((e=this.args)===null||e===void 0)&&e.compositeEditorOptions)&&r!==!1&&this.reset(!1,!0,!0)}else this._input.removeAttribute("disabled"),this._checkboxContainerElm.classList.remove("disabled")}focus(){this.grid.focus(),this._input&&this._input.focus()}preClick(){this._input&&(this._input.checked=!this._input.checked)}show(){var t;!!(!((t=this.args)===null||t===void 0)&&t.compositeEditorOptions)&&this.applyInputUsabilityState()}getValue(){var t,e;return(e=(t=this._input)===null||t===void 0?void 0:t.checked)!==null&&e!==void 0?e:!1}setValue(t,e=!1,n=!0){const r=!!t;if(this._input&&(this._input.checked=r),e){this.applyValue(this.args.item,this.serializeValue());const o=this.args.compositeEditorOptions;o&&n&&this.handleChangeOnCompositeEditor(null,o,"system")}}applyValue(t,e){var n,r,o;const s=this.columnDef&&this.columnDef.field;if(s!==void 0){const l=(s==null?void 0:s.indexOf("."))>0,u=this.validate(null,e),h=u&&u.valid?e:"";if(l){const c=(o=(r=(n=this.columnEditor)===null||n===void 0?void 0:n.complexObjectPath)!==null&&r!==void 0?r:s)!==null&&o!==void 0?o:"";hr(t,c,h)}else t[s]=h}}isValueChanged(){return this.serializeValue()!==this._originalValue}isValueTouched(){return this._isValueTouched}loadValue(t){const e=this.columnDef&&this.columnDef.field;if(t&&e!==void 0&&this._input){const r=(e==null?void 0:e.indexOf("."))>0?bn(t,e):t[e];this._originalValue=r,this._input.checked=!!this._originalValue}}reset(t,e=!0,n=!1){var r;const o=(r=t??this._originalValue)!==null&&r!==void 0?r:!1;this._input&&(this._originalValue=o,this._input.checked=!!o),this._isValueTouched=!1;const s=this.args.compositeEditorOptions;if(s&&e){const l=!n;this.handleChangeOnCompositeEditor(null,s,"user",l)}}save(){const t=this.validate(),e=t&&t.valid||!1;this.hasAutoCommitEdit&&e?this.grid.getEditorLock().commitCurrentEdit():this.args.commitChanges()}serializeValue(){var t,e;return(e=(t=this._input)===null||t===void 0?void 0:t.checked)!==null&&e!==void 0?e:!1}validate(t,e){var n,r;const o=!((n=this.args)===null||n===void 0)&&n.compositeEditorOptions?!1:this.columnEditor.required,s=e!==void 0?e:(r=this._input)===null||r===void 0?void 0:r.checked,l=this.columnEditor.errorMessage;return this.args.compositeEditorOptions&&this.applyInputUsabilityState(),this.disabled?{valid:!0,msg:""}:this.validator?this.validator(s,this.args):o&&!s?{valid:!1,msg:l||je.VALIDATION_REQUIRED_FIELD}:{valid:!0,msg:null}}applyInputUsabilityState(){const t=this.grid.getActiveCell(),e=this.grid.onBeforeEditCell.notify({...t,item:this.dataContext,column:this.args.column,grid:this.grid,target:"composite",compositeEditorOptions:this.args.compositeEditorOptions}).getReturnValue();this.disable(e===!1)}handleChangeOnCompositeEditor(t,e,n="user",r=!1){var o,s,l,u,h;const c=this.grid.getActiveCell(),p=this.args.column,m=(s=(o=this.columnDef)===null||o===void 0?void 0:o.id)!==null&&s!==void 0?s:"",v=this.dataContext,_=this.grid,C=this.serializeValue();this.validate().valid&&this.applyValue(this.dataContext,C),this.applyValue(e.formValues,C);const x=(h=(u=(l=this.gridOptions)===null||l===void 0?void 0:l.compositeEditorOptions)===null||u===void 0?void 0:u.excludeDisabledFieldFormValues)!==null&&h!==void 0?h:!1;(r||this.disabled&&x&&e.formValues.hasOwnProperty(m))&&delete e.formValues[m],_.onCompositeEditorChange.notify({...c,item:v,grid:_,column:p,formValues:e.formValues,editors:e.editors,triggeredBy:n},{...new Slick.EventData,...t})}}const Yb=cd&&On||cd,Nu=$s||ps;class jb{constructor(t){var e;if(this.args=t,this._isValueTouched=!1,this._lastTriggeredByClearDate=!1,this.disabled=!1,!t)throw new Error("[Slickgrid-Universal] Something is wrong with this grid, an Editor must always have valid arguments.");this.grid=t.grid,this.gridOptions=this.grid.getOptions()||{},!((e=this.gridOptions)===null||e===void 0)&&e.translater&&(this._translaterService=this.gridOptions.translater),this._bindEventService=new Fn,this.init()}get columnDef(){return this.args.column}get columnEditor(){return this.columnDef&&this.columnDef.internalColumnEditor||{}}get dataContext(){return this.args.item}get editorDomElement(){return this._inputElm}get editorOptions(){return this.columnEditor.editorOptions||{}}get hasAutoCommitEdit(){var t;return(t=this.gridOptions.autoCommitEdit)!==null&&t!==void 0?t:!1}get pickerOptions(){return this._pickerMergedOptions}get validator(){var t,e,n;return(e=(t=this.columnEditor)===null||t===void 0?void 0:t.validator)!==null&&e!==void 0?e:(n=this.columnDef)===null||n===void 0?void 0:n.validator}init(){var t,e,n,r,o,s,l;if(this.args&&this.columnDef){const u=this.args.compositeEditorOptions,h=(e=(t=this.columnDef)===null||t===void 0?void 0:t.id)!==null&&e!==void 0?e:"",c=this.args.grid.getOptions()||{};this.defaultDate=this.args.item?this.args.item[this.columnDef.field]:null;const p=Ua(this.columnEditor.type||this.columnDef.type||ie.dateUtc),m=Ua(this.columnDef.outputType||this.columnEditor.type||this.columnDef.type||ie.dateUtc);let v=((r=(n=this._translaterService)===null||n===void 0?void 0:n.getCurrentLanguage)===null||r===void 0?void 0:r.call(n))||c.locale||"en";v.length>2&&(v=v.substring(0,2));const _={defaultDate:this.defaultDate,altInput:!0,altFormat:m,dateFormat:p,closeOnSelect:!0,wrap:!0,locale:v,onChange:()=>this.handleOnDateChange(),errorHandler:S=>{S.toString().includes("invalid locale")&&console.warn(`[Slickgrid-Universal] Flatpickr missing locale imports (${v}), will revert to English as the default locale.
          See Flatpickr Localization for more info, for example if we want to use French, then we can import it with:  import 'flatpickr/dist/l10n/fr';`)}};this._pickerMergedOptions={..._,...this.editorOptions};const C=`.editor-text.editor-${h}.form-control`;this._pickerMergedOptions.altInput&&(this._pickerMergedOptions.altInputClass="flatpickr-alt-input form-control"),this._editorInputGroupElm=Ie("div",{className:"flatpickr input-group"});const x=Ie("span",{className:"input-group-btn input-group-append",dataset:{clear:""}});this._clearButtonElm=Ie("button",{type:"button",className:"btn btn-default icon-clear"}),this._inputElm=Ie("input",{placeholder:(s=(o=this.columnEditor)===null||o===void 0?void 0:o.placeholder)!==null&&s!==void 0?s:"",title:this.columnEditor&&this.columnEditor.title||"",className:C.replace(/\./g," "),dataset:{input:"",defaultdate:this.defaultDate}},this._editorInputGroupElm),Al(this.columnEditor,"hideClearButton",void 0,"date")||(x.appendChild(this._clearButtonElm),this._editorInputGroupElm.appendChild(x),this._bindEventService.bind(this._clearButtonElm,"click",()=>this._lastTriggeredByClearDate=!0)),this.args.container.appendChild(this._editorInputGroupElm),this.flatInstance=Yb(this._editorInputGroupElm,this._pickerMergedOptions),this._inputWithDataElm=!((l=this._pickerMergedOptions)===null||l===void 0)&&l.altInput?document.querySelector(`${C}.flatpickr-alt-input`):this._inputElm,u||setTimeout(()=>{this.show(),this.focus()},50)}}destroy(){var t,e,n,r,o,s,l,u;this.hide(),this._bindEventService.unbindAll(),typeof((t=this.flatInstance)===null||t===void 0?void 0:t.destroy)=="function"&&(this.flatInstance.destroy(),!((e=this.flatInstance)===null||e===void 0)&&e.element&&setTimeout(()=>bh(this.flatInstance))),sn(this._editorInputGroupElm),sn(this._inputWithDataElm),sn(this._inputElm),(r=(n=this._editorInputGroupElm)===null||n===void 0?void 0:n.remove)===null||r===void 0||r.call(n),(s=(o=this._inputWithDataElm)===null||o===void 0?void 0:o.remove)===null||s===void 0||s.call(o),(u=(l=this._inputElm)===null||l===void 0?void 0:l.remove)===null||u===void 0||u.call(l)}disable(t=!0){var e,n;const r=this.disabled;if(this.disabled=t,!((e=this.flatInstance)===null||e===void 0)&&e._input)if(t){this.flatInstance._input.setAttribute("disabled","disabled"),this._clearButtonElm.disabled=!0;const o=this.getValue();r!==t&&(!((n=this.args)===null||n===void 0)&&n.compositeEditorOptions)&&o!==""&&this.reset("",!0,!0)}else this.flatInstance._input.removeAttribute("disabled"),this._clearButtonElm.disabled=!1}changeEditorOption(t,e){this.columnEditor.editorOptions||(this.columnEditor.editorOptions={}),this.columnEditor.editorOptions[t]=e,this._pickerMergedOptions={...this._pickerMergedOptions,[t]:e},this.flatInstance.set(t,e)}focus(){var t,e;this.grid.focus(),this.show(),(t=this._inputElm)===null||t===void 0||t.focus(),!((e=this._inputWithDataElm)===null||e===void 0)&&e.focus&&(this._inputWithDataElm.focus(),this._inputWithDataElm.select())}hide(){this.flatInstance&&typeof this.flatInstance.close=="function"&&this.flatInstance.close()}show(){var t;const e=!!(!((t=this.args)===null||t===void 0)&&t.compositeEditorOptions);!e&&this.flatInstance&&typeof this.flatInstance.open=="function"&&this.flatInstance._input?this.flatInstance.open():e&&this.applyInputUsabilityState()}getValue(){return this._inputElm.value}setValue(t,e=!1,n=!0){if(this.flatInstance.setDate(t),e){this.applyValue(this.args.item,this.serializeValue());const r=this.args.compositeEditorOptions;r&&n&&this.handleChangeOnCompositeEditor(r,"system")}}applyValue(t,e){var n,r,o;const s=this.columnDef&&this.columnDef.field;if(s!==void 0){const l=Fr(this.columnDef&&(this.columnDef.outputType||this.columnEditor.type||this.columnDef.type)||ie.dateUtc),u=Fr(this.columnDef&&(this.columnDef.saveOutputType||this.columnDef.outputType||this.columnEditor.type||this.columnDef.type)||ie.dateUtc),h=(s==null?void 0:s.indexOf("."))>0,c=this.validate(null,e),p=e&&c&&c.valid?Nu(e,l).format(u):"";if(h){const m=(o=(r=(n=this.columnEditor)===null||n===void 0?void 0:n.complexObjectPath)!==null&&r!==void 0?r:s)!==null&&o!==void 0?o:"";hr(t,m,p)}else t[s]=p}}isValueChanged(){var t;const e=this._inputElm.value,n=Fr(this.columnEditor.type||((t=this.columnDef)===null||t===void 0?void 0:t.type)||ie.dateIso),r=Fr(this.columnDef&&(this.columnDef.outputType||this.columnEditor.type||this.columnDef.type)||ie.dateUtc),o=e?Nu(e,n,!1).format(r):"",s=this._originalDate?Nu(this._originalDate,n,!1).format(r):"";return o==="Invalid date"||s==="Invalid date"?!1:this._lastTriggeredByClearDate||!(o===""&&s==="")&&o!==s}isValueTouched(){return this._isValueTouched}loadValue(t){const e=this.columnDef&&this.columnDef.field;if(t&&e!==void 0){const r=(e==null?void 0:e.indexOf("."))>0?bn(t,e):t[e];this._originalDate=r,this.flatInstance.setDate(r)}}reset(t,e=!0,n=!1){var r;const o=(r=t??this._originalDate)!==null&&r!==void 0?r:"";this.flatInstance&&(this._originalDate=o,this.flatInstance.setDate(o),o||this.flatInstance.clear()),this._isValueTouched=!1;const s=this.args.compositeEditorOptions;if(s&&e){const l=!n;this.handleChangeOnCompositeEditor(s,"user",l)}}save(){const t=this.validate(),e=t&&t.valid||!1;this.hasAutoCommitEdit&&e?this.grid.getEditorLock().commitCurrentEdit():this.args.commitChanges()}serializeValue(){var t;const e=this._inputElm.value;if(!e)return"";const n=Fr(this.columnEditor.type||((t=this.columnDef)===null||t===void 0?void 0:t.type)||ie.dateIso),r=Fr(this.columnDef&&(this.columnDef.outputType||this.columnEditor.type||this.columnDef.type)||ie.dateIso);return Nu(e,n,!1).format(r)}validate(t,e){var n,r;const o=!((n=this.args)===null||n===void 0)&&n.compositeEditorOptions?!1:this.columnEditor.required,s=e!==void 0?e:(r=this._inputElm)===null||r===void 0?void 0:r.value,l=this.columnEditor.errorMessage;return this.args.compositeEditorOptions&&this.applyInputUsabilityState(),this.disabled?{valid:!0,msg:""}:this.validator?this.validator(s,this.args):o&&s===""?{valid:!1,msg:l||je.VALIDATION_REQUIRED_FIELD}:{valid:!0,msg:null}}applyInputUsabilityState(){const t=this.grid.getActiveCell(),e=this.grid.onBeforeEditCell.notify({...t,item:this.dataContext,column:this.args.column,grid:this.grid,target:"composite",compositeEditorOptions:this.args.compositeEditorOptions}).getReturnValue();this.disable(e===!1)}handleOnDateChange(){var t,e;this._isValueTouched=!0;const n=(e=(t=this.flatInstance)===null||t===void 0?void 0:t.config)!==null&&e!==void 0?e:this._pickerMergedOptions;if(this.args&&(n!=null&&n.closeOnSelect)){const r=this.args.compositeEditorOptions;r?this.handleChangeOnCompositeEditor(r):this.save()}setTimeout(()=>this._lastTriggeredByClearDate=!1)}handleChangeOnCompositeEditor(t,e="user",n=!1){var r,o,s,l,u;const h=this.grid.getActiveCell(),c=this.args.column,p=(o=(r=this.columnDef)===null||r===void 0?void 0:r.id)!==null&&o!==void 0?o:"",m=this.dataContext,v=this.grid,_=this.serializeValue();this.validate().valid&&this.applyValue(this.dataContext,_),this.applyValue(t.formValues,_);const C=(u=(l=(s=this.gridOptions)===null||s===void 0?void 0:s.compositeEditorOptions)===null||l===void 0?void 0:l.excludeDisabledFieldFormValues)!==null&&u!==void 0?u:!1;(n||this.disabled&&C&&t.formValues.hasOwnProperty(p))&&delete t.formValues[p],v.onCompositeEditorChange.notify({...h,item:m,grid:v,column:c,formValues:t.formValues,editors:t.editors,triggeredBy:e},new Slick.EventData)}}function uv(a,t){const e=isNaN(a)?null:parseFloat(a),n=t.decimal||0,r=t.required,o=t.minValue,s=t.maxValue,l=t.operatorConditionalType||"inclusive",u=t.errorMessage,h={"{{minValue}}":o,"{{maxValue}}":s,"{{minDecimal}}":0,"{{maxDecimal}}":n};let c=!0,p="";if(typeof t.validator=="function")return t.validator(a,t.editorArgs);if(r&&a==="")c=!1,p=u||je.VALIDATION_REQUIRED_FIELD;else if(a!==""&&(isNaN(a)||n===0&&!/^[-+]?(\d*(\.)?(\d)*)$/.test(a)))c=!1,p=u||je.VALIDATION_EDITOR_VALID_NUMBER;else if(o!==void 0&&s!==void 0&&e!==null&&(l==="exclusive"&&(e<=+o||e>=+s)||l==="inclusive"&&(e<+o||e>+s)))c=!1,p=u||je.VALIDATION_EDITOR_NUMBER_BETWEEN.replace(/{{minValue}}|{{maxValue}}/gi,m=>h[m]);else if(o!==void 0&&e!==null&&(l==="exclusive"&&e<=+o||l==="inclusive"&&e<+o)){c=!1;const m=l==="inclusive"?je.VALIDATION_EDITOR_NUMBER_MIN_INCLUSIVE:je.VALIDATION_EDITOR_NUMBER_MIN;p=u||m.replace(/{{minValue}}/gi,v=>h[v])}else if(s!==void 0&&e!==null&&(l==="exclusive"&&e>=+s||l==="inclusive"&&e>+s)){c=!1;const m=l==="inclusive"?je.VALIDATION_EDITOR_NUMBER_MAX_INCLUSIVE:je.VALIDATION_EDITOR_NUMBER_MAX;p=u||m.replace(/{{maxValue}}/gi,v=>h[v])}else n>0&&!new RegExp(`^[-+]?(\\d*(\\.)?(\\d){0,${n}})$`).test(a)&&(c=!1,p=u||je.VALIDATION_EDITOR_DECIMAL_BETWEEN.replace(/{{minDecimal}}|{{maxDecimal}}/gi,m=>h[m]));return{valid:c,msg:p}}function cv(a,t){let e=isNaN(a)?null:parseInt(a,10);e!==null&&isNaN(e)&&(e=null);const n=t.errorMessage,r=t.required,o=t.minValue,s=t.maxValue,l=t.operatorConditionalType||"inclusive",u={"{{minValue}}":o,"{{maxValue}}":s};let h=!0,c="";if(t.validator)return t.validator(a,t.editorArgs);if(r&&a==="")h=!1,c=n||je.VALIDATION_REQUIRED_FIELD;else if(a!==""&&(isNaN(a)||!/^[+-]?\d+$/.test(a)))h=!1,c=n||je.VALIDATION_EDITOR_VALID_INTEGER;else if(o!==void 0&&s!==void 0&&e!==null&&(l==="exclusive"&&(e<=+o||e>=+s)||l==="inclusive"&&(e<+o||e>+s)))h=!1,c=n||je.VALIDATION_EDITOR_INTEGER_BETWEEN.replace(/{{minValue}}|{{maxValue}}/gi,p=>u[p]);else if(o!==void 0&&e!==null&&(l==="exclusive"&&e<=+o||l==="inclusive"&&e!==null&&e<+o)){h=!1;const p=l==="inclusive"?je.VALIDATION_EDITOR_INTEGER_MIN_INCLUSIVE:je.VALIDATION_EDITOR_INTEGER_MIN;c=n||p.replace(/{{minValue}}/gi,m=>u[m])}else if(s!==void 0&&e!==null&&(l==="exclusive"&&e>=+s||l==="inclusive"&&e!==null&&e>+s)){h=!1;const p=l==="inclusive"?je.VALIDATION_EDITOR_INTEGER_MAX_INCLUSIVE:je.VALIDATION_EDITOR_INTEGER_MAX;c=n||p.replace(/{{maxValue}}/gi,m=>u[m])}return{valid:h,msg:c}}function Xb(a,t){const e=t.required,n=t.minValue,r=t.maxValue,o=t.errorMessage,s={"{{minValue}}":n,"{{maxValue}}":r};return t.validator?t.validator(a,t.editorArgs):e&&a===""?{valid:!1,msg:o||je.VALIDATION_REQUIRED_FIELD}:n!==void 0&&r!==void 0&&a!==null&&(a<n||a>r)?{valid:!1,msg:o||je.VALIDATION_EDITOR_NUMBER_BETWEEN.replace(/{{minValue}}|{{maxValue}}/gi,l=>s[l])}:{valid:!0,msg:null}}class qb{constructor(t){if(this.args=t,this._isValueSaveCalled=!1,this._isLeftValueTouched=!1,this._isRightValueTouched=!1,this.disabled=!1,!t)throw new Error("[Slickgrid-Universal] Something is wrong with this grid, an Editor must always have valid arguments.");this.grid=t.grid,this.gridOptions=this.grid.getOptions()||{},this._eventHandler=new Slick.EventHandler,this._bindEventService=new Fn,this.init(),this._eventHandler.subscribe(this.grid.onValidationError,()=>this._isValueSaveCalled=!0)}get columnDef(){return this.args.column}get columnEditor(){return this.columnDef&&this.columnDef.internalColumnEditor||{}}get dataContext(){return this.args.item}get editorDomElement(){return{leftInput:this._leftInput,rightInput:this._rightInput}}get editorParams(){return this.columnEditor.params||{}}get eventHandler(){return this._eventHandler}get hasAutoCommitEdit(){var t;return(t=this.gridOptions.autoCommitEdit)!==null&&t!==void 0?t:!1}get isValueSaveCalled(){return this._isValueSaveCalled}get validator(){var t,e,n;return(e=(t=this.columnEditor)===null||t===void 0?void 0:t.validator)!==null&&e!==void 0?e:(n=this.columnDef)===null||n===void 0?void 0:n.validator}init(){var t,e,n,r;if(!this.editorParams||!this.editorParams.leftInput||!this.editorParams.leftInput.field||!this.editorParams.rightInput||!this.editorParams.rightInput.field)throw new Error(`[Slickgrid-Universal] Please make sure that your Combo Input Editor has params defined with "leftInput" and "rightInput" (example: { editor: { model: Editors.comboInput, params: { leftInput: { field: 'firstName' }, { rightSide: { field: 'lastName' } }}}`);this._leftFieldName=(t=this.editorParams.leftInput)===null||t===void 0?void 0:t.field,this._rightFieldName=(e=this.editorParams.rightInput)===null||e===void 0?void 0:e.field,this._leftInput=this.createInput("leftInput"),this._rightInput=this.createInput("rightInput");const o=(n=this.args)===null||n===void 0?void 0:n.container;o&&typeof o.appendChild=="function"&&(o.appendChild(this._leftInput),o.appendChild(this._rightInput)),this._bindEventService.bind(this._leftInput,"keydown",l=>this.handleKeyDown(l,"leftInput")),this._bindEventService.bind(this._rightInput,"keydown",l=>this.handleKeyDown(l,"rightInput")),this.hasAutoCommitEdit&&(this._bindEventService.bind(this._leftInput,"focusout",l=>this.handleFocusOut(l,"leftInput")),this._bindEventService.bind(this._rightInput,"focusout",l=>this.handleFocusOut(l,"rightInput"))),((r=this.args)===null||r===void 0?void 0:r.compositeEditorOptions)?(this._bindEventService.bind(this._leftInput,"input",this.handleChangeOnCompositeEditorDebounce.bind(this)),this._bindEventService.bind(this._rightInput,"input",this.handleChangeOnCompositeEditorDebounce.bind(this))):setTimeout(()=>this._leftInput.select(),50)}handleFocusOut(t,e){var n;const r=((n=t.relatedTarget)===null||n===void 0?void 0:n.className)||"";!this.args.compositeEditorOptions&&r.indexOf("dual-editor")===-1&&this._lastEventType!=="focusout-right"&&(e==="rightInput"||e==="leftInput"&&this._lastEventType!=="focusout-left")&&(e==="leftInput"?this._isLeftValueTouched=!0:this._isRightValueTouched=!0,this.save());const s=e==="leftInput"?"left":"right";this._lastEventType=`${t==null?void 0:t.type}-${s}`}handleKeyDown(t,e){e==="leftInput"?this._isLeftValueTouched=!0:this._isRightValueTouched=!0,this._lastInputKeyEvent=t,(t.keyCode===xi.LEFT||t.keyCode===xi.RIGHT||t.keyCode===xi.TAB)&&t.stopImmediatePropagation()}destroy(){var t,e,n,r;this._eventHandler.unsubscribeAll(),this._bindEventService.unbindAll(),(e=(t=this._leftInput)===null||t===void 0?void 0:t.remove)===null||e===void 0||e.call(t),(r=(n=this._rightInput)===null||n===void 0?void 0:n.remove)===null||r===void 0||r.call(n)}createInput(t){var e,n,r,o,s,l,u;const h=this.editorParams[t],c=(n=(e=this.columnDef)===null||e===void 0?void 0:e.id)!==null&&n!==void 0?n:"",p=this.gridOptions.datasetIdPropertyName||"id",m=(s=(o=(r=this.args)===null||r===void 0?void 0:r.item)===null||o===void 0?void 0:o[p])!==null&&s!==void 0?s:"";let v=h.type||"text";(v==="float"||v==="integer")&&(v="number");const _=Ie("input",{type:v||"text",id:`item-${m}-${t}`,ariaLabel:(u=(l=this.columnEditor)===null||l===void 0?void 0:l.ariaLabel)!==null&&u!==void 0?u:`${jr(c+"")} Input Editor`,className:`dual-editor-text editor-${c} ${t.replace(/input/gi,"")}`,autocomplete:"off",ariaAutoComplete:"none",placeholder:h.placeholder||"",title:h.title||""});return v==="readonly"&&(_.readOnly=!0,v="text"),v==="number"&&(_.step=this.getInputDecimalSteps(t)),_}disable(t=!0){var e;const n=this.disabled;this.disabled=t,this._leftInput&&this._rightInput&&(t?(this._leftInput.setAttribute("disabled","disabled"),this._rightInput.setAttribute("disabled","disabled"),n!==t&&(!((e=this.args)===null||e===void 0)&&e.compositeEditorOptions)&&this.reset("",!0,!0)):(this._leftInput.removeAttribute("disabled"),this._rightInput.removeAttribute("disabled")))}focus(){this.grid.focus()}show(){var t;!!(!((t=this.args)===null||t===void 0)&&t.compositeEditorOptions)&&this.applyInputUsabilityState()}getValues(){const t={},e=this._leftInput.value,n=this._rightInput.value,r=this.editorParams.leftInput&&(this.editorParams.leftInput.type==="float"||this.editorParams.leftInput.type==="integer"),o=this.editorParams.rightInput&&(this.editorParams.rightInput.type==="float"||this.editorParams.rightInput.type==="integer"),s=e!==""&&r?+this._leftInput.value:e||"",l=n!==""&&o?+this._rightInput.value:n||"";return hr(t,this._leftFieldName,s),hr(t,this._rightFieldName,l),t}setValues(t){Array.isArray(t)&&t.length===2&&(this._leftInput.value=`${t[0]}`,this._rightInput.value=`${t[1]}`)}applyValue(t,e){this.applyValueByPosition(t,e,"leftInput"),this.applyValueByPosition(t,e,"rightInput")}applyValueByPosition(t,e,n){var r,o,s;const l=n==="leftInput"?this._leftFieldName:this._rightFieldName;if(l!==void 0){const u=(l==null?void 0:l.indexOf("."))>0;let h=l;if(u){const m=l.split(/\.(.*)/);h=m.length>1?m[1]:m}const c=u?bn(e,h):e[l],p=this.validate(null,{position:n,inputValue:c});if(u){const m=bn(e,h),v=p&&p.valid?m:"",_=(s=(o=(r=this.columnEditor)===null||r===void 0?void 0:r.complexObjectPath)!==null&&o!==void 0?o:l)!==null&&s!==void 0?s:"";hr(t,_,v)}else l&&(t[l]=p&&p.valid?e[l]:"")}}isValueChanged(){const t=this._leftInput.value,e=this._rightInput.value,n=this.editorParams&&this.editorParams.leftInput,r=this.editorParams&&this.editorParams.rightInput,o=this._lastInputKeyEvent&&this._lastInputKeyEvent.keyCode;if((n&&n.alwaysSaveOnEnterKey||r&&r.alwaysSaveOnEnterKey)&&o===xi.ENTER)return!0;const s=!(t===""&&(this._originalLeftValue===null||this._originalLeftValue===void 0))&&t!==this._originalLeftValue,l=!(e===""&&(this._originalRightValue===null||this._originalRightValue===void 0))&&e!==this._originalRightValue;return s||l}isValueTouched(){return this._isLeftValueTouched||this._isRightValueTouched}loadValue(t){this.loadValueByPosition(t,"leftInput"),this.loadValueByPosition(t,"rightInput"),this._leftInput.select()}loadValueByPosition(t,e){const n=e==="leftInput"?this._leftFieldName:this._rightFieldName,r=e==="leftInput"?"_originalLeftValue":"_originalRightValue",o=e==="leftInput"?"_leftInput":"_rightInput";if(t&&n!==void 0){const l=(n==null?void 0:n.indexOf("."))>0?bn(t,n):t.hasOwnProperty(n)?t[n]:"";if(this[r]=l,this.editorParams[e].type==="float"){const u=this.getDecimalPlaces(e);u!==null&&(this[r]||this[r]===0)&&typeof this[r]!==void 0&&(this[r]=(+this[r]).toFixed(u))}this[o]&&(this[o].value=`${this[r]}`)}}reset(t,e=!0,n=!1){var r,o;const s=(r=t??this._originalLeftValue)!==null&&r!==void 0?r:"",l=(o=t??this._originalRightValue)!==null&&o!==void 0?o:"";this._leftInput&&this._rightInput&&(this._originalLeftValue=s,this._originalRightValue=l,this._leftInput.value=`${s}`,this._rightInput.value=`${l}`),this._isLeftValueTouched=!1,this._isRightValueTouched=!1;const u=this.args.compositeEditorOptions;if(u&&e){const h=!n;this.handleChangeOnCompositeEditor(null,u,"user",h)}}save(){const t=this.validate(),e=t&&t.valid||!1;this._isValueSaveCalled||(this.hasAutoCommitEdit&&e?this.grid.getEditorLock().commitCurrentEdit():this.args.commitChanges(),this._isValueSaveCalled=!0)}serializeValue(){const t={},e=this.serializeValueByPosition("leftInput"),n=this.serializeValueByPosition("rightInput");return hr(t,this._leftFieldName,e),hr(t,this._rightFieldName,n),t}serializeValueByPosition(t){const e=t==="leftInput"?this._leftInput.value:this._rightInput.value;if(e===""||isNaN(+e))return e;let n=parseFloat(e);const r=this.getDecimalPlaces(t);return r!==null&&(n||n===0)&&n.toFixed&&(n=parseFloat(n.toFixed(r))),n}getDecimalPlaces(t){const n=t==="leftInput"?"leftInput":"rightInput",r=this.editorParams[n],o=r==null?void 0:r.decimal;return o===void 0?0:o}getInputDecimalSteps(t){const e=this.getDecimalPlaces(t);let n="";for(let r=1;r<e;r++)n+="0";return e>0?`0.${n}1`:"1"}validate(t,e){if(this.args.compositeEditorOptions&&this.applyInputUsabilityState(),this.disabled)return{valid:!0,msg:""};if(e){const n=this.validateByPosition(e.position,e.inputValue);if(!n.valid)return e.position==="leftInput"?this._leftInput.select():this._rightInput.select(),n}else{const n=this.validateByPosition("leftInput"),r=this.validateByPosition("rightInput");if(!n.valid)return this._leftInput.select(),n;if(!r.valid)return this._rightInput.select(),r}return{valid:!0,msg:""}}validateByPosition(t,e){var n;const r=this.editorParams[t];let o="";if(e)o=e;else{const u=t==="leftInput"?this._leftInput:this._rightInput;o=u&&u.value}const s=this.validator;o=typeof s=="function"?this.getValues():o;const l={editorArgs:this.args,errorMessage:r.errorMessage,required:!((n=this.args)===null||n===void 0)&&n.compositeEditorOptions?!1:r.required,validator:typeof s=="function"?s:r.validator};switch(r.type){case"float":return uv(o,{...l,decimal:this.getDecimalPlaces(t),minValue:r.minValue,maxValue:r.maxValue,operatorConditionalType:r.operatorConditionalType});case"integer":return cv(o,{...l,minValue:r.minValue,maxValue:r.maxValue,operatorConditionalType:r.operatorConditionalType});case"text":case"password":default:return Mu(o,l)}}applyInputUsabilityState(){const t=this.grid.getActiveCell(),e=this.grid.onBeforeEditCell.notify({...t,item:this.dataContext,column:this.args.column,grid:this.grid,target:"composite",compositeEditorOptions:this.args.compositeEditorOptions}).getReturnValue();this.disable(e===!1)}handleChangeOnCompositeEditor(t,e,n="user",r=!1){var o,s,l,u,h,c,p,m,v;const _=this.grid.getActiveCell(),C=this.args.column,x=(l=(s=(o=this.columnEditor.params)===null||o===void 0?void 0:o.leftInput)===null||s===void 0?void 0:s.field)!==null&&l!==void 0?l:"",S=(c=(h=(u=this.columnEditor.params)===null||u===void 0?void 0:u.rightInput)===null||h===void 0?void 0:h.field)!==null&&c!==void 0?c:"",y=this.dataContext,D=this.grid,A=this.serializeValue();this.validate().valid&&this.applyValue(this.dataContext,A),this.applyValue(e.formValues,A);const P=(v=(m=(p=this.gridOptions)===null||p===void 0?void 0:p.compositeEditorOptions)===null||m===void 0?void 0:m.excludeDisabledFieldFormValues)!==null&&v!==void 0?v:!1;(r||this.disabled&&P&&e.formValues.hasOwnProperty(x))&&delete e.formValues[x],(r||this.disabled&&P&&e.formValues.hasOwnProperty(S))&&delete e.formValues[S],D.onCompositeEditorChange.notify({..._,item:y,grid:D,column:C,formValues:e.formValues,editors:e.editors,triggeredBy:n},{...new Slick.EventData,...t})}handleChangeOnCompositeEditorDebounce(t){var e,n,r;const o=(e=this.args)===null||e===void 0?void 0:e.compositeEditorOptions;if(o){const s=(r=(n=this.gridOptions)===null||n===void 0?void 0:n.editorTypingDebounce)!==null&&r!==void 0?r:500;clearTimeout(this._timer),this._timer=setTimeout(()=>this.handleChangeOnCompositeEditor(t,o),s)}}}class Lu{constructor(t,e){if(this.args=t,this._inputType="text",this._isValueTouched=!1,this.disabled=!1,!t)throw new Error("[Slickgrid-Universal] Something is wrong with this grid, an Editor must always have valid arguments.");this.grid=t.grid,this.gridOptions=t.grid&&t.grid.getOptions(),this._bindEventService=new Fn,this.inputType=e||"text",this.init()}get columnDef(){return this.args.column}get columnEditor(){return this.columnDef&&this.columnDef.internalColumnEditor||{}}get dataContext(){return this.args.item}get editorDomElement(){return this._input}get hasAutoCommitEdit(){var t;return(t=this.gridOptions.autoCommitEdit)!==null&&t!==void 0?t:!1}get inputType(){return this._inputType}set inputType(t){this._inputType=t}get validator(){var t,e,n;return(e=(t=this.columnEditor)===null||t===void 0?void 0:t.validator)!==null&&e!==void 0?e:(n=this.columnDef)===null||n===void 0?void 0:n.validator}init(){var t,e,n,r,o,s,l,u;const h=(e=(t=this.columnDef)===null||t===void 0?void 0:t.id)!==null&&e!==void 0?e:"",c=this.args.compositeEditorOptions;this._input=Ie("input",{type:this._inputType||"text",autocomplete:"off",ariaAutoComplete:"none",ariaLabel:(r=(n=this.columnEditor)===null||n===void 0?void 0:n.ariaLabel)!==null&&r!==void 0?r:`${jr(h+"")} Input Editor`,placeholder:(s=(o=this.columnEditor)===null||o===void 0?void 0:o.placeholder)!==null&&s!==void 0?s:"",title:(u=(l=this.columnEditor)===null||l===void 0?void 0:l.title)!==null&&u!==void 0?u:"",className:`editor-text editor-${h}`});const p=this.args.container;p&&typeof p.appendChild=="function"&&p.appendChild(this._input),this._bindEventService.bind(this._input,"focus",()=>{var m;return(m=this._input)===null||m===void 0?void 0:m.select()}),this._bindEventService.bind(this._input,"keydown",m=>{this._isValueTouched=!0,this._lastInputKeyEvent=m,(m.keyCode===xi.LEFT||m.keyCode===xi.RIGHT)&&m.stopImmediatePropagation()}),this.hasAutoCommitEdit&&!c&&this._bindEventService.bind(this._input,"focusout",()=>{this._isValueTouched=!0,this.save()}),c&&this._bindEventService.bind(this._input,["input","paste"],this.handleOnInputChange.bind(this))}destroy(){var t,e;this._bindEventService.unbindAll(),(e=(t=this._input)===null||t===void 0?void 0:t.remove)===null||e===void 0||e.call(t)}disable(t=!0){var e;const n=this.disabled;if(this.disabled=t,this._input)if(t){this._input.setAttribute("disabled","disabled");const r=this.getValue();n!==t&&(!((e=this.args)===null||e===void 0)&&e.compositeEditorOptions)&&r!==""&&this.reset("",!0,!0)}else this._input.removeAttribute("disabled")}focus(){this.grid.focus(),this._input&&this._input.focus()}show(){var t;!!(!((t=this.args)===null||t===void 0)&&t.compositeEditorOptions)&&this.applyInputUsabilityState()}getValue(){var t;return((t=this._input)===null||t===void 0?void 0:t.value)||""}setValue(t,e=!1,n=!0){if(this._input&&(this._input.value=`${t}`,e)){this.applyValue(this.args.item,this.serializeValue());const r=this.args.compositeEditorOptions;r&&n&&this.handleChangeOnCompositeEditor(null,r,"system")}}applyValue(t,e){var n,r,o;const s=this.columnDef&&this.columnDef.field;if(s!==void 0){const l=(s==null?void 0:s.indexOf("."))>0,u=this.validate(null,e),h=u!=null&&u.valid?e:"";if(l){const c=(o=(r=(n=this.columnEditor)===null||n===void 0?void 0:n.complexObjectPath)!==null&&r!==void 0?r:s)!==null&&o!==void 0?o:"";hr(t,c,h)}else s&&(t[s]=h)}}isValueChanged(){var t;const e=(t=this._input)===null||t===void 0?void 0:t.value,n=this._lastInputKeyEvent&&this._lastInputKeyEvent.keyCode;return this.columnEditor&&this.columnEditor.alwaysSaveOnEnterKey&&n===xi.ENTER?!0:!(e===""&&(this._originalValue===null||this._originalValue===void 0))&&e!==this._originalValue}isValueTouched(){return this._isValueTouched}loadValue(t){const e=this.columnDef&&this.columnDef.field;if(t&&e!==void 0&&this._input){const r=(e==null?void 0:e.indexOf("."))>0?bn(t,e):t.hasOwnProperty(e)&&t[e]||"";this._originalValue=r,this._input.value=this._originalValue,this._input.select()}}reset(t,e=!0,n=!1){var r;const o=(r=t??this._originalValue)!==null&&r!==void 0?r:"";this._input&&(this._originalValue=o,this._input.value=`${o}`),this._isValueTouched=!1;const s=this.args.compositeEditorOptions;if(s&&e){const l=!n;this.handleChangeOnCompositeEditor(null,s,"user",l)}}save(){const t=this.validate(),e=t&&t.valid||!1;this.hasAutoCommitEdit&&e?this.grid.getEditorLock().commitCurrentEdit():this.args.commitChanges()}serializeValue(){var t,e;return(e=(t=this._input)===null||t===void 0?void 0:t.value)!==null&&e!==void 0?e:""}validate(t,e){var n;if(this.args.compositeEditorOptions&&this.applyInputUsabilityState(),this.disabled)return{valid:!0,msg:""};const r=e!==void 0?e:this._input&&this._input.value;return Mu(r,{editorArgs:this.args,errorMessage:this.columnEditor.errorMessage,minLength:this.columnEditor.minLength,maxLength:this.columnEditor.maxLength,operatorConditionalType:this.columnEditor.operatorConditionalType,required:!((n=this.args)===null||n===void 0)&&n.compositeEditorOptions?!1:this.columnEditor.required,validator:this.validator})}applyInputUsabilityState(){const t=this.grid.getActiveCell(),e=this.grid.onBeforeEditCell.notify({...t,item:this.dataContext,column:this.args.column,grid:this.grid,target:"composite",compositeEditorOptions:this.args.compositeEditorOptions}).getReturnValue();this.disable(e===!1)}handleChangeOnCompositeEditor(t,e,n="user",r=!1){var o,s,l,u,h;const c=this.grid.getActiveCell(),p=this.args.column,m=(s=(o=this.columnDef)===null||o===void 0?void 0:o.id)!==null&&s!==void 0?s:"",v=this.dataContext,_=this.grid,C=this.serializeValue();this.validate().valid&&this.applyValue(this.dataContext,C),this.applyValue(e.formValues,C);const x=(h=(u=(l=this.gridOptions)===null||l===void 0?void 0:l.compositeEditorOptions)===null||u===void 0?void 0:u.excludeDisabledFieldFormValues)!==null&&h!==void 0?h:!1;(r||this.disabled&&x&&e.formValues.hasOwnProperty(m))&&delete e.formValues[m],_.onCompositeEditorChange.notify({...c,item:v,grid:_,column:p,formValues:e.formValues,editors:e.editors,triggeredBy:n},{...new Slick.EventData,...t})}handleOnInputChange(t){var e,n;this._isValueTouched=!0;const r=this.args.compositeEditorOptions;if(r){const o=(n=(e=this.gridOptions)===null||e===void 0?void 0:e.editorTypingDebounce)!==null&&n!==void 0?n:500;clearTimeout(this._timer),this._timer=setTimeout(()=>this.handleChangeOnCompositeEditor(t,r),o)}}}const Kb=0;class Zb extends Lu{constructor(t){super(t,"number"),this.args=t}init(){var t,e,n,r,o,s,l,u;if(this.columnDef&&this.columnEditor&&this.args){const h=(e=(t=this.columnDef)===null||t===void 0?void 0:t.id)!==null&&e!==void 0?e:"",c=this.args.compositeEditorOptions;this._input=Ie("input",{type:"number",autocomplete:"off",ariaAutoComplete:"none",ariaLabel:(r=(n=this.columnEditor)===null||n===void 0?void 0:n.ariaLabel)!==null&&r!==void 0?r:`${jr(h+"")} Number Editor`,className:`editor-text editor-${h}`,placeholder:(s=(o=this.columnEditor)===null||o===void 0?void 0:o.placeholder)!==null&&s!==void 0?s:"",title:(u=(l=this.columnEditor)===null||l===void 0?void 0:l.title)!==null&&u!==void 0?u:"",step:`${this.columnEditor.valueStep!==void 0?this.columnEditor.valueStep:this.getInputDecimalSteps()}`});const p=this.args.container;p&&typeof p.appendChild=="function"&&p.appendChild(this._input),this._bindEventService.bind(this._input,"focus",()=>{var m;return(m=this._input)===null||m===void 0?void 0:m.select()}),this._bindEventService.bind(this._input,"keydown",m=>{this._lastInputKeyEvent=m,(m.keyCode===xi.LEFT||m.keyCode===xi.RIGHT)&&m.stopImmediatePropagation()}),this.hasAutoCommitEdit&&!c&&this._bindEventService.bind(this._input,"focusout",()=>{this._isValueTouched=!0,this.save()}),c&&(this._bindEventService.bind(this._input,["input","paste"],this.handleOnInputChange.bind(this)),this._bindEventService.bind(this._input,"wheel",this.handleOnMouseWheel.bind(this),{passive:!0}))}}getDecimalPlaces(){var t,e,n,r,o;let s=(o=(e=(t=this.columnEditor)===null||t===void 0?void 0:t.decimal)!==null&&e!==void 0?e:(r=(n=this.columnEditor)===null||n===void 0?void 0:n.params)===null||r===void 0?void 0:r.decimalPlaces)!==null&&o!==void 0?o:void 0;return s===void 0&&(s=Kb),!s&&s!==0?null:s}getInputDecimalSteps(){const t=this.getDecimalPlaces();let e="";for(let n=1;n<t;n++)e+="0";return t>0?`0.${e}1`:"1"}loadValue(t){const e=this.columnDef&&this.columnDef.field;if(e!==void 0&&t&&e!==void 0&&this._input){const r=(e==null?void 0:e.indexOf("."))>0?bn(t,e):t[e];this._originalValue=r;const o=this.getDecimalPlaces();o!==null&&(this._originalValue||this._originalValue===0)&&typeof this._originalValue!==void 0&&(this._originalValue=(+this._originalValue).toFixed(o)),this._input.value=`${this._originalValue}`,this._input.select()}}serializeValue(){var t;const e=(t=this._input)===null||t===void 0?void 0:t.value;if(e===void 0||e===""||isNaN(+e))return e;let n=parseFloat(e);const r=this.getDecimalPlaces();return r!==null&&(n||n===0)&&n.toFixed&&(n=parseFloat(n.toFixed(r))),n}validate(t,e){var n,r;if(this.args.compositeEditorOptions&&this.applyInputUsabilityState(),this.disabled)return{valid:!0,msg:""};const o=e!==void 0?e:(n=this._input)===null||n===void 0?void 0:n.value;return uv(o,{editorArgs:this.args,errorMessage:this.columnEditor.errorMessage,decimal:this.getDecimalPlaces(),minValue:this.columnEditor.minValue,maxValue:this.columnEditor.maxValue,operatorConditionalType:this.columnEditor.operatorConditionalType,required:!((r=this.args)===null||r===void 0)&&r.compositeEditorOptions?!1:this.columnEditor.required,validator:this.validator})}handleOnMouseWheel(t){this._isValueTouched=!0;const e=this.args.compositeEditorOptions;e&&this.handleChangeOnCompositeEditor(t,e)}}class Qb extends Lu{constructor(t){super(t,"password"),this.args=t}}class Jb extends Lu{constructor(t){super(t,"number"),this.args=t}init(){var t,e,n,r,o,s,l,u;if(this.columnDef&&this.columnEditor&&this.args){const h=(e=(t=this.columnDef)===null||t===void 0?void 0:t.id)!==null&&e!==void 0?e:"",c=this.args.compositeEditorOptions;this._input=Ie("input",{type:"number",autocomplete:"off",ariaAutoComplete:"none",ariaLabel:(r=(n=this.columnEditor)===null||n===void 0?void 0:n.ariaLabel)!==null&&r!==void 0?r:`${jr(h+"")} Slider Editor`,placeholder:(s=(o=this.columnEditor)===null||o===void 0?void 0:o.placeholder)!==null&&s!==void 0?s:"",title:(u=(l=this.columnEditor)===null||l===void 0?void 0:l.title)!==null&&u!==void 0?u:"",step:`${this.columnEditor.valueStep!==void 0?this.columnEditor.valueStep:"1"}`,className:`editor-text editor-${h}`});const p=this.args.container;p&&typeof p.appendChild=="function"&&p.appendChild(this._input),this._bindEventService.bind(this._input,"focus",()=>{var m;return(m=this._input)===null||m===void 0?void 0:m.select()}),this._bindEventService.bind(this._input,"keydown",m=>{this._lastInputKeyEvent=m,(m.keyCode===xi.LEFT||m.keyCode===xi.RIGHT)&&m.stopImmediatePropagation()}),this.hasAutoCommitEdit&&!c&&this._bindEventService.bind(this._input,"focusout",()=>{this._isValueTouched=!0,this.save()}),c&&(this._bindEventService.bind(this._input,["input","paste"],this.handleOnInputChange.bind(this)),this._bindEventService.bind(this._input,"wheel",this.handleOnMouseWheel.bind(this),{passive:!0}))}}loadValue(t){const e=this.columnDef&&this.columnDef.field;if(e!==void 0&&t&&e!==void 0&&this._input){const r=(e==null?void 0:e.indexOf("."))>0?bn(t,e):t[e];this._originalValue=isNaN(r)||r===null||r===void 0?r:`${r}`,this._input.value=`${this._originalValue}`,this._input.select()}}serializeValue(){var t;const e=(t=this._input)===null||t===void 0?void 0:t.value;if(e===void 0||e===""||isNaN(+e))return e;const n=isNaN(+e)?e:parseInt(e,10);return isNaN(+n)?e:n}validate(t,e){var n;if(this.args.compositeEditorOptions&&this.applyInputUsabilityState(),this.disabled)return{valid:!0,msg:""};const r=e!==void 0?e:this.getValue();return cv(r,{editorArgs:this.args,errorMessage:this.columnEditor.errorMessage,minValue:this.columnEditor.minValue,maxValue:this.columnEditor.maxValue,operatorConditionalType:this.columnEditor.operatorConditionalType,required:!((n=this.args)===null||n===void 0)&&n.compositeEditorOptions?!1:this.columnEditor.required,validator:this.validator})}handleOnMouseWheel(t){this._isValueTouched=!0;const e=this.args.compositeEditorOptions;e&&this.handleChangeOnCompositeEditor(t,e)}}class eC{constructor(t){if(this.args=t,this._isValueTouched=!1,this.disabled=!1,!t)throw new Error("[Slickgrid-Universal] Something is wrong with this grid, an Editor must always have valid arguments.");this.grid=t.grid,this.gridOptions=t.grid&&t.grid.getOptions();const e=this.gridOptions||this.args.column.params||{};e!=null&&e.translater&&(this._translater=e.translater),this._locales=this.gridOptions&&this.gridOptions.locales||je.locales,this._bindEventService=new Fn,this.init()}get columnDef(){return this.args.column}get columnEditor(){var t,e;return(e=(t=this.columnDef)===null||t===void 0?void 0:t.internalColumnEditor)!==null&&e!==void 0?e:{}}get dataContext(){return this.args.item}get editorDomElement(){return this._textareaElm}get editorOptions(){var t,e;return(e=(t=this.columnEditor)===null||t===void 0?void 0:t.editorOptions)!==null&&e!==void 0?e:{}}get hasAutoCommitEdit(){var t,e;return(e=(t=this.gridOptions)===null||t===void 0?void 0:t.autoCommitEdit)!==null&&e!==void 0?e:!1}get validator(){var t,e,n;return(e=(t=this.columnEditor)===null||t===void 0?void 0:t.validator)!==null&&e!==void 0?e:(n=this.columnDef)===null||n===void 0?void 0:n.validator}init(){var t,e,n,r,o,s,l,u,h,c,p,m,v,_,C,x,S,y,D,A,P,M,B,Q,L,le;let _e="",J="";if(this._translater&&this._translater.translate&&this.gridOptions.enableTranslate){const Re=ao(this.gridOptions),ne=(e=(t=this.editorOptions.buttonTexts)===null||t===void 0?void 0:t.cancelKey)!==null&&e!==void 0?e:`${Re}CANCEL`,fe=(r=(n=this.editorOptions.buttonTexts)===null||n===void 0?void 0:n.saveKey)!==null&&r!==void 0?r:`${Re}SAVE`;_e=this._translater.translate(`${Re}${ne}`),J=this._translater.translate(`${Re}${fe}`)}else _e=(u=(s=(o=this.editorOptions.buttonTexts)===null||o===void 0?void 0:o.cancel)!==null&&s!==void 0?s:(l=this._locales)===null||l===void 0?void 0:l.TEXT_CANCEL)!==null&&u!==void 0?u:"Cancel",J=(m=(c=(h=this.editorOptions.buttonTexts)===null||h===void 0?void 0:h.save)!==null&&c!==void 0?c:(p=this._locales)===null||p===void 0?void 0:p.TEXT_SAVE)!==null&&m!==void 0?m:"Save";const z=this.args.compositeEditorOptions,F=(_=(v=this.columnDef)===null||v===void 0?void 0:v.id)!==null&&_!==void 0?_:"",ae=(C=this.columnEditor)===null||C===void 0?void 0:C.maxLength,qe=(S=(x=this.editorOptions)===null||x===void 0?void 0:x.rows)!==null&&S!==void 0?S:4,De=z?this.args.container:document.body;this._wrapperElm=Ie("div",{className:`slick-large-editor-text editor-${F}`,style:{position:z?"relative":"absolute"}}),De.appendChild(this._wrapperElm),this._textareaElm=Ie("textarea",{ariaLabel:(D=(y=this.columnEditor)===null||y===void 0?void 0:y.ariaLabel)!==null&&D!==void 0?D:`${jr(F+"")} Text Editor`,cols:(P=(A=this.editorOptions)===null||A===void 0?void 0:A.cols)!==null&&P!==void 0?P:40,rows:z&&qe>3?3:qe,placeholder:(B=(M=this.columnEditor)===null||M===void 0?void 0:M.placeholder)!==null&&B!==void 0?B:"",title:(L=(Q=this.columnEditor)===null||Q===void 0?void 0:Q.title)!==null&&L!==void 0?L:""},this._wrapperElm);const xe=Ie("div",{className:"editor-footer"}),Te=Ie("span",{className:"counter"});if(this._currentLengthElm=Ie("span",{className:"text-length",textContent:"0"}),Te.appendChild(this._currentLengthElm),ae!==void 0&&(Te.appendChild(Ie("span",{className:"separator",textContent:"/"})),Te.appendChild(Ie("span",{className:"max-length",textContent:`${ae}`}))),xe.appendChild(Te),!z){const Re=Ie("button",{className:"btn btn-cancel btn-default btn-xs",textContent:_e},xe),ne=Ie("button",{className:"btn btn-save btn-primary btn-xs",textContent:J},xe);this._bindEventService.bind(Re,"click",this.cancel.bind(this)),this._bindEventService.bind(ne,"click",this.save.bind(this)),this.position((le=this.args)===null||le===void 0?void 0:le.position),this._textareaElm.focus(),this._textareaElm.select()}this._wrapperElm.appendChild(xe),this._bindEventService.bind(this._textareaElm,"keydown",this.handleKeyDown.bind(this)),this._bindEventService.bind(this._textareaElm,"input",this.handleOnInputChange.bind(this)),this._bindEventService.bind(this._textareaElm,"paste",this.handleOnInputChange.bind(this))}cancel(){var t;const e=this._defaultTextValue||"";this._textareaElm.value=e,this._currentLengthElm.textContent=`${e.length}`,!((t=this.args)===null||t===void 0)&&t.cancelChanges&&this.args.cancelChanges()}hide(){this._wrapperElm.style.display="none"}show(){var t;!!(!((t=this.args)===null||t===void 0)&&t.compositeEditorOptions)?this.applyInputUsabilityState():this._wrapperElm.style.display="block"}destroy(){var t,e;this._bindEventService.unbindAll(),(e=(t=this._wrapperElm)===null||t===void 0?void 0:t.remove)===null||e===void 0||e.call(t)}disable(t=!0){var e;const n=this.disabled;if(this.disabled=t,this._textareaElm&&this._wrapperElm)if(t){this._textareaElm.disabled=!0,this._wrapperElm.classList.add("disabled");const r=this.getValue();n!==t&&(!((e=this.args)===null||e===void 0)&&e.compositeEditorOptions)&&r!==""&&this.reset("",!0,!0)}else this._textareaElm.disabled=!1,this._wrapperElm.classList.remove("disabled")}focus(){this.grid.focus(),this._textareaElm&&(this._textareaElm.focus(),this._textareaElm.select())}getValue(){return this._textareaElm.value}setValue(t,e=!1,n=!0){if(this._textareaElm.value=t,this._currentLengthElm.textContent=`${t.length}`,e){this.applyValue(this.args.item,this.serializeValue());const r=this.args.compositeEditorOptions;r&&n&&this.handleChangeOnCompositeEditor(null,r,"system")}}applyValue(t,e){var n,r,o,s;const l=(n=this.columnDef)===null||n===void 0?void 0:n.field;if(l!==void 0){const u=(l==null?void 0:l.indexOf("."))>0,h=this.validate(void 0,e),c=h&&h.valid?e:"";if(u){const p=(s=(o=(r=this.columnEditor)===null||r===void 0?void 0:r.complexObjectPath)!==null&&o!==void 0?o:l)!==null&&s!==void 0?s:"";hr(t,p,c)}else t[l]=c}}isValueChanged(){const t=this._textareaElm.value;return!(t===""&&(this._defaultTextValue===null||this._defaultTextValue===void 0))&&t!==this._defaultTextValue}isValueTouched(){return this._isValueTouched}loadValue(t){var e;const n=(e=this.columnDef)===null||e===void 0?void 0:e.field;if(t&&n!==void 0){const o=(n==null?void 0:n.indexOf("."))>0?bn(t,n):t[n];this._defaultTextValue=o||"",this._textareaElm.value=this._defaultTextValue,this._currentLengthElm.textContent=this._defaultTextValue.length,this._textareaElm.defaultValue=this._defaultTextValue,this._textareaElm.select()}}position(t){var e,n,r,o,s,l,u,h;const c=Un(this.args.container),p=this.args.container.offsetHeight,m=this.args.container.offsetWidth,v=this._wrapperElm.getBoundingClientRect().height||this.args.position.height,_=this._wrapperElm.getBoundingClientRect().width||this.args.position.width,C=document.body.offsetHeight||window.innerHeight,x=document.body.offsetWidth||window.innerWidth;let S=(n=(e=c==null?void 0:c.top)!==null&&e!==void 0?e:t.top)!==null&&n!==void 0?n:0,y=(o=(r=c==null?void 0:c.left)!==null&&r!==void 0?r:t.left)!==null&&o!==void 0?o:0;const D=(l=(s=this.editorOptions)===null||s===void 0?void 0:s.position)!==null&&l!==void 0?l:"auto";if(D==="left"||D==="auto"&&y+_>x){const A=(h=(u=this.editorOptions)===null||u===void 0?void 0:u.marginRight)!==null&&h!==void 0?h:0;y-=_-m+A}(D==="top"||D==="auto"&&S+v>C)&&(S-=v-p),this._wrapperElm.style.top=`${S}px`,this._wrapperElm.style.left=`${y}px`}reset(t,e=!0,n=!1){var r;const o=(r=t??this._defaultTextValue)!==null&&r!==void 0?r:"";this._textareaElm&&(this._defaultTextValue=o,this._textareaElm.value=o,this._currentLengthElm.textContent=o.length),this._isValueTouched=!1;const s=this.args.compositeEditorOptions;if(s&&e){const l=!n;this.handleChangeOnCompositeEditor(null,s,"user",l)}}save(){var t;const e=this.validate(),n=(t=e==null?void 0:e.valid)!==null&&t!==void 0?t:!1;this.hasAutoCommitEdit&&n?this.grid.getEditorLock().commitCurrentEdit():this.args.commitChanges()}serializeValue(){return this._textareaElm.value}validate(t,e){var n,r;if(this.args.compositeEditorOptions&&this.applyInputUsabilityState(),this.disabled)return{valid:!0,msg:""};const o=e!==void 0?e:(n=this._textareaElm)===null||n===void 0?void 0:n.value;return Mu(o,{editorArgs:this.args,errorMessage:this.columnEditor.errorMessage,minLength:this.columnEditor.minLength,maxLength:this.columnEditor.maxLength,operatorConditionalType:this.columnEditor.operatorConditionalType,required:!((r=this.args)===null||r===void 0)&&r.compositeEditorOptions?!1:this.columnEditor.required,validator:this.validator})}applyInputUsabilityState(){const t=this.grid.getActiveCell(),e=this.grid.onBeforeEditCell.notify({...t,item:this.dataContext,column:this.args.column,grid:this.grid,target:"composite",compositeEditorOptions:this.args.compositeEditorOptions}).getReturnValue();this.disable(e===!1)}handleKeyDown(t){var e;const n=(e=t.keyCode)!==null&&e!==void 0?e:t.code;this._isValueTouched=!0,this.args.compositeEditorOptions||(n===xi.ENTER&&t.ctrlKey||t.ctrlKey&&t.key.toUpperCase()==="S"?(t.preventDefault(),this.save()):n===xi.ESCAPE?(t.preventDefault(),this.cancel()):n===xi.TAB&&t.shiftKey?(t.preventDefault(),this.args&&this.grid&&this.grid.navigatePrev()):n===xi.TAB&&(t.preventDefault(),this.args&&this.grid&&this.grid.navigateNext()))}handleOnInputChange(t){var e,n,r;const o=this.args.compositeEditorOptions,s=(e=this.columnEditor)===null||e===void 0?void 0:e.maxLength;let l=!1;if(s&&(l=this.truncateText(this._textareaElm,s)),l)this._currentLengthElm.textContent=`${s}`;else{const u=t.type==="paste"?t.clipboardData.getData("text"):t.target.value;this._currentLengthElm.textContent=`${u.length}`}if(o){const u=(r=(n=this.gridOptions)===null||n===void 0?void 0:n.editorTypingDebounce)!==null&&r!==void 0?r:500;clearTimeout(this._timer),this._timer=setTimeout(()=>this.handleChangeOnCompositeEditor(t,o),u)}}handleChangeOnCompositeEditor(t,e,n="user",r=!1){var o,s,l,u,h;const c=this.grid.getActiveCell(),p=this.args.column,m=(s=(o=this.columnDef)===null||o===void 0?void 0:o.id)!==null&&s!==void 0?s:"",v=this.dataContext,_=this.grid,C=this.serializeValue();this.validate().valid&&this.applyValue(this.dataContext,C),this.applyValue(e.formValues,C);const x=(h=(u=(l=this.gridOptions)===null||l===void 0?void 0:l.compositeEditorOptions)===null||u===void 0?void 0:u.excludeDisabledFieldFormValues)!==null&&h!==void 0?h:!1;(r||this.disabled&&x&&e.formValues.hasOwnProperty(m))&&delete e.formValues[m],_.onCompositeEditorChange.notify({...c,item:v,grid:_,column:p,formValues:e.formValues,editors:e.editors,triggeredBy:n},{...new Slick.EventData,...t})}truncateText(t,e){const n=t.value+"";return n.length>e?(t.value=n.substring(0,e),!0):!1}}class hv{constructor(t,e,n=-1){var r,o,s,l,u,h,c,p,m,v,_;if(this.args=t,this.isMultipleSelect=e,this.delayOpening=n,this._isValueTouched=!1,this._isDisposingOrCallingSave=!1,this.disabled=!1,this.enableTranslateLabel=!1,this.finalCollection=[],!t)throw new Error("[Slickgrid-Universal] Something is wrong with this grid, an Editor must always have valid arguments.");this.grid=t.grid,this.gridOptions=this.grid.getOptions()||{},!((r=this.gridOptions)===null||r===void 0)&&r.translater&&(this._translaterService=this.gridOptions.translater),this._locales=this.gridOptions.locales||je.locales;const C=(s=(o=this.columnDef)===null||o===void 0?void 0:o.id)!==null&&s!==void 0?s:"";this.elementName=`editor-${C}`;const x=this.args.compositeEditorOptions,S={autoAdjustDropHeight:!0,autoAdjustDropPosition:!0,autoAdjustDropWidthByTextSize:!0,container:"body",filter:!1,maxHeight:275,minHeight:25,name:this.elementName,single:!0,renderOptionLabelAsHtml:(u=(l=this.columnEditor)===null||l===void 0?void 0:l.enableRenderHtml)!==null&&u!==void 0?u:!1,sanitizer:y=>Mn(this.gridOptions,y),onClick:()=>this._isValueTouched=!0,onCheckAll:()=>this._isValueTouched=!0,onUncheckAll:()=>this._isValueTouched=!0,onClose:()=>{x?this.handleChangeOnCompositeEditor(x):(this._isDisposingOrCallingSave=!0,this.save(this.hasAutoCommitEdit))}};if(e)if(S.single=!1,S.displayTitle=!0,S.showOkButton=!0,!((h=this._translaterService)===null||h===void 0)&&h.getCurrentLanguage()){const y=ao(this.gridOptions);S.countSelectedText=this._translaterService.translate(`${y}X_OF_Y_SELECTED`),S.allSelectedText=this._translaterService.translate(`${y}ALL_SELECTED`),S.selectAllText=this._translaterService.translate(`${y}SELECT_ALL`),S.okButtonText=this._translaterService.translate(`${y}OK`),S.noMatchesFoundText=this._translaterService.translate(`${y}NO_MATCHES_FOUND`)}else S.countSelectedText=(c=this._locales)===null||c===void 0?void 0:c.TEXT_X_OF_Y_SELECTED,S.allSelectedText=(p=this._locales)===null||p===void 0?void 0:p.TEXT_ALL_SELECTED,S.selectAllText=(m=this._locales)===null||m===void 0?void 0:m.TEXT_SELECT_ALL,S.okButtonText=(v=this._locales)===null||v===void 0?void 0:v.TEXT_OK,S.noMatchesFoundText=(_=this._locales)===null||_===void 0?void 0:_.TEXT_NO_MATCHES_FOUND;this.defaultOptions=S,this.init()}get collection(){var t,e;return(e=(t=this.columnEditor)===null||t===void 0?void 0:t.collection)!==null&&e!==void 0?e:[]}get collectionOptions(){var t;return(t=this.columnEditor)===null||t===void 0?void 0:t.collectionOptions}get columnDef(){return this.args.column}get columnEditor(){var t,e;return(e=(t=this.columnDef)===null||t===void 0?void 0:t.internalColumnEditor)!==null&&e!==void 0?e:{}}get dataContext(){return this.args.item}get editorDomElement(){return this.editorElm}get isCompositeEditor(){var t;return!!(!((t=this.args)===null||t===void 0)&&t.compositeEditorOptions)}get customStructure(){var t,e;return(e=(t=this.columnDef)===null||t===void 0?void 0:t.internalColumnEditor)===null||e===void 0?void 0:e.customStructure}get hasAutoCommitEdit(){var t;return(t=this.gridOptions.autoCommitEdit)!==null&&t!==void 0?t:!1}get msInstance(){return this._msInstance}get selectOptions(){return this.defaultOptions}get currentValues(){var t,e,n,r,o,s;const l=(e=(t=this._msInstance)===null||t===void 0?void 0:t.getSelects())!==null&&e!==void 0?e:[];if(this.collection.every(c=>typeof c=="number"||typeof c=="string"))return this.collection.filter(c=>l==null?void 0:l.some(p=>`${p}`===(c==null?void 0:c.toString())));const u=(r=(n=this.collectionOptions)===null||n===void 0?void 0:n.separatorBetweenTextLabels)!==null&&r!==void 0?r:"",h=(s=(o=this.collectionOptions)===null||o===void 0?void 0:o.includePrefixSuffixToSelectedValues)!==null&&s!==void 0?s:!1;return this.collection.filter(c=>l.some(p=>{var m;return`${p}`===((m=c==null?void 0:c[this.valueName])===null||m===void 0?void 0:m.toString())})).map(c=>{var p,m,v,_;const C=c[this.valueName];let x=c[this.labelPrefixName]||"",S=c[this.labelSuffixName]||"";const y=(m=(p=this.columnDef)===null||p===void 0?void 0:p.field)!==null&&m!==void 0?m:"",D=(y==null?void 0:y.indexOf("."))>0,A=(_=(v=this.columnEditor)===null||v===void 0?void 0:v.serializeComplexValueFormat)!==null&&_!==void 0?_:"object";return D&&typeof c=="object"&&A==="object"?c:(x=this.enableTranslateLabel&&this._translaterService&&x&&typeof x=="string"?this._translaterService.translate(x||" "):x,S=this.enableTranslateLabel&&this._translaterService&&S&&typeof S=="string"?this._translaterService.translate(S||" "):S,h?[x,C,S].filter(M=>M).join(u):C)})}get currentValue(){var t,e,n,r,o,s,l,u,h;const c=(e=(t=this._msInstance)===null||t===void 0?void 0:t.getSelects())!==null&&e!==void 0?e:[],p=c.length?c[0]:"",m=(n=this.columnDef)===null||n===void 0?void 0:n.field;if(m!==void 0){if(this.collection.every(y=>typeof y=="number"||typeof y=="string"))return _s(this.collection,y=>{var D;return((D=y==null?void 0:y.toString)===null||D===void 0?void 0:D.call(y))===`${p}`});const v=(o=(r=this.collectionOptions)===null||r===void 0?void 0:r.separatorBetweenTextLabels)!==null&&o!==void 0?o:"",_=(l=(s=this.collectionOptions)===null||s===void 0?void 0:s.includePrefixSuffixToSelectedValues)!==null&&l!==void 0?l:!1,C=_s(this.collection,y=>{var D;return y.hasOwnProperty(this.valueName)&&((D=y[this.valueName])===null||D===void 0?void 0:D.toString())===`${p}`}),x=(m==null?void 0:m.indexOf("."))>0,S=(h=(u=this.columnEditor)===null||u===void 0?void 0:u.serializeComplexValueFormat)!==null&&h!==void 0?h:"object";if(x&&typeof C=="object"&&S==="object")return C;if(C&&C.hasOwnProperty(this.valueName)){const y=C[this.valueName];if(_){let D=C[this.labelPrefixName]||"",A=C[this.labelSuffixName]||"";return D=this.enableTranslateLabel&&this._translaterService&&D&&typeof D=="string"?this._translaterService.translate(D||" "):D,A=this.enableTranslateLabel&&this._translaterService&&A&&typeof A=="string"?this._translaterService.translate(A||" "):A,[D,y,A].filter(M=>M).join(v)}return y}}return""}get validator(){var t,e,n;return(e=(t=this.columnEditor)===null||t===void 0?void 0:t.validator)!==null&&e!==void 0?e:(n=this.columnDef)===null||n===void 0?void 0:n.validator}init(){var t,e,n,r,o,s,l,u,h,c,p,m,v;if(!this.columnDef||!this.columnDef.internalColumnEditor||!this.columnDef.internalColumnEditor.collection&&!this.columnDef.internalColumnEditor.collectionAsync)throw new Error(`[Slickgrid-Universal] You need to pass a "collection" (or "collectionAsync") inside Column Definition Editor for the MultipleSelect/SingleSelect Editor to work correctly.
      Also each option should include a value/label pair (or value/labelKey when using Locale).
      For example: { editor: { collection: [{ value: true, label: 'True' },{ value: false, label: 'False'}] } }`);if(this._collectionService=new Bp(this._translaterService),this.enableTranslateLabel=(e=(t=this.columnEditor)===null||t===void 0?void 0:t.enableTranslateLabel)!==null&&e!==void 0?e:!1,this.labelName=(r=(n=this.customStructure)===null||n===void 0?void 0:n.label)!==null&&r!==void 0?r:"label",this.labelPrefixName=(s=(o=this.customStructure)===null||o===void 0?void 0:o.labelPrefix)!==null&&s!==void 0?s:"labelPrefix",this.labelSuffixName=(u=(l=this.customStructure)===null||l===void 0?void 0:l.labelSuffix)!==null&&u!==void 0?u:"labelSuffix",this.optionLabel=(c=(h=this.customStructure)===null||h===void 0?void 0:h.optionLabel)!==null&&c!==void 0?c:"value",this.valueName=(m=(p=this.customStructure)===null||p===void 0?void 0:p.value)!==null&&m!==void 0?m:"value",this.enableTranslateLabel&&(!this._translaterService||typeof this._translaterService.translate!="function"))throw new Error('[Slickgrid-Universal] requires a Translate Service to be installed and configured when the grid option "enableTranslate" is enabled.');this.renderDomElement(this.collection),(this.disabled||!((v=this.columnEditor)===null||v===void 0)&&v.collectionAsync&&Array.isArray(this.collection)&&this.collection.length===0)&&this.disable(!0)}getValue(){return this.isMultipleSelect?this.currentValues:this.currentValue}setValue(t,e=!1,n=!0){if(this.isMultipleSelect&&Array.isArray(t)?this.loadMultipleValues(t):this.loadSingleValue(t),e){this.applyValue(this.args.item,this.serializeValue());const r=this.args.compositeEditorOptions;r&&n&&this.handleChangeOnCompositeEditor(r,"system")}}hide(){this._msInstance&&this._msInstance.close()}show(t){!this.isCompositeEditor&&this._msInstance?this._msInstance.open(t):this.isCompositeEditor&&this.applyInputUsabilityState()}applyValue(t,e){var n,r,o,s,l;const u=(n=this.columnDef)===null||n===void 0?void 0:n.field,h=(r=this.columnDef)===null||r===void 0?void 0:r.type;let c=e;if(u!==void 0){(h===ie.number||h===ie.integer||h===ie.boolean)&&!isNaN(parseFloat(e))&&(c=parseFloat(e)),this.isMultipleSelect&&typeof e=="string"&&e.indexOf(",")>=0&&(c=e.split(","));const p=(u==null?void 0:u.indexOf("."))>0,m=this.validate(null,c);if(c=m!=null&&m.valid?c:"",p){const v=(l=(s=(o=this.columnEditor)===null||o===void 0?void 0:o.complexObjectPath)!==null&&s!==void 0?s:u)!==null&&l!==void 0?l:"";hr(t,v,c)}else t[u]=c}}destroy(){var t,e;this._msInstance&&this.hasAutoCommitEdit&&this.isValueChanged()&&!this._isDisposingOrCallingSave&&!this.isCompositeEditor&&(this._isDisposingOrCallingSave=!0,this.save(!0)),this._isDisposingOrCallingSave=!0,typeof((t=this._msInstance)===null||t===void 0?void 0:t.destroy)=="function"&&this._msInstance.destroy(),(e=this.editorElm)===null||e===void 0||e.remove(),this._msInstance=void 0}loadValue(t){var e,n,r;const o=(e=this.columnDef)===null||e===void 0?void 0:e.field,s=o!==void 0&&(o==null?void 0:o.indexOf("."))>0;if(t&&o!==void 0){const l=(r=(n=this.columnEditor)===null||n===void 0?void 0:n.complexObjectPath)!==null&&r!==void 0?r:o,u=s?bn(t,l):t.hasOwnProperty(o)&&t[o],h=s&&(u!=null&&u.hasOwnProperty(this.valueName))?u[this.valueName]:u;this.isMultipleSelect&&Array.isArray(h)?this.loadMultipleValues(h):this.loadSingleValue(h)}}loadMultipleValues(t){var e;if(Array.isArray(t)){this.originalValue=t.map(r=>typeof r=="number"||typeof r=="boolean"?`${r}`:r),(e=this._msInstance)===null||e===void 0||e.setSelects(this.originalValue);const n=this.args.compositeEditorOptions;n&&this.handleChangeOnCompositeEditor(n)}}loadSingleValue(t){var e;this.originalValue=typeof t=="number"||typeof t=="boolean"?`${t}`:t,(e=this._msInstance)===null||e===void 0||e.setSelects([this.originalValue])}serializeValue(){return this.isMultipleSelect?this.currentValues:this.currentValue}changeEditorOption(t,e){var n;this.columnEditor&&(this.columnEditor.editorOptions||(this.columnEditor.editorOptions={}),this.columnEditor.editorOptions[t]=e,this.editorElmOptions={...this.editorElmOptions,[t]:e},(n=this._msInstance)===null||n===void 0||n.refreshOptions(this.editorElmOptions))}disable(t=!0){const e=this.disabled;if(this.disabled=t,this._msInstance)if(t){this._msInstance.disable();const n=this.getValue(),r=Array.isArray(n)&&this.isMultipleSelect?(n==null?void 0:n[0])==="":n==="";e!==t&&this.isCompositeEditor&&!r&&this.reset("",!0,!0)}else this._msInstance.enable()}focus(){var t;this.grid.focus(),(t=this._msInstance)===null||t===void 0||t.focus()}isValueChanged(){var t;const e=(t=this._msInstance)===null||t===void 0?void 0:t.getSelects();if(this.isMultipleSelect)return!Jo(e,this.originalValue);const n=Array.isArray(e)&&e.length>0?e[0]:void 0;return n!==void 0&&n!==this.originalValue}isValueTouched(){return this._isValueTouched}reset(t,e=!0,n=!1){const r=t??this.originalValue;if(this._msInstance){this.originalValue=this.isMultipleSelect?r!==void 0?[r]:[]:r;const s=this.originalValue===void 0?[]:[this.originalValue];this._msInstance.setSelects(s)}this._isValueTouched=!1;const o=this.args.compositeEditorOptions;if(o&&e){const s=!n;this.handleChangeOnCompositeEditor(o,"user",s)}}save(t=!1){var e;const n=this.validate(),r=(e=n==null?void 0:n.valid)!==null&&e!==void 0?e:!1;(!this._isDisposingOrCallingSave||t)&&this.hasAutoCommitEdit&&r?this.grid.getEditorLock().commitCurrentEdit():this.args.commitChanges()}validate(t,e){var n,r;const o=this.isCompositeEditor?!1:(n=this.columnEditor)===null||n===void 0?void 0:n.required,s=e!==void 0?e:(r=this._msInstance)===null||r===void 0?void 0:r.getSelects(),l=this.columnEditor&&this.columnEditor.errorMessage;if(this.isCompositeEditor&&this.applyInputUsabilityState(),this.disabled)return{valid:!0,msg:""};if(this.validator){const u=e!==void 0?e:this.isMultipleSelect?this.currentValues:this.currentValue;return this.validator(u,this.args)}return o&&(s===""||Array.isArray(s)&&s.length===0)?{valid:!1,msg:l||je.VALIDATION_REQUIRED_FIELD}:{valid:!0,msg:null}}applyInputUsabilityState(){const t=this.grid.getActiveCell(),e=this.grid.onBeforeEditCell.notify({...t,item:this.dataContext,column:this.args.column,grid:this.grid,target:"composite",compositeEditorOptions:this.args.compositeEditorOptions}).getReturnValue();this.disable(e===!1)}filterCollection(t){var e,n;let r=t;if(this.columnEditor&&this.columnEditor.collectionFilterBy){const o=this.columnEditor.collectionFilterBy,s=(n=(e=this.columnEditor.collectionOptions)===null||e===void 0?void 0:e.filterResultAfterEachPass)!==null&&n!==void 0?n:null;r=this._collectionService.filterCollection(r,o,s)}return r}sortCollection(t){let e=t;if(this.columnDef&&this.columnEditor&&this.columnEditor.collectionSortBy){const n=this.columnEditor.collectionSortBy;e=this._collectionService.sortCollection(this.columnDef,e,n,this.enableTranslateLabel)}return e}renderDomElement(t){var e,n,r,o,s;if(!Array.isArray(t)&&(!((e=this.collectionOptions)===null||e===void 0)&&e.collectionInsideObjectProperty)){const c=this.collectionOptions.collectionInsideObjectProperty;t=bn(t,c)}if(!Array.isArray(t))throw new Error('The "collection" passed to the Select Editor is not a valid array.');let l=[];if(t.length>0&&(l=[...t]),!((n=this.collectionOptions)===null||n===void 0)&&n.addBlankEntry&&Array.isArray(l)&&l.length>0&&l[0][this.valueName]!==""&&(l.unshift(this.createBlankEntry()),this.collection.unshift(this.createBlankEntry())),!((r=this.collectionOptions)===null||r===void 0)&&r.addCustomFirstEntry&&Array.isArray(l)&&l.length>0&&l[0][this.valueName]!==this.collectionOptions.addCustomFirstEntry[this.valueName]&&(l.unshift(this.collectionOptions.addCustomFirstEntry),this.collection.unshift(this.collectionOptions.addCustomFirstEntry)),!((o=this.collectionOptions)===null||o===void 0)&&o.addCustomLastEntry&&Array.isArray(l)&&l.length>0){const c=l.length-1;l[c][this.valueName]!==this.collectionOptions.addCustomLastEntry[this.valueName]&&l.push(this.collectionOptions.addCustomLastEntry)}let u=l;if(u=this.filterCollection(u),u=this.sortCollection(u),!((s=this.columnEditor)===null||s===void 0)&&s.collectionOverride){const c={column:this.columnDef,dataContext:this.dataContext,grid:this.grid,originalCollections:this.collection};if(this.args.compositeEditorOptions){const{formValues:p,modalType:m}=this.args.compositeEditorOptions;c.compositeEditorOptions={formValues:p,modalType:m}}u=this.columnEditor.collectionOverride(u,c)}this.finalCollection=u;const h=em("editor",u,this.columnDef,this.grid,this.isMultipleSelect,this._translaterService);this.createDomElement(h.selectElement,h.dataCollection)}createBlankEntry(){const t={[this.labelName]:"",[this.valueName]:""};return this.labelPrefixName&&(t[this.labelPrefixName]=""),this.labelSuffixName&&(t[this.labelSuffixName]=""),t}createDomElement(t,e){var n,r,o,s,l;const u=this.args.container;t&&u&&typeof u.appendChild=="function"&&(sn(u),u.appendChild(t));const h=(r=(n=this.columnEditor)===null||n===void 0?void 0:n.placeholder)!==null&&r!==void 0?r:"";this.defaultOptions.placeholder=h||"";const c=(l=(s=(o=this.columnDef)===null||o===void 0?void 0:o.internalColumnEditor)===null||s===void 0?void 0:s.editorOptions)!==null&&l!==void 0?l:{};this.editorElmOptions={...this.defaultOptions,...c,data:e},this._msInstance=ca(t,this.editorElmOptions),this.editorElm=this._msInstance.getParentElement(),this.isCompositeEditor||(this.delayOpening>=0?setTimeout(()=>this.show()):this.show())}handleChangeOnCompositeEditor(t,e="user",n=!1){var r,o,s,l,u;const h=this.grid.getActiveCell(),c=this.args.column,p=(o=(r=this.columnDef)===null||r===void 0?void 0:r.id)!==null&&o!==void 0?o:"",m=this.dataContext,v=this.grid,_=this.serializeValue();this.validate().valid&&this.applyValue(this.dataContext,_),this.applyValue(t.formValues,_);const C=(u=(l=(s=this.gridOptions)===null||s===void 0?void 0:s.compositeEditorOptions)===null||l===void 0?void 0:l.excludeDisabledFieldFormValues)!==null&&u!==void 0?u:!1;(n||this.disabled&&C&&t.formValues.hasOwnProperty(p))&&delete t.formValues[p],v.onCompositeEditorChange.notify({...h,item:m,grid:v,column:c,formValues:t.formValues,editors:t.editors,triggeredBy:e},new Slick.EventData)}}class tC extends hv{constructor(t,e=0){super(t,!0,e),this.args=t,this.delayOpening=e}}class iC extends hv{constructor(t,e=0){super(t,!1,e),this.args=t,this.delayOpening=e}}class nC{constructor(t){if(this.args=t,this._defaultValue=0,this._isValueTouched=!1,this._sliderNumberElm=null,this.disabled=!1,!t)throw new Error("[Slickgrid-Universal] Something is wrong with this grid, an Editor must always have valid arguments.");this.grid=t.grid,this.gridOptions=this.grid.getOptions()||{},this._bindEventService=new Fn,this.init()}get columnDef(){return this.args.column}get columnEditor(){return this.columnDef&&this.columnDef.internalColumnEditor||{}}get dataContext(){return this.args.item}get editorDomElement(){return this._editorElm}get editorInputDomElement(){return this._inputElm}get hasAutoCommitEdit(){var t;return(t=this.gridOptions.autoCommitEdit)!==null&&t!==void 0?t:!1}get sliderOptions(){return this._sliderOptions}get validator(){var t,e,n;return(e=(t=this.columnEditor)===null||t===void 0?void 0:t.validator)!==null&&e!==void 0?e:(n=this.columnDef)===null||n===void 0?void 0:n.validator}init(){var t;if(this._cellContainerElm=(t=this.args)===null||t===void 0?void 0:t.container,this._cellContainerElm&&this.columnDef){const e=this.args.compositeEditorOptions;this._editorElm=this.buildDomElement(),e||this.focus(),this._cellContainerElm.appendChild(this._editorElm),this._bindEventService.bind(this._sliderTrackElm,["click","mouseup"],this.sliderTrackClicked.bind(this)),this._bindEventService.bind(this._inputElm,["change","mouseup","touchend"],this.handleChangeEvent.bind(this)),this._bindEventService.bind(this._inputElm,["input","change"],this.handleChangeSliderNumber.bind(this))}}cancel(){this._inputElm&&(this._inputElm.value=`${this._originalValue}`),this.args.cancelChanges()}destroy(){var t,e,n;this._bindEventService.unbindAll(),(t=this._inputElm)===null||t===void 0||t.remove(),(e=this._editorElm)===null||e===void 0||e.remove(),(n=this._sliderTrackElm)===null||n===void 0||n.remove()}disable(t=!0){var e;const n=this.disabled;if(this.disabled=t,this._inputElm)if(t){this._inputElm.disabled=!0;const r=this.getValue();n!==t&&(!((e=this.args)===null||e===void 0)&&e.compositeEditorOptions)&&r!==""&&this.reset(0,!0,!0)}else this._inputElm.disabled=!1}focus(){this.grid.focus(),this._inputElm&&this._inputElm.focus()}show(){var t;!!(!((t=this.args)===null||t===void 0)&&t.compositeEditorOptions)&&this.applyInputUsabilityState()}getValue(){var t,e;return(e=(t=this._inputElm)===null||t===void 0?void 0:t.value)!==null&&e!==void 0?e:""}setValue(t,e=!1,n=!0){if(this._inputElm&&(this._inputElm.value=`${t}`),this._sliderNumberElm&&(this._sliderNumberElm.textContent=`${t}`),e){this.applyValue(this.args.item,this.serializeValue());const r=this.args.compositeEditorOptions;r&&n&&this.handleChangeOnCompositeEditor(null,r,"system")}}applyValue(t,e){var n,r,o,s,l;const u=(r=(n=this.columnDef)===null||n===void 0?void 0:n.field)!==null&&r!==void 0?r:"";if(u!==void 0){const h=(u==null?void 0:u.indexOf("."))>0,c=this.validate(void 0,e),p=c&&c.valid?e:"";if(h){const m=(l=(s=(o=this.columnEditor)===null||o===void 0?void 0:o.complexObjectPath)!==null&&s!==void 0?s:u)!==null&&l!==void 0?l:"";hr(t,m,p)}else t&&(t[u]=p)}}isValueChanged(){var t,e;const n=(e=(t=this._inputElm)===null||t===void 0?void 0:t.value)!==null&&e!==void 0?e:"";return!(n===""&&this._originalValue===void 0)&&+n!==this._originalValue}isValueTouched(){return this._isValueTouched}loadValue(t){var e,n;const r=(n=(e=this.columnDef)===null||e===void 0?void 0:e.field)!==null&&n!==void 0?n:"";if(t&&r!==void 0){let s=(r==null?void 0:r.indexOf("."))>0?bn(t,r):t.hasOwnProperty(r)?t[r]:this._defaultValue;(s===""||s===null||s===void 0)&&(s=this._defaultValue),this._originalValue=+s,this._inputElm&&(this._inputElm.value=`${s}`,this._inputElm.title=`${s}`),this._sliderNumberElm&&(this._sliderNumberElm.textContent=`${s}`)}this.updateTrackFilledColorWhenEnabled()}reset(t,e=!0,n=!1){var r;const o=(r=t??this._originalValue)!==null&&r!==void 0?r:0;this._inputElm&&(this._inputElm.value=`${o}`),this._sliderNumberElm&&(this._sliderNumberElm.textContent=`${o}`),this._isValueTouched=!1;const s=this.args.compositeEditorOptions;if(s&&e){const l=!n;this.handleChangeOnCompositeEditor(null,s,"user",l)}}save(){const t=this.validate(),e=t&&t.valid||!1;this.hasAutoCommitEdit&&e?this.grid.getEditorLock().commitCurrentEdit():this.args.commitChanges()}serializeValue(){var t,e;const n=(e=(t=this._inputElm)===null||t===void 0?void 0:t.value)!==null&&e!==void 0?e:"";return n!==""?parseInt(n,10):this._originalValue}validate(t,e){var n,r;if(this.args.compositeEditorOptions&&this.applyInputUsabilityState(),this.disabled)return{valid:!0,msg:""};const o=e!==void 0?e:(n=this._inputElm)===null||n===void 0?void 0:n.value;return Xb(o,{editorArgs:this.args,errorMessage:this.columnEditor.errorMessage,minValue:this.columnEditor.minValue,maxValue:this.columnEditor.maxValue,required:!((r=this.args)===null||r===void 0)&&r.compositeEditorOptions?!1:this.columnEditor.required,validator:this.validator})}buildDomElement(){var t,e,n,r,o,s,l,u,h,c,p,m,v,_,C;const x=(e=(t=this.columnDef)===null||t===void 0?void 0:t.id)!==null&&e!==void 0?e:"",S=(r=(n=this.columnEditor)===null||n===void 0?void 0:n.title)!==null&&r!==void 0?r:"",y=+((s=(o=this.columnEditor)===null||o===void 0?void 0:o.minValue)!==null&&s!==void 0?s:je.SLIDER_DEFAULT_MIN_VALUE),D=+((u=(l=this.columnEditor)===null||l===void 0?void 0:l.maxValue)!==null&&u!==void 0?u:je.SLIDER_DEFAULT_MAX_VALUE),A=+((c=(h=this.columnEditor)===null||h===void 0?void 0:h.valueStep)!==null&&c!==void 0?c:je.SLIDER_DEFAULT_STEP),P=(p=Al(this.columnEditor,"sliderStartValue"))!==null&&p!==void 0?p:y;this._defaultValue=+P,this._sliderTrackElm=Ie("div",{className:"slider-track"}),this._inputElm=Ie("input",{type:"range",title:S,defaultValue:`${P}`,value:`${P}`,min:`${y}`,max:`${D}`,step:`${(v=(m=this.columnEditor)===null||m===void 0?void 0:m.valueStep)!==null&&v!==void 0?v:je.SLIDER_DEFAULT_STEP}`,ariaLabel:(C=(_=this.columnEditor)===null||_===void 0?void 0:_.ariaLabel)!==null&&C!==void 0?C:`${jr(x+"")} Slider Editor`,className:`slider-editor-input editor-${x}`});const M=Ie("div",{className:"slider-container slider-editor"}),B=Ie("div",{className:"slider-input-container slider-editor"});if(B.appendChild(this._sliderTrackElm),B.appendChild(this._inputElm),M.appendChild(B),!Al(this.columnEditor,"hideSliderNumber")){M.classList.add("input-group");const Q=Ie("div",{className:"input-group-addon input-group-append slider-value"});this._sliderNumberElm=Ie("span",{className:"input-group-text",textContent:`${P}`}),Q.appendChild(this._sliderNumberElm),M.appendChild(Q)}return this._sliderOptions={minValue:y,maxValue:D,step:A},M}applyInputUsabilityState(){const t=this.grid.getActiveCell(),e=this.grid.onBeforeEditCell.notify({...t,item:this.dataContext,column:this.args.column,grid:this.grid,target:"composite",compositeEditorOptions:this.args.compositeEditorOptions}).getReturnValue();this.disable(e===!1)}handleChangeEvent(t){this._isValueTouched=!0;const e=this.args.compositeEditorOptions;e?this.handleChangeOnCompositeEditor(t,e):this.save()}handleChangeSliderNumber(t){var e,n,r;const o=(n=(e=t.target)===null||e===void 0?void 0:e.value)!==null&&n!==void 0?n:"";o!==""&&(!Al(this.columnEditor,"hideSliderNumber")&&this._sliderNumberElm&&(this._sliderNumberElm.textContent=o),this._inputElm.title=o,!((r=this.args)===null||r===void 0)&&r.compositeEditorOptions||this.grid.onMouseEnter.notify({grid:this.grid},{...new Slick.EventData,target:t==null?void 0:t.target})),this.updateTrackFilledColorWhenEnabled()}handleChangeOnCompositeEditor(t,e,n="user",r=!1){var o,s,l,u,h;const c=this.grid.getActiveCell(),p=this.args.column,m=(s=(o=this.columnDef)===null||o===void 0?void 0:o.id)!==null&&s!==void 0?s:"",v=this.dataContext,_=this.grid,C=this.serializeValue();this.validate().valid&&this.applyValue(this.dataContext,C),this.applyValue(e.formValues,C);const x=(h=(u=(l=this.gridOptions)===null||l===void 0?void 0:l.compositeEditorOptions)===null||u===void 0?void 0:u.excludeDisabledFieldFormValues)!==null&&h!==void 0?h:!1;(r||this.disabled&&x&&e.formValues.hasOwnProperty(m))&&delete e.formValues[m],_.onCompositeEditorChange.notify({...c,item:v,grid:_,column:p,formValues:e.formValues,editors:e.editors,triggeredBy:n},{...new Slick.EventData,...t})}sliderTrackClicked(t){t.preventDefault();const e=t.offsetX,n=this._sliderTrackElm.offsetWidth,r=(e+0)*100/n;this._inputElm&&(this._inputElm.value=`${r}`,this._inputElm.dispatchEvent(new Event("change")))}updateTrackFilledColorWhenEnabled(){var t,e,n;if(Al(this.columnEditor,"enableSliderTrackColoring")&&this._inputElm){const o=(+this.getValue()-+this._inputElm.min)/((e=(t=this.sliderOptions)===null||t===void 0?void 0:t.maxValue)!==null&&e!==void 0?e:0-+this._inputElm.min)*100,s="linear-gradient(to right, %b %p1, %c %p1, %c %p2, %b %p2)".replace(/%b/g,"#eee").replace(/%c/g,(n=Al(this.columnEditor,"sliderTrackFilledColor"))!==null&&n!==void 0?n:"var(--slick-slider-filter-thumb-color, #86bff8)").replace(/%p1/g,"0%").replace(/%p2/g,`${o}%`);this._sliderTrackElm.style.background=s,this._sliderOptions.sliderTrackBackground=s}}}const hf={autocompleter:Wb,checkbox:$b,date:jb,dualInput:qb,float:Zb,integer:Jb,longText:eC,multipleSelect:tC,password:Qb,singleSelect:iC,slider:nC,text:Lu},rC=(a,t,e)=>{let n=e;return e==null&&(n=""),`<div style="float: right">${n}</div>`},oC=(a,t,e,n,r)=>{var o;const s=n&&n.params||{},l=s.propertyNames,u=(o=s==null?void 0:s.includeTitle)!==null&&o!==void 0?o:!0;let h=s.dataContextProperty;if(h||(h=n&&n.field&&n.field.split(".")[0]),!l||!Array.isArray(l)||!h)throw new Error(`Formatters.arrayObjectToCsv requires you to pass an array of "propertyNames" (declared in "params") that you want to pull the data from.
      For example, if we have an array of user objects that have the property of firstName & lastName then we need to pass in your column definition:: { params: { propertyNames: ['firtName'] }}.
      Optionally, you can also pass the "dataContextProperty" if you wish to run this on another completely different field of the dataContext object.`);if(r[h]&&Array.isArray(r[h])&&Array.isArray(r[h])&&r[h].length>0){const c=[];r[h].forEach(m=>{const v=[];l.forEach(_=>{v.push(m[_])}),c.push(v.join(" "))});const p=c.join(", ");return u?`<span title="${p}">${p}</span>`:p}return e},Hu=(a,t,e)=>{if(e&&Array.isArray(e)&&e.length>0){const n=e.join(", ");return`<span title="${n}">${n}</span>`}return e},sC=(a,t,e)=>e?`<b>${e}</b>`:"",fv=(a,t,e)=>{let n=e;return e==null&&(n=""),`<center>${n}</center>`},lC=(a,t,e)=>e?"&#x2611;":"",aC=(a,t,e)=>{let n=!1;const r=tn(e);return r&&(e=+e),(e===!0||r&&+e>0||typeof e=="string"&&e.length>0&&e.toLowerCase()!=="false"&&e!=="0")&&(n=!0),n?'<i class="mdi mdi-18px mdi-check checkmark-icon" aria-hidden="true"></i>':""},dC=(a,t,e)=>{let n=!1;const r=tn(e);return r&&(e=+e),(e===!0||r&&+e>0||typeof e=="string"&&e.length>0&&e.toLowerCase()!=="false"&&e!=="0")&&(n=!0),n?'<i class="fa fa-check checkmark-icon" aria-hidden="true"></i>':""},uC=(a,t,e,n,r,o)=>{if(!e||!n||!n.internalColumnEditor||!n.internalColumnEditor.collection||!n.internalColumnEditor.collection.length)return e;const{internalColumnEditor:s,internalColumnEditor:{collection:l}}=n,u=s.customStructure?s.customStructure.label:"label",h=s.customStructure?s.customStructure.value:"value";return Array.isArray(e)?l.every(c=>typeof c=="string")?Hu(a,t,e.map(c=>_s(l,p=>p===c))):Hu(a,t,e.map(c=>_s(l,p=>p[h]===c)[u])):_s(l,c=>c[h]===e)[u]||""},cC=(a,t,e,n,r,o)=>{if(!e||!n||!n.params||!n.params.collection||!n.params.collection.length)return e;const{params:s,params:{collection:l}}=n,u=s.customStructure?s.customStructure.label:"label",h=s.customStructure?s.customStructure.value:"value";return Array.isArray(e)?Hu(a,t,e.map(c=>_s(l,p=>p[h]===c)[u])):_s(l,c=>c[h]===e)[u]||""},pv=(a,t,e,n,r)=>{var o,s,l;if(!n)return"";const u=n.params||{},h=(s=(o=u==null?void 0:u.complexField)!==null&&o!==void 0?o:u==null?void 0:u.complexFieldLabel)!==null&&s!==void 0?s:n.field;if(!h)throw new Error(`For the Formatters.complexObject to work properly, you need to tell it which property of the complex object to use.
      There are 3 ways to provide it:
      1- via the generic "params" with a "complexField" property on your Column Definition, example: this.columnDefs = [{ id: 'user', field: 'user', params: { complexField: 'user.firstName' } }]
      2- via the generic "params" with a "complexField" and a "labelKey" property on your Column Definition, example: this.columnDefs = [{ id: 'user', field: 'user', labelKey: 'firstName', params: { complexField: 'user' } }]
      3- via the field name that includes a dot notation, example: this.columnDefs = [{ id: 'user', field: 'user.firstName'}] `);if(n.labelKey&&r.hasOwnProperty(h))return(l=r[h])===null||l===void 0?void 0:l[n.labelKey];if(typeof h=="string"&&h.indexOf(".")>0){let c=h.split(".").reduce((p,m)=>p!=null&&p.hasOwnProperty(m)?p[m]:"",r);return(c==null||typeof c=="object"&&Object.entries(c).length===0&&!(c instanceof Date))&&(c=""),c}return e},hC=(a,t,e,n,r,o)=>{const{minDecimal:s,maxDecimal:l,numberPrefix:u,numberSuffix:h,decimalSeparator:c,thousandSeparator:p,wrapNegativeNumber:m}=cn(n,o,"decimal","cell");return tn(e)?wn(e,s,l,m,u,h,c,p):e},fC=()=>'<i class="fa fa-trash pointer delete-icon" aria-hidden="true"></i>',pC=(a,t,e,n,r,o)=>{const{minDecimal:s,maxDecimal:l,decimalSeparator:u,thousandSeparator:h,wrapNegativeNumber:c}=cn(n,o,"currency","cell");return tn(e)?wn(e,s,l,c,"$","",u,h):e},mC=(a,t,e,n,r,o)=>{const{minDecimal:s,maxDecimal:l,decimalSeparator:u,thousandSeparator:h,wrapNegativeNumber:c}=cn(n,o,"currency","cell");if(tn(e)){const p=e>=0?"green":"red",m=wn(e,s,l,c,"$","",u,h);return`<span style="color:${p}">${m}</span>`}return e},vC=(a,t,e,n,r,o)=>{const{minDecimal:s,maxDecimal:l,decimalSeparator:u,thousandSeparator:h,wrapNegativeNumber:c}=cn(n,o,"currency","cell");if(tn(e)){const p=e>=0?"green":"red",m=wn(e,s,l,c,"$","",u,h);return`<span style="color:${p}; font-weight:bold;">${m}</span>`}return e},gC=()=>'<i class="fa fa-pencil pointer edit-icon" aria-hidden="true"></i>',_C=(a,t,e,n,r,o)=>{const{currencyPrefix:s,currencySuffix:l,minDecimal:u,maxDecimal:h,numberPrefix:c,numberSuffix:p,decimalSeparator:m,thousandSeparator:v,wrapNegativeNumber:_}=cn(n,o,"decimal","cell");if(tn(e)){const C=wn(e,u,h,_,s,l,m,v);return`${c}${C}${p}`}return e},bC=(a,t,e)=>e?`<span class="fake-hyperlink">${e}</span>`:"",CC=(a,t,e,n,r,o)=>{const s=n&&n.params||{},l=o&&typeof o.getOptions=="function"?o.getOptions():{};let u=s.hyperlinkText?s.hyperlinkText:e;u=Mn(l,u);let h=s.hyperlinkUrl?s.hyperlinkUrl:e;h=Mn(l,h);const c=h.match(/^(http|ftp|https):\/\/[\w\-_]+(\.[\w\-_]+)+([\w\-\.,@?^=%&amp;:\/~\+#]*[\w\-\@?^=%&amp;\/~\+#])?/i);return c&&Array.isArray(c)&&c.length>0?`<a href="${c[0]}">${u}</a>`:e},yC=(a,t,e,n)=>{const r=n&&n.params||{},o=r.icon||r.formatterIcon;if(!o)throw new Error(`You must provide the "icon" or "formatterIcon" via the generic "params" options (e.g.: { formatter: Formatters.icon, params: { formatterIcon: 'fa fa-search' }}`);return`<i class="${o}" aria-hidden="true"></i>`},EC=()=>'<i class="fa fa-info-circle pointer info-icon" aria-hidden="true"></i>',SC=(a,t,e)=>e?`<i>${e}</i>`:"",wC=(a,t,e)=>(e!==void 0&&typeof e!="string"&&(e=e+""),e?e.toLowerCase():""),xC=(a,t,e,n)=>{const o=(n.params||{}).mask;if(!o)throw new Error(`You must provide a "mask" via the generic "params" options (e.g.: { formatter: Formatters.mask, params: { mask: '000-000' }}`);if(e){let s=0;const l=e.toString();return o.replace(/[09A]/gi,()=>l[s++]||"")}return e},TC=(a,t,e,n,r,o)=>{const{minDecimal:s,maxDecimal:l,decimalSeparator:u,thousandSeparator:h,wrapNegativeNumber:c}=cn(n,o,"percent","cell");if(tn(e)){const p=e*100;return wn(p,s,l,c,"","%",u,h)}return e},OC=(a,t,e)=>{if(!tn(e))return"";let n="",r=parseFloat(e);return r>100&&(r=100),r<30?n="red":r<70?n="silver":n="green",`<span class="percent-complete-bar" title="${r}%" style="background:${n}; width:${r}%"></span>`},AC=(a,t,e)=>{if(!tn(e))return"";let n="",r=parseFloat(e);return r>100&&(r=100),r<30?n="red":r<70?n="silver":n="green",`<div class="percent-complete-bar-with-text" title="${r}%" style="background:${n}; width:${r}%">${r}%</div>`},kC=(a,t,e,n,r,o)=>{const{minDecimal:s,maxDecimal:l,decimalSeparator:u,thousandSeparator:h,wrapNegativeNumber:c}=cn(n,o,"percent","cell");if(tn(e)){const p=e<50?"red":"green",m=wn(e,s,l,c,"","%",u,h),v=e>100?"100%":m;return`<span style="color:${p}">${v}</span>`}return e},IC=(a,t,e,n,r,o)=>{const{minDecimal:s,maxDecimal:l,decimalSeparator:u,thousandSeparator:h,wrapNegativeNumber:c}=cn(n,o,"percent","cell");return tn(e)?wn(e,s,l,c,"","%",u,h):e},DC=(a,t,e)=>{if(!tn(e))return"";let n="",r=parseFloat(e);return r>100&&(r=100),r<30?n="danger":r<70?n="warning":n="success",`<div class="progress">
    <div class="progress-bar progress-bar-${n} bg-${n}" role="progressbar" aria-valuenow="${r}" aria-valuemin="0" aria-valuemax="100" style="min-width: 2em; width: ${r}%;">
    ${r}%
    </div>
  </div>`.replace(/\s{2,}/g," ").trim()},RC=(a,t,e,n,r,o)=>{const l=(o&&typeof o.getOptions=="function"?o.getOptions():{}).translater||n&&n.params&&n.params.translater;if(!l||typeof l.translate!="function")throw new Error(`"Formatters.translate" requires the Translate Service to be provided as a Grid Options "translater" (or "i18n" depending on which framework you use).
    For example: this.gridOptions = { enableTranslate: true, translater: this.translateService }`);return e!=null&&typeof e!="string"&&(e=e+""),e?l.translate(e):""},PC=(a,t,e,n,r,o)=>{var s,l,u,h,c,p,m,v,_,C,x;const S=o.getOptions(),y=S==null?void 0:S.treeDataOptions,D=(s=y==null?void 0:y.collapsedPropName)!==null&&s!==void 0?s:je.treeDataProperties.COLLAPSED_PROP,A=(l=y==null?void 0:y.hasChildrenPropName)!==null&&l!==void 0?l:je.treeDataProperties.HAS_CHILDREN_PROP,P=(u=y==null?void 0:y.levelPropName)!==null&&u!==void 0?u:je.treeDataProperties.TREE_LEVEL_PROP,M=(h=y==null?void 0:y.exportIndentMarginLeft)!==null&&h!==void 0?h:5,B=(c=y==null?void 0:y.exportIndentationLeadingChar)!==null&&c!==void 0?c:".",Q=(p=y==null?void 0:y.exportIndentationLeadingSpaceCount)!==null&&p!==void 0?p:3,L=(v=(m=S==null?void 0:S.excelExportOptions)===null||m===void 0?void 0:m.groupCollapsedSymbol)!==null&&v!==void 0?v:"",le=(C=(_=S==null?void 0:S.excelExportOptions)===null||_===void 0?void 0:_.groupExpandedSymbol)!==null&&C!==void 0?C:"";let _e=e;if(_e=Va(n,r,e),_e==null||r===void 0)return"";if(!r.hasOwnProperty(P))throw new Error('[Slickgrid-Universal] You must provide valid "treeDataOptions" in your Grid Options, however it seems that we could not find any tree level info on the current item datacontext row.');const J=(x=r==null?void 0:r[P])!==null&&x!==void 0?x:0;let z="",F=0;r[A]?(z=r!=null&&r[D]?L:le,F=J===0?0:M*J):F=M*(J===0?0:J+1);const ae=Ga(F);return y!=null&&y.titleFormatter&&(_e=su(y.titleFormatter,a,t,n,r,o)),_e=`${J===0&&z?"":J===0?`${B}${Ga(Q)}`:B}${ae}${z} ${_e}`,sr(_e)},FC=(a,t,e,n,r,o)=>{var s,l,u,h,c;const p=o.getOptions(),m=p==null?void 0:p.treeDataOptions,v=(s=m==null?void 0:m.indentMarginLeft)!==null&&s!==void 0?s:15,_=(l=m==null?void 0:m.collapsedPropName)!==null&&l!==void 0?l:je.treeDataProperties.COLLAPSED_PROP,C=(u=m==null?void 0:m.hasChildrenPropName)!==null&&u!==void 0?u:je.treeDataProperties.HAS_CHILDREN_PROP,x=(h=m==null?void 0:m.levelPropName)!==null&&h!==void 0?h:je.treeDataProperties.TREE_LEVEL_PROP;let S=e;if(S=Va(n,r,e),S==null||r===void 0)return"";if(!r.hasOwnProperty(x))throw new Error('[Slickgrid-Universal] You must provide valid "treeDataOptions" in your Grid Options, however it seems that we could not find any tree level info on the current item datacontext row.');const y=(c=r==null?void 0:r[x])!==null&&c!==void 0?c:0,D=`<span style="display:inline-block; width:${v*y}px;"></span>`,A=`slick-tree-level-${y}`;let P="";r[C]&&(P=r!=null&&r[_]?"collapsed":"expanded"),m!=null&&m.titleFormatter&&(S=su(m.titleFormatter,a,t,n,r,o));const M=Mn(p,S,{ADD_ATTR:["target"]}),B=`slick-group-toggle ${P}`.trim(),Q=`${D}<span class="${B}" aria-expanded="${P==="expanded"}"></span><span class="slick-tree-title" level="${y}">${M}</span>`;return{addClasses:A,text:Q}},MC=(a,t,e,n,r,o)=>{var s,l;const u=o.getOptions(),h=(l=(s=u==null?void 0:u.treeDataOptions)===null||s===void 0?void 0:s.hasChildrenPropName)!==null&&l!==void 0?l:je.treeDataProperties.HAS_CHILDREN_PROP,{groupTotalsFormatter:c,treeTotalsFormatter:p,params:m}=n;if(!c&&!p)throw new Error('[Slickgrid-Universal] When using Formatters.treeParseTotals, you must provide a total formatter via "groupTotalsFormatter" or "treeTotalsFormatter".');if(r[h]&&(r!=null&&r.__treeTotals)&&(c||p))return(p??c)(r==null?void 0:r.__treeTotals,n,o);if(m.formatters){let v=e;for(const _ of m.formatters)!r[h]&&!(r!=null&&r.__treeTotals)&&(v=_(a,t,v,n,r,o)||e);return v}return e},NC=(a,t,e,n,r,o)=>{const l=(o&&typeof o.getOptions=="function"?o.getOptions():{}).translater||n&&n.params&&n.params.translater;if(!l||typeof l.translate!="function")throw new Error(`"Formatters.translateBoolean" requires the Translate Service to be provided as a Grid Options "translater" (or "i18n" depending on which framework you use).
    For example: this.gridOptions = { enableTranslate: true, translater: this.translateService }`);return e!=null&&typeof e!="string"&&(e=e+""),e?l.translate(e.toUpperCase()):""},LC=(a,t,e)=>(e!==void 0&&typeof e!="string"&&(e=e+""),e?e.toUpperCase():""),HC=(a,t,e)=>e?"Yes":"No",ln={alignCenter:fv,alignRight:rC,arrayObjectToCsv:oC,arrayToCsv:Hu,bold:sC,center:fv,checkbox:lC,checkmark:dC,checkmarkMaterial:aC,complex:pv,complexObject:pv,collection:cC,collectionEditor:uC,currency:_C,dateIso:hn(ie.dateIso,"-"),dateTimeIso:hn(ie.dateTimeIso,"-"),dateTimeShortIso:hn(ie.dateTimeShortIso,"-"),dateTimeIsoAmPm:hn(ie.dateTimeIsoAmPm,"-"),dateTimeIsoAM_PM:hn(ie.dateTimeIsoAM_PM,"-"),dateEuro:hn(ie.dateEuro,"/"),dateEuroShort:hn(ie.dateEuroShort,"/"),dateTimeEuro:hn(ie.dateTimeEuro,"/"),dateTimeEuroShort:hn(ie.dateTimeEuroShort,"/"),dateTimeShortEuro:hn(ie.dateTimeShortEuro,"/"),dateTimeEuroAmPm:hn(ie.dateTimeEuroAmPm,"/"),dateTimeEuroAM_PM:hn(ie.dateTimeEuroAM_PM,"/"),dateTimeEuroShortAmPm:hn(ie.dateTimeEuroShortAmPm,"/"),dateTimeEuroShortAM_PM:hn(ie.dateTimeEuroShortAM_PM,"/"),dateUs:hn(ie.dateUs,"/"),dateTimeUs:hn(ie.dateTimeUs,"/"),dateTimeShortUs:hn(ie.dateTimeShortUs,"/"),dateTimeUsAmPm:hn(ie.dateTimeUsAmPm,"/"),dateTimeUsAM_PM:hn(ie.dateTimeUsAM_PM,"/"),dateTimeUsShort:hn(ie.dateTimeUsShort,"/"),dateTimeUsShortAmPm:hn(ie.dateTimeUsShortAmPm,"/"),dateTimeUsShortAM_PM:hn(ie.dateTimeUsShortAM_PM,"/"),dateUsShort:hn(ie.dateUsShort,"/"),dateUtc:hn(ie.dateUtc,"-"),deleteIcon:fC,decimal:hC,dollar:pC,dollarColored:mC,dollarColoredBold:vC,editIcon:gC,fakeHyperlink:bC,hyperlink:CC,icon:yC,infoIcon:EC,italic:SC,lowercase:wC,mask:xC,multiple:ou,percent:TC,percentComplete:kC,percentCompleteBar:OC,percentCompleteBarWithText:AC,percentSymbol:IC,progressBar:DC,translate:RC,translateBoolean:NC,tree:FC,treeParseTotals:MC,treeExport:PC,uppercase:LC,yesNo:HC},Ti={avgTotals:(a,t,e)=>{var n,r;const o=(n=t.field)!==null&&n!==void 0?n:"";let s=(r=a.avg)===null||r===void 0?void 0:r[o];const l=t==null?void 0:t.params;let u=(l==null?void 0:l.groupFormatterPrefix)||"";const h=(l==null?void 0:l.groupFormatterSuffix)||"",{minDecimal:c,maxDecimal:p,decimalSeparator:m,thousandSeparator:v,wrapNegativeNumber:_}=cn(t,e,"regular","group");if(s!==null&&!isNaN(+s)){if(s<0)if(s=Math.abs(s),!_)u+="-";else{if(isNaN(c)&&isNaN(p)){const C=gs(Math.round(s),v);return`${u}(${C})${h}`}return`${u}(${Ys(s,c,p,m,v)})${h}`}if(isNaN(c)&&isNaN(p)){const C=gs(Math.round(s),v);return`${u}${C}${h}`}return`${u}${Ys(s,c,p,m,v)}${h}`}return""},avgTotalsCurrency:(a,t,e)=>{var n,r;const o=(n=t.field)!==null&&n!==void 0?n:"",s=(r=a.avg)===null||r===void 0?void 0:r[o],l=t==null?void 0:t.params,u=(l==null?void 0:l.groupFormatterPrefix)||"",h=(l==null?void 0:l.groupFormatterSuffix)||"",c=(l==null?void 0:l.groupFormatterCurrencyPrefix)||"",p=(l==null?void 0:l.groupFormatterCurrencySuffix)||"",{minDecimal:m,maxDecimal:v,decimalSeparator:_,thousandSeparator:C,wrapNegativeNumber:x}=cn(t,e,"currency","group");if(s!==null&&!isNaN(+s)){const S=wn(s,m,v,x,c,p,_,C);return`${u}${S}${h}`}return""},avgTotalsDollar:(a,t,e)=>{var n,r;const o=(n=t.field)!==null&&n!==void 0?n:"",s=(r=a.avg)===null||r===void 0?void 0:r[o],l=t==null?void 0:t.params,u=(l==null?void 0:l.groupFormatterPrefix)||"",h=(l==null?void 0:l.groupFormatterSuffix)||"",{minDecimal:c,maxDecimal:p,decimalSeparator:m,thousandSeparator:v,wrapNegativeNumber:_}=cn(t,e,"currency","group");if(s!==null&&!isNaN(+s)){const C=wn(s,c,p,_,"$","",m,v);return`${u}${C}${h}`}return""},avgTotalsPercentage:(a,t,e)=>{var n,r;const o=(n=t.field)!==null&&n!==void 0?n:"";let s=(r=a.avg)===null||r===void 0?void 0:r[o];const l=t==null?void 0:t.params;let u=(l==null?void 0:l.groupFormatterPrefix)||"";const h=(l==null?void 0:l.groupFormatterSuffix)||"",{minDecimal:c,maxDecimal:p,decimalSeparator:m,thousandSeparator:v,wrapNegativeNumber:_}=cn(t,e,"percent","group");if(s!==null&&!isNaN(+s)){if(s<0)if(s=Math.abs(s),!_)u+="-";else{if(isNaN(c)&&isNaN(p)){const C=gs(Math.round(s),v);return`${u}(${C}%)${h}`}return`${u}(${Ys(s,c,p,m,v)}%)${h}`}if(isNaN(c)&&isNaN(p)){const C=gs(Math.round(s),v);return`${u}${C}%${h}`}return`${u}${Ys(s,c,p,m,v)}%${h}`}return""},maxTotals:(a,t,e)=>{var n,r;const o=(n=t.field)!==null&&n!==void 0?n:"",s=(r=a.max)===null||r===void 0?void 0:r[o],l=t==null?void 0:t.params,u=(l==null?void 0:l.groupFormatterPrefix)||"",h=(l==null?void 0:l.groupFormatterSuffix)||"",{minDecimal:c,maxDecimal:p,decimalSeparator:m,thousandSeparator:v,wrapNegativeNumber:_}=cn(t,e,"regular","group");if(s!==null&&!isNaN(+s)){const C=wn(s,c,p,_,"","",m,v);return`${u}${C}${h}`}return""},minTotals:(a,t,e)=>{var n,r;const o=(n=t.field)!==null&&n!==void 0?n:"",s=(r=a.min)===null||r===void 0?void 0:r[o],l=t==null?void 0:t.params,u=(l==null?void 0:l.groupFormatterPrefix)||"",h=(l==null?void 0:l.groupFormatterSuffix)||"",{minDecimal:c,maxDecimal:p,decimalSeparator:m,thousandSeparator:v,wrapNegativeNumber:_}=cn(t,e,"regular","group");if(s!==null&&!isNaN(+s)){const C=wn(s,c,p,_,"","",m,v);return`${u}${C}${h}`}return""},sumTotals:(a,t,e)=>{var n,r;const o=(n=t.field)!==null&&n!==void 0?n:"",s=(r=a.sum)===null||r===void 0?void 0:r[o],l=t==null?void 0:t.params,u=(l==null?void 0:l.groupFormatterPrefix)||"",h=(l==null?void 0:l.groupFormatterSuffix)||"",{minDecimal:c,maxDecimal:p,decimalSeparator:m,thousandSeparator:v,wrapNegativeNumber:_}=cn(t,e,"regular","group");if(s!==null&&!isNaN(+s)){const C=wn(s,c,p,_,"","",m,v);return`${u}${C}${h}`}return""},sumTotalsBold:(a,t,e)=>{var n,r;const o=(n=t.field)!==null&&n!==void 0?n:"",s=(r=a.sum)===null||r===void 0?void 0:r[o],l=t==null?void 0:t.params,u=(l==null?void 0:l.groupFormatterPrefix)||"",h=(l==null?void 0:l.groupFormatterSuffix)||"",{minDecimal:c,maxDecimal:p,decimalSeparator:m,thousandSeparator:v,wrapNegativeNumber:_}=cn(t,e,"regular","group");if(s!==null&&!isNaN(+s)){const C=wn(s,c,p,_,"","",m,v);return`<b>${u}${C}${h}</b>`}return""},sumTotalsColored:(a,t,e)=>{var n,r;const o=(n=t.field)!==null&&n!==void 0?n:"",s=(r=a.sum)===null||r===void 0?void 0:r[o],l=t==null?void 0:t.params,u=(l==null?void 0:l.groupFormatterPrefix)||"",h=(l==null?void 0:l.groupFormatterSuffix)||"",{minDecimal:c,maxDecimal:p,decimalSeparator:m,thousandSeparator:v,wrapNegativeNumber:_}=cn(t,e,"regular","group");if(s!==null&&!isNaN(+s)){const C=s>=0?"green":"red",x=wn(s,c,p,_,"","",m,v);return`<span style="color:${C}">${u}${x}${h}</span>`}return""},sumTotalsCurrency:(a,t,e)=>{var n,r;const o=(n=t.field)!==null&&n!==void 0?n:"",s=(r=a.sum)===null||r===void 0?void 0:r[o],l=t==null?void 0:t.params,u=(l==null?void 0:l.groupFormatterPrefix)||"",h=(l==null?void 0:l.groupFormatterSuffix)||"",c=(l==null?void 0:l.groupFormatterCurrencyPrefix)||"",p=(l==null?void 0:l.groupFormatterCurrencySuffix)||"",{minDecimal:m,maxDecimal:v,decimalSeparator:_,thousandSeparator:C,wrapNegativeNumber:x}=cn(t,e,"currency","group");if(s!==null&&!isNaN(+s)){const S=wn(s,m,v,x,c,p,_,C);return`${u}${S}${h}`}return""},sumTotalsCurrencyColored:(a,t,e)=>{var n,r;const o=(n=t.field)!==null&&n!==void 0?n:"",s=(r=a.sum)===null||r===void 0?void 0:r[o],l=t==null?void 0:t.params,u=(l==null?void 0:l.groupFormatterPrefix)||"",h=(l==null?void 0:l.groupFormatterSuffix)||"",c=(l==null?void 0:l.groupFormatterCurrencyPrefix)||"",p=(l==null?void 0:l.groupFormatterCurrencySuffix)||"",{minDecimal:m,maxDecimal:v,decimalSeparator:_,thousandSeparator:C,wrapNegativeNumber:x}=cn(t,e,"currency","group");if(s!==null&&!isNaN(+s)){const S=s>=0?"green":"red",y=wn(s,m,v,x,c,p,_,C);return`<span style="color:${S}">${u}${y}${h}</span>`}return""},sumTotalsDollar:(a,t,e)=>{var n,r;const o=(n=t.field)!==null&&n!==void 0?n:"",s=(r=a.sum)===null||r===void 0?void 0:r[o],l=t==null?void 0:t.params,u=(l==null?void 0:l.groupFormatterPrefix)||"",h=(l==null?void 0:l.groupFormatterSuffix)||"",{minDecimal:c,maxDecimal:p,decimalSeparator:m,thousandSeparator:v,wrapNegativeNumber:_}=cn(t,e,"currency","group");if(s!==null&&!isNaN(+s)){const C=wn(s,c,p,_,"$","",m,v);return`${u}${C}${h}`}return""},sumTotalsDollarBold:(a,t,e)=>{var n,r;const o=(n=t.field)!==null&&n!==void 0?n:"",s=(r=a.sum)===null||r===void 0?void 0:r[o],l=t==null?void 0:t.params,u=(l==null?void 0:l.groupFormatterPrefix)||"",h=(l==null?void 0:l.groupFormatterSuffix)||"",{minDecimal:c,maxDecimal:p,decimalSeparator:m,thousandSeparator:v,wrapNegativeNumber:_}=cn(t,e,"currency","group");if(s!==null&&!isNaN(+s)){const C=wn(s,c,p,_,"$","",m,v);return`<b>${u}${C}${h}</b>`}return""},sumTotalsDollarColored:(a,t,e)=>{var n,r;const o=(n=t.field)!==null&&n!==void 0?n:"",s=(r=a.sum)===null||r===void 0?void 0:r[o],l=t==null?void 0:t.params,u=(l==null?void 0:l.groupFormatterPrefix)||"",h=(l==null?void 0:l.groupFormatterSuffix)||"",{minDecimal:c,maxDecimal:p,decimalSeparator:m,thousandSeparator:v,wrapNegativeNumber:_}=cn(t,e,"currency","group");if(s!==null&&!isNaN(+s)){const C=s>=0?"green":"red",x=wn(s,c,p,_,"$","",m,v);return`<span style="color:${C}">${u}${x}${h}</span>`}return""},sumTotalsDollarColoredBold:(a,t,e)=>{var n,r;const o=(n=t.field)!==null&&n!==void 0?n:"",s=(r=a.sum)===null||r===void 0?void 0:r[o],l=t==null?void 0:t.params,u=(l==null?void 0:l.groupFormatterPrefix)||"",h=(l==null?void 0:l.groupFormatterSuffix)||"",{minDecimal:c,maxDecimal:p,decimalSeparator:m,thousandSeparator:v,wrapNegativeNumber:_}=cn(t,e,"currency","group");if(s!==null&&!isNaN(+s)){const C=s>=0?"green":"red",x=wn(s,c,p,_,"$","",m,v);return`<span style="color:${C}; font-weight: bold;">${u}${x}${h}</span>`}return""}};class BC{constructor(){this.options=uf}}const ff={...Yg,...jg,...Jg,...l_,...o_,deepAssign:Cl};class Bu{constructor(t){this._value=null,this._boundedEventWithListeners=[],this._elementBindings=[],this._binding=t,this._property=t.property||"",this._elementBindings=[],t.property&&t.variable&&(t.variable.hasOwnProperty(t.property)||t.property in t.variable)?this._value=t.variable[t.property]:this._value=t.variable,typeof t.variable=="object"&&Object.defineProperty(t.variable,t.property,{get:this.valueGetter.bind(this),set:this.valueSetter.bind(this)})}get boundedEventWithListeners(){return this._boundedEventWithListeners}get elementBindings(){return this._elementBindings}get property(){return this._property}dispose(){this.unbindAll(),this._boundedEventWithListeners=[],this._elementBindings=[]}valueGetter(){return this._value}valueSetter(t){if(this._value=t,Array.isArray(this._elementBindings))for(const e of this._elementBindings)e!=null&&e.element&&(e!=null&&e.attribute)&&(e.element[e.attribute]=t)}bind(t,e,n,r){return t&&t.forEach?t.forEach(o=>this.bindSingleElement(o,e,n,r)):t&&this.bindSingleElement(t,e,n,r),this}unbind(t,e,n,r,o){if(t){t.removeEventListener(e,n,r);const s=this._boundedEventWithListeners.findIndex(l=>l.uid===o);s>=0&&this._boundedEventWithListeners.splice(s,1)}}unbindAll(){let t=this._boundedEventWithListeners.pop();for(;t;){const{element:e,eventName:n,listener:r,uid:o}=t;this.unbind(e,n,r,void 0,o),t=this._boundedEventWithListeners.pop()}this._boundedEventWithListeners=[]}bindSingleElement(t,e,n,r){const o={element:t,attribute:e};if(t){if(n){const s=()=>{let l=t[e];if(this.hasData(l)&&(t==null?void 0:t.type)==="number"&&(l=+l),this.valueSetter(l),(this._binding.variable.hasOwnProperty(this._binding.property)||this._binding.property in this._binding.variable)&&(this._binding.variable[this._binding.property]=this.valueGetter()),typeof r=="function")return r(this.valueGetter())};o.event=n,o.listener=s,t.addEventListener(n,s),this._boundedEventWithListeners.push({element:t,eventName:n,listener:s,uid:this.generateUuidV4()})}this._elementBindings.push(o),t[e]=this._value}}generateUuidV4(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})}hasData(t){return t!=null&&t!==""}}class mv{constructor(){this._observers=[],this._querySelectorPrefix=""}get querySelectorPrefix(){return this._querySelectorPrefix||""}set querySelectorPrefix(t){this._querySelectorPrefix=t}get observers(){return this._observers}dispose(){let t=this._observers.pop();for(;t;)t.dispose(),t=this._observers.pop();this._observers=[]}addElementBinding(t,e,n,r,o,s){const l=document.querySelectorAll(`${this.querySelectorPrefix}${n}`);let u=this._observers.find(h=>h.property===t);u||(u=new Bu({variable:t,property:e})),Array.isArray(o)?o.forEach(h=>u==null?void 0:u.bind(l,r,h,s)):u==null||u.bind(l,r,o,s),this._observers.push(u)}bindEventHandler(t,e,n,r){document.querySelectorAll(`${this.querySelectorPrefix}${t}`).forEach(s=>{s!=null&&s.addEventListener&&s.addEventListener(e,n,r)})}setElementAttributeValue(t,e,n){document.querySelectorAll(`${this.querySelectorPrefix}${t}`).forEach(o=>{o.textContent="",o&&e in o&&(o[e]=n)})}}function VC(a,t,e){let n;e={...{modalType:"edit",validationFailedMsg:"Some of the fields have failed validation",validationMsgPrefix:null,show:null,hide:null,position:null,destroy:null,formValues:{},editors:{}},...e};const o=()=>{},s=u=>{var h,c,p,m,v,_;const C=t[u],x=Un(C),S=(h=C==null?void 0:C.clientWidth)!==null&&h!==void 0?h:0,y=(c=C==null?void 0:C.clientHeight)!==null&&c!==void 0?c:0;return{top:(p=x==null?void 0:x.top)!==null&&p!==void 0?p:0,left:(m=x==null?void 0:x.left)!==null&&m!==void 0?m:0,bottom:((v=x==null?void 0:x.top)!==null&&v!==void 0?v:0)+y,right:((_=x==null?void 0:x.left)!==null&&_!==void 0?_:0)+S,width:S,height:y,visible:!0}};function l(u){const h=this;let c=[];function p(){let m={},v=0;for(;v<a.length;){if(a[v].editor){const _=a[v];m={...u},m.container=t[v],m.column=_,m.position=s(v),m.commitChanges=o,m.cancelChanges=o,m.compositeEditorOptions=e,m.formValues={};const C=new _.editor(m);e.editors[_.id]=C,c.push(C)}v++}setTimeout(()=>{Array.isArray(c)&&c.length>0&&typeof c[0].focus=="function"&&c[0].focus()},0)}h.getEditors=()=>c,h.destroy=()=>{var m;let v=c.pop();for(;v;)v==null||v.destroy(),v=c.pop();let _=t.pop();for(;_;)sn(_),_==null||_.remove(),_=t.pop();(m=e==null?void 0:e.destroy)===null||m===void 0||m.call(e),c=[],t=null},h.focus=()=>{(n||c[0]).focus()},h.isValueChanged=()=>{let m=0;for(;m<c.length;){if(c[m].isValueChanged())return!0;m++}return!1},h.serializeValue=()=>{const m=[];let v=0;for(;v<c.length;)m[v]=c[v].serializeValue(),v++;return m},h.applyValue=(m,v)=>{let _=0;for(;_<c.length;)c[_].applyValue(m,v==null?void 0:v[_]),_++},h.loadValue=m=>{let v=0;for(;v<c.length;)c[v].loadValue(m),v++},h.validate=m=>{var v,_;let C;n=null;const x=[];let S=0;for(;S<c.length;){const y=(v=c[S].args)===null||v===void 0?void 0:v.column;if((y==null?void 0:y.id)!==void 0){const D=document.querySelector(".slick-editor-modal");let A=D==null?void 0:D.querySelector(`.item-details-validation.editor-${y.id}`),P=D==null?void 0:D.querySelector(`.item-details-label.editor-${y.id}`),M=D==null?void 0:D.querySelector(`[data-editorid=${y.id}]`);const B=(_=e==null?void 0:e.validationMsgPrefix)!==null&&_!==void 0?_:"";(!m||M!=null&&M.contains(m))&&(C=c[S].validate(),C.valid?A&&(A.textContent="",M==null||M.classList.remove("invalid"),P==null||P.classList.remove("invalid")):(n=c[S],x.push({index:S,editor:c[S],container:t[S],msg:C.msg}),A&&(A.textContent=`${B}${C.msg}`,P==null||P.classList.add("invalid"),M==null||M.classList.add("invalid")))),A=null,P=null,M=null}S++}return m=null,x.length?{valid:!1,msg:e.validationFailedMsg,errors:x}:{valid:!0,msg:""}},h.hide=()=>{var m,v,_;let C=0;for(;C<c.length;)(v=(m=c[C])===null||m===void 0?void 0:m.hide)===null||v===void 0||v.call(m),C++;(_=e==null?void 0:e.hide)===null||_===void 0||_.call(e)},h.show=()=>{var m,v,_;let C=0;for(;C<c.length;)(v=(m=c[C])===null||m===void 0?void 0:m.show)===null||v===void 0||v.call(m),C++;(_=e==null?void 0:e.show)===null||_===void 0||_.call(e)},h.position=m=>{var v;(v=e==null?void 0:e.position)===null||v===void 0||v.call(e,m)},p()}return l.prototype=this,Slick.CompositeEditor=l,l}const vv=a=>console.log(a.message);class pf{get eventHandler(){return this._eventHandler}get dataView(){return this.grid.getData()}get dataViewLength(){return this.dataView.getLength()}get formValues(){return this._formValues}get editors(){return this._editors}set editors(t){this._editors=t}get gridOptions(){var t;return(t=this.grid)===null||t===void 0?void 0:t.getOptions()}constructor(){this._columnDefinitions=[],this._lastActiveRowNumber=-1,this._formValues=null,this.gridService=null,this._eventHandler=new Slick.EventHandler,this._bindEventService=new Fn}init(t,e){var n,r;if(this.grid=t,this.gridService=e.get("GridService"),this.translaterService=e.get("TranslaterService"),!this.gridService)throw new Error("[Slickgrid-Universal] it seems that the GridService is not being loaded properly, make sure the Container Service is properly implemented.");if(this.gridOptions.enableTranslate&&(!this.translaterService||!this.translaterService.translate))throw new Error('[Slickgrid-Universal] requires a Translate Service to be installed and configured when the grid option "enableTranslate" is enabled.');this._locales=(r=(n=this.gridOptions)===null||n===void 0?void 0:n.locales)!==null&&r!==void 0?r:je.locales}dispose(){this._eventHandler.unsubscribeAll(),this._bindEventService.unbindAll(),this._formValues=null,this.disposeComponent()}disposeComponent(){var t,e,n;(t=this._modalBodyTopValidationElm)===null||t===void 0||t.remove(),(e=this._modalSaveButtonElm)===null||e===void 0||e.remove(),typeof((n=this._modalElm)===null||n===void 0?void 0:n.remove)=="function"&&(this._modalElm.remove(),document.body.classList.remove("slick-modal-open")),this._editorContainers=[]}changeFormInputValue(t,e,n=!1,r=!0){var o,s,l,u,h,c,p,m,v,_,C,x;const S=this.getColumnByObjectOrId(t),y=typeof t=="string"?t:(o=S==null?void 0:S.id)!==null&&o!==void 0?o:"",D=(s=this._editors)===null||s===void 0?void 0:s[y];let A=e;if(!D&&!n)throw new Error(`Composite Editor with column id "${y}" not found.`);if(typeof(D==null?void 0:D.setValue)=="function"&&Array.isArray(this._editorContainers)){D.setValue(e,!0,r);const M=this._editorContainers.find(Q=>Q.dataset.editorid===y),B=(h=(u=(l=this.gridOptions)===null||l===void 0?void 0:l.compositeEditorOptions)===null||u===void 0?void 0:u.excludeDisabledFieldFormValues)!==null&&h!==void 0?h:!1;!D.disabled||D.disabled&&!B?(c=M==null?void 0:M.classList)===null||c===void 0||c.add("modified"):(A="",(p=M==null?void 0:M.classList)===null||p===void 0||p.remove("modified")),D.disabled&&(A!==""||A!==null||A!==void 0||A!==0)&&(A="")}const P=(m=S==null?void 0:S.field)!==null&&m!==void 0?m:"";if(S&&(P!=null&&P.includes("."))){const M=(C=(_=(v=S.internalColumnEditor)===null||v===void 0?void 0:v.complexObjectPath)!==null&&_!==void 0?_:P)!==null&&C!==void 0?C:"";hr((x=this._formValues)!==null&&x!==void 0?x:{},M,e)}else this._formValues={...this._formValues,[y]:A}}changeFormValue(t,e){var n,r,o,s,l;const u=this.getColumnByObjectOrId(t),h=typeof t=="string"?t:(n=u==null?void 0:u.id)!==null&&n!==void 0?n:"",c=(r=u==null?void 0:u.field)!==null&&r!==void 0?r:t;if(c!=null&&c.includes(".")){const p=(l=(s=(o=u==null?void 0:u.internalColumnEditor)===null||o===void 0?void 0:o.complexObjectPath)!==null&&s!==void 0?s:c)!==null&&l!==void 0?l:"";hr(this._formValues,p,e)}else this._formValues={...this._formValues,[h]:e};this._formValues=Cl({},this._itemDataContext,this._formValues)}changeFormEditorOption(t,e,n){var r;const o=(r=this._editors)===null||r===void 0?void 0:r[t];if(o!=null&&o.changeEditorOption)o.changeEditorOption(e,n);else throw new Error(`Editor with column id "${t}" not found OR the Editor does not support "changeEditorOption" (current only available with AutoComplete, Date, MultipleSelect & SingleSelect Editors).`)}disableFormInput(t,e=!0){var n;const r=(n=this._editors)===null||n===void 0?void 0:n[t];r!=null&&r.disable&&Array.isArray(this._editorContainers)&&r.disable(e)}openDetails(t){var e,n,r,o,s,l,u,h,c,p,m,v,_,C,x,S;const y=(e=t.onError)!==null&&e!==void 0?e:vv,D={backdrop:"static",showCloseButtonOutside:!0,shouldClearRowSelectionAfterMassAction:!0,viewColumnLayout:"auto",modalType:"edit"};try{if(!this.grid||this.grid.getEditorLock().isActive()&&!this.grid.getEditorLock().commitCurrentEdit())return null;this._formValues=null,this._options={...D,...this.gridOptions.compositeEditorOptions,...t,labels:{...(n=this.gridOptions.compositeEditorOptions)===null||n===void 0?void 0:n.labels,...t==null?void 0:t.labels}},this._options.backdrop=t.backdrop!==void 0?t.backdrop:"static";const A=this._options.viewColumnLayout||1,P=this.grid.getActiveCell(),M=(r=P==null?void 0:P.cell)!==null&&r!==void 0?r:0,B=(o=P==null?void 0:P.row)!==null&&o!==void 0?o:0,Q=this.grid.getUID()||"";let L=t.headerTitle||"";typeof this._options.onBeforeOpen=="function"&&this._options.onBeforeOpen(),this.hasRowSelectionEnabled()&&this._options.modalType==="auto-mass"&&this.grid.getSelectedRows&&((this.grid.getSelectedRows()||[]).length>0?(this._options.modalType="mass-selection",t!=null&&t.headerTitleMassSelection&&(L=t==null?void 0:t.headerTitleMassSelection)):(this._options.modalType="mass-update",t!=null&&t.headerTitleMassUpdate&&(L=t==null?void 0:t.headerTitleMassUpdate)));const le=this._options.modalType||"edit";if(this.gridOptions.editable)if(this.gridOptions.enableCellNavigation){if(!this.gridOptions.enableAddRow&&(le==="clone"||le==="create"))return y({type:"error",code:"ENABLE_ADD_ROW_REQUIRED",message:'Composite Editor requires the flag "enableAddRow" to be set to True in your Grid Options when cloning/creating a new item.'}),null;if(!P&&(le==="clone"||le==="edit"))return y({type:"warning",code:"NO_RECORD_FOUND",message:"No records selected for edit or clone operation."}),null;{const _e=le==="mass-update"||le==="mass-selection",J=_e?{}:this.grid.getDataItem(B);this._originalDataContext=uo(J),this._columnDefinitions=this.grid.getColumns();const z=this.hasRowSelectionEnabled()?this.grid.getSelectedRows():[],F=(l=(s=this.dataView)===null||s===void 0?void 0:s.getItemCount())!==null&&l!==void 0?l:0;this._lastActiveRowNumber=B;const ae=this.dataView.getAllSelectedIds(),qe=le==="create"?this.dataViewLength:B;if(!this.focusOnFirstColumnCellWithEditor(this._columnDefinitions,J,M,qe,_e))return null;if(le==="edit"&&!J)return y({type:"warning",code:"ROW_NOT_EDITABLE",message:"Current row is not editable."}),null;if(le==="mass-selection"&&z.length<1)return y({type:"warning",code:"ROW_SELECTION_REQUIRED",message:"You must select some rows before trying to apply new value(s)."}),null;let xe=[];_e?xe=this._columnDefinitions.filter(at=>{var k;return at.editor&&((k=at.internalColumnEditor)===null||k===void 0?void 0:k.massUpdate)===!0}):xe=this._columnDefinitions.filter(at=>at.editor),xe.some(at=>{var k;return((k=at.internalColumnEditor)===null||k===void 0?void 0:k.compositeEditorFormOrder)!==void 0})&&xe.sort((at,k)=>{var te,ge,$,X;const re=(ge=(te=at==null?void 0:at.internalColumnEditor)===null||te===void 0?void 0:te.compositeEditorFormOrder)!==null&&ge!==void 0?ge:1/0,Fe=(X=($=k==null?void 0:k.internalColumnEditor)===null||$===void 0?void 0:$.compositeEditorFormOrder)!==null&&X!==void 0?X:1/0;return Pp(re,Fe,Xi.asc)});const Te=L.replace(/\{\{(.*?)\}\}/g,(at,k)=>bn(J,k)),Re=A==="auto"?this.autoCalculateLayoutColumnCount(xe.length):A;this._modalElm=Ie("div",{className:`slick-editor-modal ${Q}`});const ne=Ie("div",{className:"slick-editor-modal-content"});if(!isNaN(A)&&+A>1||A==="auto"&&Re>1){const at=Re===2?"split-view":"triple-split-view";ne.classList.add(at)}const fe=Ie("div",{className:"slick-editor-modal-title",innerHTML:Mn(this.gridOptions,Te)}),Be=Ie("button",{type:"button",ariaLabel:"Close",textContent:"",className:"close",dataset:{action:"close"}});this._options.showCloseButtonOutside&&((u=fe==null?void 0:fe.classList)===null||u===void 0||u.add("outside"),(h=Be==null?void 0:Be.classList)===null||h===void 0||h.add("outside"));const Ye=Ie("div",{ariaLabel:"Close",className:"slick-editor-modal-header"});Ye.appendChild(fe),Ye.appendChild(Be);const Ve=Ie("div",{className:"slick-editor-modal-body"});this._modalBodyTopValidationElm=Ie("div",{className:"validation-summary",style:{display:"none"}},Ve);const ue=Ie("div",{className:"slick-editor-modal-footer"}),Ce=Ie("button",{type:"button",ariaLabel:this.getLabelText("cancelButton","TEXT_CANCEL","Cancel"),className:"btn btn-cancel btn-default btn-sm",textContent:this.getLabelText("cancelButton","TEXT_CANCEL","Cancel"),dataset:{action:"cancel"}});let be="",Le="";switch(le){case"clone":Le=this.getLabelText("cloneButton","TEXT_CLONE","Clone");break;case"mass-update":const at=this.getLabelText("massUpdateStatus","TEXT_ALL_X_RECORDS_SELECTED","All {{x}} records selected");be=this.parseText(at,{x:F}),Le=this.getLabelText("massUpdateButton","TEXT_APPLY_MASS_UPDATE","Mass Update");break;case"mass-selection":const k=this.getLabelText("massSelectionStatus","TEXT_X_OF_Y_MASS_SELECTED","{{x}} of {{y}} selected");be=this.parseText(k,{x:ae.length,y:F}),Le=this.getLabelText("massSelectionButton","TEXT_APPLY_TO_SELECTION","Update Selection");break;default:Le=this.getLabelText("saveButton","TEXT_SAVE","Save")}const nt=Ie("div",{className:"footer-status-text",textContent:be});this._modalSaveButtonElm=Ie("button",{type:"button",className:"btn btn-save btn-primary btn-sm",ariaLabel:Le,textContent:Le,dataset:{action:le==="create"||le==="edit"?"save":le,ariaLabel:Le}});const Ge=Ie("div",{className:"footer-buttons"});(le==="mass-update"||le==="mass-selection")&&ue.appendChild(nt),Ge.appendChild(Ce),Ge.appendChild(this._modalSaveButtonElm),ue.appendChild(Ge),ne.appendChild(Ye),ne.appendChild(Ve),ne.appendChild(ue),this._modalElm.appendChild(ne);for(const at of xe)if(at.editor){const k=Ie("div",{className:`item-details-container editor-${at.id}`});Re===1?k.classList.add("slick-col-medium-12"):k.classList.add("slick-col-medium-6",`slick-col-xlarge-${12/Re}`);const te=Ie("div",{className:`item-details-label editor-${at.id}`,innerHTML:Mn(this.gridOptions,this.getColumnLabel(at)||"n/a")}),ge=Ie("div",{className:"item-details-editor-container slick-cell",dataset:{editorid:`${at.id}`}}),$=Ie("div",{className:`item-details-validation editor-${at.id}`});if(!((c=this._options)===null||c===void 0)&&c.showResetButtonOnEachEditor){const X=this.createEditorResetButtonElement(`${at.id}`);this._bindEventService.bind(X,"click",this.handleResetInputValue.bind(this)),te.appendChild(X)}k.appendChild(te),k.appendChild(ge),k.appendChild($),Ve.appendChild(k)}if(!((p=this._options)===null||p===void 0)&&p.showFormResetButton){const at=this.createFormResetButtonElement();this._bindEventService.bind(at,"click",this.handleResetFormClicked.bind(this)),Ve.appendChild(at)}document.body.appendChild(this._modalElm),document.body.classList.add("slick-modal-open"),this._bindEventService.bind(document.body,"click",this.handleBodyClicked.bind(this)),this._editors={},this._editorContainers=xe.map(at=>Ve.querySelector(`[data-editorid=${at.id}]`))||[],this._compositeOptions={destroy:this.disposeComponent.bind(this),modalType:le,validationMsgPrefix:"* ",formValues:{},editors:this._editors};const yt=new VC(xe,this._editorContainers,this._compositeOptions);this.grid.editActiveCell(yt),this._bindEventService.bind(Be,"click",this.cancelEditing.bind(this)),this._bindEventService.bind(Ce,"click",this.cancelEditing.bind(this)),this._bindEventService.bind(this._modalSaveButtonElm,"click",this.handleSaveClicked.bind(this)),this._bindEventService.bind(this._modalElm,"keydown",this.handleKeyDown.bind(this)),this._bindEventService.bind(this._modalElm,"focusout",this.validateCurrentEditor.bind(this)),this._bindEventService.bind(this._modalElm,"blur",this.validateCurrentEditor.bind(this)),this._eventHandler.subscribe(this.grid.onCompositeEditorChange,this.handleOnCompositeEditorChange.bind(this)),this._eventHandler.subscribe(this.grid.onAddNewRow,(at,k)=>{this.insertNewItemInDataView(k.item),this._originalDataContext=k.item,this.dispose()})}}else return y({type:"error",code:"ENABLE_CELL_NAVIGATION_REQUIRED",message:'Composite Editor requires the flag "enableCellNavigation" to be set to True in your Grid Options.'}),null;else return y({type:"error",code:"EDITABLE_GRID_REQUIRED",message:"Your grid must be editable in order to use the Composite Editor Modal."}),null;return this}catch(A){this.dispose();const P=typeof A=="string"?A:(_=(m=A==null?void 0:A.message)!==null&&m!==void 0?m:(v=A==null?void 0:A.body)===null||v===void 0?void 0:v.message)!==null&&_!==void 0?_:"",M=typeof A=="string"?A:(S=(C=A==null?void 0:A.status)!==null&&C!==void 0?C:(x=A==null?void 0:A.body)===null||x===void 0?void 0:x.status)!==null&&S!==void 0?S:P;return y({type:"error",code:M,message:P}),null}}async cancelEditing(){var t,e;let n=!0;this.formValues&&Object.keys(this.formValues).length>0&&typeof this._options.onClose=="function"&&(n=await this._options.onClose()),n&&(this.grid.getEditController().cancelCurrentEdit(),(((t=this._options)===null||t===void 0?void 0:t.modalType)==="edit"||((e=this._options)===null||e===void 0?void 0:e.modalType)==="clone")&&this.resetCurrentRowDataContext(),this.grid.setActiveRow(this._lastActiveRowNumber),this.dispose())}showValidationSummaryText(t,e=""){var n,r;t&&e!==""?(this._modalBodyTopValidationElm.textContent=e,this._modalBodyTopValidationElm.style.display="block",(r=(n=this._modalBodyTopValidationElm).scrollIntoView)===null||r===void 0||r.call(n),this._modalSaveButtonElm.disabled=!1,this._modalSaveButtonElm.classList.remove("saving")):(this._modalBodyTopValidationElm.style.display="none",this._modalBodyTopValidationElm.textContent=e)}applySaveMassUpdateChanges(t,e,n=!0){const r=n?this.dataView.getItems():uo(this.dataView.getItems());for(const o in t)o in t&&r.forEach(s=>{var l;o in t&&(((l=this._options)===null||l===void 0?void 0:l.validateMassUpdateChange)===void 0||this._options.validateMassUpdateChange(o,s,t)!==!1)&&(s[o]=t[o])});return n&&(this.dataView.setItems(r,this.gridOptions.datasetIdPropertyName),this.grid.invalidate()),r}applySaveMassSelectionChanges(t,e,n=!0){var r,o;const l=((r=e==null?void 0:e.dataContextIds)!==null&&r!==void 0?r:[]).map(h=>this.dataView.getItemById(h)),u=n?l:uo(l);for(const h in t)h in t&&u.forEach(c=>{var p;h in t&&(((p=this._options)===null||p===void 0?void 0:p.validateMassUpdateChange)===void 0||this._options.validateMassUpdateChange(h,c,t)!==!1)&&(c[h]=t[h])});return n&&((o=this.gridService)===null||o===void 0||o.updateItems(u)),u}autoCalculateLayoutColumnCount(t){return t>=15?3:t>=8?2:1}createEditorResetButtonElement(t){var e,n,r,o,s;const l=Ie("button",{type:"button",name:t,ariaLabel:"Reset",title:(r=(n=(e=this._options)===null||e===void 0?void 0:e.labels)===null||n===void 0?void 0:n.resetFormButton)!==null&&r!==void 0?r:"Reset Form Input",className:"btn btn-xs btn-editor-reset"});if(!((o=this._options)===null||o===void 0)&&o.resetEditorButtonCssClass){const u=(s=this._options)===null||s===void 0?void 0:s.resetEditorButtonCssClass.split(" ");for(const h of u)l.classList.add(h)}return l}createFormResetButtonElement(){var t,e;const n=Ie("div",{className:"reset-container"}),r=Ie("button",{type:"button",className:"btn btn-sm reset-form"},n);return Ie("span",{className:(e=(t=this._options)===null||t===void 0?void 0:t.resetFormButtonIconCssClass)!==null&&e!==void 0?e:""},r),r.appendChild(document.createTextNode(" Reset Form")),n}executeOnError(t){var e,n;((n=(e=this._options)===null||e===void 0?void 0:e.onError)!==null&&n!==void 0?n:vv)(t)}async executeOnSave(t,e,n,r){var o,s,l,u,h,c;try{if(this.showValidationSummaryText(!1,""),this.validateCompositeEditors().valid){if(this._modalSaveButtonElm.classList.add("saving"),this._modalSaveButtonElm.disabled=!0,typeof((o=this._options)===null||o===void 0?void 0:o.onSave)=="function"){const m=this._options.modalType==="mass-update"||this._options.modalType==="mass-selection";let v;m&&(!((s=this._options)===null||s===void 0)&&s.shouldPreviewMassChangeDataset)&&(v=t(this.formValues,this.getCurrentRowSelections(),!1));const _=m?v:r;await((l=this._options)===null||l===void 0?void 0:l.onSave(this.formValues,this.getCurrentRowSelections(),_))&&(t(this.formValues,this.getCurrentRowSelections()),e())}else t(this.formValues,this.getCurrentRowSelections()),e();typeof n=="function"&&n(),this.dispose()}}catch(p){const m=typeof p=="string"?p:(c=(u=p==null?void 0:p.message)!==null&&u!==void 0?u:(h=p==null?void 0:p.body)===null||h===void 0?void 0:h.message)!==null&&c!==void 0?c:"";this.showValidationSummaryText(!0,m)}}focusOnFirstColumnCellWithEditor(t,e,n,r,o){const s=o&&!this.gridOptions.enableAddRow&&r>=this.dataViewLength?this.dataViewLength-1:r;let l=n;const u=t[n].editor;let h=this.grid.getCellNode(s,n);if(!u||!h||!this.getActiveCellEditor(s,n)){if(l=this.findNextAvailableEditorColumnIndex(t,e,r,o),l===-1)return this.executeOnError({type:"error",code:"NO_EDITOR_FOUND",message:"We could not find any Editor in your Column Definition"}),!1;this.grid.setActiveCell(s,l,!1),o&&this.grid.setActiveRow(this.dataViewLength,l,!0)}return h=this.grid.getCellNode(s,l),!!h}findNextAvailableEditorColumnIndex(t,e,n,r){var o;let s=-1;for(let l=0;l<t.length;l++){const u=t[l];if(u.editor&&(!r||r&&(!((o=u.internalColumnEditor)===null||o===void 0)&&o.massUpdate))){const h=this.grid.onBeforeEditCell.notify({row:n,cell:l,item:e,column:u,grid:this.grid,target:"composite",compositeEditorOptions:this._compositeOptions}).getReturnValue();if(this.grid.setActiveCell(n,l,!1),h!==!1){s=l;break}}}return s}getColumnByObjectOrId(t){let e;return typeof t=="object"?e=t:typeof t=="string"&&(e=this._columnDefinitions.find(n=>n.id===t)),e}getActiveCellEditor(t,e){return this.grid.setActiveCell(t,e,!1),this.grid.getCellEditor()}getColumnLabel(t){var e;const n=this.gridOptions.columnGroupSeparator||" - ";let r=t.nameCompositeEditor||t.name||"",o=t.columnGroup||"";if(this.gridOptions.enableTranslate&&this.translaterService){const l=t.nameCompositeEditorKey||t.nameKey;l&&(r=this.translaterService.translate(l)),t.columnGroupKey&&(!((e=this.translaterService)===null||e===void 0)&&e.translate)&&(o=this.translaterService.translate(t.columnGroupKey))}return(o?`${o}${n}${r}`:r)||""}getLabelText(t,e,n){var r,o,s,l,u,h,c;const p={...(r=this.gridOptions.compositeEditorOptions)===null||r===void 0?void 0:r.labels,...(o=this._options)===null||o===void 0?void 0:o.labels};if(!((s=this.gridOptions)===null||s===void 0)&&s.enableTranslate&&(!((l=this.translaterService)===null||l===void 0)&&l.translate)&&p.hasOwnProperty(`${t}Key`)){const m=p[`${t}Key`];return this.translaterService.translate(m||"")}return(c=(u=p==null?void 0:p[t])!==null&&u!==void 0?u:(h=this._locales)===null||h===void 0?void 0:h[e])!==null&&c!==void 0?c:n}getCurrentRowSelections(){const t=this.dataView.getAllSelectedIds();return{gridRowIndexes:this.dataView.mapIdsToRows(t),dataContextIds:t}}handleBodyClicked(t){var e,n,r;!((n=(e=t.target)===null||e===void 0?void 0:e.classList)===null||n===void 0)&&n.contains("slick-editor-modal")&&((r=this._options)===null||r===void 0?void 0:r.backdrop)!=="static"&&this.dispose()}handleKeyDown(t){t.code==="Escape"?(this.cancelEditing(),t.stopPropagation(),t.preventDefault()):t.code==="Tab"&&this.validateCurrentEditor()}handleResetInputValue(t){var e,n;const r=t.target.name,o=(e=this._editors)===null||e===void 0?void 0:e[r];o!=null&&o.reset&&o.reset(),(n=this._formValues)===null||n===void 0||delete n[r]}async handleMassSaving(t,e){if(!this.formValues||Object.keys(this.formValues).length===0)this.executeOnError({type:"warning",code:"NO_CHANGES_DETECTED",message:"Sorry we could not detect any changes."});else{const n=t==="mass-update"?"applySaveMassUpdateChanges":"applySaveMassSelectionChanges";this.executeOnSave(this[n].bind(this),e.bind(this))}}handleOnCompositeEditorChange(t,e){var n,r,o,s,l,u,h,c;const p=(r=(n=e.column)===null||n===void 0?void 0:n.id)!==null&&r!==void 0?r:"";this._formValues={...this._formValues,...e.formValues};const m=(o=this._editors)===null||o===void 0?void 0:o[p],v=(h=(l=(s=m==null?void 0:m.isValueTouched)===null||s===void 0?void 0:s.call(m))!==null&&l!==void 0?l:(u=m==null?void 0:m.isValueChanged)===null||u===void 0?void 0:u.call(m))!==null&&h!==void 0?h:!1;this._itemDataContext=(c=m==null?void 0:m.dataContext)!==null&&c!==void 0?c:{};const _=this._modalElm.querySelector(`[data-editorid=${p}]`);_!=null&&_.classList&&(v?_.classList.add("modified"):_.classList.remove("modified")),this.validateCompositeEditors()}hasRowSelectionEnabled(){const t=this.grid.getSelectionModel();return(this.gridOptions.enableRowSelection||this.gridOptions.enableCheckboxSelector)&&t}handleResetFormClicked(){for(const t of Object.keys(this._editors)){const e=this._editors[t];e!=null&&e.reset&&e.reset()}this._formValues=Ip(this._formValues)}handleSaveClicked(){var t,e,n;const r=(t=this._options)===null||t===void 0?void 0:t.modalType;switch(r){case"mass-update":this.handleMassSaving(r,()=>{this.grid.getEditController().cancelCurrentEdit(),this.grid.setActiveCell(0,0,!1),this._options.shouldClearRowSelectionAfterMassAction&&this.grid.setSelectedRows([])});break;case"mass-selection":this.handleMassSaving(r,()=>{this.grid.getEditController().cancelCurrentEdit(),this.grid.setActiveRow(this._lastActiveRowNumber),this._options.shouldClearRowSelectionAfterMassAction&&this.grid.setSelectedRows([])});break;case"clone":const o={...this._originalDataContext,...this.formValues},s=()=>{this.grid.getEditController().cancelCurrentEdit(),this.grid.setActiveCell(0,0,!1)};this.executeOnSave(this.insertNewItemInDataView.bind(this,o),s,this.resetCurrentRowDataContext.bind(this),o);break;case"create":case"edit":default:if(this.grid.getEditController().commitCurrentEdit(),typeof((e=this._options)===null||e===void 0?void 0:e.onSave)=="function"){const l=this.grid.getDataItem(this._lastActiveRowNumber);(n=this._options)===null||n===void 0||n.onSave(this.formValues,this.getCurrentRowSelections(),l)}break}}insertNewItemInDataView(t){var e,n,r,o;const s=(n=(e=this.dataView)===null||e===void 0?void 0:e.getItemCount())!==null&&n!==void 0?n:0,l=(r=this._options.insertNewId)!==null&&r!==void 0?r:s+1;t[this.gridOptions.datasetIdPropertyName||"id"]=l,this.dataView.getItemById(l)?this.executeOnError({type:"error",code:"ITEM_ALREADY_EXIST",message:`The item object which you are trying to add already exist with the same Id:: ${l}`}):(o=this.gridService)===null||o===void 0||o.addItem(t,this._options.insertOptions)}parseText(t,e){return t.replace(/\{\{(.*?)\}\}/g,(n,r)=>e[r]!==void 0?e[r]:n)}resetCurrentRowDataContext(){const t=this.gridOptions.datasetIdPropertyName||"id";this.grid.getData().updateItem(this._originalDataContext[t],this._originalDataContext)}validateCompositeEditors(t){let e={valid:!0,msg:""};const n=this.grid.getCellEditor();return n&&(e=n.validate(t)),e}validateCurrentEditor(){const t=this.grid.getCellEditor();t!=null&&t.validate&&t.validate()}}class mf{get gridOptions(){return this.grid&&this.grid.getOptions?this.grid.getOptions():{}}constructor(){this._warningLeftElement=null,this._warningRightElement=null,this.isPreviouslyShown=!1}init(t,e){this.grid=t,this.translaterService=e.get("TranslaterService")}dispose(){var t,e;(t=this._warningLeftElement)===null||t===void 0||t.remove(),(e=this._warningRightElement)===null||e===void 0||e.remove(),this._warningLeftElement=null,this._warningRightElement=null}showEmptyDataMessage(t=!0,e){var n,r,o,s,l,u,h,c,p,m,v,_,C,x;if(!this.grid||!this.gridOptions||this.isPreviouslyShown===t)return!1;this.isPreviouslyShown=t;const S=this.grid.getUID(),D={message:"No data to display.",...this.gridOptions.emptyDataWarning,...e},A=(n=D==null?void 0:D.className)!==null&&n!==void 0?n:"slick-empty-data-warning";this._warningLeftElement=document.querySelector(`.${S} .${A}`);const P=document.querySelector(`.${S} .grid-canvas.grid-canvas-left`),M=document.querySelector(`.${S} .grid-canvas.grid-canvas-right`),B=(r=D.leftViewportMarginLeft)!==null&&r!==void 0?r:0,Q=(o=D.rightViewportMarginLeft)!==null&&o!==void 0?o:0,L=(s=D.frozenLeftViewportMarginLeft)!==null&&s!==void 0?s:0,le=(l=D.frozenRightViewportMarginLeft)!==null&&l!==void 0?l:0,_e=((u=this.gridOptions)===null||u===void 0?void 0:u.frozenColumn)!==void 0&&this.gridOptions.frozenColumn>=0,J=typeof B=="string"?B:`${B}px`,z=typeof Q=="string"?Q:`${Q}px`;if(this.gridOptions.autoHeight){const ae=document.querySelector(`.${S} .slick-pane.slick-pane-top.slick-pane-left`);if(ae&&ae.style&&P&&P.style){const qe=parseInt(ae.style.height,10)||0,De=(c=(h=this.gridOptions)===null||h===void 0?void 0:h.rowHeight)!==null&&c!==void 0?c:0,xe=this.gridOptions.enableFiltering&&(m=(p=this.gridOptions)===null||p===void 0?void 0:p.headerRowHeight)!==null&&m!==void 0?m:0,Te=this.gridOptions.createPreHeaderPanel&&(_=(v=this.gridOptions)===null||v===void 0?void 0:v.preHeaderPanelHeight)!==null&&_!==void 0?_:0;if(t){let Re=qe!==null&&qe<100?qe:100;Re+=xe+Te,ae.style.minHeight=`${Re}px`,P.style.minHeight=`${De}px`}}}let F=D.message;if(this.gridOptions.enableTranslate&&this.translaterService&&(D!=null&&D.messageKey)&&(F=this.translaterService.translate(D.messageKey)),!this._warningLeftElement&&P&&M){const ae=(x=(C=this.gridOptions)===null||C===void 0?void 0:C.sanitizeHtmlOptions)!==null&&x!==void 0?x:{};this._warningLeftElement=document.createElement("div"),this._warningLeftElement.classList.add(A),this._warningLeftElement.classList.add("left"),this._warningLeftElement.innerHTML=Mn(this.gridOptions,F,ae),this._warningRightElement=this._warningLeftElement.cloneNode(!0),this._warningRightElement.classList.add("right"),M.appendChild(this._warningRightElement),P.appendChild(this._warningLeftElement)}if(this._warningLeftElement){let ae=t?"block":"none";_e&&t&&(ae=D.hideFrozenLeftWarning?"none":"block"),this._warningLeftElement.style.display=ae;const qe=typeof L=="string"?L:`${L}px`;this._warningLeftElement.style.marginLeft=_e?qe:J}if(this._warningRightElement){let ae=t?"block":"none";_e&&t&&(ae=D.hideFrozenRightWarning?"none":"block"),this._warningRightElement.style.display=ae;const qe=typeof le=="string"?le:`${le}px`;this._warningRightElement.style.marginLeft=_e?qe:z}return t}}class gv{constructor(t,e,n,r){var o,s,l,u,h;if(this.paginationService=t,this.pubSubService=e,this.sharedService=n,this.translaterService=r,this._enableTranslate=!1,this._subscriptions=[],this.firstButtonClasses="",this.lastButtonClasses="",this.prevButtonClasses="",this.nextButtonClasses="",this.textItemsPerPage="items per page",this.textItems="items",this.textOf="of",this.textPage="Page",this._bindingHelper=new mv,this._bindingHelper.querySelectorPrefix=`.${this.gridUid} `,this.currentPagination=this.paginationService.getFullPagination(),this._enableTranslate=(s=(o=this.gridOptions)===null||o===void 0?void 0:o.enableTranslate)!==null&&s!==void 0?s:!1,this._enableTranslate&&(!this.translaterService||!this.translaterService.translate))throw new Error('[Slickgrid-Universal] requires a Translate Service to be installed and configured when the grid option "enableTranslate" is enabled.');if(this.translatePaginationTexts(),this._enableTranslate&&(!((l=this.pubSubService)===null||l===void 0)&&l.subscribe)){const c=(h=(u=this.translaterService)===null||u===void 0?void 0:u.eventName)!==null&&h!==void 0?h:"onLanguageChange";this._subscriptions.push(this.pubSubService.subscribe(c,()=>this.translatePaginationTexts()))}this._subscriptions.push(this.pubSubService.subscribe("onPaginationRefreshed",c=>{for(const m of Object.keys(c))this.currentPagination[m]=c[m];this.updatePageButtonsUsability();const p=document.querySelector(`.${this.gridUid} span.page-info-from-to`);p!=null&&p.style&&(p.style.display=this.currentPagination.totalItems===0?"none":"")}))}get availablePageSizes(){return this.paginationService.availablePageSizes||[]}get dataFrom(){return this.paginationService.dataFrom}get dataTo(){return this.paginationService.dataTo}get itemsPerPage(){return this.paginationService.itemsPerPage}set itemsPerPage(t){this.paginationService.changeItemPerPage(t)}get pageCount(){return this.paginationService.pageCount}get pageNumber(){return this.paginationService.pageNumber}set pageNumber(t){}get grid(){return this.sharedService.slickGrid}get gridOptions(){return this.sharedService.gridOptions}get gridUid(){var t,e;return(e=(t=this.grid)===null||t===void 0?void 0:t.getUID())!==null&&e!==void 0?e:""}get locales(){var t,e;return(e=(t=this.gridOptions)===null||t===void 0?void 0:t.locales)!==null&&e!==void 0?e:je.locales}get totalItems(){return this.paginationService.totalItems}get isLeftPaginationDisabled(){return this.pageNumber===1||this.totalItems===0}get isRightPaginationDisabled(){return this.pageNumber===this.pageCount||this.totalItems===0}dispose(){this.pubSubService.unsubscribeAll(this._subscriptions),this._bindingHelper.dispose(),this._paginationElement.remove()}renderPagination(t){const e=this.createPaginationContainer(),n=Ie("div",{className:"slick-pagination-nav"}),r=this.createPageNavigation("Page navigation",[{liClass:"page-item seek-first",aClass:"page-link icon-seek-first",ariaLabel:"First Page"},{liClass:"page-item seek-prev",aClass:"page-link icon-seek-prev",ariaLabel:"Previous Page"}]),o=this.createPageNumberSection(),s=this.createPageNavigation("Page navigation",[{liClass:"page-item seek-next",aClass:"page-link icon-seek-next",ariaLabel:"Next Page"},{liClass:"page-item seek-end",aClass:"page-link icon-seek-end",ariaLabel:"Last Page"}]);e.appendChild(n),n.appendChild(r),n.appendChild(o),n.appendChild(s);const l=this.createPaginationSettingsSection();e.appendChild(n),e.appendChild(l),this._paginationElement.appendChild(e),t!=null&&t.appendChild&&this._paginationElement&&t.appendChild(this._paginationElement),this.renderPageSizes(),this.addBindings(),this.addEventListeners(),this.updatePageButtonsUsability()}renderPageSizes(){const t=document.querySelector(`.${this.gridUid} .items-per-page`);if(t&&Array.isArray(this.availablePageSizes))for(const e of this.availablePageSizes)t.appendChild(Ie("option",{value:`${e}`,text:`${e}`}))}addBindings(){this._bindingHelper.addElementBinding(this,"firstButtonClasses","li.page-item.seek-first","className"),this._bindingHelper.addElementBinding(this,"prevButtonClasses","li.page-item.seek-prev","className"),this._bindingHelper.addElementBinding(this,"lastButtonClasses","li.page-item.seek-end","className"),this._bindingHelper.addElementBinding(this,"nextButtonClasses","li.page-item.seek-next","className"),this._bindingHelper.addElementBinding(this.currentPagination,"dataFrom","span.item-from","textContent"),this._bindingHelper.addElementBinding(this.currentPagination,"dataTo","span.item-to","textContent"),this._bindingHelper.addElementBinding(this.currentPagination,"totalItems","span.total-items","textContent"),this._bindingHelper.addElementBinding(this.currentPagination,"pageCount","span.page-count","textContent"),this._bindingHelper.addElementBinding(this.currentPagination,"pageSize","select.items-per-page","value"),this.paginationService.isCursorBased?this._bindingHelper.addElementBinding(this.currentPagination,"pageNumber","span.page-number","textContent"):this._bindingHelper.addElementBinding(this.currentPagination,"pageNumber","input.page-number","value","change",this.changeToCurrentPage.bind(this)),this._bindingHelper.addElementBinding(this,"textItems","span.text-items","textContent"),this._bindingHelper.addElementBinding(this,"textItemsPerPage","span.text-item-per-page","textContent"),this._bindingHelper.addElementBinding(this,"textOf","span.text-of","textContent"),this._bindingHelper.addElementBinding(this,"textPage","span.text-page","textContent")}addEventListeners(){this._bindingHelper.bindEventHandler(".icon-seek-first","click",this.changeToFirstPage.bind(this)),this._bindingHelper.bindEventHandler(".icon-seek-end","click",this.changeToLastPage.bind(this)),this._bindingHelper.bindEventHandler(".icon-seek-next","click",this.changeToNextPage.bind(this)),this._bindingHelper.bindEventHandler(".icon-seek-prev","click",this.changeToPreviousPage.bind(this)),this._bindingHelper.bindEventHandler("select.items-per-page","change",t=>{var e,n;return this.itemsPerPage=+((n=(e=t==null?void 0:t.target)===null||e===void 0?void 0:e.value)!==null&&n!==void 0?n:0)})}changeToFirstPage(t){this.isLeftPaginationDisabled||this.paginationService.goToFirstPage(t)}changeToLastPage(t){this.isRightPaginationDisabled||this.paginationService.goToLastPage(t)}changeToNextPage(t){this.isRightPaginationDisabled||this.paginationService.goToNextPage(t)}changeToPreviousPage(t){this.isLeftPaginationDisabled||this.paginationService.goToPreviousPage(t)}changeToCurrentPage(t){this.paginationService.goToPageNumber(+t)}translatePaginationTexts(){var t;if(this._enableTranslate&&(!((t=this.translaterService)===null||t===void 0)&&t.translate)){const e=ao(this.gridOptions);this.textItemsPerPage=this.translaterService.translate(`${e}ITEMS_PER_PAGE`),this.textItems=this.translaterService.translate(`${e}ITEMS`),this.textOf=this.translaterService.translate(`${e}OF`),this.textPage=this.translaterService.translate(`${e}PAGE`)}else this.locales&&(this.textItemsPerPage=this.locales.TEXT_ITEMS_PER_PAGE||"TEXT_ITEMS_PER_PAGE",this.textItems=this.locales.TEXT_ITEMS||"TEXT_ITEMS",this.textOf=this.locales.TEXT_OF||"TEXT_OF",this.textPage=this.locales.TEXT_PAGE||"TEXT_PAGE")}createPaginationContainer(){const t=Ie("div",{id:"pager",className:`slick-pagination-container ${this.gridUid} pager`,style:{width:"100%"}}),e=Ie("div",{className:"slick-pagination"});return t.appendChild(e),this._paginationElement=t,e}createPageNavigation(t,e){const n=Ie("nav",{ariaLabel:t}),r=Ie("ul",{className:"pagination"});for(const o of e)Ie("li",{className:o.liClass},r).appendChild(Ie("a",{className:o.aClass,ariaLabel:o.ariaLabel,role:"button"}));return n.appendChild(r),n}createPageNumberSection(){const t=Ie("div",{className:"slick-page-number"});return Ie("span",{className:"text-page",textContent:"Page"},t),t.appendChild(document.createTextNode(" ")),this.paginationService.isCursorBased?Ie("span",{className:"page-number",ariaLabel:"Page Number",dataset:{test:"page-number-label"},textContent:"1"},t):Ie("input",{type:"text",className:"form-control page-number",ariaLabel:"Page Number",value:"1",size:1,dataset:{test:"page-number-input"}},t),t.appendChild(document.createTextNode(" ")),Ie("span",{className:"text-of",textContent:"of"},t),t.appendChild(document.createTextNode(" ")),Ie("span",{className:"page-count",dataset:{test:"page-count"}},t),t}createPaginationSettingsSection(){const t=Ie("span",{className:"slick-pagination-settings"});Ie("select",{id:"items-per-page-label",ariaLabel:"Items per Page",className:"items-per-page"},t),t.appendChild(document.createTextNode(" ")),Ie("span",{className:"text-item-per-page",textContent:"items per page"},t),t.appendChild(document.createTextNode(", "));const e=Ie("span",{className:"slick-pagination-count"},t),n=Ie("span",{className:"page-info-from-to"},e);Ie("span",{className:"item-from",ariaLabel:"Page Item From",dataset:{test:"item-from"}},n),n.appendChild(document.createTextNode("-")),Ie("span",{className:"item-to",ariaLabel:"Page Item To",dataset:{test:"item-to"}},n),n.appendChild(document.createTextNode(" ")),Ie("span",{className:"text-of",textContent:"of"},n),n.appendChild(document.createTextNode(" "));const r=Ie("span",{className:"page-info-total-items"},e);return Ie("span",{className:"total-items",ariaLabel:"Total Items",dataset:{test:"total-items"}},r),r.appendChild(document.createTextNode(" ")),Ie("span",{className:"text-items",textContent:"items"},r),r.appendChild(document.createTextNode(" ")),t}updatePageButtonsUsability(){this.firstButtonClasses=this.isLeftPaginationDisabled?"page-item seek-first disabled":"page-item seek-first",this.prevButtonClasses=this.isLeftPaginationDisabled?"page-item seek-prev disabled":"page-item seek-prev",this.lastButtonClasses=this.isRightPaginationDisabled?"page-item seek-end disabled":"page-item seek-end",this.nextButtonClasses=this.isRightPaginationDisabled?"page-item seek-next disabled":"page-item seek-next"}}var vf={exports:{}};/*!

    JSZip v3.10.1 - A JavaScript class for generating and reading zip files
    <http://stuartk.com/jszip>

    (c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
    Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

    JSZip uses the library pako released under the MIT license :
    https://github.com/nodeca/pako/blob/main/LICENSE
    */var _v;function zC(){return _v||(_v=1,function(a,t){(function(e){a.exports=e()})(function(){return function e(n,r,o){function s(h,c){if(!r[h]){if(!n[h]){var p=typeof Na=="function"&&Na;if(!c&&p)return p(h,!0);if(l)return l(h,!0);var m=new Error("Cannot find module '"+h+"'");throw m.code="MODULE_NOT_FOUND",m}var v=r[h]={exports:{}};n[h][0].call(v.exports,function(_){var C=n[h][1][_];return s(C||_)},v,v.exports,e,n,r,o)}return r[h].exports}for(var l=typeof Na=="function"&&Na,u=0;u<o.length;u++)s(o[u]);return s}({1:[function(e,n,r){var o=e("./utils"),s=e("./support"),l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";r.encode=function(u){for(var h,c,p,m,v,_,C,x=[],S=0,y=u.length,D=y,A=o.getTypeOf(u)!=="string";S<u.length;)D=y-S,p=A?(h=u[S++],c=S<y?u[S++]:0,S<y?u[S++]:0):(h=u.charCodeAt(S++),c=S<y?u.charCodeAt(S++):0,S<y?u.charCodeAt(S++):0),m=h>>2,v=(3&h)<<4|c>>4,_=1<D?(15&c)<<2|p>>6:64,C=2<D?63&p:64,x.push(l.charAt(m)+l.charAt(v)+l.charAt(_)+l.charAt(C));return x.join("")},r.decode=function(u){var h,c,p,m,v,_,C=0,x=0,S="data:";if(u.substr(0,S.length)===S)throw new Error("Invalid base64 input, it looks like a data url.");var y,D=3*(u=u.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(u.charAt(u.length-1)===l.charAt(64)&&D--,u.charAt(u.length-2)===l.charAt(64)&&D--,D%1!=0)throw new Error("Invalid base64 input, bad content length.");for(y=s.uint8array?new Uint8Array(0|D):new Array(0|D);C<u.length;)h=l.indexOf(u.charAt(C++))<<2|(m=l.indexOf(u.charAt(C++)))>>4,c=(15&m)<<4|(v=l.indexOf(u.charAt(C++)))>>2,p=(3&v)<<6|(_=l.indexOf(u.charAt(C++))),y[x++]=h,v!==64&&(y[x++]=c),_!==64&&(y[x++]=p);return y}},{"./support":30,"./utils":32}],2:[function(e,n,r){var o=e("./external"),s=e("./stream/DataWorker"),l=e("./stream/Crc32Probe"),u=e("./stream/DataLengthProbe");function h(c,p,m,v,_){this.compressedSize=c,this.uncompressedSize=p,this.crc32=m,this.compression=v,this.compressedContent=_}h.prototype={getContentWorker:function(){var c=new s(o.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new u("data_length")),p=this;return c.on("end",function(){if(this.streamInfo.data_length!==p.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),c},getCompressedWorker:function(){return new s(o.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},h.createWorkerFrom=function(c,p,m){return c.pipe(new l).pipe(new u("uncompressedSize")).pipe(p.compressWorker(m)).pipe(new u("compressedSize")).withStreamInfo("compression",p)},n.exports=h},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(e,n,r){var o=e("./stream/GenericWorker");r.STORE={magic:"\0\0",compressWorker:function(){return new o("STORE compression")},uncompressWorker:function(){return new o("STORE decompression")}},r.DEFLATE=e("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(e,n,r){var o=e("./utils"),s=function(){for(var l,u=[],h=0;h<256;h++){l=h;for(var c=0;c<8;c++)l=1&l?3988292384^l>>>1:l>>>1;u[h]=l}return u}();n.exports=function(l,u){return l!==void 0&&l.length?o.getTypeOf(l)!=="string"?function(h,c,p,m){var v=s,_=m+p;h^=-1;for(var C=m;C<_;C++)h=h>>>8^v[255&(h^c[C])];return-1^h}(0|u,l,l.length,0):function(h,c,p,m){var v=s,_=m+p;h^=-1;for(var C=m;C<_;C++)h=h>>>8^v[255&(h^c.charCodeAt(C))];return-1^h}(0|u,l,l.length,0):0}},{"./utils":32}],5:[function(e,n,r){r.base64=!1,r.binary=!1,r.dir=!1,r.createFolders=!0,r.date=null,r.compression=null,r.compressionOptions=null,r.comment=null,r.unixPermissions=null,r.dosPermissions=null},{}],6:[function(e,n,r){var o=null;o=typeof Promise<"u"?Promise:e("lie"),n.exports={Promise:o}},{lie:37}],7:[function(e,n,r){var o=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",s=e("pako"),l=e("./utils"),u=e("./stream/GenericWorker"),h=o?"uint8array":"array";function c(p,m){u.call(this,"FlateWorker/"+p),this._pako=null,this._pakoAction=p,this._pakoOptions=m,this.meta={}}r.magic="\b\0",l.inherits(c,u),c.prototype.processChunk=function(p){this.meta=p.meta,this._pako===null&&this._createPako(),this._pako.push(l.transformTo(h,p.data),!1)},c.prototype.flush=function(){u.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},c.prototype.cleanUp=function(){u.prototype.cleanUp.call(this),this._pako=null},c.prototype._createPako=function(){this._pako=new s[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var p=this;this._pako.onData=function(m){p.push({data:m,meta:p.meta})}},r.compressWorker=function(p){return new c("Deflate",p)},r.uncompressWorker=function(){return new c("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(e,n,r){function o(v,_){var C,x="";for(C=0;C<_;C++)x+=String.fromCharCode(255&v),v>>>=8;return x}function s(v,_,C,x,S,y){var D,A,P=v.file,M=v.compression,B=y!==h.utf8encode,Q=l.transformTo("string",y(P.name)),L=l.transformTo("string",h.utf8encode(P.name)),le=P.comment,_e=l.transformTo("string",y(le)),J=l.transformTo("string",h.utf8encode(le)),z=L.length!==P.name.length,F=J.length!==le.length,ae="",qe="",De="",xe=P.dir,Te=P.date,Re={crc32:0,compressedSize:0,uncompressedSize:0};_&&!C||(Re.crc32=v.crc32,Re.compressedSize=v.compressedSize,Re.uncompressedSize=v.uncompressedSize);var ne=0;_&&(ne|=8),B||!z&&!F||(ne|=2048);var fe=0,Be=0;xe&&(fe|=16),S==="UNIX"?(Be=798,fe|=function(Ve,ue){var Ce=Ve;return Ve||(Ce=ue?16893:33204),(65535&Ce)<<16}(P.unixPermissions,xe)):(Be=20,fe|=function(Ve){return 63&(Ve||0)}(P.dosPermissions)),D=Te.getUTCHours(),D<<=6,D|=Te.getUTCMinutes(),D<<=5,D|=Te.getUTCSeconds()/2,A=Te.getUTCFullYear()-1980,A<<=4,A|=Te.getUTCMonth()+1,A<<=5,A|=Te.getUTCDate(),z&&(qe=o(1,1)+o(c(Q),4)+L,ae+="up"+o(qe.length,2)+qe),F&&(De=o(1,1)+o(c(_e),4)+J,ae+="uc"+o(De.length,2)+De);var Ye="";return Ye+=`
\0`,Ye+=o(ne,2),Ye+=M.magic,Ye+=o(D,2),Ye+=o(A,2),Ye+=o(Re.crc32,4),Ye+=o(Re.compressedSize,4),Ye+=o(Re.uncompressedSize,4),Ye+=o(Q.length,2),Ye+=o(ae.length,2),{fileRecord:p.LOCAL_FILE_HEADER+Ye+Q+ae,dirRecord:p.CENTRAL_FILE_HEADER+o(Be,2)+Ye+o(_e.length,2)+"\0\0\0\0"+o(fe,4)+o(x,4)+Q+ae+_e}}var l=e("../utils"),u=e("../stream/GenericWorker"),h=e("../utf8"),c=e("../crc32"),p=e("../signature");function m(v,_,C,x){u.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=_,this.zipPlatform=C,this.encodeFileName=x,this.streamFiles=v,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}l.inherits(m,u),m.prototype.push=function(v){var _=v.meta.percent||0,C=this.entriesCount,x=this._sources.length;this.accumulate?this.contentBuffer.push(v):(this.bytesWritten+=v.data.length,u.prototype.push.call(this,{data:v.data,meta:{currentFile:this.currentFile,percent:C?(_+100*(C-x-1))/C:100}}))},m.prototype.openedSource=function(v){this.currentSourceOffset=this.bytesWritten,this.currentFile=v.file.name;var _=this.streamFiles&&!v.file.dir;if(_){var C=s(v,_,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:C.fileRecord,meta:{percent:0}})}else this.accumulate=!0},m.prototype.closedSource=function(v){this.accumulate=!1;var _=this.streamFiles&&!v.file.dir,C=s(v,_,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(C.dirRecord),_)this.push({data:function(x){return p.DATA_DESCRIPTOR+o(x.crc32,4)+o(x.compressedSize,4)+o(x.uncompressedSize,4)}(v),meta:{percent:100}});else for(this.push({data:C.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},m.prototype.flush=function(){for(var v=this.bytesWritten,_=0;_<this.dirRecords.length;_++)this.push({data:this.dirRecords[_],meta:{percent:100}});var C=this.bytesWritten-v,x=function(S,y,D,A,P){var M=l.transformTo("string",P(A));return p.CENTRAL_DIRECTORY_END+"\0\0\0\0"+o(S,2)+o(S,2)+o(y,4)+o(D,4)+o(M.length,2)+M}(this.dirRecords.length,C,v,this.zipComment,this.encodeFileName);this.push({data:x,meta:{percent:100}})},m.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},m.prototype.registerPrevious=function(v){this._sources.push(v);var _=this;return v.on("data",function(C){_.processChunk(C)}),v.on("end",function(){_.closedSource(_.previous.streamInfo),_._sources.length?_.prepareNextSource():_.end()}),v.on("error",function(C){_.error(C)}),this},m.prototype.resume=function(){return!!u.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},m.prototype.error=function(v){var _=this._sources;if(!u.prototype.error.call(this,v))return!1;for(var C=0;C<_.length;C++)try{_[C].error(v)}catch{}return!0},m.prototype.lock=function(){u.prototype.lock.call(this);for(var v=this._sources,_=0;_<v.length;_++)v[_].lock()},n.exports=m},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(e,n,r){var o=e("../compressions"),s=e("./ZipFileWorker");r.generateWorker=function(l,u,h){var c=new s(u.streamFiles,h,u.platform,u.encodeFileName),p=0;try{l.forEach(function(m,v){p++;var _=function(y,D){var A=y||D,P=o[A];if(!P)throw new Error(A+" is not a valid compression method !");return P}(v.options.compression,u.compression),C=v.options.compressionOptions||u.compressionOptions||{},x=v.dir,S=v.date;v._compressWorker(_,C).withStreamInfo("file",{name:m,dir:x,date:S,comment:v.comment||"",unixPermissions:v.unixPermissions,dosPermissions:v.dosPermissions}).pipe(c)}),c.entriesCount=p}catch(m){c.error(m)}return c}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(e,n,r){function o(){if(!(this instanceof o))return new o;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var s=new o;for(var l in this)typeof this[l]!="function"&&(s[l]=this[l]);return s}}(o.prototype=e("./object")).loadAsync=e("./load"),o.support=e("./support"),o.defaults=e("./defaults"),o.version="3.10.1",o.loadAsync=function(s,l){return new o().loadAsync(s,l)},o.external=e("./external"),n.exports=o},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(e,n,r){var o=e("./utils"),s=e("./external"),l=e("./utf8"),u=e("./zipEntries"),h=e("./stream/Crc32Probe"),c=e("./nodejsUtils");function p(m){return new s.Promise(function(v,_){var C=m.decompressed.getContentWorker().pipe(new h);C.on("error",function(x){_(x)}).on("end",function(){C.streamInfo.crc32!==m.decompressed.crc32?_(new Error("Corrupted zip : CRC32 mismatch")):v()}).resume()})}n.exports=function(m,v){var _=this;return v=o.extend(v||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:l.utf8decode}),c.isNode&&c.isStream(m)?s.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):o.prepareContent("the loaded zip file",m,!0,v.optimizedBinaryString,v.base64).then(function(C){var x=new u(v);return x.load(C),x}).then(function(C){var x=[s.Promise.resolve(C)],S=C.files;if(v.checkCRC32)for(var y=0;y<S.length;y++)x.push(p(S[y]));return s.Promise.all(x)}).then(function(C){for(var x=C.shift(),S=x.files,y=0;y<S.length;y++){var D=S[y],A=D.fileNameStr,P=o.resolve(D.fileNameStr);_.file(P,D.decompressed,{binary:!0,optimizedBinaryString:!0,date:D.date,dir:D.dir,comment:D.fileCommentStr.length?D.fileCommentStr:null,unixPermissions:D.unixPermissions,dosPermissions:D.dosPermissions,createFolders:v.createFolders}),D.dir||(_.file(P).unsafeOriginalName=A)}return x.zipComment.length&&(_.comment=x.zipComment),_})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(e,n,r){var o=e("../utils"),s=e("../stream/GenericWorker");function l(u,h){s.call(this,"Nodejs stream input adapter for "+u),this._upstreamEnded=!1,this._bindStream(h)}o.inherits(l,s),l.prototype._bindStream=function(u){var h=this;(this._stream=u).pause(),u.on("data",function(c){h.push({data:c,meta:{percent:0}})}).on("error",function(c){h.isPaused?this.generatedError=c:h.error(c)}).on("end",function(){h.isPaused?h._upstreamEnded=!0:h.end()})},l.prototype.pause=function(){return!!s.prototype.pause.call(this)&&(this._stream.pause(),!0)},l.prototype.resume=function(){return!!s.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},n.exports=l},{"../stream/GenericWorker":28,"../utils":32}],13:[function(e,n,r){var o=e("readable-stream").Readable;function s(l,u,h){o.call(this,u),this._helper=l;var c=this;l.on("data",function(p,m){c.push(p)||c._helper.pause(),h&&h(m)}).on("error",function(p){c.emit("error",p)}).on("end",function(){c.push(null)})}e("../utils").inherits(s,o),s.prototype._read=function(){this._helper.resume()},n.exports=s},{"../utils":32,"readable-stream":16}],14:[function(e,n,r){n.exports={isNode:typeof Buffer<"u",newBufferFrom:function(o,s){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(o,s);if(typeof o=="number")throw new Error('The "data" argument must not be a number');return new Buffer(o,s)},allocBuffer:function(o){if(Buffer.alloc)return Buffer.alloc(o);var s=new Buffer(o);return s.fill(0),s},isBuffer:function(o){return Buffer.isBuffer(o)},isStream:function(o){return o&&typeof o.on=="function"&&typeof o.pause=="function"&&typeof o.resume=="function"}}},{}],15:[function(e,n,r){function o(P,M,B){var Q,L=l.getTypeOf(M),le=l.extend(B||{},c);le.date=le.date||new Date,le.compression!==null&&(le.compression=le.compression.toUpperCase()),typeof le.unixPermissions=="string"&&(le.unixPermissions=parseInt(le.unixPermissions,8)),le.unixPermissions&&16384&le.unixPermissions&&(le.dir=!0),le.dosPermissions&&16&le.dosPermissions&&(le.dir=!0),le.dir&&(P=S(P)),le.createFolders&&(Q=x(P))&&y.call(this,Q,!0);var _e=L==="string"&&le.binary===!1&&le.base64===!1;B&&B.binary!==void 0||(le.binary=!_e),(M instanceof p&&M.uncompressedSize===0||le.dir||!M||M.length===0)&&(le.base64=!1,le.binary=!0,M="",le.compression="STORE",L="string");var J=null;J=M instanceof p||M instanceof u?M:_.isNode&&_.isStream(M)?new C(P,M):l.prepareContent(P,M,le.binary,le.optimizedBinaryString,le.base64);var z=new m(P,J,le);this.files[P]=z}var s=e("./utf8"),l=e("./utils"),u=e("./stream/GenericWorker"),h=e("./stream/StreamHelper"),c=e("./defaults"),p=e("./compressedObject"),m=e("./zipObject"),v=e("./generate"),_=e("./nodejsUtils"),C=e("./nodejs/NodejsStreamInputAdapter"),x=function(P){P.slice(-1)==="/"&&(P=P.substring(0,P.length-1));var M=P.lastIndexOf("/");return 0<M?P.substring(0,M):""},S=function(P){return P.slice(-1)!=="/"&&(P+="/"),P},y=function(P,M){return M=M!==void 0?M:c.createFolders,P=S(P),this.files[P]||o.call(this,P,null,{dir:!0,createFolders:M}),this.files[P]};function D(P){return Object.prototype.toString.call(P)==="[object RegExp]"}var A={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(P){var M,B,Q;for(M in this.files)Q=this.files[M],(B=M.slice(this.root.length,M.length))&&M.slice(0,this.root.length)===this.root&&P(B,Q)},filter:function(P){var M=[];return this.forEach(function(B,Q){P(B,Q)&&M.push(Q)}),M},file:function(P,M,B){if(arguments.length!==1)return P=this.root+P,o.call(this,P,M,B),this;if(D(P)){var Q=P;return this.filter(function(le,_e){return!_e.dir&&Q.test(le)})}var L=this.files[this.root+P];return L&&!L.dir?L:null},folder:function(P){if(!P)return this;if(D(P))return this.filter(function(L,le){return le.dir&&P.test(L)});var M=this.root+P,B=y.call(this,M),Q=this.clone();return Q.root=B.name,Q},remove:function(P){P=this.root+P;var M=this.files[P];if(M||(P.slice(-1)!=="/"&&(P+="/"),M=this.files[P]),M&&!M.dir)delete this.files[P];else for(var B=this.filter(function(L,le){return le.name.slice(0,P.length)===P}),Q=0;Q<B.length;Q++)delete this.files[B[Q].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(P){var M,B={};try{if((B=l.extend(P||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:s.utf8encode})).type=B.type.toLowerCase(),B.compression=B.compression.toUpperCase(),B.type==="binarystring"&&(B.type="string"),!B.type)throw new Error("No output type specified.");l.checkSupport(B.type),B.platform!=="darwin"&&B.platform!=="freebsd"&&B.platform!=="linux"&&B.platform!=="sunos"||(B.platform="UNIX"),B.platform==="win32"&&(B.platform="DOS");var Q=B.comment||this.comment||"";M=v.generateWorker(this,B,Q)}catch(L){(M=new u("error")).error(L)}return new h(M,B.type||"string",B.mimeType)},generateAsync:function(P,M){return this.generateInternalStream(P).accumulate(M)},generateNodeStream:function(P,M){return(P=P||{}).type||(P.type="nodebuffer"),this.generateInternalStream(P).toNodejsStream(M)}};n.exports=A},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(e,n,r){n.exports=e("stream")},{stream:void 0}],17:[function(e,n,r){var o=e("./DataReader");function s(l){o.call(this,l);for(var u=0;u<this.data.length;u++)l[u]=255&l[u]}e("../utils").inherits(s,o),s.prototype.byteAt=function(l){return this.data[this.zero+l]},s.prototype.lastIndexOfSignature=function(l){for(var u=l.charCodeAt(0),h=l.charCodeAt(1),c=l.charCodeAt(2),p=l.charCodeAt(3),m=this.length-4;0<=m;--m)if(this.data[m]===u&&this.data[m+1]===h&&this.data[m+2]===c&&this.data[m+3]===p)return m-this.zero;return-1},s.prototype.readAndCheckSignature=function(l){var u=l.charCodeAt(0),h=l.charCodeAt(1),c=l.charCodeAt(2),p=l.charCodeAt(3),m=this.readData(4);return u===m[0]&&h===m[1]&&c===m[2]&&p===m[3]},s.prototype.readData=function(l){if(this.checkOffset(l),l===0)return[];var u=this.data.slice(this.zero+this.index,this.zero+this.index+l);return this.index+=l,u},n.exports=s},{"../utils":32,"./DataReader":18}],18:[function(e,n,r){var o=e("../utils");function s(l){this.data=l,this.length=l.length,this.index=0,this.zero=0}s.prototype={checkOffset:function(l){this.checkIndex(this.index+l)},checkIndex:function(l){if(this.length<this.zero+l||l<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+l+"). Corrupted zip ?")},setIndex:function(l){this.checkIndex(l),this.index=l},skip:function(l){this.setIndex(this.index+l)},byteAt:function(){},readInt:function(l){var u,h=0;for(this.checkOffset(l),u=this.index+l-1;u>=this.index;u--)h=(h<<8)+this.byteAt(u);return this.index+=l,h},readString:function(l){return o.transformTo("string",this.readData(l))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var l=this.readInt(4);return new Date(Date.UTC(1980+(l>>25&127),(l>>21&15)-1,l>>16&31,l>>11&31,l>>5&63,(31&l)<<1))}},n.exports=s},{"../utils":32}],19:[function(e,n,r){var o=e("./Uint8ArrayReader");function s(l){o.call(this,l)}e("../utils").inherits(s,o),s.prototype.readData=function(l){this.checkOffset(l);var u=this.data.slice(this.zero+this.index,this.zero+this.index+l);return this.index+=l,u},n.exports=s},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(e,n,r){var o=e("./DataReader");function s(l){o.call(this,l)}e("../utils").inherits(s,o),s.prototype.byteAt=function(l){return this.data.charCodeAt(this.zero+l)},s.prototype.lastIndexOfSignature=function(l){return this.data.lastIndexOf(l)-this.zero},s.prototype.readAndCheckSignature=function(l){return l===this.readData(4)},s.prototype.readData=function(l){this.checkOffset(l);var u=this.data.slice(this.zero+this.index,this.zero+this.index+l);return this.index+=l,u},n.exports=s},{"../utils":32,"./DataReader":18}],21:[function(e,n,r){var o=e("./ArrayReader");function s(l){o.call(this,l)}e("../utils").inherits(s,o),s.prototype.readData=function(l){if(this.checkOffset(l),l===0)return new Uint8Array(0);var u=this.data.subarray(this.zero+this.index,this.zero+this.index+l);return this.index+=l,u},n.exports=s},{"../utils":32,"./ArrayReader":17}],22:[function(e,n,r){var o=e("../utils"),s=e("../support"),l=e("./ArrayReader"),u=e("./StringReader"),h=e("./NodeBufferReader"),c=e("./Uint8ArrayReader");n.exports=function(p){var m=o.getTypeOf(p);return o.checkSupport(m),m!=="string"||s.uint8array?m==="nodebuffer"?new h(p):s.uint8array?new c(o.transformTo("uint8array",p)):new l(o.transformTo("array",p)):new u(p)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(e,n,r){r.LOCAL_FILE_HEADER="PK",r.CENTRAL_FILE_HEADER="PK",r.CENTRAL_DIRECTORY_END="PK",r.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",r.ZIP64_CENTRAL_DIRECTORY_END="PK",r.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(e,n,r){var o=e("./GenericWorker"),s=e("../utils");function l(u){o.call(this,"ConvertWorker to "+u),this.destType=u}s.inherits(l,o),l.prototype.processChunk=function(u){this.push({data:s.transformTo(this.destType,u.data),meta:u.meta})},n.exports=l},{"../utils":32,"./GenericWorker":28}],25:[function(e,n,r){var o=e("./GenericWorker"),s=e("../crc32");function l(){o.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}e("../utils").inherits(l,o),l.prototype.processChunk=function(u){this.streamInfo.crc32=s(u.data,this.streamInfo.crc32||0),this.push(u)},n.exports=l},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(e,n,r){var o=e("../utils"),s=e("./GenericWorker");function l(u){s.call(this,"DataLengthProbe for "+u),this.propName=u,this.withStreamInfo(u,0)}o.inherits(l,s),l.prototype.processChunk=function(u){if(u){var h=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=h+u.data.length}s.prototype.processChunk.call(this,u)},n.exports=l},{"../utils":32,"./GenericWorker":28}],27:[function(e,n,r){var o=e("../utils"),s=e("./GenericWorker");function l(u){s.call(this,"DataWorker");var h=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,u.then(function(c){h.dataIsReady=!0,h.data=c,h.max=c&&c.length||0,h.type=o.getTypeOf(c),h.isPaused||h._tickAndRepeat()},function(c){h.error(c)})}o.inherits(l,s),l.prototype.cleanUp=function(){s.prototype.cleanUp.call(this),this.data=null},l.prototype.resume=function(){return!!s.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,o.delay(this._tickAndRepeat,[],this)),!0)},l.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(o.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},l.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var u=null,h=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":u=this.data.substring(this.index,h);break;case"uint8array":u=this.data.subarray(this.index,h);break;case"array":case"nodebuffer":u=this.data.slice(this.index,h)}return this.index=h,this.push({data:u,meta:{percent:this.max?this.index/this.max*100:0}})},n.exports=l},{"../utils":32,"./GenericWorker":28}],28:[function(e,n,r){function o(s){this.name=s||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}o.prototype={push:function(s){this.emit("data",s)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(s){this.emit("error",s)}return!0},error:function(s){return!this.isFinished&&(this.isPaused?this.generatedError=s:(this.isFinished=!0,this.emit("error",s),this.previous&&this.previous.error(s),this.cleanUp()),!0)},on:function(s,l){return this._listeners[s].push(l),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(s,l){if(this._listeners[s])for(var u=0;u<this._listeners[s].length;u++)this._listeners[s][u].call(this,l)},pipe:function(s){return s.registerPrevious(this)},registerPrevious:function(s){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=s.streamInfo,this.mergeStreamInfo(),this.previous=s;var l=this;return s.on("data",function(u){l.processChunk(u)}),s.on("end",function(){l.end()}),s.on("error",function(u){l.error(u)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var s=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),s=!0),this.previous&&this.previous.resume(),!s},flush:function(){},processChunk:function(s){this.push(s)},withStreamInfo:function(s,l){return this.extraStreamInfo[s]=l,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var s in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,s)&&(this.streamInfo[s]=this.extraStreamInfo[s])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var s="Worker "+this.name;return this.previous?this.previous+" -> "+s:s}},n.exports=o},{}],29:[function(e,n,r){var o=e("../utils"),s=e("./ConvertWorker"),l=e("./GenericWorker"),u=e("../base64"),h=e("../support"),c=e("../external"),p=null;if(h.nodestream)try{p=e("../nodejs/NodejsStreamOutputAdapter")}catch{}function m(_,C){return new c.Promise(function(x,S){var y=[],D=_._internalType,A=_._outputType,P=_._mimeType;_.on("data",function(M,B){y.push(M),C&&C(B)}).on("error",function(M){y=[],S(M)}).on("end",function(){try{var M=function(B,Q,L){switch(B){case"blob":return o.newBlob(o.transformTo("arraybuffer",Q),L);case"base64":return u.encode(Q);default:return o.transformTo(B,Q)}}(A,function(B,Q){var L,le=0,_e=null,J=0;for(L=0;L<Q.length;L++)J+=Q[L].length;switch(B){case"string":return Q.join("");case"array":return Array.prototype.concat.apply([],Q);case"uint8array":for(_e=new Uint8Array(J),L=0;L<Q.length;L++)_e.set(Q[L],le),le+=Q[L].length;return _e;case"nodebuffer":return Buffer.concat(Q);default:throw new Error("concat : unsupported type '"+B+"'")}}(D,y),P);x(M)}catch(B){S(B)}y=[]}).resume()})}function v(_,C,x){var S=C;switch(C){case"blob":case"arraybuffer":S="uint8array";break;case"base64":S="string"}try{this._internalType=S,this._outputType=C,this._mimeType=x,o.checkSupport(S),this._worker=_.pipe(new s(S)),_.lock()}catch(y){this._worker=new l("error"),this._worker.error(y)}}v.prototype={accumulate:function(_){return m(this,_)},on:function(_,C){var x=this;return _==="data"?this._worker.on(_,function(S){C.call(x,S.data,S.meta)}):this._worker.on(_,function(){o.delay(C,arguments,x)}),this},resume:function(){return o.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(_){if(o.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new p(this,{objectMode:this._outputType!=="nodebuffer"},_)}},n.exports=v},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(e,n,r){if(r.base64=!0,r.array=!0,r.string=!0,r.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",r.nodebuffer=typeof Buffer<"u",r.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")r.blob=!1;else{var o=new ArrayBuffer(0);try{r.blob=new Blob([o],{type:"application/zip"}).size===0}catch{try{var s=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);s.append(o),r.blob=s.getBlob("application/zip").size===0}catch{r.blob=!1}}}try{r.nodestream=!!e("readable-stream").Readable}catch{r.nodestream=!1}},{"readable-stream":16}],31:[function(e,n,r){for(var o=e("./utils"),s=e("./support"),l=e("./nodejsUtils"),u=e("./stream/GenericWorker"),h=new Array(256),c=0;c<256;c++)h[c]=252<=c?6:248<=c?5:240<=c?4:224<=c?3:192<=c?2:1;h[254]=h[254]=1;function p(){u.call(this,"utf-8 decode"),this.leftOver=null}function m(){u.call(this,"utf-8 encode")}r.utf8encode=function(v){return s.nodebuffer?l.newBufferFrom(v,"utf-8"):function(_){var C,x,S,y,D,A=_.length,P=0;for(y=0;y<A;y++)(64512&(x=_.charCodeAt(y)))==55296&&y+1<A&&(64512&(S=_.charCodeAt(y+1)))==56320&&(x=65536+(x-55296<<10)+(S-56320),y++),P+=x<128?1:x<2048?2:x<65536?3:4;for(C=s.uint8array?new Uint8Array(P):new Array(P),y=D=0;D<P;y++)(64512&(x=_.charCodeAt(y)))==55296&&y+1<A&&(64512&(S=_.charCodeAt(y+1)))==56320&&(x=65536+(x-55296<<10)+(S-56320),y++),x<128?C[D++]=x:(x<2048?C[D++]=192|x>>>6:(x<65536?C[D++]=224|x>>>12:(C[D++]=240|x>>>18,C[D++]=128|x>>>12&63),C[D++]=128|x>>>6&63),C[D++]=128|63&x);return C}(v)},r.utf8decode=function(v){return s.nodebuffer?o.transformTo("nodebuffer",v).toString("utf-8"):function(_){var C,x,S,y,D=_.length,A=new Array(2*D);for(C=x=0;C<D;)if((S=_[C++])<128)A[x++]=S;else if(4<(y=h[S]))A[x++]=65533,C+=y-1;else{for(S&=y===2?31:y===3?15:7;1<y&&C<D;)S=S<<6|63&_[C++],y--;1<y?A[x++]=65533:S<65536?A[x++]=S:(S-=65536,A[x++]=55296|S>>10&1023,A[x++]=56320|1023&S)}return A.length!==x&&(A.subarray?A=A.subarray(0,x):A.length=x),o.applyFromCharCode(A)}(v=o.transformTo(s.uint8array?"uint8array":"array",v))},o.inherits(p,u),p.prototype.processChunk=function(v){var _=o.transformTo(s.uint8array?"uint8array":"array",v.data);if(this.leftOver&&this.leftOver.length){if(s.uint8array){var C=_;(_=new Uint8Array(C.length+this.leftOver.length)).set(this.leftOver,0),_.set(C,this.leftOver.length)}else _=this.leftOver.concat(_);this.leftOver=null}var x=function(y,D){var A;for((D=D||y.length)>y.length&&(D=y.length),A=D-1;0<=A&&(192&y[A])==128;)A--;return A<0||A===0?D:A+h[y[A]]>D?A:D}(_),S=_;x!==_.length&&(s.uint8array?(S=_.subarray(0,x),this.leftOver=_.subarray(x,_.length)):(S=_.slice(0,x),this.leftOver=_.slice(x,_.length))),this.push({data:r.utf8decode(S),meta:v.meta})},p.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:r.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},r.Utf8DecodeWorker=p,o.inherits(m,u),m.prototype.processChunk=function(v){this.push({data:r.utf8encode(v.data),meta:v.meta})},r.Utf8EncodeWorker=m},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(e,n,r){var o=e("./support"),s=e("./base64"),l=e("./nodejsUtils"),u=e("./external");function h(C){return C}function c(C,x){for(var S=0;S<C.length;++S)x[S]=255&C.charCodeAt(S);return x}e("setimmediate"),r.newBlob=function(C,x){r.checkSupport("blob");try{return new Blob([C],{type:x})}catch{try{var S=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return S.append(C),S.getBlob(x)}catch{throw new Error("Bug : can't construct the Blob.")}}};var p={stringifyByChunk:function(C,x,S){var y=[],D=0,A=C.length;if(A<=S)return String.fromCharCode.apply(null,C);for(;D<A;)x==="array"||x==="nodebuffer"?y.push(String.fromCharCode.apply(null,C.slice(D,Math.min(D+S,A)))):y.push(String.fromCharCode.apply(null,C.subarray(D,Math.min(D+S,A)))),D+=S;return y.join("")},stringifyByChar:function(C){for(var x="",S=0;S<C.length;S++)x+=String.fromCharCode(C[S]);return x},applyCanBeUsed:{uint8array:function(){try{return o.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return o.nodebuffer&&String.fromCharCode.apply(null,l.allocBuffer(1)).length===1}catch{return!1}}()}};function m(C){var x=65536,S=r.getTypeOf(C),y=!0;if(S==="uint8array"?y=p.applyCanBeUsed.uint8array:S==="nodebuffer"&&(y=p.applyCanBeUsed.nodebuffer),y)for(;1<x;)try{return p.stringifyByChunk(C,S,x)}catch{x=Math.floor(x/2)}return p.stringifyByChar(C)}function v(C,x){for(var S=0;S<C.length;S++)x[S]=C[S];return x}r.applyFromCharCode=m;var _={};_.string={string:h,array:function(C){return c(C,new Array(C.length))},arraybuffer:function(C){return _.string.uint8array(C).buffer},uint8array:function(C){return c(C,new Uint8Array(C.length))},nodebuffer:function(C){return c(C,l.allocBuffer(C.length))}},_.array={string:m,array:h,arraybuffer:function(C){return new Uint8Array(C).buffer},uint8array:function(C){return new Uint8Array(C)},nodebuffer:function(C){return l.newBufferFrom(C)}},_.arraybuffer={string:function(C){return m(new Uint8Array(C))},array:function(C){return v(new Uint8Array(C),new Array(C.byteLength))},arraybuffer:h,uint8array:function(C){return new Uint8Array(C)},nodebuffer:function(C){return l.newBufferFrom(new Uint8Array(C))}},_.uint8array={string:m,array:function(C){return v(C,new Array(C.length))},arraybuffer:function(C){return C.buffer},uint8array:h,nodebuffer:function(C){return l.newBufferFrom(C)}},_.nodebuffer={string:m,array:function(C){return v(C,new Array(C.length))},arraybuffer:function(C){return _.nodebuffer.uint8array(C).buffer},uint8array:function(C){return v(C,new Uint8Array(C.length))},nodebuffer:h},r.transformTo=function(C,x){if(x=x||"",!C)return x;r.checkSupport(C);var S=r.getTypeOf(x);return _[S][C](x)},r.resolve=function(C){for(var x=C.split("/"),S=[],y=0;y<x.length;y++){var D=x[y];D==="."||D===""&&y!==0&&y!==x.length-1||(D===".."?S.pop():S.push(D))}return S.join("/")},r.getTypeOf=function(C){return typeof C=="string"?"string":Object.prototype.toString.call(C)==="[object Array]"?"array":o.nodebuffer&&l.isBuffer(C)?"nodebuffer":o.uint8array&&C instanceof Uint8Array?"uint8array":o.arraybuffer&&C instanceof ArrayBuffer?"arraybuffer":void 0},r.checkSupport=function(C){if(!o[C.toLowerCase()])throw new Error(C+" is not supported by this platform")},r.MAX_VALUE_16BITS=65535,r.MAX_VALUE_32BITS=-1,r.pretty=function(C){var x,S,y="";for(S=0;S<(C||"").length;S++)y+="\\x"+((x=C.charCodeAt(S))<16?"0":"")+x.toString(16).toUpperCase();return y},r.delay=function(C,x,S){setImmediate(function(){C.apply(S||null,x||[])})},r.inherits=function(C,x){function S(){}S.prototype=x.prototype,C.prototype=new S},r.extend=function(){var C,x,S={};for(C=0;C<arguments.length;C++)for(x in arguments[C])Object.prototype.hasOwnProperty.call(arguments[C],x)&&S[x]===void 0&&(S[x]=arguments[C][x]);return S},r.prepareContent=function(C,x,S,y,D){return u.Promise.resolve(x).then(function(A){return o.blob&&(A instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(A))!==-1)&&typeof FileReader<"u"?new u.Promise(function(P,M){var B=new FileReader;B.onload=function(Q){P(Q.target.result)},B.onerror=function(Q){M(Q.target.error)},B.readAsArrayBuffer(A)}):A}).then(function(A){var P=r.getTypeOf(A);return P?(P==="arraybuffer"?A=r.transformTo("uint8array",A):P==="string"&&(D?A=s.decode(A):S&&y!==!0&&(A=function(M){return c(M,o.uint8array?new Uint8Array(M.length):new Array(M.length))}(A))),A):u.Promise.reject(new Error("Can't read the data of '"+C+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(e,n,r){var o=e("./reader/readerFor"),s=e("./utils"),l=e("./signature"),u=e("./zipEntry"),h=e("./support");function c(p){this.files=[],this.loadOptions=p}c.prototype={checkSignature:function(p){if(!this.reader.readAndCheckSignature(p)){this.reader.index-=4;var m=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+s.pretty(m)+", expected "+s.pretty(p)+")")}},isSignature:function(p,m){var v=this.reader.index;this.reader.setIndex(p);var _=this.reader.readString(4)===m;return this.reader.setIndex(v),_},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var p=this.reader.readData(this.zipCommentLength),m=h.uint8array?"uint8array":"array",v=s.transformTo(m,p);this.zipComment=this.loadOptions.decodeFileName(v)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var p,m,v,_=this.zip64EndOfCentralSize-44;0<_;)p=this.reader.readInt(2),m=this.reader.readInt(4),v=this.reader.readData(m),this.zip64ExtensibleData[p]={id:p,length:m,value:v}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var p,m;for(p=0;p<this.files.length;p++)m=this.files[p],this.reader.setIndex(m.localHeaderOffset),this.checkSignature(l.LOCAL_FILE_HEADER),m.readLocalPart(this.reader),m.handleUTF8(),m.processAttributes()},readCentralDir:function(){var p;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(l.CENTRAL_FILE_HEADER);)(p=new u({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(p);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var p=this.reader.lastIndexOfSignature(l.CENTRAL_DIRECTORY_END);if(p<0)throw this.isSignature(0,l.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(p);var m=p;if(this.checkSignature(l.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===s.MAX_VALUE_16BITS||this.diskWithCentralDirStart===s.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===s.MAX_VALUE_16BITS||this.centralDirRecords===s.MAX_VALUE_16BITS||this.centralDirSize===s.MAX_VALUE_32BITS||this.centralDirOffset===s.MAX_VALUE_32BITS){if(this.zip64=!0,(p=this.reader.lastIndexOfSignature(l.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(p),this.checkSignature(l.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,l.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(l.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(l.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var v=this.centralDirOffset+this.centralDirSize;this.zip64&&(v+=20,v+=12+this.zip64EndOfCentralSize);var _=m-v;if(0<_)this.isSignature(m,l.CENTRAL_FILE_HEADER)||(this.reader.zero=_);else if(_<0)throw new Error("Corrupted zip: missing "+Math.abs(_)+" bytes.")},prepareReader:function(p){this.reader=o(p)},load:function(p){this.prepareReader(p),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},n.exports=c},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(e,n,r){var o=e("./reader/readerFor"),s=e("./utils"),l=e("./compressedObject"),u=e("./crc32"),h=e("./utf8"),c=e("./compressions"),p=e("./support");function m(v,_){this.options=v,this.loadOptions=_}m.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(v){var _,C;if(v.skip(22),this.fileNameLength=v.readInt(2),C=v.readInt(2),this.fileName=v.readData(this.fileNameLength),v.skip(C),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((_=function(x){for(var S in c)if(Object.prototype.hasOwnProperty.call(c,S)&&c[S].magic===x)return c[S];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+s.pretty(this.compressionMethod)+" unknown (inner file : "+s.transformTo("string",this.fileName)+")");this.decompressed=new l(this.compressedSize,this.uncompressedSize,this.crc32,_,v.readData(this.compressedSize))},readCentralPart:function(v){this.versionMadeBy=v.readInt(2),v.skip(2),this.bitFlag=v.readInt(2),this.compressionMethod=v.readString(2),this.date=v.readDate(),this.crc32=v.readInt(4),this.compressedSize=v.readInt(4),this.uncompressedSize=v.readInt(4);var _=v.readInt(2);if(this.extraFieldsLength=v.readInt(2),this.fileCommentLength=v.readInt(2),this.diskNumberStart=v.readInt(2),this.internalFileAttributes=v.readInt(2),this.externalFileAttributes=v.readInt(4),this.localHeaderOffset=v.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");v.skip(_),this.readExtraFields(v),this.parseZIP64ExtraField(v),this.fileComment=v.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var v=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),v==0&&(this.dosPermissions=63&this.externalFileAttributes),v==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var v=o(this.extraFields[1].value);this.uncompressedSize===s.MAX_VALUE_32BITS&&(this.uncompressedSize=v.readInt(8)),this.compressedSize===s.MAX_VALUE_32BITS&&(this.compressedSize=v.readInt(8)),this.localHeaderOffset===s.MAX_VALUE_32BITS&&(this.localHeaderOffset=v.readInt(8)),this.diskNumberStart===s.MAX_VALUE_32BITS&&(this.diskNumberStart=v.readInt(4))}},readExtraFields:function(v){var _,C,x,S=v.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});v.index+4<S;)_=v.readInt(2),C=v.readInt(2),x=v.readData(C),this.extraFields[_]={id:_,length:C,value:x};v.setIndex(S)},handleUTF8:function(){var v=p.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=h.utf8decode(this.fileName),this.fileCommentStr=h.utf8decode(this.fileComment);else{var _=this.findExtraFieldUnicodePath();if(_!==null)this.fileNameStr=_;else{var C=s.transformTo(v,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(C)}var x=this.findExtraFieldUnicodeComment();if(x!==null)this.fileCommentStr=x;else{var S=s.transformTo(v,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(S)}}},findExtraFieldUnicodePath:function(){var v=this.extraFields[28789];if(v){var _=o(v.value);return _.readInt(1)!==1||u(this.fileName)!==_.readInt(4)?null:h.utf8decode(_.readData(v.length-5))}return null},findExtraFieldUnicodeComment:function(){var v=this.extraFields[25461];if(v){var _=o(v.value);return _.readInt(1)!==1||u(this.fileComment)!==_.readInt(4)?null:h.utf8decode(_.readData(v.length-5))}return null}},n.exports=m},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(e,n,r){function o(_,C,x){this.name=_,this.dir=x.dir,this.date=x.date,this.comment=x.comment,this.unixPermissions=x.unixPermissions,this.dosPermissions=x.dosPermissions,this._data=C,this._dataBinary=x.binary,this.options={compression:x.compression,compressionOptions:x.compressionOptions}}var s=e("./stream/StreamHelper"),l=e("./stream/DataWorker"),u=e("./utf8"),h=e("./compressedObject"),c=e("./stream/GenericWorker");o.prototype={internalStream:function(_){var C=null,x="string";try{if(!_)throw new Error("No output type specified.");var S=(x=_.toLowerCase())==="string"||x==="text";x!=="binarystring"&&x!=="text"||(x="string"),C=this._decompressWorker();var y=!this._dataBinary;y&&!S&&(C=C.pipe(new u.Utf8EncodeWorker)),!y&&S&&(C=C.pipe(new u.Utf8DecodeWorker))}catch(D){(C=new c("error")).error(D)}return new s(C,x,"")},async:function(_,C){return this.internalStream(_).accumulate(C)},nodeStream:function(_,C){return this.internalStream(_||"nodebuffer").toNodejsStream(C)},_compressWorker:function(_,C){if(this._data instanceof h&&this._data.compression.magic===_.magic)return this._data.getCompressedWorker();var x=this._decompressWorker();return this._dataBinary||(x=x.pipe(new u.Utf8EncodeWorker)),h.createWorkerFrom(x,_,C)},_decompressWorker:function(){return this._data instanceof h?this._data.getContentWorker():this._data instanceof c?this._data:new l(this._data)}};for(var p=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],m=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},v=0;v<p.length;v++)o.prototype[p[v]]=m;n.exports=o},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(e,n,r){(function(o){var s,l,u=o.MutationObserver||o.WebKitMutationObserver;if(u){var h=0,c=new u(_),p=o.document.createTextNode("");c.observe(p,{characterData:!0}),s=function(){p.data=h=++h%2}}else if(o.setImmediate||o.MessageChannel===void 0)s="document"in o&&"onreadystatechange"in o.document.createElement("script")?function(){var C=o.document.createElement("script");C.onreadystatechange=function(){_(),C.onreadystatechange=null,C.parentNode.removeChild(C),C=null},o.document.documentElement.appendChild(C)}:function(){setTimeout(_,0)};else{var m=new o.MessageChannel;m.port1.onmessage=_,s=function(){m.port2.postMessage(0)}}var v=[];function _(){var C,x;l=!0;for(var S=v.length;S;){for(x=v,v=[],C=-1;++C<S;)x[C]();S=v.length}l=!1}n.exports=function(C){v.push(C)!==1||l||s()}}).call(this,typeof Pr<"u"?Pr:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(e,n,r){var o=e("immediate");function s(){}var l={},u=["REJECTED"],h=["FULFILLED"],c=["PENDING"];function p(S){if(typeof S!="function")throw new TypeError("resolver must be a function");this.state=c,this.queue=[],this.outcome=void 0,S!==s&&C(this,S)}function m(S,y,D){this.promise=S,typeof y=="function"&&(this.onFulfilled=y,this.callFulfilled=this.otherCallFulfilled),typeof D=="function"&&(this.onRejected=D,this.callRejected=this.otherCallRejected)}function v(S,y,D){o(function(){var A;try{A=y(D)}catch(P){return l.reject(S,P)}A===S?l.reject(S,new TypeError("Cannot resolve promise with itself")):l.resolve(S,A)})}function _(S){var y=S&&S.then;if(S&&(typeof S=="object"||typeof S=="function")&&typeof y=="function")return function(){y.apply(S,arguments)}}function C(S,y){var D=!1;function A(B){D||(D=!0,l.reject(S,B))}function P(B){D||(D=!0,l.resolve(S,B))}var M=x(function(){y(P,A)});M.status==="error"&&A(M.value)}function x(S,y){var D={};try{D.value=S(y),D.status="success"}catch(A){D.status="error",D.value=A}return D}(n.exports=p).prototype.finally=function(S){if(typeof S!="function")return this;var y=this.constructor;return this.then(function(D){return y.resolve(S()).then(function(){return D})},function(D){return y.resolve(S()).then(function(){throw D})})},p.prototype.catch=function(S){return this.then(null,S)},p.prototype.then=function(S,y){if(typeof S!="function"&&this.state===h||typeof y!="function"&&this.state===u)return this;var D=new this.constructor(s);return this.state!==c?v(D,this.state===h?S:y,this.outcome):this.queue.push(new m(D,S,y)),D},m.prototype.callFulfilled=function(S){l.resolve(this.promise,S)},m.prototype.otherCallFulfilled=function(S){v(this.promise,this.onFulfilled,S)},m.prototype.callRejected=function(S){l.reject(this.promise,S)},m.prototype.otherCallRejected=function(S){v(this.promise,this.onRejected,S)},l.resolve=function(S,y){var D=x(_,y);if(D.status==="error")return l.reject(S,D.value);var A=D.value;if(A)C(S,A);else{S.state=h,S.outcome=y;for(var P=-1,M=S.queue.length;++P<M;)S.queue[P].callFulfilled(y)}return S},l.reject=function(S,y){S.state=u,S.outcome=y;for(var D=-1,A=S.queue.length;++D<A;)S.queue[D].callRejected(y);return S},p.resolve=function(S){return S instanceof this?S:l.resolve(new this(s),S)},p.reject=function(S){var y=new this(s);return l.reject(y,S)},p.all=function(S){var y=this;if(Object.prototype.toString.call(S)!=="[object Array]")return this.reject(new TypeError("must be an array"));var D=S.length,A=!1;if(!D)return this.resolve([]);for(var P=new Array(D),M=0,B=-1,Q=new this(s);++B<D;)L(S[B],B);return Q;function L(le,_e){y.resolve(le).then(function(J){P[_e]=J,++M!==D||A||(A=!0,l.resolve(Q,P))},function(J){A||(A=!0,l.reject(Q,J))})}},p.race=function(S){var y=this;if(Object.prototype.toString.call(S)!=="[object Array]")return this.reject(new TypeError("must be an array"));var D=S.length,A=!1;if(!D)return this.resolve([]);for(var P=-1,M=new this(s);++P<D;)B=S[P],y.resolve(B).then(function(Q){A||(A=!0,l.resolve(M,Q))},function(Q){A||(A=!0,l.reject(M,Q))});var B;return M}},{immediate:36}],38:[function(e,n,r){var o={};(0,e("./lib/utils/common").assign)(o,e("./lib/deflate"),e("./lib/inflate"),e("./lib/zlib/constants")),n.exports=o},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(e,n,r){var o=e("./zlib/deflate"),s=e("./utils/common"),l=e("./utils/strings"),u=e("./zlib/messages"),h=e("./zlib/zstream"),c=Object.prototype.toString,p=0,m=-1,v=0,_=8;function C(S){if(!(this instanceof C))return new C(S);this.options=s.assign({level:m,method:_,chunkSize:16384,windowBits:15,memLevel:8,strategy:v,to:""},S||{});var y=this.options;y.raw&&0<y.windowBits?y.windowBits=-y.windowBits:y.gzip&&0<y.windowBits&&y.windowBits<16&&(y.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new h,this.strm.avail_out=0;var D=o.deflateInit2(this.strm,y.level,y.method,y.windowBits,y.memLevel,y.strategy);if(D!==p)throw new Error(u[D]);if(y.header&&o.deflateSetHeader(this.strm,y.header),y.dictionary){var A;if(A=typeof y.dictionary=="string"?l.string2buf(y.dictionary):c.call(y.dictionary)==="[object ArrayBuffer]"?new Uint8Array(y.dictionary):y.dictionary,(D=o.deflateSetDictionary(this.strm,A))!==p)throw new Error(u[D]);this._dict_set=!0}}function x(S,y){var D=new C(y);if(D.push(S,!0),D.err)throw D.msg||u[D.err];return D.result}C.prototype.push=function(S,y){var D,A,P=this.strm,M=this.options.chunkSize;if(this.ended)return!1;A=y===~~y?y:y===!0?4:0,typeof S=="string"?P.input=l.string2buf(S):c.call(S)==="[object ArrayBuffer]"?P.input=new Uint8Array(S):P.input=S,P.next_in=0,P.avail_in=P.input.length;do{if(P.avail_out===0&&(P.output=new s.Buf8(M),P.next_out=0,P.avail_out=M),(D=o.deflate(P,A))!==1&&D!==p)return this.onEnd(D),!(this.ended=!0);P.avail_out!==0&&(P.avail_in!==0||A!==4&&A!==2)||(this.options.to==="string"?this.onData(l.buf2binstring(s.shrinkBuf(P.output,P.next_out))):this.onData(s.shrinkBuf(P.output,P.next_out)))}while((0<P.avail_in||P.avail_out===0)&&D!==1);return A===4?(D=o.deflateEnd(this.strm),this.onEnd(D),this.ended=!0,D===p):A!==2||(this.onEnd(p),!(P.avail_out=0))},C.prototype.onData=function(S){this.chunks.push(S)},C.prototype.onEnd=function(S){S===p&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=s.flattenChunks(this.chunks)),this.chunks=[],this.err=S,this.msg=this.strm.msg},r.Deflate=C,r.deflate=x,r.deflateRaw=function(S,y){return(y=y||{}).raw=!0,x(S,y)},r.gzip=function(S,y){return(y=y||{}).gzip=!0,x(S,y)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(e,n,r){var o=e("./zlib/inflate"),s=e("./utils/common"),l=e("./utils/strings"),u=e("./zlib/constants"),h=e("./zlib/messages"),c=e("./zlib/zstream"),p=e("./zlib/gzheader"),m=Object.prototype.toString;function v(C){if(!(this instanceof v))return new v(C);this.options=s.assign({chunkSize:16384,windowBits:0,to:""},C||{});var x=this.options;x.raw&&0<=x.windowBits&&x.windowBits<16&&(x.windowBits=-x.windowBits,x.windowBits===0&&(x.windowBits=-15)),!(0<=x.windowBits&&x.windowBits<16)||C&&C.windowBits||(x.windowBits+=32),15<x.windowBits&&x.windowBits<48&&!(15&x.windowBits)&&(x.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new c,this.strm.avail_out=0;var S=o.inflateInit2(this.strm,x.windowBits);if(S!==u.Z_OK)throw new Error(h[S]);this.header=new p,o.inflateGetHeader(this.strm,this.header)}function _(C,x){var S=new v(x);if(S.push(C,!0),S.err)throw S.msg||h[S.err];return S.result}v.prototype.push=function(C,x){var S,y,D,A,P,M,B=this.strm,Q=this.options.chunkSize,L=this.options.dictionary,le=!1;if(this.ended)return!1;y=x===~~x?x:x===!0?u.Z_FINISH:u.Z_NO_FLUSH,typeof C=="string"?B.input=l.binstring2buf(C):m.call(C)==="[object ArrayBuffer]"?B.input=new Uint8Array(C):B.input=C,B.next_in=0,B.avail_in=B.input.length;do{if(B.avail_out===0&&(B.output=new s.Buf8(Q),B.next_out=0,B.avail_out=Q),(S=o.inflate(B,u.Z_NO_FLUSH))===u.Z_NEED_DICT&&L&&(M=typeof L=="string"?l.string2buf(L):m.call(L)==="[object ArrayBuffer]"?new Uint8Array(L):L,S=o.inflateSetDictionary(this.strm,M)),S===u.Z_BUF_ERROR&&le===!0&&(S=u.Z_OK,le=!1),S!==u.Z_STREAM_END&&S!==u.Z_OK)return this.onEnd(S),!(this.ended=!0);B.next_out&&(B.avail_out!==0&&S!==u.Z_STREAM_END&&(B.avail_in!==0||y!==u.Z_FINISH&&y!==u.Z_SYNC_FLUSH)||(this.options.to==="string"?(D=l.utf8border(B.output,B.next_out),A=B.next_out-D,P=l.buf2string(B.output,D),B.next_out=A,B.avail_out=Q-A,A&&s.arraySet(B.output,B.output,D,A,0),this.onData(P)):this.onData(s.shrinkBuf(B.output,B.next_out)))),B.avail_in===0&&B.avail_out===0&&(le=!0)}while((0<B.avail_in||B.avail_out===0)&&S!==u.Z_STREAM_END);return S===u.Z_STREAM_END&&(y=u.Z_FINISH),y===u.Z_FINISH?(S=o.inflateEnd(this.strm),this.onEnd(S),this.ended=!0,S===u.Z_OK):y!==u.Z_SYNC_FLUSH||(this.onEnd(u.Z_OK),!(B.avail_out=0))},v.prototype.onData=function(C){this.chunks.push(C)},v.prototype.onEnd=function(C){C===u.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=s.flattenChunks(this.chunks)),this.chunks=[],this.err=C,this.msg=this.strm.msg},r.Inflate=v,r.inflate=_,r.inflateRaw=function(C,x){return(x=x||{}).raw=!0,_(C,x)},r.ungzip=_},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(e,n,r){var o=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";r.assign=function(u){for(var h=Array.prototype.slice.call(arguments,1);h.length;){var c=h.shift();if(c){if(typeof c!="object")throw new TypeError(c+"must be non-object");for(var p in c)c.hasOwnProperty(p)&&(u[p]=c[p])}}return u},r.shrinkBuf=function(u,h){return u.length===h?u:u.subarray?u.subarray(0,h):(u.length=h,u)};var s={arraySet:function(u,h,c,p,m){if(h.subarray&&u.subarray)u.set(h.subarray(c,c+p),m);else for(var v=0;v<p;v++)u[m+v]=h[c+v]},flattenChunks:function(u){var h,c,p,m,v,_;for(h=p=0,c=u.length;h<c;h++)p+=u[h].length;for(_=new Uint8Array(p),h=m=0,c=u.length;h<c;h++)v=u[h],_.set(v,m),m+=v.length;return _}},l={arraySet:function(u,h,c,p,m){for(var v=0;v<p;v++)u[m+v]=h[c+v]},flattenChunks:function(u){return[].concat.apply([],u)}};r.setTyped=function(u){u?(r.Buf8=Uint8Array,r.Buf16=Uint16Array,r.Buf32=Int32Array,r.assign(r,s)):(r.Buf8=Array,r.Buf16=Array,r.Buf32=Array,r.assign(r,l))},r.setTyped(o)},{}],42:[function(e,n,r){var o=e("./common"),s=!0,l=!0;try{String.fromCharCode.apply(null,[0])}catch{s=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{l=!1}for(var u=new o.Buf8(256),h=0;h<256;h++)u[h]=252<=h?6:248<=h?5:240<=h?4:224<=h?3:192<=h?2:1;function c(p,m){if(m<65537&&(p.subarray&&l||!p.subarray&&s))return String.fromCharCode.apply(null,o.shrinkBuf(p,m));for(var v="",_=0;_<m;_++)v+=String.fromCharCode(p[_]);return v}u[254]=u[254]=1,r.string2buf=function(p){var m,v,_,C,x,S=p.length,y=0;for(C=0;C<S;C++)(64512&(v=p.charCodeAt(C)))==55296&&C+1<S&&(64512&(_=p.charCodeAt(C+1)))==56320&&(v=65536+(v-55296<<10)+(_-56320),C++),y+=v<128?1:v<2048?2:v<65536?3:4;for(m=new o.Buf8(y),C=x=0;x<y;C++)(64512&(v=p.charCodeAt(C)))==55296&&C+1<S&&(64512&(_=p.charCodeAt(C+1)))==56320&&(v=65536+(v-55296<<10)+(_-56320),C++),v<128?m[x++]=v:(v<2048?m[x++]=192|v>>>6:(v<65536?m[x++]=224|v>>>12:(m[x++]=240|v>>>18,m[x++]=128|v>>>12&63),m[x++]=128|v>>>6&63),m[x++]=128|63&v);return m},r.buf2binstring=function(p){return c(p,p.length)},r.binstring2buf=function(p){for(var m=new o.Buf8(p.length),v=0,_=m.length;v<_;v++)m[v]=p.charCodeAt(v);return m},r.buf2string=function(p,m){var v,_,C,x,S=m||p.length,y=new Array(2*S);for(v=_=0;v<S;)if((C=p[v++])<128)y[_++]=C;else if(4<(x=u[C]))y[_++]=65533,v+=x-1;else{for(C&=x===2?31:x===3?15:7;1<x&&v<S;)C=C<<6|63&p[v++],x--;1<x?y[_++]=65533:C<65536?y[_++]=C:(C-=65536,y[_++]=55296|C>>10&1023,y[_++]=56320|1023&C)}return c(y,_)},r.utf8border=function(p,m){var v;for((m=m||p.length)>p.length&&(m=p.length),v=m-1;0<=v&&(192&p[v])==128;)v--;return v<0||v===0?m:v+u[p[v]]>m?v:m}},{"./common":41}],43:[function(e,n,r){n.exports=function(o,s,l,u){for(var h=65535&o|0,c=o>>>16&65535|0,p=0;l!==0;){for(l-=p=2e3<l?2e3:l;c=c+(h=h+s[u++]|0)|0,--p;);h%=65521,c%=65521}return h|c<<16|0}},{}],44:[function(e,n,r){n.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(e,n,r){var o=function(){for(var s,l=[],u=0;u<256;u++){s=u;for(var h=0;h<8;h++)s=1&s?3988292384^s>>>1:s>>>1;l[u]=s}return l}();n.exports=function(s,l,u,h){var c=o,p=h+u;s^=-1;for(var m=h;m<p;m++)s=s>>>8^c[255&(s^l[m])];return-1^s}},{}],46:[function(e,n,r){var o,s=e("../utils/common"),l=e("./trees"),u=e("./adler32"),h=e("./crc32"),c=e("./messages"),p=0,m=4,v=0,_=-2,C=-1,x=4,S=2,y=8,D=9,A=286,P=30,M=19,B=2*A+1,Q=15,L=3,le=258,_e=le+L+1,J=42,z=113,F=1,ae=2,qe=3,De=4;function xe(k,te){return k.msg=c[te],te}function Te(k){return(k<<1)-(4<k?9:0)}function Re(k){for(var te=k.length;0<=--te;)k[te]=0}function ne(k){var te=k.state,ge=te.pending;ge>k.avail_out&&(ge=k.avail_out),ge!==0&&(s.arraySet(k.output,te.pending_buf,te.pending_out,ge,k.next_out),k.next_out+=ge,te.pending_out+=ge,k.total_out+=ge,k.avail_out-=ge,te.pending-=ge,te.pending===0&&(te.pending_out=0))}function fe(k,te){l._tr_flush_block(k,0<=k.block_start?k.block_start:-1,k.strstart-k.block_start,te),k.block_start=k.strstart,ne(k.strm)}function Be(k,te){k.pending_buf[k.pending++]=te}function Ye(k,te){k.pending_buf[k.pending++]=te>>>8&255,k.pending_buf[k.pending++]=255&te}function Ve(k,te){var ge,$,X=k.max_chain_length,re=k.strstart,Fe=k.prev_length,Me=k.nice_match,pe=k.strstart>k.w_size-_e?k.strstart-(k.w_size-_e):0,Ue=k.window,ft=k.w_mask,ze=k.prev,Ne=k.strstart+le,Xt=Ue[re+Fe-1],It=Ue[re+Fe];k.prev_length>=k.good_match&&(X>>=2),Me>k.lookahead&&(Me=k.lookahead);do if(Ue[(ge=te)+Fe]===It&&Ue[ge+Fe-1]===Xt&&Ue[ge]===Ue[re]&&Ue[++ge]===Ue[re+1]){re+=2,ge++;do;while(Ue[++re]===Ue[++ge]&&Ue[++re]===Ue[++ge]&&Ue[++re]===Ue[++ge]&&Ue[++re]===Ue[++ge]&&Ue[++re]===Ue[++ge]&&Ue[++re]===Ue[++ge]&&Ue[++re]===Ue[++ge]&&Ue[++re]===Ue[++ge]&&re<Ne);if($=le-(Ne-re),re=Ne-le,Fe<$){if(k.match_start=te,Me<=(Fe=$))break;Xt=Ue[re+Fe-1],It=Ue[re+Fe]}}while((te=ze[te&ft])>pe&&--X!=0);return Fe<=k.lookahead?Fe:k.lookahead}function ue(k){var te,ge,$,X,re,Fe,Me,pe,Ue,ft,ze=k.w_size;do{if(X=k.window_size-k.lookahead-k.strstart,k.strstart>=ze+(ze-_e)){for(s.arraySet(k.window,k.window,ze,ze,0),k.match_start-=ze,k.strstart-=ze,k.block_start-=ze,te=ge=k.hash_size;$=k.head[--te],k.head[te]=ze<=$?$-ze:0,--ge;);for(te=ge=ze;$=k.prev[--te],k.prev[te]=ze<=$?$-ze:0,--ge;);X+=ze}if(k.strm.avail_in===0)break;if(Fe=k.strm,Me=k.window,pe=k.strstart+k.lookahead,Ue=X,ft=void 0,ft=Fe.avail_in,Ue<ft&&(ft=Ue),ge=ft===0?0:(Fe.avail_in-=ft,s.arraySet(Me,Fe.input,Fe.next_in,ft,pe),Fe.state.wrap===1?Fe.adler=u(Fe.adler,Me,ft,pe):Fe.state.wrap===2&&(Fe.adler=h(Fe.adler,Me,ft,pe)),Fe.next_in+=ft,Fe.total_in+=ft,ft),k.lookahead+=ge,k.lookahead+k.insert>=L)for(re=k.strstart-k.insert,k.ins_h=k.window[re],k.ins_h=(k.ins_h<<k.hash_shift^k.window[re+1])&k.hash_mask;k.insert&&(k.ins_h=(k.ins_h<<k.hash_shift^k.window[re+L-1])&k.hash_mask,k.prev[re&k.w_mask]=k.head[k.ins_h],k.head[k.ins_h]=re,re++,k.insert--,!(k.lookahead+k.insert<L)););}while(k.lookahead<_e&&k.strm.avail_in!==0)}function Ce(k,te){for(var ge,$;;){if(k.lookahead<_e){if(ue(k),k.lookahead<_e&&te===p)return F;if(k.lookahead===0)break}if(ge=0,k.lookahead>=L&&(k.ins_h=(k.ins_h<<k.hash_shift^k.window[k.strstart+L-1])&k.hash_mask,ge=k.prev[k.strstart&k.w_mask]=k.head[k.ins_h],k.head[k.ins_h]=k.strstart),ge!==0&&k.strstart-ge<=k.w_size-_e&&(k.match_length=Ve(k,ge)),k.match_length>=L)if($=l._tr_tally(k,k.strstart-k.match_start,k.match_length-L),k.lookahead-=k.match_length,k.match_length<=k.max_lazy_match&&k.lookahead>=L){for(k.match_length--;k.strstart++,k.ins_h=(k.ins_h<<k.hash_shift^k.window[k.strstart+L-1])&k.hash_mask,ge=k.prev[k.strstart&k.w_mask]=k.head[k.ins_h],k.head[k.ins_h]=k.strstart,--k.match_length!=0;);k.strstart++}else k.strstart+=k.match_length,k.match_length=0,k.ins_h=k.window[k.strstart],k.ins_h=(k.ins_h<<k.hash_shift^k.window[k.strstart+1])&k.hash_mask;else $=l._tr_tally(k,0,k.window[k.strstart]),k.lookahead--,k.strstart++;if($&&(fe(k,!1),k.strm.avail_out===0))return F}return k.insert=k.strstart<L-1?k.strstart:L-1,te===m?(fe(k,!0),k.strm.avail_out===0?qe:De):k.last_lit&&(fe(k,!1),k.strm.avail_out===0)?F:ae}function be(k,te){for(var ge,$,X;;){if(k.lookahead<_e){if(ue(k),k.lookahead<_e&&te===p)return F;if(k.lookahead===0)break}if(ge=0,k.lookahead>=L&&(k.ins_h=(k.ins_h<<k.hash_shift^k.window[k.strstart+L-1])&k.hash_mask,ge=k.prev[k.strstart&k.w_mask]=k.head[k.ins_h],k.head[k.ins_h]=k.strstart),k.prev_length=k.match_length,k.prev_match=k.match_start,k.match_length=L-1,ge!==0&&k.prev_length<k.max_lazy_match&&k.strstart-ge<=k.w_size-_e&&(k.match_length=Ve(k,ge),k.match_length<=5&&(k.strategy===1||k.match_length===L&&4096<k.strstart-k.match_start)&&(k.match_length=L-1)),k.prev_length>=L&&k.match_length<=k.prev_length){for(X=k.strstart+k.lookahead-L,$=l._tr_tally(k,k.strstart-1-k.prev_match,k.prev_length-L),k.lookahead-=k.prev_length-1,k.prev_length-=2;++k.strstart<=X&&(k.ins_h=(k.ins_h<<k.hash_shift^k.window[k.strstart+L-1])&k.hash_mask,ge=k.prev[k.strstart&k.w_mask]=k.head[k.ins_h],k.head[k.ins_h]=k.strstart),--k.prev_length!=0;);if(k.match_available=0,k.match_length=L-1,k.strstart++,$&&(fe(k,!1),k.strm.avail_out===0))return F}else if(k.match_available){if(($=l._tr_tally(k,0,k.window[k.strstart-1]))&&fe(k,!1),k.strstart++,k.lookahead--,k.strm.avail_out===0)return F}else k.match_available=1,k.strstart++,k.lookahead--}return k.match_available&&($=l._tr_tally(k,0,k.window[k.strstart-1]),k.match_available=0),k.insert=k.strstart<L-1?k.strstart:L-1,te===m?(fe(k,!0),k.strm.avail_out===0?qe:De):k.last_lit&&(fe(k,!1),k.strm.avail_out===0)?F:ae}function Le(k,te,ge,$,X){this.good_length=k,this.max_lazy=te,this.nice_length=ge,this.max_chain=$,this.func=X}function nt(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=y,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new s.Buf16(2*B),this.dyn_dtree=new s.Buf16(2*(2*P+1)),this.bl_tree=new s.Buf16(2*(2*M+1)),Re(this.dyn_ltree),Re(this.dyn_dtree),Re(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new s.Buf16(Q+1),this.heap=new s.Buf16(2*A+1),Re(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new s.Buf16(2*A+1),Re(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function Ge(k){var te;return k&&k.state?(k.total_in=k.total_out=0,k.data_type=S,(te=k.state).pending=0,te.pending_out=0,te.wrap<0&&(te.wrap=-te.wrap),te.status=te.wrap?J:z,k.adler=te.wrap===2?0:1,te.last_flush=p,l._tr_init(te),v):xe(k,_)}function yt(k){var te=Ge(k);return te===v&&function(ge){ge.window_size=2*ge.w_size,Re(ge.head),ge.max_lazy_match=o[ge.level].max_lazy,ge.good_match=o[ge.level].good_length,ge.nice_match=o[ge.level].nice_length,ge.max_chain_length=o[ge.level].max_chain,ge.strstart=0,ge.block_start=0,ge.lookahead=0,ge.insert=0,ge.match_length=ge.prev_length=L-1,ge.match_available=0,ge.ins_h=0}(k.state),te}function at(k,te,ge,$,X,re){if(!k)return _;var Fe=1;if(te===C&&(te=6),$<0?(Fe=0,$=-$):15<$&&(Fe=2,$-=16),X<1||D<X||ge!==y||$<8||15<$||te<0||9<te||re<0||x<re)return xe(k,_);$===8&&($=9);var Me=new nt;return(k.state=Me).strm=k,Me.wrap=Fe,Me.gzhead=null,Me.w_bits=$,Me.w_size=1<<Me.w_bits,Me.w_mask=Me.w_size-1,Me.hash_bits=X+7,Me.hash_size=1<<Me.hash_bits,Me.hash_mask=Me.hash_size-1,Me.hash_shift=~~((Me.hash_bits+L-1)/L),Me.window=new s.Buf8(2*Me.w_size),Me.head=new s.Buf16(Me.hash_size),Me.prev=new s.Buf16(Me.w_size),Me.lit_bufsize=1<<X+6,Me.pending_buf_size=4*Me.lit_bufsize,Me.pending_buf=new s.Buf8(Me.pending_buf_size),Me.d_buf=1*Me.lit_bufsize,Me.l_buf=3*Me.lit_bufsize,Me.level=te,Me.strategy=re,Me.method=ge,yt(k)}o=[new Le(0,0,0,0,function(k,te){var ge=65535;for(ge>k.pending_buf_size-5&&(ge=k.pending_buf_size-5);;){if(k.lookahead<=1){if(ue(k),k.lookahead===0&&te===p)return F;if(k.lookahead===0)break}k.strstart+=k.lookahead,k.lookahead=0;var $=k.block_start+ge;if((k.strstart===0||k.strstart>=$)&&(k.lookahead=k.strstart-$,k.strstart=$,fe(k,!1),k.strm.avail_out===0)||k.strstart-k.block_start>=k.w_size-_e&&(fe(k,!1),k.strm.avail_out===0))return F}return k.insert=0,te===m?(fe(k,!0),k.strm.avail_out===0?qe:De):(k.strstart>k.block_start&&(fe(k,!1),k.strm.avail_out),F)}),new Le(4,4,8,4,Ce),new Le(4,5,16,8,Ce),new Le(4,6,32,32,Ce),new Le(4,4,16,16,be),new Le(8,16,32,32,be),new Le(8,16,128,128,be),new Le(8,32,128,256,be),new Le(32,128,258,1024,be),new Le(32,258,258,4096,be)],r.deflateInit=function(k,te){return at(k,te,y,15,8,0)},r.deflateInit2=at,r.deflateReset=yt,r.deflateResetKeep=Ge,r.deflateSetHeader=function(k,te){return k&&k.state?k.state.wrap!==2?_:(k.state.gzhead=te,v):_},r.deflate=function(k,te){var ge,$,X,re;if(!k||!k.state||5<te||te<0)return k?xe(k,_):_;if($=k.state,!k.output||!k.input&&k.avail_in!==0||$.status===666&&te!==m)return xe(k,k.avail_out===0?-5:_);if($.strm=k,ge=$.last_flush,$.last_flush=te,$.status===J)if($.wrap===2)k.adler=0,Be($,31),Be($,139),Be($,8),$.gzhead?(Be($,($.gzhead.text?1:0)+($.gzhead.hcrc?2:0)+($.gzhead.extra?4:0)+($.gzhead.name?8:0)+($.gzhead.comment?16:0)),Be($,255&$.gzhead.time),Be($,$.gzhead.time>>8&255),Be($,$.gzhead.time>>16&255),Be($,$.gzhead.time>>24&255),Be($,$.level===9?2:2<=$.strategy||$.level<2?4:0),Be($,255&$.gzhead.os),$.gzhead.extra&&$.gzhead.extra.length&&(Be($,255&$.gzhead.extra.length),Be($,$.gzhead.extra.length>>8&255)),$.gzhead.hcrc&&(k.adler=h(k.adler,$.pending_buf,$.pending,0)),$.gzindex=0,$.status=69):(Be($,0),Be($,0),Be($,0),Be($,0),Be($,0),Be($,$.level===9?2:2<=$.strategy||$.level<2?4:0),Be($,3),$.status=z);else{var Fe=y+($.w_bits-8<<4)<<8;Fe|=(2<=$.strategy||$.level<2?0:$.level<6?1:$.level===6?2:3)<<6,$.strstart!==0&&(Fe|=32),Fe+=31-Fe%31,$.status=z,Ye($,Fe),$.strstart!==0&&(Ye($,k.adler>>>16),Ye($,65535&k.adler)),k.adler=1}if($.status===69)if($.gzhead.extra){for(X=$.pending;$.gzindex<(65535&$.gzhead.extra.length)&&($.pending!==$.pending_buf_size||($.gzhead.hcrc&&$.pending>X&&(k.adler=h(k.adler,$.pending_buf,$.pending-X,X)),ne(k),X=$.pending,$.pending!==$.pending_buf_size));)Be($,255&$.gzhead.extra[$.gzindex]),$.gzindex++;$.gzhead.hcrc&&$.pending>X&&(k.adler=h(k.adler,$.pending_buf,$.pending-X,X)),$.gzindex===$.gzhead.extra.length&&($.gzindex=0,$.status=73)}else $.status=73;if($.status===73)if($.gzhead.name){X=$.pending;do{if($.pending===$.pending_buf_size&&($.gzhead.hcrc&&$.pending>X&&(k.adler=h(k.adler,$.pending_buf,$.pending-X,X)),ne(k),X=$.pending,$.pending===$.pending_buf_size)){re=1;break}re=$.gzindex<$.gzhead.name.length?255&$.gzhead.name.charCodeAt($.gzindex++):0,Be($,re)}while(re!==0);$.gzhead.hcrc&&$.pending>X&&(k.adler=h(k.adler,$.pending_buf,$.pending-X,X)),re===0&&($.gzindex=0,$.status=91)}else $.status=91;if($.status===91)if($.gzhead.comment){X=$.pending;do{if($.pending===$.pending_buf_size&&($.gzhead.hcrc&&$.pending>X&&(k.adler=h(k.adler,$.pending_buf,$.pending-X,X)),ne(k),X=$.pending,$.pending===$.pending_buf_size)){re=1;break}re=$.gzindex<$.gzhead.comment.length?255&$.gzhead.comment.charCodeAt($.gzindex++):0,Be($,re)}while(re!==0);$.gzhead.hcrc&&$.pending>X&&(k.adler=h(k.adler,$.pending_buf,$.pending-X,X)),re===0&&($.status=103)}else $.status=103;if($.status===103&&($.gzhead.hcrc?($.pending+2>$.pending_buf_size&&ne(k),$.pending+2<=$.pending_buf_size&&(Be($,255&k.adler),Be($,k.adler>>8&255),k.adler=0,$.status=z)):$.status=z),$.pending!==0){if(ne(k),k.avail_out===0)return $.last_flush=-1,v}else if(k.avail_in===0&&Te(te)<=Te(ge)&&te!==m)return xe(k,-5);if($.status===666&&k.avail_in!==0)return xe(k,-5);if(k.avail_in!==0||$.lookahead!==0||te!==p&&$.status!==666){var Me=$.strategy===2?function(pe,Ue){for(var ft;;){if(pe.lookahead===0&&(ue(pe),pe.lookahead===0)){if(Ue===p)return F;break}if(pe.match_length=0,ft=l._tr_tally(pe,0,pe.window[pe.strstart]),pe.lookahead--,pe.strstart++,ft&&(fe(pe,!1),pe.strm.avail_out===0))return F}return pe.insert=0,Ue===m?(fe(pe,!0),pe.strm.avail_out===0?qe:De):pe.last_lit&&(fe(pe,!1),pe.strm.avail_out===0)?F:ae}($,te):$.strategy===3?function(pe,Ue){for(var ft,ze,Ne,Xt,It=pe.window;;){if(pe.lookahead<=le){if(ue(pe),pe.lookahead<=le&&Ue===p)return F;if(pe.lookahead===0)break}if(pe.match_length=0,pe.lookahead>=L&&0<pe.strstart&&(ze=It[Ne=pe.strstart-1])===It[++Ne]&&ze===It[++Ne]&&ze===It[++Ne]){Xt=pe.strstart+le;do;while(ze===It[++Ne]&&ze===It[++Ne]&&ze===It[++Ne]&&ze===It[++Ne]&&ze===It[++Ne]&&ze===It[++Ne]&&ze===It[++Ne]&&ze===It[++Ne]&&Ne<Xt);pe.match_length=le-(Xt-Ne),pe.match_length>pe.lookahead&&(pe.match_length=pe.lookahead)}if(pe.match_length>=L?(ft=l._tr_tally(pe,1,pe.match_length-L),pe.lookahead-=pe.match_length,pe.strstart+=pe.match_length,pe.match_length=0):(ft=l._tr_tally(pe,0,pe.window[pe.strstart]),pe.lookahead--,pe.strstart++),ft&&(fe(pe,!1),pe.strm.avail_out===0))return F}return pe.insert=0,Ue===m?(fe(pe,!0),pe.strm.avail_out===0?qe:De):pe.last_lit&&(fe(pe,!1),pe.strm.avail_out===0)?F:ae}($,te):o[$.level].func($,te);if(Me!==qe&&Me!==De||($.status=666),Me===F||Me===qe)return k.avail_out===0&&($.last_flush=-1),v;if(Me===ae&&(te===1?l._tr_align($):te!==5&&(l._tr_stored_block($,0,0,!1),te===3&&(Re($.head),$.lookahead===0&&($.strstart=0,$.block_start=0,$.insert=0))),ne(k),k.avail_out===0))return $.last_flush=-1,v}return te!==m?v:$.wrap<=0?1:($.wrap===2?(Be($,255&k.adler),Be($,k.adler>>8&255),Be($,k.adler>>16&255),Be($,k.adler>>24&255),Be($,255&k.total_in),Be($,k.total_in>>8&255),Be($,k.total_in>>16&255),Be($,k.total_in>>24&255)):(Ye($,k.adler>>>16),Ye($,65535&k.adler)),ne(k),0<$.wrap&&($.wrap=-$.wrap),$.pending!==0?v:1)},r.deflateEnd=function(k){var te;return k&&k.state?(te=k.state.status)!==J&&te!==69&&te!==73&&te!==91&&te!==103&&te!==z&&te!==666?xe(k,_):(k.state=null,te===z?xe(k,-3):v):_},r.deflateSetDictionary=function(k,te){var ge,$,X,re,Fe,Me,pe,Ue,ft=te.length;if(!k||!k.state||(re=(ge=k.state).wrap)===2||re===1&&ge.status!==J||ge.lookahead)return _;for(re===1&&(k.adler=u(k.adler,te,ft,0)),ge.wrap=0,ft>=ge.w_size&&(re===0&&(Re(ge.head),ge.strstart=0,ge.block_start=0,ge.insert=0),Ue=new s.Buf8(ge.w_size),s.arraySet(Ue,te,ft-ge.w_size,ge.w_size,0),te=Ue,ft=ge.w_size),Fe=k.avail_in,Me=k.next_in,pe=k.input,k.avail_in=ft,k.next_in=0,k.input=te,ue(ge);ge.lookahead>=L;){for($=ge.strstart,X=ge.lookahead-(L-1);ge.ins_h=(ge.ins_h<<ge.hash_shift^ge.window[$+L-1])&ge.hash_mask,ge.prev[$&ge.w_mask]=ge.head[ge.ins_h],ge.head[ge.ins_h]=$,$++,--X;);ge.strstart=$,ge.lookahead=L-1,ue(ge)}return ge.strstart+=ge.lookahead,ge.block_start=ge.strstart,ge.insert=ge.lookahead,ge.lookahead=0,ge.match_length=ge.prev_length=L-1,ge.match_available=0,k.next_in=Me,k.input=pe,k.avail_in=Fe,ge.wrap=re,v},r.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(e,n,r){n.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(e,n,r){n.exports=function(o,s){var l,u,h,c,p,m,v,_,C,x,S,y,D,A,P,M,B,Q,L,le,_e,J,z,F,ae;l=o.state,u=o.next_in,F=o.input,h=u+(o.avail_in-5),c=o.next_out,ae=o.output,p=c-(s-o.avail_out),m=c+(o.avail_out-257),v=l.dmax,_=l.wsize,C=l.whave,x=l.wnext,S=l.window,y=l.hold,D=l.bits,A=l.lencode,P=l.distcode,M=(1<<l.lenbits)-1,B=(1<<l.distbits)-1;e:do{D<15&&(y+=F[u++]<<D,D+=8,y+=F[u++]<<D,D+=8),Q=A[y&M];t:for(;;){if(y>>>=L=Q>>>24,D-=L,(L=Q>>>16&255)===0)ae[c++]=65535&Q;else{if(!(16&L)){if(!(64&L)){Q=A[(65535&Q)+(y&(1<<L)-1)];continue t}if(32&L){l.mode=12;break e}o.msg="invalid literal/length code",l.mode=30;break e}le=65535&Q,(L&=15)&&(D<L&&(y+=F[u++]<<D,D+=8),le+=y&(1<<L)-1,y>>>=L,D-=L),D<15&&(y+=F[u++]<<D,D+=8,y+=F[u++]<<D,D+=8),Q=P[y&B];i:for(;;){if(y>>>=L=Q>>>24,D-=L,!(16&(L=Q>>>16&255))){if(!(64&L)){Q=P[(65535&Q)+(y&(1<<L)-1)];continue i}o.msg="invalid distance code",l.mode=30;break e}if(_e=65535&Q,D<(L&=15)&&(y+=F[u++]<<D,(D+=8)<L&&(y+=F[u++]<<D,D+=8)),v<(_e+=y&(1<<L)-1)){o.msg="invalid distance too far back",l.mode=30;break e}if(y>>>=L,D-=L,(L=c-p)<_e){if(C<(L=_e-L)&&l.sane){o.msg="invalid distance too far back",l.mode=30;break e}if(z=S,(J=0)===x){if(J+=_-L,L<le){for(le-=L;ae[c++]=S[J++],--L;);J=c-_e,z=ae}}else if(x<L){if(J+=_+x-L,(L-=x)<le){for(le-=L;ae[c++]=S[J++],--L;);if(J=0,x<le){for(le-=L=x;ae[c++]=S[J++],--L;);J=c-_e,z=ae}}}else if(J+=x-L,L<le){for(le-=L;ae[c++]=S[J++],--L;);J=c-_e,z=ae}for(;2<le;)ae[c++]=z[J++],ae[c++]=z[J++],ae[c++]=z[J++],le-=3;le&&(ae[c++]=z[J++],1<le&&(ae[c++]=z[J++]))}else{for(J=c-_e;ae[c++]=ae[J++],ae[c++]=ae[J++],ae[c++]=ae[J++],2<(le-=3););le&&(ae[c++]=ae[J++],1<le&&(ae[c++]=ae[J++]))}break}}break}}while(u<h&&c<m);u-=le=D>>3,y&=(1<<(D-=le<<3))-1,o.next_in=u,o.next_out=c,o.avail_in=u<h?h-u+5:5-(u-h),o.avail_out=c<m?m-c+257:257-(c-m),l.hold=y,l.bits=D}},{}],49:[function(e,n,r){var o=e("../utils/common"),s=e("./adler32"),l=e("./crc32"),u=e("./inffast"),h=e("./inftrees"),c=1,p=2,m=0,v=-2,_=1,C=852,x=592;function S(J){return(J>>>24&255)+(J>>>8&65280)+((65280&J)<<8)+((255&J)<<24)}function y(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new o.Buf16(320),this.work=new o.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function D(J){var z;return J&&J.state?(z=J.state,J.total_in=J.total_out=z.total=0,J.msg="",z.wrap&&(J.adler=1&z.wrap),z.mode=_,z.last=0,z.havedict=0,z.dmax=32768,z.head=null,z.hold=0,z.bits=0,z.lencode=z.lendyn=new o.Buf32(C),z.distcode=z.distdyn=new o.Buf32(x),z.sane=1,z.back=-1,m):v}function A(J){var z;return J&&J.state?((z=J.state).wsize=0,z.whave=0,z.wnext=0,D(J)):v}function P(J,z){var F,ae;return J&&J.state?(ae=J.state,z<0?(F=0,z=-z):(F=1+(z>>4),z<48&&(z&=15)),z&&(z<8||15<z)?v:(ae.window!==null&&ae.wbits!==z&&(ae.window=null),ae.wrap=F,ae.wbits=z,A(J))):v}function M(J,z){var F,ae;return J?(ae=new y,(J.state=ae).window=null,(F=P(J,z))!==m&&(J.state=null),F):v}var B,Q,L=!0;function le(J){if(L){var z;for(B=new o.Buf32(512),Q=new o.Buf32(32),z=0;z<144;)J.lens[z++]=8;for(;z<256;)J.lens[z++]=9;for(;z<280;)J.lens[z++]=7;for(;z<288;)J.lens[z++]=8;for(h(c,J.lens,0,288,B,0,J.work,{bits:9}),z=0;z<32;)J.lens[z++]=5;h(p,J.lens,0,32,Q,0,J.work,{bits:5}),L=!1}J.lencode=B,J.lenbits=9,J.distcode=Q,J.distbits=5}function _e(J,z,F,ae){var qe,De=J.state;return De.window===null&&(De.wsize=1<<De.wbits,De.wnext=0,De.whave=0,De.window=new o.Buf8(De.wsize)),ae>=De.wsize?(o.arraySet(De.window,z,F-De.wsize,De.wsize,0),De.wnext=0,De.whave=De.wsize):(ae<(qe=De.wsize-De.wnext)&&(qe=ae),o.arraySet(De.window,z,F-ae,qe,De.wnext),(ae-=qe)?(o.arraySet(De.window,z,F-ae,ae,0),De.wnext=ae,De.whave=De.wsize):(De.wnext+=qe,De.wnext===De.wsize&&(De.wnext=0),De.whave<De.wsize&&(De.whave+=qe))),0}r.inflateReset=A,r.inflateReset2=P,r.inflateResetKeep=D,r.inflateInit=function(J){return M(J,15)},r.inflateInit2=M,r.inflate=function(J,z){var F,ae,qe,De,xe,Te,Re,ne,fe,Be,Ye,Ve,ue,Ce,be,Le,nt,Ge,yt,at,k,te,ge,$,X=0,re=new o.Buf8(4),Fe=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!J||!J.state||!J.output||!J.input&&J.avail_in!==0)return v;(F=J.state).mode===12&&(F.mode=13),xe=J.next_out,qe=J.output,Re=J.avail_out,De=J.next_in,ae=J.input,Te=J.avail_in,ne=F.hold,fe=F.bits,Be=Te,Ye=Re,te=m;e:for(;;)switch(F.mode){case _:if(F.wrap===0){F.mode=13;break}for(;fe<16;){if(Te===0)break e;Te--,ne+=ae[De++]<<fe,fe+=8}if(2&F.wrap&&ne===35615){re[F.check=0]=255&ne,re[1]=ne>>>8&255,F.check=l(F.check,re,2,0),fe=ne=0,F.mode=2;break}if(F.flags=0,F.head&&(F.head.done=!1),!(1&F.wrap)||(((255&ne)<<8)+(ne>>8))%31){J.msg="incorrect header check",F.mode=30;break}if((15&ne)!=8){J.msg="unknown compression method",F.mode=30;break}if(fe-=4,k=8+(15&(ne>>>=4)),F.wbits===0)F.wbits=k;else if(k>F.wbits){J.msg="invalid window size",F.mode=30;break}F.dmax=1<<k,J.adler=F.check=1,F.mode=512&ne?10:12,fe=ne=0;break;case 2:for(;fe<16;){if(Te===0)break e;Te--,ne+=ae[De++]<<fe,fe+=8}if(F.flags=ne,(255&F.flags)!=8){J.msg="unknown compression method",F.mode=30;break}if(57344&F.flags){J.msg="unknown header flags set",F.mode=30;break}F.head&&(F.head.text=ne>>8&1),512&F.flags&&(re[0]=255&ne,re[1]=ne>>>8&255,F.check=l(F.check,re,2,0)),fe=ne=0,F.mode=3;case 3:for(;fe<32;){if(Te===0)break e;Te--,ne+=ae[De++]<<fe,fe+=8}F.head&&(F.head.time=ne),512&F.flags&&(re[0]=255&ne,re[1]=ne>>>8&255,re[2]=ne>>>16&255,re[3]=ne>>>24&255,F.check=l(F.check,re,4,0)),fe=ne=0,F.mode=4;case 4:for(;fe<16;){if(Te===0)break e;Te--,ne+=ae[De++]<<fe,fe+=8}F.head&&(F.head.xflags=255&ne,F.head.os=ne>>8),512&F.flags&&(re[0]=255&ne,re[1]=ne>>>8&255,F.check=l(F.check,re,2,0)),fe=ne=0,F.mode=5;case 5:if(1024&F.flags){for(;fe<16;){if(Te===0)break e;Te--,ne+=ae[De++]<<fe,fe+=8}F.length=ne,F.head&&(F.head.extra_len=ne),512&F.flags&&(re[0]=255&ne,re[1]=ne>>>8&255,F.check=l(F.check,re,2,0)),fe=ne=0}else F.head&&(F.head.extra=null);F.mode=6;case 6:if(1024&F.flags&&(Te<(Ve=F.length)&&(Ve=Te),Ve&&(F.head&&(k=F.head.extra_len-F.length,F.head.extra||(F.head.extra=new Array(F.head.extra_len)),o.arraySet(F.head.extra,ae,De,Ve,k)),512&F.flags&&(F.check=l(F.check,ae,Ve,De)),Te-=Ve,De+=Ve,F.length-=Ve),F.length))break e;F.length=0,F.mode=7;case 7:if(2048&F.flags){if(Te===0)break e;for(Ve=0;k=ae[De+Ve++],F.head&&k&&F.length<65536&&(F.head.name+=String.fromCharCode(k)),k&&Ve<Te;);if(512&F.flags&&(F.check=l(F.check,ae,Ve,De)),Te-=Ve,De+=Ve,k)break e}else F.head&&(F.head.name=null);F.length=0,F.mode=8;case 8:if(4096&F.flags){if(Te===0)break e;for(Ve=0;k=ae[De+Ve++],F.head&&k&&F.length<65536&&(F.head.comment+=String.fromCharCode(k)),k&&Ve<Te;);if(512&F.flags&&(F.check=l(F.check,ae,Ve,De)),Te-=Ve,De+=Ve,k)break e}else F.head&&(F.head.comment=null);F.mode=9;case 9:if(512&F.flags){for(;fe<16;){if(Te===0)break e;Te--,ne+=ae[De++]<<fe,fe+=8}if(ne!==(65535&F.check)){J.msg="header crc mismatch",F.mode=30;break}fe=ne=0}F.head&&(F.head.hcrc=F.flags>>9&1,F.head.done=!0),J.adler=F.check=0,F.mode=12;break;case 10:for(;fe<32;){if(Te===0)break e;Te--,ne+=ae[De++]<<fe,fe+=8}J.adler=F.check=S(ne),fe=ne=0,F.mode=11;case 11:if(F.havedict===0)return J.next_out=xe,J.avail_out=Re,J.next_in=De,J.avail_in=Te,F.hold=ne,F.bits=fe,2;J.adler=F.check=1,F.mode=12;case 12:if(z===5||z===6)break e;case 13:if(F.last){ne>>>=7&fe,fe-=7&fe,F.mode=27;break}for(;fe<3;){if(Te===0)break e;Te--,ne+=ae[De++]<<fe,fe+=8}switch(F.last=1&ne,fe-=1,3&(ne>>>=1)){case 0:F.mode=14;break;case 1:if(le(F),F.mode=20,z!==6)break;ne>>>=2,fe-=2;break e;case 2:F.mode=17;break;case 3:J.msg="invalid block type",F.mode=30}ne>>>=2,fe-=2;break;case 14:for(ne>>>=7&fe,fe-=7&fe;fe<32;){if(Te===0)break e;Te--,ne+=ae[De++]<<fe,fe+=8}if((65535&ne)!=(ne>>>16^65535)){J.msg="invalid stored block lengths",F.mode=30;break}if(F.length=65535&ne,fe=ne=0,F.mode=15,z===6)break e;case 15:F.mode=16;case 16:if(Ve=F.length){if(Te<Ve&&(Ve=Te),Re<Ve&&(Ve=Re),Ve===0)break e;o.arraySet(qe,ae,De,Ve,xe),Te-=Ve,De+=Ve,Re-=Ve,xe+=Ve,F.length-=Ve;break}F.mode=12;break;case 17:for(;fe<14;){if(Te===0)break e;Te--,ne+=ae[De++]<<fe,fe+=8}if(F.nlen=257+(31&ne),ne>>>=5,fe-=5,F.ndist=1+(31&ne),ne>>>=5,fe-=5,F.ncode=4+(15&ne),ne>>>=4,fe-=4,286<F.nlen||30<F.ndist){J.msg="too many length or distance symbols",F.mode=30;break}F.have=0,F.mode=18;case 18:for(;F.have<F.ncode;){for(;fe<3;){if(Te===0)break e;Te--,ne+=ae[De++]<<fe,fe+=8}F.lens[Fe[F.have++]]=7&ne,ne>>>=3,fe-=3}for(;F.have<19;)F.lens[Fe[F.have++]]=0;if(F.lencode=F.lendyn,F.lenbits=7,ge={bits:F.lenbits},te=h(0,F.lens,0,19,F.lencode,0,F.work,ge),F.lenbits=ge.bits,te){J.msg="invalid code lengths set",F.mode=30;break}F.have=0,F.mode=19;case 19:for(;F.have<F.nlen+F.ndist;){for(;Le=(X=F.lencode[ne&(1<<F.lenbits)-1])>>>16&255,nt=65535&X,!((be=X>>>24)<=fe);){if(Te===0)break e;Te--,ne+=ae[De++]<<fe,fe+=8}if(nt<16)ne>>>=be,fe-=be,F.lens[F.have++]=nt;else{if(nt===16){for($=be+2;fe<$;){if(Te===0)break e;Te--,ne+=ae[De++]<<fe,fe+=8}if(ne>>>=be,fe-=be,F.have===0){J.msg="invalid bit length repeat",F.mode=30;break}k=F.lens[F.have-1],Ve=3+(3&ne),ne>>>=2,fe-=2}else if(nt===17){for($=be+3;fe<$;){if(Te===0)break e;Te--,ne+=ae[De++]<<fe,fe+=8}fe-=be,k=0,Ve=3+(7&(ne>>>=be)),ne>>>=3,fe-=3}else{for($=be+7;fe<$;){if(Te===0)break e;Te--,ne+=ae[De++]<<fe,fe+=8}fe-=be,k=0,Ve=11+(127&(ne>>>=be)),ne>>>=7,fe-=7}if(F.have+Ve>F.nlen+F.ndist){J.msg="invalid bit length repeat",F.mode=30;break}for(;Ve--;)F.lens[F.have++]=k}}if(F.mode===30)break;if(F.lens[256]===0){J.msg="invalid code -- missing end-of-block",F.mode=30;break}if(F.lenbits=9,ge={bits:F.lenbits},te=h(c,F.lens,0,F.nlen,F.lencode,0,F.work,ge),F.lenbits=ge.bits,te){J.msg="invalid literal/lengths set",F.mode=30;break}if(F.distbits=6,F.distcode=F.distdyn,ge={bits:F.distbits},te=h(p,F.lens,F.nlen,F.ndist,F.distcode,0,F.work,ge),F.distbits=ge.bits,te){J.msg="invalid distances set",F.mode=30;break}if(F.mode=20,z===6)break e;case 20:F.mode=21;case 21:if(6<=Te&&258<=Re){J.next_out=xe,J.avail_out=Re,J.next_in=De,J.avail_in=Te,F.hold=ne,F.bits=fe,u(J,Ye),xe=J.next_out,qe=J.output,Re=J.avail_out,De=J.next_in,ae=J.input,Te=J.avail_in,ne=F.hold,fe=F.bits,F.mode===12&&(F.back=-1);break}for(F.back=0;Le=(X=F.lencode[ne&(1<<F.lenbits)-1])>>>16&255,nt=65535&X,!((be=X>>>24)<=fe);){if(Te===0)break e;Te--,ne+=ae[De++]<<fe,fe+=8}if(Le&&!(240&Le)){for(Ge=be,yt=Le,at=nt;Le=(X=F.lencode[at+((ne&(1<<Ge+yt)-1)>>Ge)])>>>16&255,nt=65535&X,!(Ge+(be=X>>>24)<=fe);){if(Te===0)break e;Te--,ne+=ae[De++]<<fe,fe+=8}ne>>>=Ge,fe-=Ge,F.back+=Ge}if(ne>>>=be,fe-=be,F.back+=be,F.length=nt,Le===0){F.mode=26;break}if(32&Le){F.back=-1,F.mode=12;break}if(64&Le){J.msg="invalid literal/length code",F.mode=30;break}F.extra=15&Le,F.mode=22;case 22:if(F.extra){for($=F.extra;fe<$;){if(Te===0)break e;Te--,ne+=ae[De++]<<fe,fe+=8}F.length+=ne&(1<<F.extra)-1,ne>>>=F.extra,fe-=F.extra,F.back+=F.extra}F.was=F.length,F.mode=23;case 23:for(;Le=(X=F.distcode[ne&(1<<F.distbits)-1])>>>16&255,nt=65535&X,!((be=X>>>24)<=fe);){if(Te===0)break e;Te--,ne+=ae[De++]<<fe,fe+=8}if(!(240&Le)){for(Ge=be,yt=Le,at=nt;Le=(X=F.distcode[at+((ne&(1<<Ge+yt)-1)>>Ge)])>>>16&255,nt=65535&X,!(Ge+(be=X>>>24)<=fe);){if(Te===0)break e;Te--,ne+=ae[De++]<<fe,fe+=8}ne>>>=Ge,fe-=Ge,F.back+=Ge}if(ne>>>=be,fe-=be,F.back+=be,64&Le){J.msg="invalid distance code",F.mode=30;break}F.offset=nt,F.extra=15&Le,F.mode=24;case 24:if(F.extra){for($=F.extra;fe<$;){if(Te===0)break e;Te--,ne+=ae[De++]<<fe,fe+=8}F.offset+=ne&(1<<F.extra)-1,ne>>>=F.extra,fe-=F.extra,F.back+=F.extra}if(F.offset>F.dmax){J.msg="invalid distance too far back",F.mode=30;break}F.mode=25;case 25:if(Re===0)break e;if(Ve=Ye-Re,F.offset>Ve){if((Ve=F.offset-Ve)>F.whave&&F.sane){J.msg="invalid distance too far back",F.mode=30;break}ue=Ve>F.wnext?(Ve-=F.wnext,F.wsize-Ve):F.wnext-Ve,Ve>F.length&&(Ve=F.length),Ce=F.window}else Ce=qe,ue=xe-F.offset,Ve=F.length;for(Re<Ve&&(Ve=Re),Re-=Ve,F.length-=Ve;qe[xe++]=Ce[ue++],--Ve;);F.length===0&&(F.mode=21);break;case 26:if(Re===0)break e;qe[xe++]=F.length,Re--,F.mode=21;break;case 27:if(F.wrap){for(;fe<32;){if(Te===0)break e;Te--,ne|=ae[De++]<<fe,fe+=8}if(Ye-=Re,J.total_out+=Ye,F.total+=Ye,Ye&&(J.adler=F.check=F.flags?l(F.check,qe,Ye,xe-Ye):s(F.check,qe,Ye,xe-Ye)),Ye=Re,(F.flags?ne:S(ne))!==F.check){J.msg="incorrect data check",F.mode=30;break}fe=ne=0}F.mode=28;case 28:if(F.wrap&&F.flags){for(;fe<32;){if(Te===0)break e;Te--,ne+=ae[De++]<<fe,fe+=8}if(ne!==(4294967295&F.total)){J.msg="incorrect length check",F.mode=30;break}fe=ne=0}F.mode=29;case 29:te=1;break e;case 30:te=-3;break e;case 31:return-4;case 32:default:return v}return J.next_out=xe,J.avail_out=Re,J.next_in=De,J.avail_in=Te,F.hold=ne,F.bits=fe,(F.wsize||Ye!==J.avail_out&&F.mode<30&&(F.mode<27||z!==4))&&_e(J,J.output,J.next_out,Ye-J.avail_out)?(F.mode=31,-4):(Be-=J.avail_in,Ye-=J.avail_out,J.total_in+=Be,J.total_out+=Ye,F.total+=Ye,F.wrap&&Ye&&(J.adler=F.check=F.flags?l(F.check,qe,Ye,J.next_out-Ye):s(F.check,qe,Ye,J.next_out-Ye)),J.data_type=F.bits+(F.last?64:0)+(F.mode===12?128:0)+(F.mode===20||F.mode===15?256:0),(Be==0&&Ye===0||z===4)&&te===m&&(te=-5),te)},r.inflateEnd=function(J){if(!J||!J.state)return v;var z=J.state;return z.window&&(z.window=null),J.state=null,m},r.inflateGetHeader=function(J,z){var F;return J&&J.state&&2&(F=J.state).wrap?((F.head=z).done=!1,m):v},r.inflateSetDictionary=function(J,z){var F,ae=z.length;return J&&J.state?(F=J.state).wrap!==0&&F.mode!==11?v:F.mode===11&&s(1,z,ae,0)!==F.check?-3:_e(J,z,ae,ae)?(F.mode=31,-4):(F.havedict=1,m):v},r.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(e,n,r){var o=e("../utils/common"),s=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],l=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],u=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],h=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];n.exports=function(c,p,m,v,_,C,x,S){var y,D,A,P,M,B,Q,L,le,_e=S.bits,J=0,z=0,F=0,ae=0,qe=0,De=0,xe=0,Te=0,Re=0,ne=0,fe=null,Be=0,Ye=new o.Buf16(16),Ve=new o.Buf16(16),ue=null,Ce=0;for(J=0;J<=15;J++)Ye[J]=0;for(z=0;z<v;z++)Ye[p[m+z]]++;for(qe=_e,ae=15;1<=ae&&Ye[ae]===0;ae--);if(ae<qe&&(qe=ae),ae===0)return _[C++]=20971520,_[C++]=20971520,S.bits=1,0;for(F=1;F<ae&&Ye[F]===0;F++);for(qe<F&&(qe=F),J=Te=1;J<=15;J++)if(Te<<=1,(Te-=Ye[J])<0)return-1;if(0<Te&&(c===0||ae!==1))return-1;for(Ve[1]=0,J=1;J<15;J++)Ve[J+1]=Ve[J]+Ye[J];for(z=0;z<v;z++)p[m+z]!==0&&(x[Ve[p[m+z]]++]=z);if(B=c===0?(fe=ue=x,19):c===1?(fe=s,Be-=257,ue=l,Ce-=257,256):(fe=u,ue=h,-1),J=F,M=C,xe=z=ne=0,A=-1,P=(Re=1<<(De=qe))-1,c===1&&852<Re||c===2&&592<Re)return 1;for(;;){for(Q=J-xe,le=x[z]<B?(L=0,x[z]):x[z]>B?(L=ue[Ce+x[z]],fe[Be+x[z]]):(L=96,0),y=1<<J-xe,F=D=1<<De;_[M+(ne>>xe)+(D-=y)]=Q<<24|L<<16|le|0,D!==0;);for(y=1<<J-1;ne&y;)y>>=1;if(y!==0?(ne&=y-1,ne+=y):ne=0,z++,--Ye[J]==0){if(J===ae)break;J=p[m+x[z]]}if(qe<J&&(ne&P)!==A){for(xe===0&&(xe=qe),M+=F,Te=1<<(De=J-xe);De+xe<ae&&!((Te-=Ye[De+xe])<=0);)De++,Te<<=1;if(Re+=1<<De,c===1&&852<Re||c===2&&592<Re)return 1;_[A=ne&P]=qe<<24|De<<16|M-C|0}}return ne!==0&&(_[M+ne]=J-xe<<24|64<<16|0),S.bits=qe,0}},{"../utils/common":41}],51:[function(e,n,r){n.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(e,n,r){var o=e("../utils/common"),s=0,l=1;function u(X){for(var re=X.length;0<=--re;)X[re]=0}var h=0,c=29,p=256,m=p+1+c,v=30,_=19,C=2*m+1,x=15,S=16,y=7,D=256,A=16,P=17,M=18,B=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],Q=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],L=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],le=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],_e=new Array(2*(m+2));u(_e);var J=new Array(2*v);u(J);var z=new Array(512);u(z);var F=new Array(256);u(F);var ae=new Array(c);u(ae);var qe,De,xe,Te=new Array(v);function Re(X,re,Fe,Me,pe){this.static_tree=X,this.extra_bits=re,this.extra_base=Fe,this.elems=Me,this.max_length=pe,this.has_stree=X&&X.length}function ne(X,re){this.dyn_tree=X,this.max_code=0,this.stat_desc=re}function fe(X){return X<256?z[X]:z[256+(X>>>7)]}function Be(X,re){X.pending_buf[X.pending++]=255&re,X.pending_buf[X.pending++]=re>>>8&255}function Ye(X,re,Fe){X.bi_valid>S-Fe?(X.bi_buf|=re<<X.bi_valid&65535,Be(X,X.bi_buf),X.bi_buf=re>>S-X.bi_valid,X.bi_valid+=Fe-S):(X.bi_buf|=re<<X.bi_valid&65535,X.bi_valid+=Fe)}function Ve(X,re,Fe){Ye(X,Fe[2*re],Fe[2*re+1])}function ue(X,re){for(var Fe=0;Fe|=1&X,X>>>=1,Fe<<=1,0<--re;);return Fe>>>1}function Ce(X,re,Fe){var Me,pe,Ue=new Array(x+1),ft=0;for(Me=1;Me<=x;Me++)Ue[Me]=ft=ft+Fe[Me-1]<<1;for(pe=0;pe<=re;pe++){var ze=X[2*pe+1];ze!==0&&(X[2*pe]=ue(Ue[ze]++,ze))}}function be(X){var re;for(re=0;re<m;re++)X.dyn_ltree[2*re]=0;for(re=0;re<v;re++)X.dyn_dtree[2*re]=0;for(re=0;re<_;re++)X.bl_tree[2*re]=0;X.dyn_ltree[2*D]=1,X.opt_len=X.static_len=0,X.last_lit=X.matches=0}function Le(X){8<X.bi_valid?Be(X,X.bi_buf):0<X.bi_valid&&(X.pending_buf[X.pending++]=X.bi_buf),X.bi_buf=0,X.bi_valid=0}function nt(X,re,Fe,Me){var pe=2*re,Ue=2*Fe;return X[pe]<X[Ue]||X[pe]===X[Ue]&&Me[re]<=Me[Fe]}function Ge(X,re,Fe){for(var Me=X.heap[Fe],pe=Fe<<1;pe<=X.heap_len&&(pe<X.heap_len&&nt(re,X.heap[pe+1],X.heap[pe],X.depth)&&pe++,!nt(re,Me,X.heap[pe],X.depth));)X.heap[Fe]=X.heap[pe],Fe=pe,pe<<=1;X.heap[Fe]=Me}function yt(X,re,Fe){var Me,pe,Ue,ft,ze=0;if(X.last_lit!==0)for(;Me=X.pending_buf[X.d_buf+2*ze]<<8|X.pending_buf[X.d_buf+2*ze+1],pe=X.pending_buf[X.l_buf+ze],ze++,Me===0?Ve(X,pe,re):(Ve(X,(Ue=F[pe])+p+1,re),(ft=B[Ue])!==0&&Ye(X,pe-=ae[Ue],ft),Ve(X,Ue=fe(--Me),Fe),(ft=Q[Ue])!==0&&Ye(X,Me-=Te[Ue],ft)),ze<X.last_lit;);Ve(X,D,re)}function at(X,re){var Fe,Me,pe,Ue=re.dyn_tree,ft=re.stat_desc.static_tree,ze=re.stat_desc.has_stree,Ne=re.stat_desc.elems,Xt=-1;for(X.heap_len=0,X.heap_max=C,Fe=0;Fe<Ne;Fe++)Ue[2*Fe]!==0?(X.heap[++X.heap_len]=Xt=Fe,X.depth[Fe]=0):Ue[2*Fe+1]=0;for(;X.heap_len<2;)Ue[2*(pe=X.heap[++X.heap_len]=Xt<2?++Xt:0)]=1,X.depth[pe]=0,X.opt_len--,ze&&(X.static_len-=ft[2*pe+1]);for(re.max_code=Xt,Fe=X.heap_len>>1;1<=Fe;Fe--)Ge(X,Ue,Fe);for(pe=Ne;Fe=X.heap[1],X.heap[1]=X.heap[X.heap_len--],Ge(X,Ue,1),Me=X.heap[1],X.heap[--X.heap_max]=Fe,X.heap[--X.heap_max]=Me,Ue[2*pe]=Ue[2*Fe]+Ue[2*Me],X.depth[pe]=(X.depth[Fe]>=X.depth[Me]?X.depth[Fe]:X.depth[Me])+1,Ue[2*Fe+1]=Ue[2*Me+1]=pe,X.heap[1]=pe++,Ge(X,Ue,1),2<=X.heap_len;);X.heap[--X.heap_max]=X.heap[1],function(It,Ci){var q,W,me,ke,st,rt,ut=Ci.dyn_tree,Rt=Ci.max_code,Ht=Ci.stat_desc.static_tree,Tt=Ci.stat_desc.has_stree,Ut=Ci.stat_desc.extra_bits,Zt=Ci.stat_desc.extra_base,Fi=Ci.stat_desc.max_length,Mi=0;for(ke=0;ke<=x;ke++)It.bl_count[ke]=0;for(ut[2*It.heap[It.heap_max]+1]=0,q=It.heap_max+1;q<C;q++)Fi<(ke=ut[2*ut[2*(W=It.heap[q])+1]+1]+1)&&(ke=Fi,Mi++),ut[2*W+1]=ke,Rt<W||(It.bl_count[ke]++,st=0,Zt<=W&&(st=Ut[W-Zt]),rt=ut[2*W],It.opt_len+=rt*(ke+st),Tt&&(It.static_len+=rt*(Ht[2*W+1]+st)));if(Mi!==0){do{for(ke=Fi-1;It.bl_count[ke]===0;)ke--;It.bl_count[ke]--,It.bl_count[ke+1]+=2,It.bl_count[Fi]--,Mi-=2}while(0<Mi);for(ke=Fi;ke!==0;ke--)for(W=It.bl_count[ke];W!==0;)Rt<(me=It.heap[--q])||(ut[2*me+1]!==ke&&(It.opt_len+=(ke-ut[2*me+1])*ut[2*me],ut[2*me+1]=ke),W--)}}(X,re),Ce(Ue,Xt,X.bl_count)}function k(X,re,Fe){var Me,pe,Ue=-1,ft=re[1],ze=0,Ne=7,Xt=4;for(ft===0&&(Ne=138,Xt=3),re[2*(Fe+1)+1]=65535,Me=0;Me<=Fe;Me++)pe=ft,ft=re[2*(Me+1)+1],++ze<Ne&&pe===ft||(ze<Xt?X.bl_tree[2*pe]+=ze:pe!==0?(pe!==Ue&&X.bl_tree[2*pe]++,X.bl_tree[2*A]++):ze<=10?X.bl_tree[2*P]++:X.bl_tree[2*M]++,Ue=pe,Xt=(ze=0)===ft?(Ne=138,3):pe===ft?(Ne=6,3):(Ne=7,4))}function te(X,re,Fe){var Me,pe,Ue=-1,ft=re[1],ze=0,Ne=7,Xt=4;for(ft===0&&(Ne=138,Xt=3),Me=0;Me<=Fe;Me++)if(pe=ft,ft=re[2*(Me+1)+1],!(++ze<Ne&&pe===ft)){if(ze<Xt)for(;Ve(X,pe,X.bl_tree),--ze!=0;);else pe!==0?(pe!==Ue&&(Ve(X,pe,X.bl_tree),ze--),Ve(X,A,X.bl_tree),Ye(X,ze-3,2)):ze<=10?(Ve(X,P,X.bl_tree),Ye(X,ze-3,3)):(Ve(X,M,X.bl_tree),Ye(X,ze-11,7));Ue=pe,Xt=(ze=0)===ft?(Ne=138,3):pe===ft?(Ne=6,3):(Ne=7,4)}}u(Te);var ge=!1;function $(X,re,Fe,Me){Ye(X,(h<<1)+(Me?1:0),3),function(pe,Ue,ft,ze){Le(pe),ze&&(Be(pe,ft),Be(pe,~ft)),o.arraySet(pe.pending_buf,pe.window,Ue,ft,pe.pending),pe.pending+=ft}(X,re,Fe,!0)}r._tr_init=function(X){ge||(function(){var re,Fe,Me,pe,Ue,ft=new Array(x+1);for(pe=Me=0;pe<c-1;pe++)for(ae[pe]=Me,re=0;re<1<<B[pe];re++)F[Me++]=pe;for(F[Me-1]=pe,pe=Ue=0;pe<16;pe++)for(Te[pe]=Ue,re=0;re<1<<Q[pe];re++)z[Ue++]=pe;for(Ue>>=7;pe<v;pe++)for(Te[pe]=Ue<<7,re=0;re<1<<Q[pe]-7;re++)z[256+Ue++]=pe;for(Fe=0;Fe<=x;Fe++)ft[Fe]=0;for(re=0;re<=143;)_e[2*re+1]=8,re++,ft[8]++;for(;re<=255;)_e[2*re+1]=9,re++,ft[9]++;for(;re<=279;)_e[2*re+1]=7,re++,ft[7]++;for(;re<=287;)_e[2*re+1]=8,re++,ft[8]++;for(Ce(_e,m+1,ft),re=0;re<v;re++)J[2*re+1]=5,J[2*re]=ue(re,5);qe=new Re(_e,B,p+1,m,x),De=new Re(J,Q,0,v,x),xe=new Re(new Array(0),L,0,_,y)}(),ge=!0),X.l_desc=new ne(X.dyn_ltree,qe),X.d_desc=new ne(X.dyn_dtree,De),X.bl_desc=new ne(X.bl_tree,xe),X.bi_buf=0,X.bi_valid=0,be(X)},r._tr_stored_block=$,r._tr_flush_block=function(X,re,Fe,Me){var pe,Ue,ft=0;0<X.level?(X.strm.data_type===2&&(X.strm.data_type=function(ze){var Ne,Xt=4093624447;for(Ne=0;Ne<=31;Ne++,Xt>>>=1)if(1&Xt&&ze.dyn_ltree[2*Ne]!==0)return s;if(ze.dyn_ltree[18]!==0||ze.dyn_ltree[20]!==0||ze.dyn_ltree[26]!==0)return l;for(Ne=32;Ne<p;Ne++)if(ze.dyn_ltree[2*Ne]!==0)return l;return s}(X)),at(X,X.l_desc),at(X,X.d_desc),ft=function(ze){var Ne;for(k(ze,ze.dyn_ltree,ze.l_desc.max_code),k(ze,ze.dyn_dtree,ze.d_desc.max_code),at(ze,ze.bl_desc),Ne=_-1;3<=Ne&&ze.bl_tree[2*le[Ne]+1]===0;Ne--);return ze.opt_len+=3*(Ne+1)+5+5+4,Ne}(X),pe=X.opt_len+3+7>>>3,(Ue=X.static_len+3+7>>>3)<=pe&&(pe=Ue)):pe=Ue=Fe+5,Fe+4<=pe&&re!==-1?$(X,re,Fe,Me):X.strategy===4||Ue===pe?(Ye(X,2+(Me?1:0),3),yt(X,_e,J)):(Ye(X,4+(Me?1:0),3),function(ze,Ne,Xt,It){var Ci;for(Ye(ze,Ne-257,5),Ye(ze,Xt-1,5),Ye(ze,It-4,4),Ci=0;Ci<It;Ci++)Ye(ze,ze.bl_tree[2*le[Ci]+1],3);te(ze,ze.dyn_ltree,Ne-1),te(ze,ze.dyn_dtree,Xt-1)}(X,X.l_desc.max_code+1,X.d_desc.max_code+1,ft+1),yt(X,X.dyn_ltree,X.dyn_dtree)),be(X),Me&&Le(X)},r._tr_tally=function(X,re,Fe){return X.pending_buf[X.d_buf+2*X.last_lit]=re>>>8&255,X.pending_buf[X.d_buf+2*X.last_lit+1]=255&re,X.pending_buf[X.l_buf+X.last_lit]=255&Fe,X.last_lit++,re===0?X.dyn_ltree[2*Fe]++:(X.matches++,re--,X.dyn_ltree[2*(F[Fe]+p+1)]++,X.dyn_dtree[2*fe(re)]++),X.last_lit===X.lit_bufsize-1},r._tr_align=function(X){Ye(X,2,3),Ve(X,D,_e),function(re){re.bi_valid===16?(Be(re,re.bi_buf),re.bi_buf=0,re.bi_valid=0):8<=re.bi_valid&&(re.pending_buf[re.pending++]=255&re.bi_buf,re.bi_buf>>=8,re.bi_valid-=8)}(X)}},{"../utils/common":41}],53:[function(e,n,r){n.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(e,n,r){(function(o){(function(s,l){if(!s.setImmediate){var u,h,c,p,m=1,v={},_=!1,C=s.document,x=Object.getPrototypeOf&&Object.getPrototypeOf(s);x=x&&x.setTimeout?x:s,u={}.toString.call(s.process)==="[object process]"?function(A){process.nextTick(function(){y(A)})}:function(){if(s.postMessage&&!s.importScripts){var A=!0,P=s.onmessage;return s.onmessage=function(){A=!1},s.postMessage("","*"),s.onmessage=P,A}}()?(p="setImmediate$"+Math.random()+"$",s.addEventListener?s.addEventListener("message",D,!1):s.attachEvent("onmessage",D),function(A){s.postMessage(p+A,"*")}):s.MessageChannel?((c=new MessageChannel).port1.onmessage=function(A){y(A.data)},function(A){c.port2.postMessage(A)}):C&&"onreadystatechange"in C.createElement("script")?(h=C.documentElement,function(A){var P=C.createElement("script");P.onreadystatechange=function(){y(A),P.onreadystatechange=null,h.removeChild(P),P=null},h.appendChild(P)}):function(A){setTimeout(y,0,A)},x.setImmediate=function(A){typeof A!="function"&&(A=new Function(""+A));for(var P=new Array(arguments.length-1),M=0;M<P.length;M++)P[M]=arguments[M+1];var B={callback:A,args:P};return v[m]=B,u(m),m++},x.clearImmediate=S}function S(A){delete v[A]}function y(A){if(_)setTimeout(y,0,A);else{var P=v[A];if(P){_=!0;try{(function(M){var B=M.callback,Q=M.args;switch(Q.length){case 0:B();break;case 1:B(Q[0]);break;case 2:B(Q[0],Q[1]);break;case 3:B(Q[0],Q[1],Q[2]);break;default:B.apply(l,Q)}})(P)}finally{S(A),_=!1}}}}function D(A){A.source===s&&typeof A.data=="string"&&A.data.indexOf(p)===0&&y(+A.data.slice(p.length))}})(typeof self>"u"?o===void 0?this:o:self)}).call(this,typeof Pr<"u"?Pr:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})}(vf)),vf.exports}var hd={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */hd.exports;var bv;function UC(){return bv||(bv=1,function(a,t){(function(){var e,n="4.17.21",r=200,o="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",s="Expected a function",l="Invalid `variable` option passed into `_.template`",u="__lodash_hash_undefined__",h=500,c="__lodash_placeholder__",p=1,m=2,v=4,_=1,C=2,x=1,S=2,y=4,D=8,A=16,P=32,M=64,B=128,Q=256,L=512,le=30,_e="...",J=800,z=16,F=1,ae=2,qe=3,De=1/0,xe=9007199254740991,Te=17976931348623157e292,Re=0/0,ne=4294967295,fe=ne-1,Be=ne>>>1,Ye=[["ary",B],["bind",x],["bindKey",S],["curry",D],["curryRight",A],["flip",L],["partial",P],["partialRight",M],["rearg",Q]],Ve="[object Arguments]",ue="[object Array]",Ce="[object AsyncFunction]",be="[object Boolean]",Le="[object Date]",nt="[object DOMException]",Ge="[object Error]",yt="[object Function]",at="[object GeneratorFunction]",k="[object Map]",te="[object Number]",ge="[object Null]",$="[object Object]",X="[object Promise]",re="[object Proxy]",Fe="[object RegExp]",Me="[object Set]",pe="[object String]",Ue="[object Symbol]",ft="[object Undefined]",ze="[object WeakMap]",Ne="[object WeakSet]",Xt="[object ArrayBuffer]",It="[object DataView]",Ci="[object Float32Array]",q="[object Float64Array]",W="[object Int8Array]",me="[object Int16Array]",ke="[object Int32Array]",st="[object Uint8Array]",rt="[object Uint8ClampedArray]",ut="[object Uint16Array]",Rt="[object Uint32Array]",Ht=/\b__p \+= '';/g,Tt=/\b(__p \+=) '' \+/g,Ut=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Zt=/&(?:amp|lt|gt|quot|#39);/g,Fi=/[&<>"']/g,Mi=RegExp(Zt.source),U=RegExp(Fi.source),Z=/<%-([\s\S]+?)%>/g,ce=/<%([\s\S]+?)%>/g,Ee=/<%=([\s\S]+?)%>/g,ot=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,pt=/^\w*$/,ct=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,St=/[\\^$.*+?()[\]{}|]/g,Bt=RegExp(St.source),Ct=/^\s+/,vt=/\s/,ti=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ki=/\{\n\/\* \[wrapped with (.+)\] \*/,Ui=/,? & /,Qt=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Ni=/[()=,{}\[\]\/\s]/,Ln=/\\(\\)?/g,mn=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,_t=/\w*$/,Se=/^[-+]0x[0-9a-f]+$/i,Xe=/^0b[01]+$/i,wt=/^\[object .+?Constructor\]$/,ii=/^0o[0-7]+$/i,Gi=/^(?:0|[1-9]\d*)$/,Wi=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Li=/($^)/,vn=/['\n\r\u2028\u2029\\]/g,Gn="\\ud800-\\udfff",qt="\\u0300-\\u036f",$i="\\ufe20-\\ufe2f",ar="\\u20d0-\\u20ff",go=qt+$i+ar,Jn="\\u2700-\\u27bf",er="a-z\\xdf-\\xf6\\xf8-\\xff",_o="\\xac\\xb1\\xd7\\xf7",vr="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",dr="\\u2000-\\u206f",Tr=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Wn="A-Z\\xc0-\\xd6\\xd8-\\xde",Hn="\\ufe0e\\ufe0f",ci=_o+vr+dr+Tr,Bn="[']",Jr="["+Gn+"]",bo="["+ci+"]",gn="["+go+"]",tr="\\d+",gr="["+Jn+"]",_r="["+er+"]",oe="[^"+Gn+ci+tr+Jn+er+Wn+"]",de="\\ud83c[\\udffb-\\udfff]",ye="(?:"+gn+"|"+de+")",We="[^"+Gn+"]",Je="(?:\\ud83c[\\udde6-\\uddff]){2}",lt="[\\ud800-\\udbff][\\udc00-\\udfff]",Ot="["+Wn+"]",Vt="\\u200d",hi="(?:"+_r+"|"+oe+")",yi="(?:"+Ot+"|"+oe+")",Ei="(?:"+Bn+"(?:d|ll|m|re|s|t|ve))?",En="(?:"+Bn+"(?:D|LL|M|RE|S|T|VE))?",$n=ye+"?",Yn="["+Hn+"]?",jn="(?:"+Vt+"(?:"+[We,Je,lt].join("|")+")"+Yn+$n+")*",eo="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",br="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Co=Yn+$n+jn,Hi="(?:"+[gr,Je,lt].join("|")+")"+Co,Oi="(?:"+[We+gn+"?",gn,Je,lt,Jr].join("|")+")",Hr=RegExp(Bn,"g"),Es=RegExp(gn,"g"),yo=RegExp(de+"(?="+de+")|"+Oi+Co,"g"),Qs=RegExp([Ot+"?"+_r+"+"+Ei+"(?="+[bo,Ot,"$"].join("|")+")",yi+"+"+En+"(?="+[bo,Ot+hi,"$"].join("|")+")",Ot+"?"+hi+"+"+Ei,Ot+"+"+En,br,eo,tr,Hi].join("|"),"g"),Ss=RegExp("["+Vt+Gn+go+Hn+"]"),ha=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,es=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],ws=-1,Ii={};Ii[Ci]=Ii[q]=Ii[W]=Ii[me]=Ii[ke]=Ii[st]=Ii[rt]=Ii[ut]=Ii[Rt]=!0,Ii[Ve]=Ii[ue]=Ii[Xt]=Ii[be]=Ii[It]=Ii[Le]=Ii[Ge]=Ii[yt]=Ii[k]=Ii[te]=Ii[$]=Ii[Fe]=Ii[Me]=Ii[pe]=Ii[ze]=!1;var gi={};gi[Ve]=gi[ue]=gi[Xt]=gi[It]=gi[be]=gi[Le]=gi[Ci]=gi[q]=gi[W]=gi[me]=gi[ke]=gi[k]=gi[te]=gi[$]=gi[Fe]=gi[Me]=gi[pe]=gi[Ue]=gi[st]=gi[rt]=gi[ut]=gi[Rt]=!0,gi[Ge]=gi[yt]=gi[ze]=!1;var Eo={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},So={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},xs={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Il={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Js=parseFloat,ts=parseInt,Ts=typeof Pr=="object"&&Pr&&Pr.Object===Object&&Pr,At=typeof self=="object"&&self&&self.Object===Object&&self,Ki=Ts||At||Function("return this")(),Or=t&&!t.nodeType&&t,Lo=Or&&!0&&a&&!a.nodeType&&a,Dl=Lo&&Lo.exports===Or,to=Dl&&Ts.process,Xn=function(){try{var ve=Lo&&Lo.require&&Lo.require("util").types;return ve||to&&to.binding&&to.binding("util")}catch{}}(),el=Xn&&Xn.isArrayBuffer,Ar=Xn&&Xn.isDate,Rl=Xn&&Xn.isMap,tl=Xn&&Xn.isRegExp,Pl=Xn&&Xn.isSet,Os=Xn&&Xn.isTypedArray;function rn(ve,$e,Pe){switch(Pe.length){case 0:return ve.call($e);case 1:return ve.call($e,Pe[0]);case 2:return ve.call($e,Pe[0],Pe[1]);case 3:return ve.call($e,Pe[0],Pe[1],Pe[2])}return ve.apply($e,Pe)}function wo(ve,$e,Pe,kt){for(var Kt=-1,Ai=ve==null?0:ve.length;++Kt<Ai;){var An=ve[Kt];$e(kt,An,Pe(An),ve)}return kt}function on(ve,$e){for(var Pe=-1,kt=ve==null?0:ve.length;++Pe<kt&&$e(ve[Pe],Pe,ve)!==!1;);return ve}function qn(ve,$e){for(var Pe=ve==null?0:ve.length;Pe--&&$e(ve[Pe],Pe,ve)!==!1;);return ve}function xo(ve,$e){for(var Pe=-1,kt=ve==null?0:ve.length;++Pe<kt;)if(!$e(ve[Pe],Pe,ve))return!1;return!0}function Mt(ve,$e){for(var Pe=-1,kt=ve==null?0:ve.length,Kt=0,Ai=[];++Pe<kt;){var An=ve[Pe];$e(An,Pe,ve)&&(Ai[Kt++]=An)}return Ai}function il(ve,$e){var Pe=ve==null?0:ve.length;return!!Pe&&R(ve,$e,0)>-1}function nl(ve,$e,Pe){for(var kt=-1,Kt=ve==null?0:ve.length;++kt<Kt;)if(Pe($e,ve[kt]))return!0;return!1}function Yi(ve,$e){for(var Pe=-1,kt=ve==null?0:ve.length,Kt=Array(kt);++Pe<kt;)Kt[Pe]=$e(ve[Pe],Pe,ve);return Kt}function Vn(ve,$e){for(var Pe=-1,kt=$e.length,Kt=ve.length;++Pe<kt;)ve[Kt+Pe]=$e[Pe];return ve}function To(ve,$e,Pe,kt){var Kt=-1,Ai=ve==null?0:ve.length;for(kt&&Ai&&(Pe=ve[++Kt]);++Kt<Ai;)Pe=$e(Pe,ve[Kt],Kt,ve);return Pe}function fd(ve,$e,Pe,kt){var Kt=ve==null?0:ve.length;for(kt&&Kt&&(Pe=ve[--Kt]);Kt--;)Pe=$e(Pe,ve[Kt],Kt,ve);return Pe}function As(ve,$e){for(var Pe=-1,kt=ve==null?0:ve.length;++Pe<kt;)if($e(ve[Pe],Pe,ve))return!0;return!1}var is=He("length");function rl(ve){return ve.split("")}function pi(ve){return ve.match(Qt)||[]}function g(ve,$e,Pe){var kt;return Pe(ve,function(Kt,Ai,An){if($e(Kt,Ai,An))return kt=Ai,!1}),kt}function w(ve,$e,Pe,kt){for(var Kt=ve.length,Ai=Pe+(kt?1:-1);kt?Ai--:++Ai<Kt;)if($e(ve[Ai],Ai,ve))return Ai;return-1}function R(ve,$e,Pe){return $e===$e?fa(ve,$e,Pe):w(ve,ee,Pe)}function H(ve,$e,Pe,kt){for(var Kt=Pe-1,Ai=ve.length;++Kt<Ai;)if(kt(ve[Kt],$e))return Kt;return-1}function ee(ve){return ve!==ve}function we(ve,$e){var Pe=ve==null?0:ve.length;return Pe?zt(ve,$e)/Pe:Re}function He(ve){return function($e){return $e==null?e:$e[ve]}}function Ke(ve){return function($e){return ve==null?e:ve[$e]}}function bt(ve,$e,Pe,kt,Kt){return Kt(ve,function(Ai,An,Di){Pe=kt?(kt=!1,Ai):$e(Pe,Ai,An,Di)}),Pe}function ht(ve,$e){var Pe=ve.length;for(ve.sort($e);Pe--;)ve[Pe]=ve[Pe].value;return ve}function zt(ve,$e){for(var Pe,kt=-1,Kt=ve.length;++kt<Kt;){var Ai=$e(ve[kt]);Ai!==e&&(Pe=Pe===e?Ai:Pe+Ai)}return Pe}function Nt(ve,$e){for(var Pe=-1,kt=Array(ve);++Pe<ve;)kt[Pe]=$e(Pe);return kt}function Zi(ve,$e){return Yi($e,function(Pe){return[Pe,ve[Pe]]})}function an(ve){return ve&&ve.slice(0,Xu(ve)+1).replace(Ct,"")}function Qi(ve){return function($e){return ve($e)}}function ns(ve,$e){return Yi($e,function(Pe){return ve[Pe]})}function ks(ve,$e){return ve.has($e)}function rs(ve,$e){for(var Pe=-1,kt=ve.length;++Pe<kt&&R($e,ve[Pe],0)>-1;);return Pe}function pd(ve,$e){for(var Pe=ve.length;Pe--&&R($e,ve[Pe],0)>-1;);return Pe}function Gu(ve,$e){for(var Pe=ve.length,kt=0;Pe--;)ve[Pe]===$e&&++kt;return kt}var md=Ke(Eo),Wu=Ke(So);function yf(ve){return"\\"+Il[ve]}function $u(ve,$e){return ve==null?e:ve[$e]}function ol(ve){return Ss.test(ve)}function Yu(ve){return ha.test(ve)}function Ef(ve){for(var $e,Pe=[];!($e=ve.next()).done;)Pe.push($e.value);return Pe}function sl(ve){var $e=-1,Pe=Array(ve.size);return ve.forEach(function(kt,Kt){Pe[++$e]=[Kt,kt]}),Pe}function ju(ve,$e){return function(Pe){return ve($e(Pe))}}function io(ve,$e){for(var Pe=-1,kt=ve.length,Kt=0,Ai=[];++Pe<kt;){var An=ve[Pe];(An===$e||An===c)&&(ve[Pe]=c,Ai[Kt++]=Pe)}return Ai}function Is(ve){var $e=-1,Pe=Array(ve.size);return ve.forEach(function(kt){Pe[++$e]=kt}),Pe}function Sf(ve){var $e=-1,Pe=Array(ve.size);return ve.forEach(function(kt){Pe[++$e]=[kt,kt]}),Pe}function fa(ve,$e,Pe){for(var kt=Pe-1,Kt=ve.length;++kt<Kt;)if(ve[kt]===$e)return kt;return-1}function vd(ve,$e,Pe){for(var kt=Pe+1;kt--;)if(ve[kt]===$e)return kt;return kt}function ll(ve){return ol(ve)?wf(ve):is(ve)}function Br(ve){return ol(ve)?xf(ve):rl(ve)}function Xu(ve){for(var $e=ve.length;$e--&&vt.test(ve.charAt($e)););return $e}var qu=Ke(xs);function wf(ve){for(var $e=yo.lastIndex=0;yo.test(ve);)++$e;return $e}function xf(ve){return ve.match(yo)||[]}function gd(ve){return ve.match(Qs)||[]}var Ku=function ve($e){$e=$e==null?Ki:Dt.defaults(Ki.Object(),$e,Dt.pick(Ki,es));var Pe=$e.Array,kt=$e.Date,Kt=$e.Error,Ai=$e.Function,An=$e.Math,Di=$e.Object,_d=$e.RegExp,Zu=$e.String,Vr=$e.TypeError,pa=Pe.prototype,bd=Ai.prototype,Ds=Di.prototype,Rs=$e["__core-js_shared__"],ma=bd.toString,Ri=Ds.hasOwnProperty,Tf=0,Qu=function(){var d=/[^.]+$/.exec(Rs&&Rs.keys&&Rs.keys.IE_PROTO||"");return d?"Symbol(src)_1."+d:""}(),Fl=Ds.toString,Of=ma.call(Di),Af=Ki._,ji=_d("^"+ma.call(Ri).replace(St,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),zr=Dl?$e.Buffer:e,dn=$e.Symbol,va=$e.Uint8Array,Ju=zr?zr.allocUnsafe:e,os=ju(Di.getPrototypeOf,Di),ec=Di.create,tc=Ds.propertyIsEnumerable,Ml=pa.splice,ic=dn?dn.isConcatSpreadable:e,Nl=dn?dn.iterator:e,Ps=dn?dn.toStringTag:e,al=function(){try{var d=jl(Di,"defineProperty");return d({},"",{}),d}catch{}}(),ga=$e.clearTimeout!==Ki.clearTimeout&&$e.clearTimeout,Ho=kt&&kt.now!==Ki.Date.now&&kt.now,kf=$e.setTimeout!==Ki.setTimeout&&$e.setTimeout,Fs=An.ceil,Ll=An.floor,dl=Di.getOwnPropertySymbols,If=zr?zr.isBuffer:e,Hl=$e.isFinite,nc=pa.join,Df=ju(Di.keys,Di),Ji=An.max,ir=An.min,Rf=kt.now,_a=$e.parseInt,Cd=An.random,rc=pa.reverse,Ms=jl($e,"DataView"),Bl=jl($e,"Map"),Vl=jl($e,"Promise"),Ns=jl($e,"Set"),ul=jl($e,"WeakMap"),Cr=jl(Di,"create"),ba=ul&&new ul,Bo={},Ca=Xl(Ms),oc=Xl(Bl),ya=Xl(Vl),Pf=Xl(Ns),sc=Xl(ul),cl=dn?dn.prototype:e,hl=cl?cl.valueOf:e,zl=cl?cl.toString:e;function G(d){if(kn(d)&&!si(d)&&!(d instanceof mi)){if(d instanceof kr)return d;if(Ri.call(d,"__wrapped__"))return cg(d)}return new kr(d)}var fl=function(){function d(){}return function(f){if(!Sn(f))return{};if(ec)return ec(f);d.prototype=f;var b=new d;return d.prototype=e,b}}();function Kn(){}function kr(d,f){this.__wrapped__=d,this.__actions__=[],this.__chain__=!!f,this.__index__=0,this.__values__=e}G.templateSettings={escape:Z,evaluate:ce,interpolate:Ee,variable:"",imports:{_:G}},G.prototype=Kn.prototype,G.prototype.constructor=G,kr.prototype=fl(Kn.prototype),kr.prototype.constructor=kr;function mi(d){this.__wrapped__=d,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=ne,this.__views__=[]}function lc(){var d=new mi(this.__wrapped__);return d.__actions__=Gr(this.__actions__),d.__dir__=this.__dir__,d.__filtered__=this.__filtered__,d.__iteratees__=Gr(this.__iteratees__),d.__takeCount__=this.__takeCount__,d.__views__=Gr(this.__views__),d}function Ff(){if(this.__filtered__){var d=new mi(this);d.__dir__=-1,d.__filtered__=!0}else d=this.clone(),d.__dir__*=-1;return d}function pl(){var d=this.__wrapped__.value(),f=this.__dir__,b=si(d),O=f<0,N=b?d.length:0,K=wy(0,N,this.__views__),se=K.start,he=K.end,Ae=he-se,Ze=O?he:se-1,Qe=this.__iteratees__,it=Qe.length,xt=0,Ft=ir(Ae,this.__takeCount__);if(!b||!O&&N==Ae&&Ft==Ae)return Vi(d,this.__actions__);var $t=[];e:for(;Ae--&&xt<Ft;){Ze+=f;for(var fi=-1,Yt=d[Ze];++fi<it;){var _i=Qe[fi],Si=_i.iteratee,so=_i.type,Rr=Si(Yt);if(so==ae)Yt=Rr;else if(!Rr){if(so==F)continue e;break e}}$t[xt++]=Yt}return $t}mi.prototype=fl(Kn.prototype),mi.prototype.constructor=mi;function ss(d){var f=-1,b=d==null?0:d.length;for(this.clear();++f<b;){var O=d[f];this.set(O[0],O[1])}}function Mf(){this.__data__=Cr?Cr(null):{},this.size=0}function ac(d){var f=this.has(d)&&delete this.__data__[d];return this.size-=f?1:0,f}function dc(d){var f=this.__data__;if(Cr){var b=f[d];return b===u?e:b}return Ri.call(f,d)?f[d]:e}function yd(d){var f=this.__data__;return Cr?f[d]!==e:Ri.call(f,d)}function Nf(d,f){var b=this.__data__;return this.size+=this.has(d)?0:1,b[d]=Cr&&f===e?u:f,this}ss.prototype.clear=Mf,ss.prototype.delete=ac,ss.prototype.get=dc,ss.prototype.has=yd,ss.prototype.set=Nf;function Vo(d){var f=-1,b=d==null?0:d.length;for(this.clear();++f<b;){var O=d[f];this.set(O[0],O[1])}}function uc(){this.__data__=[],this.size=0}function Lf(d){var f=this.__data__,b=vl(f,d);if(b<0)return!1;var O=f.length-1;return b==O?f.pop():Ml.call(f,b,1),--this.size,!0}function Hf(d){var f=this.__data__,b=vl(f,d);return b<0?e:f[b][1]}function cc(d){return vl(this.__data__,d)>-1}function Bf(d,f){var b=this.__data__,O=vl(b,d);return O<0?(++this.size,b.push([d,f])):b[O][1]=f,this}Vo.prototype.clear=uc,Vo.prototype.delete=Lf,Vo.prototype.get=Hf,Vo.prototype.has=cc,Vo.prototype.set=Bf;function zo(d){var f=-1,b=d==null?0:d.length;for(this.clear();++f<b;){var O=d[f];this.set(O[0],O[1])}}function Vf(){this.size=0,this.__data__={hash:new ss,map:new(Bl||Vo),string:new ss}}function zf(d){var f=Gc(this,d).delete(d);return this.size-=f?1:0,f}function ml(d){return Gc(this,d).get(d)}function hc(d){return Gc(this,d).has(d)}function fc(d,f){var b=Gc(this,d),O=b.size;return b.set(d,f),this.size+=b.size==O?0:1,this}zo.prototype.clear=Vf,zo.prototype.delete=zf,zo.prototype.get=ml,zo.prototype.has=hc,zo.prototype.set=fc;function ls(d){var f=-1,b=d==null?0:d.length;for(this.__data__=new zo;++f<b;)this.add(d[f])}function pc(d){return this.__data__.set(d,u),this}function mc(d){return this.__data__.has(d)}ls.prototype.add=ls.prototype.push=pc,ls.prototype.has=mc;function no(d){var f=this.__data__=new Vo(d);this.size=f.size}function Uf(){this.__data__=new Vo,this.size=0}function vc(d){var f=this.__data__,b=f.delete(d);return this.size=f.size,b}function gc(d){return this.__data__.get(d)}function _c(d){return this.__data__.has(d)}function bc(d,f){var b=this.__data__;if(b instanceof Vo){var O=b.__data__;if(!Bl||O.length<r-1)return O.push([d,f]),this.size=++b.size,this;b=this.__data__=new zo(O)}return b.set(d,f),this.size=b.size,this}no.prototype.clear=Uf,no.prototype.delete=vc,no.prototype.get=gc,no.prototype.has=_c,no.prototype.set=bc;function Ed(d,f){var b=si(d),O=!b&&ql(d),N=!b&&!O&&_l(d),K=!b&&!O&&!N&&Pa(d),se=b||O||N||K,he=se?Nt(d.length,Zu):[],Ae=he.length;for(var Ze in d)(f||Ri.call(d,Ze))&&!(se&&(Ze=="length"||N&&(Ze=="offset"||Ze=="parent")||K&&(Ze=="buffer"||Ze=="byteLength"||Ze=="byteOffset")||zs(Ze,Ae)))&&he.push(Ze);return he}function Sd(d){var f=d.length;return f?d[gl(0,f-1)]:e}function wd(d,f){return Wc(Gr(d),ds(f,0,d.length))}function xd(d){return Wc(Gr(d))}function Ea(d,f,b){(b!==e&&!jo(d[f],b)||b===e&&!(f in d))&&ur(d,f,b)}function Ul(d,f,b){var O=d[f];(!(Ri.call(d,f)&&jo(O,b))||b===e&&!(f in d))&&ur(d,f,b)}function vl(d,f){for(var b=d.length;b--;)if(jo(d[b][0],f))return b;return-1}function Gl(d,f,b,O){return ro(d,function(N,K,se){f(O,N,b(N),se)}),O}function Cc(d,f){return d&&hs(f,or(f),d)}function Sa(d,f){return d&&hs(f,$r(f),d)}function ur(d,f,b){f=="__proto__"&&al?al(d,f,{configurable:!0,enumerable:!0,value:b,writable:!0}):d[f]=b}function as(d,f){for(var b=-1,O=f.length,N=Pe(O),K=d==null;++b<O;)N[b]=K?e:fp(d,f[b]);return N}function ds(d,f,b){return d===d&&(b!==e&&(d=d<=b?d:b),f!==e&&(d=d>=f?d:f)),d}function Ur(d,f,b,O,N,K){var se,he=f&p,Ae=f&m,Ze=f&v;if(b&&(se=N?b(d,O,N,K):b(d)),se!==e)return se;if(!Sn(d))return d;var Qe=si(d);if(Qe){if(se=Ty(d),!he)return Gr(d,se)}else{var it=Er(d),xt=it==yt||it==at;if(_l(d))return Lv(d,he);if(it==$||it==Ve||xt&&!N){if(se=Ae||xt?{}:ig(d),!he)return Ae?my(d,Sa(se,d)):py(d,Cc(se,d))}else{if(!gi[it])return N?d:{};se=Oy(d,it,he)}}K||(K=new no);var Ft=K.get(d);if(Ft)return Ft;K.set(d,se),Dg(d)?d.forEach(function(Yt){se.add(Ur(Yt,f,b,Yt,d,K))}):kg(d)&&d.forEach(function(Yt,_i){se.set(_i,Ur(Yt,f,b,_i,d,K))});var $t=Ze?Ae?Jf:Qf:Ae?$r:or,fi=Qe?e:$t(d);return on(fi||d,function(Yt,_i){fi&&(_i=Yt,Yt=d[_i]),Ul(se,_i,Ur(Yt,f,b,_i,d,K))}),se}function us(d){var f=or(d);return function(b){return yc(b,d,f)}}function yc(d,f,b){var O=b.length;if(d==null)return!O;for(d=Di(d);O--;){var N=b[O],K=f[N],se=d[N];if(se===e&&!(N in d)||!K(se))return!1}return!0}function Td(d,f,b){if(typeof d!="function")throw new Vr(s);return Vd(function(){d.apply(e,b)},f)}function yr(d,f,b,O){var N=-1,K=il,se=!0,he=d.length,Ae=[],Ze=f.length;if(!he)return Ae;b&&(f=Yi(f,Qi(b))),O?(K=nl,se=!1):f.length>=r&&(K=ks,se=!1,f=new ls(f));e:for(;++N<he;){var Qe=d[N],it=b==null?Qe:b(Qe);if(Qe=O||Qe!==0?Qe:0,se&&it===it){for(var xt=Ze;xt--;)if(f[xt]===it)continue e;Ae.push(Qe)}else K(f,it,O)||Ae.push(Qe)}return Ae}var ro=Uv(Oo),Od=Uv(Id,!0);function Ec(d,f){var b=!0;return ro(d,function(O,N,K){return b=!!f(O,N,K),b}),b}function Ls(d,f,b){for(var O=-1,N=d.length;++O<N;){var K=d[O],se=f(K);if(se!=null&&(he===e?se===se&&!oo(se):b(se,he)))var he=se,Ae=K}return Ae}function Sc(d,f,b,O){var N=d.length;for(b=di(b),b<0&&(b=-b>N?0:N+b),O=O===e||O>N?N:di(O),O<0&&(O+=N),O=b>O?0:Pg(O);b<O;)d[b++]=f;return d}function wc(d,f){var b=[];return ro(d,function(O,N,K){f(O,N,K)&&b.push(O)}),b}function zn(d,f,b,O,N){var K=-1,se=d.length;for(b||(b=ky),N||(N=[]);++K<se;){var he=d[K];f>0&&b(he)?f>1?zn(he,f-1,b,O,N):Vn(N,he):O||(N[N.length]=he)}return N}var Ad=Gv(),kd=Gv(!0);function Oo(d,f){return d&&Ad(d,f,or)}function Id(d,f){return d&&kd(d,f,or)}function wa(d,f){return Mt(f,function(b){return Us(d[b])})}function Uo(d,f){f=$o(f,d);for(var b=0,O=f.length;d!=null&&b<O;)d=d[fs(f[b++])];return b&&b==O?d:e}function xc(d,f,b){var O=f(d);return si(d)?O:Vn(O,b(d))}function nr(d){return d==null?d===e?ft:ge:Ps&&Ps in Di(d)?Sy(d):Ny(d)}function xa(d,f){return d>f}function Tc(d,f){return d!=null&&Ri.call(d,f)}function Oc(d,f){return d!=null&&f in Di(d)}function Ac(d,f,b){return d>=ir(f,b)&&d<Ji(f,b)}function Ta(d,f,b){for(var O=b?nl:il,N=d[0].length,K=d.length,se=K,he=Pe(K),Ae=1/0,Ze=[];se--;){var Qe=d[se];se&&f&&(Qe=Yi(Qe,Qi(f))),Ae=ir(Qe.length,Ae),he[se]=!b&&(f||N>=120&&Qe.length>=120)?new ls(se&&Qe):e}Qe=d[0];var it=-1,xt=he[0];e:for(;++it<N&&Ze.length<Ae;){var Ft=Qe[it],$t=f?f(Ft):Ft;if(Ft=b||Ft!==0?Ft:0,!(xt?ks(xt,$t):O(Ze,$t,b))){for(se=K;--se;){var fi=he[se];if(!(fi?ks(fi,$t):O(d[se],$t,b)))continue e}xt&&xt.push($t),Ze.push(Ft)}}return Ze}function cs(d,f,b,O){return Oo(d,function(N,K,se){f(O,b(N),K,se)}),O}function Hs(d,f,b){f=$o(f,d),d=sg(d,f);var O=d==null?d:d[fs(Ao(f))];return O==null?e:rn(O,d,b)}function Dd(d){return kn(d)&&nr(d)==Ve}function Rd(d){return kn(d)&&nr(d)==Xt}function kc(d){return kn(d)&&nr(d)==Le}function Wl(d,f,b,O,N){return d===f?!0:d==null||f==null||!kn(d)&&!kn(f)?d!==d&&f!==f:Gf(d,f,b,O,Wl,N)}function Gf(d,f,b,O,N,K){var se=si(d),he=si(f),Ae=se?ue:Er(d),Ze=he?ue:Er(f);Ae=Ae==Ve?$:Ae,Ze=Ze==Ve?$:Ze;var Qe=Ae==$,it=Ze==$,xt=Ae==Ze;if(xt&&_l(d)){if(!_l(f))return!1;se=!0,Qe=!1}if(xt&&!Qe)return K||(K=new no),se||Pa(d)?Jv(d,f,b,O,N,K):yy(d,f,Ae,b,O,N,K);if(!(b&_)){var Ft=Qe&&Ri.call(d,"__wrapped__"),$t=it&&Ri.call(f,"__wrapped__");if(Ft||$t){var fi=Ft?d.value():d,Yt=$t?f.value():f;return K||(K=new no),N(fi,Yt,b,O,K)}}return xt?(K||(K=new no),Ey(d,f,b,O,N,K)):!1}function Wf(d){return kn(d)&&Er(d)==k}function Pd(d,f,b,O){var N=b.length,K=N,se=!O;if(d==null)return!K;for(d=Di(d);N--;){var he=b[N];if(se&&he[2]?he[1]!==d[he[0]]:!(he[0]in d))return!1}for(;++N<K;){he=b[N];var Ae=he[0],Ze=d[Ae],Qe=he[1];if(se&&he[2]){if(Ze===e&&!(Ae in d))return!1}else{var it=new no;if(O)var xt=O(Ze,Qe,Ae,d,f,it);if(!(xt===e?Wl(Qe,Ze,_|C,O,it):xt))return!1}}return!0}function Ic(d){if(!Sn(d)||Dy(d))return!1;var f=Us(d)?ji:wt;return f.test(Xl(d))}function $f(d){return kn(d)&&nr(d)==Fe}function Dc(d){return kn(d)&&Er(d)==Me}function Rc(d){return kn(d)&&Kc(d.length)&&!!Ii[nr(d)]}function $l(d){return typeof d=="function"?d:d==null?Yr:typeof d=="object"?si(d)?Go(d[0],d[1]):Md(d):Wg(d)}function Oa(d){if(!Bd(d))return Df(d);var f=[];for(var b in Di(d))Ri.call(d,b)&&b!="constructor"&&f.push(b);return f}function Pc(d){if(!Sn(d))return My(d);var f=Bd(d),b=[];for(var O in d)O=="constructor"&&(f||!Ri.call(d,O))||b.push(O);return b}function Aa(d,f){return d<f}function Fd(d,f){var b=-1,O=Wr(d)?Pe(d.length):[];return ro(d,function(N,K,se){O[++b]=f(N,K,se)}),O}function Md(d){var f=tp(d);return f.length==1&&f[0][2]?rg(f[0][0],f[0][1]):function(b){return b===d||Pd(b,d,f)}}function Go(d,f){return np(d)&&ng(f)?rg(fs(d),f):function(b){var O=fp(b,d);return O===e&&O===f?pp(b,d):Wl(f,O,_|C)}}function rr(d,f,b,O,N){d!==f&&Ad(f,function(K,se){if(N||(N=new no),Sn(K))Yf(d,f,se,b,rr,O,N);else{var he=O?O(op(d,se),K,se+"",d,f,N):e;he===e&&(he=K),Ea(d,se,he)}},$r)}function Yf(d,f,b,O,N,K,se){var he=op(d,b),Ae=op(f,b),Ze=se.get(Ae);if(Ze){Ea(d,b,Ze);return}var Qe=K?K(he,Ae,b+"",d,f,se):e,it=Qe===e;if(it){var xt=si(Ae),Ft=!xt&&_l(Ae),$t=!xt&&!Ft&&Pa(Ae);Qe=Ae,xt||Ft||$t?si(he)?Qe=he:Dn(he)?Qe=Gr(he):Ft?(it=!1,Qe=Lv(Ae,!0)):$t?(it=!1,Qe=Hv(Ae,!0)):Qe=[]:zd(Ae)||ql(Ae)?(Qe=he,ql(he)?Qe=Fg(he):(!Sn(he)||Us(he))&&(Qe=ig(Ae))):it=!1}it&&(se.set(Ae,Qe),N(Qe,Ae,O,K,se),se.delete(Ae)),Ea(d,b,Qe)}function Fc(d,f){var b=d.length;if(b)return f+=f<0?b:0,zs(f,b)?d[f]:e}function Ir(d,f,b){f.length?f=Yi(f,function(K){return si(K)?function(se){return Uo(se,K.length===1?K[0]:K)}:K}):f=[Yr];var O=-1;f=Yi(f,Qi(Wt()));var N=Fd(d,function(K,se,he){var Ae=Yi(f,function(Ze){return Ze(K)});return{criteria:Ae,index:++O,value:K}});return ht(N,function(K,se){return fy(K,se,b)})}function Mc(d,f){return Nd(d,f,function(b,O){return pp(d,O)})}function Nd(d,f,b){for(var O=-1,N=f.length,K={};++O<N;){var se=f[O],he=Uo(d,se);b(he,se)&&T(K,$o(se,d),he)}return K}function jf(d){return function(f){return Uo(f,d)}}function Ld(d,f,b,O){var N=O?H:R,K=-1,se=f.length,he=d;for(d===f&&(f=Gr(f)),b&&(he=Yi(d,Qi(b)));++K<se;)for(var Ae=0,Ze=f[K],Qe=b?b(Ze):Ze;(Ae=N(he,Qe,Ae,O))>-1;)he!==d&&Ml.call(he,Ae,1),Ml.call(d,Ae,1);return d}function Nc(d,f){for(var b=d?f.length:0,O=b-1;b--;){var N=f[b];if(b==O||N!==K){var K=N;zs(N)?Ml.call(d,N,1):Jt(d,N)}}return d}function gl(d,f){return d+Ll(Cd()*(f-d+1))}function Xf(d,f,b,O){for(var N=-1,K=Ji(Fs((f-d)/(b||1)),0),se=Pe(K);K--;)se[O?K:++N]=d,d+=b;return se}function Yl(d,f){var b="";if(!d||f<1||f>xe)return b;do f%2&&(b+=d),f=Ll(f/2),f&&(d+=d);while(f);return b}function oi(d,f){return sp(og(d,f,Yr),d+"")}function Wo(d){return Sd(Fa(d))}function E(d,f){var b=Fa(d);return Wc(b,ds(f,0,b.length))}function T(d,f,b,O){if(!Sn(d))return d;f=$o(f,d);for(var N=-1,K=f.length,se=K-1,he=d;he!=null&&++N<K;){var Ae=fs(f[N]),Ze=b;if(Ae==="__proto__"||Ae==="constructor"||Ae==="prototype")return d;if(N!=se){var Qe=he[Ae];Ze=O?O(Qe,Ae,he):e,Ze===e&&(Ze=Sn(Qe)?Qe:zs(f[N+1])?[]:{})}Ul(he,Ae,Ze),he=he[Ae]}return d}var I=ba?function(d,f){return ba.set(d,f),d}:Yr,V=al?function(d,f){return al(d,"toString",{configurable:!0,enumerable:!1,value:vp(f),writable:!0})}:Yr;function j(d){return Wc(Fa(d))}function Y(d,f,b){var O=-1,N=d.length;f<0&&(f=-f>N?0:N+f),b=b>N?N:b,b<0&&(b+=N),N=f>b?0:b-f>>>0,f>>>=0;for(var K=Pe(N);++O<N;)K[O]=d[O+f];return K}function Oe(d,f){var b;return ro(d,function(O,N,K){return b=f(O,N,K),!b}),!!b}function tt(d,f,b){var O=0,N=d==null?O:d.length;if(typeof f=="number"&&f===f&&N<=Be){for(;O<N;){var K=O+N>>>1,se=d[K];se!==null&&!oo(se)&&(b?se<=f:se<f)?O=K+1:N=K}return N}return dt(d,f,Yr,b)}function dt(d,f,b,O){var N=0,K=d==null?0:d.length;if(K===0)return 0;f=b(f);for(var se=f!==f,he=f===null,Ae=oo(f),Ze=f===e;N<K;){var Qe=Ll((N+K)/2),it=b(d[Qe]),xt=it!==e,Ft=it===null,$t=it===it,fi=oo(it);if(se)var Yt=O||$t;else Ze?Yt=$t&&(O||xt):he?Yt=$t&&xt&&(O||!Ft):Ae?Yt=$t&&xt&&!Ft&&(O||!fi):Ft||fi?Yt=!1:Yt=O?it<=f:it<f;Yt?N=Qe+1:K=Qe}return ir(K,fe)}function mt(d,f){for(var b=-1,O=d.length,N=0,K=[];++b<O;){var se=d[b],he=f?f(se):se;if(!b||!jo(he,Ae)){var Ae=he;K[N++]=se===0?0:se}}return K}function Et(d){return typeof d=="number"?d:oo(d)?Re:+d}function et(d){if(typeof d=="string")return d;if(si(d))return Yi(d,et)+"";if(oo(d))return zl?zl.call(d):"";var f=d+"";return f=="0"&&1/d==-De?"-0":f}function ni(d,f,b){var O=-1,N=il,K=d.length,se=!0,he=[],Ae=he;if(b)se=!1,N=nl;else if(K>=r){var Ze=f?null:by(d);if(Ze)return Is(Ze);se=!1,N=ks,Ae=new ls}else Ae=f?[]:he;e:for(;++O<K;){var Qe=d[O],it=f?f(Qe):Qe;if(Qe=b||Qe!==0?Qe:0,se&&it===it){for(var xt=Ae.length;xt--;)if(Ae[xt]===it)continue e;f&&Ae.push(it),he.push(Qe)}else N(Ae,it,b)||(Ae!==he&&Ae.push(it),he.push(Qe))}return he}function Jt(d,f){return f=$o(f,d),d=sg(d,f),d==null||delete d[fs(Ao(f))]}function wi(d,f,b,O){return T(d,f,b(Uo(d,f)),O)}function Bi(d,f,b,O){for(var N=d.length,K=O?N:-1;(O?K--:++K<N)&&f(d[K],K,d););return b?Y(d,O?0:K,O?K+1:N):Y(d,O?K+1:0,O?N:K)}function Vi(d,f){var b=d;return b instanceof mi&&(b=b.value()),To(f,function(O,N){return N.func.apply(N.thisArg,Vn([O],N.args))},b)}function _n(d,f,b){var O=d.length;if(O<2)return O?ni(d[0]):[];for(var N=-1,K=Pe(O);++N<O;)for(var se=d[N],he=-1;++he<O;)he!=N&&(K[N]=yr(K[N]||se,d[he],f,b));return ni(zn(K,1),f,b)}function ai(d,f,b){for(var O=-1,N=d.length,K=f.length,se={};++O<N;){var he=O<K?f[O]:e;b(se,d[O],he)}return se}function In(d){return Dn(d)?d:[]}function Zn(d){return typeof d=="function"?d:Yr}function $o(d,f){return si(d)?d:np(d,f)?[d]:ug(zi(d))}var ka=oi;function Yo(d,f,b){var O=d.length;return b=b===e?O:b,!f&&b>=O?d:Y(d,f,b)}var Nv=ga||function(d){return Ki.clearTimeout(d)};function Lv(d,f){if(f)return d.slice();var b=d.length,O=Ju?Ju(b):new d.constructor(b);return d.copy(O),O}function qf(d){var f=new d.constructor(d.byteLength);return new va(f).set(new va(d)),f}function uy(d,f){var b=f?qf(d.buffer):d.buffer;return new d.constructor(b,d.byteOffset,d.byteLength)}function cy(d){var f=new d.constructor(d.source,_t.exec(d));return f.lastIndex=d.lastIndex,f}function hy(d){return hl?Di(hl.call(d)):{}}function Hv(d,f){var b=f?qf(d.buffer):d.buffer;return new d.constructor(b,d.byteOffset,d.length)}function Bv(d,f){if(d!==f){var b=d!==e,O=d===null,N=d===d,K=oo(d),se=f!==e,he=f===null,Ae=f===f,Ze=oo(f);if(!he&&!Ze&&!K&&d>f||K&&se&&Ae&&!he&&!Ze||O&&se&&Ae||!b&&Ae||!N)return 1;if(!O&&!K&&!Ze&&d<f||Ze&&b&&N&&!O&&!K||he&&b&&N||!se&&N||!Ae)return-1}return 0}function fy(d,f,b){for(var O=-1,N=d.criteria,K=f.criteria,se=N.length,he=b.length;++O<se;){var Ae=Bv(N[O],K[O]);if(Ae){if(O>=he)return Ae;var Ze=b[O];return Ae*(Ze=="desc"?-1:1)}}return d.index-f.index}function Vv(d,f,b,O){for(var N=-1,K=d.length,se=b.length,he=-1,Ae=f.length,Ze=Ji(K-se,0),Qe=Pe(Ae+Ze),it=!O;++he<Ae;)Qe[he]=f[he];for(;++N<se;)(it||N<K)&&(Qe[b[N]]=d[N]);for(;Ze--;)Qe[he++]=d[N++];return Qe}function zv(d,f,b,O){for(var N=-1,K=d.length,se=-1,he=b.length,Ae=-1,Ze=f.length,Qe=Ji(K-he,0),it=Pe(Qe+Ze),xt=!O;++N<Qe;)it[N]=d[N];for(var Ft=N;++Ae<Ze;)it[Ft+Ae]=f[Ae];for(;++se<he;)(xt||N<K)&&(it[Ft+b[se]]=d[N++]);return it}function Gr(d,f){var b=-1,O=d.length;for(f||(f=Pe(O));++b<O;)f[b]=d[b];return f}function hs(d,f,b,O){var N=!b;b||(b={});for(var K=-1,se=f.length;++K<se;){var he=f[K],Ae=O?O(b[he],d[he],he,b,d):e;Ae===e&&(Ae=d[he]),N?ur(b,he,Ae):Ul(b,he,Ae)}return b}function py(d,f){return hs(d,ip(d),f)}function my(d,f){return hs(d,eg(d),f)}function Lc(d,f){return function(b,O){var N=si(b)?wo:Gl,K=f?f():{};return N(b,d,Wt(O,2),K)}}function Ia(d){return oi(function(f,b){var O=-1,N=b.length,K=N>1?b[N-1]:e,se=N>2?b[2]:e;for(K=d.length>3&&typeof K=="function"?(N--,K):e,se&&Dr(b[0],b[1],se)&&(K=N<3?e:K,N=1),f=Di(f);++O<N;){var he=b[O];he&&d(f,he,O,K)}return f})}function Uv(d,f){return function(b,O){if(b==null)return b;if(!Wr(b))return d(b,O);for(var N=b.length,K=f?N:-1,se=Di(b);(f?K--:++K<N)&&O(se[K],K,se)!==!1;);return b}}function Gv(d){return function(f,b,O){for(var N=-1,K=Di(f),se=O(f),he=se.length;he--;){var Ae=se[d?he:++N];if(b(K[Ae],Ae,K)===!1)break}return f}}function vy(d,f,b){var O=f&x,N=Hd(d);function K(){var se=this&&this!==Ki&&this instanceof K?N:d;return se.apply(O?b:this,arguments)}return K}function Wv(d){return function(f){f=zi(f);var b=ol(f)?Br(f):e,O=b?b[0]:f.charAt(0),N=b?Yo(b,1).join(""):f.slice(1);return O[d]()+N}}function Da(d){return function(f){return To(Ug(zg(f).replace(Hr,"")),d,"")}}function Hd(d){return function(){var f=arguments;switch(f.length){case 0:return new d;case 1:return new d(f[0]);case 2:return new d(f[0],f[1]);case 3:return new d(f[0],f[1],f[2]);case 4:return new d(f[0],f[1],f[2],f[3]);case 5:return new d(f[0],f[1],f[2],f[3],f[4]);case 6:return new d(f[0],f[1],f[2],f[3],f[4],f[5]);case 7:return new d(f[0],f[1],f[2],f[3],f[4],f[5],f[6])}var b=fl(d.prototype),O=d.apply(b,f);return Sn(O)?O:b}}function gy(d,f,b){var O=Hd(d);function N(){for(var K=arguments.length,se=Pe(K),he=K,Ae=Ra(N);he--;)se[he]=arguments[he];var Ze=K<3&&se[0]!==Ae&&se[K-1]!==Ae?[]:io(se,Ae);if(K-=Ze.length,K<b)return qv(d,f,Hc,N.placeholder,e,se,Ze,e,e,b-K);var Qe=this&&this!==Ki&&this instanceof N?O:d;return rn(Qe,this,se)}return N}function $v(d){return function(f,b,O){var N=Di(f);if(!Wr(f)){var K=Wt(b,3);f=or(f),b=function(he){return K(N[he],he,N)}}var se=d(f,b,O);return se>-1?N[K?f[se]:se]:e}}function Yv(d){return Vs(function(f){var b=f.length,O=b,N=kr.prototype.thru;for(d&&f.reverse();O--;){var K=f[O];if(typeof K!="function")throw new Vr(s);if(N&&!se&&Uc(K)=="wrapper")var se=new kr([],!0)}for(O=se?O:b;++O<b;){K=f[O];var he=Uc(K),Ae=he=="wrapper"?ep(K):e;Ae&&rp(Ae[0])&&Ae[1]==(B|D|P|Q)&&!Ae[4].length&&Ae[9]==1?se=se[Uc(Ae[0])].apply(se,Ae[3]):se=K.length==1&&rp(K)?se[he]():se.thru(K)}return function(){var Ze=arguments,Qe=Ze[0];if(se&&Ze.length==1&&si(Qe))return se.plant(Qe).value();for(var it=0,xt=b?f[it].apply(this,Ze):Qe;++it<b;)xt=f[it].call(this,xt);return xt}})}function Hc(d,f,b,O,N,K,se,he,Ae,Ze){var Qe=f&B,it=f&x,xt=f&S,Ft=f&(D|A),$t=f&L,fi=xt?e:Hd(d);function Yt(){for(var _i=arguments.length,Si=Pe(_i),so=_i;so--;)Si[so]=arguments[so];if(Ft)var Rr=Ra(Yt),lo=Gu(Si,Rr);if(O&&(Si=Vv(Si,O,N,Ft)),K&&(Si=zv(Si,K,se,Ft)),_i-=lo,Ft&&_i<Ze){var Rn=io(Si,Rr);return qv(d,f,Hc,Yt.placeholder,b,Si,Rn,he,Ae,Ze-_i)}var Xo=it?b:this,Ws=xt?Xo[d]:d;return _i=Si.length,he?Si=Ly(Si,he):$t&&_i>1&&Si.reverse(),Qe&&Ae<_i&&(Si.length=Ae),this&&this!==Ki&&this instanceof Yt&&(Ws=fi||Hd(Ws)),Ws.apply(Xo,Si)}return Yt}function jv(d,f){return function(b,O){return cs(b,d,f(O),{})}}function Bc(d,f){return function(b,O){var N;if(b===e&&O===e)return f;if(b!==e&&(N=b),O!==e){if(N===e)return O;typeof b=="string"||typeof O=="string"?(b=et(b),O=et(O)):(b=Et(b),O=Et(O)),N=d(b,O)}return N}}function Kf(d){return Vs(function(f){return f=Yi(f,Qi(Wt())),oi(function(b){var O=this;return d(f,function(N){return rn(N,O,b)})})})}function Vc(d,f){f=f===e?" ":et(f);var b=f.length;if(b<2)return b?Yl(f,d):f;var O=Yl(f,Fs(d/ll(f)));return ol(f)?Yo(Br(O),0,d).join(""):O.slice(0,d)}function _y(d,f,b,O){var N=f&x,K=Hd(d);function se(){for(var he=-1,Ae=arguments.length,Ze=-1,Qe=O.length,it=Pe(Qe+Ae),xt=this&&this!==Ki&&this instanceof se?K:d;++Ze<Qe;)it[Ze]=O[Ze];for(;Ae--;)it[Ze++]=arguments[++he];return rn(xt,N?b:this,it)}return se}function Xv(d){return function(f,b,O){return O&&typeof O!="number"&&Dr(f,b,O)&&(b=O=e),f=Gs(f),b===e?(b=f,f=0):b=Gs(b),O=O===e?f<b?1:-1:Gs(O),Xf(f,b,O,d)}}function zc(d){return function(f,b){return typeof f=="string"&&typeof b=="string"||(f=ko(f),b=ko(b)),d(f,b)}}function qv(d,f,b,O,N,K,se,he,Ae,Ze){var Qe=f&D,it=Qe?se:e,xt=Qe?e:se,Ft=Qe?K:e,$t=Qe?e:K;f|=Qe?P:M,f&=~(Qe?M:P),f&y||(f&=~(x|S));var fi=[d,f,N,Ft,it,$t,xt,he,Ae,Ze],Yt=b.apply(e,fi);return rp(d)&&lg(Yt,fi),Yt.placeholder=O,ag(Yt,d,f)}function Zf(d){var f=An[d];return function(b,O){if(b=ko(b),O=O==null?0:ir(di(O),292),O&&Hl(b)){var N=(zi(b)+"e").split("e"),K=f(N[0]+"e"+(+N[1]+O));return N=(zi(K)+"e").split("e"),+(N[0]+"e"+(+N[1]-O))}return f(b)}}var by=Ns&&1/Is(new Ns([,-0]))[1]==De?function(d){return new Ns(d)}:bp;function Kv(d){return function(f){var b=Er(f);return b==k?sl(f):b==Me?Sf(f):Zi(f,d(f))}}function Bs(d,f,b,O,N,K,se,he){var Ae=f&S;if(!Ae&&typeof d!="function")throw new Vr(s);var Ze=O?O.length:0;if(Ze||(f&=~(P|M),O=N=e),se=se===e?se:Ji(di(se),0),he=he===e?he:di(he),Ze-=N?N.length:0,f&M){var Qe=O,it=N;O=N=e}var xt=Ae?e:ep(d),Ft=[d,f,b,O,N,Qe,it,K,se,he];if(xt&&Fy(Ft,xt),d=Ft[0],f=Ft[1],b=Ft[2],O=Ft[3],N=Ft[4],he=Ft[9]=Ft[9]===e?Ae?0:d.length:Ji(Ft[9]-Ze,0),!he&&f&(D|A)&&(f&=~(D|A)),!f||f==x)var $t=vy(d,f,b);else f==D||f==A?$t=gy(d,f,he):(f==P||f==(x|P))&&!N.length?$t=_y(d,f,b,O):$t=Hc.apply(e,Ft);var fi=xt?I:lg;return ag(fi($t,Ft),d,f)}function Zv(d,f,b,O){return d===e||jo(d,Ds[b])&&!Ri.call(O,b)?f:d}function Qv(d,f,b,O,N,K){return Sn(d)&&Sn(f)&&(K.set(f,d),rr(d,f,e,Qv,K),K.delete(f)),d}function Cy(d){return zd(d)?e:d}function Jv(d,f,b,O,N,K){var se=b&_,he=d.length,Ae=f.length;if(he!=Ae&&!(se&&Ae>he))return!1;var Ze=K.get(d),Qe=K.get(f);if(Ze&&Qe)return Ze==f&&Qe==d;var it=-1,xt=!0,Ft=b&C?new ls:e;for(K.set(d,f),K.set(f,d);++it<he;){var $t=d[it],fi=f[it];if(O)var Yt=se?O(fi,$t,it,f,d,K):O($t,fi,it,d,f,K);if(Yt!==e){if(Yt)continue;xt=!1;break}if(Ft){if(!As(f,function(_i,Si){if(!ks(Ft,Si)&&($t===_i||N($t,_i,b,O,K)))return Ft.push(Si)})){xt=!1;break}}else if(!($t===fi||N($t,fi,b,O,K))){xt=!1;break}}return K.delete(d),K.delete(f),xt}function yy(d,f,b,O,N,K,se){switch(b){case It:if(d.byteLength!=f.byteLength||d.byteOffset!=f.byteOffset)return!1;d=d.buffer,f=f.buffer;case Xt:return!(d.byteLength!=f.byteLength||!K(new va(d),new va(f)));case be:case Le:case te:return jo(+d,+f);case Ge:return d.name==f.name&&d.message==f.message;case Fe:case pe:return d==f+"";case k:var he=sl;case Me:var Ae=O&_;if(he||(he=Is),d.size!=f.size&&!Ae)return!1;var Ze=se.get(d);if(Ze)return Ze==f;O|=C,se.set(d,f);var Qe=Jv(he(d),he(f),O,N,K,se);return se.delete(d),Qe;case Ue:if(hl)return hl.call(d)==hl.call(f)}return!1}function Ey(d,f,b,O,N,K){var se=b&_,he=Qf(d),Ae=he.length,Ze=Qf(f),Qe=Ze.length;if(Ae!=Qe&&!se)return!1;for(var it=Ae;it--;){var xt=he[it];if(!(se?xt in f:Ri.call(f,xt)))return!1}var Ft=K.get(d),$t=K.get(f);if(Ft&&$t)return Ft==f&&$t==d;var fi=!0;K.set(d,f),K.set(f,d);for(var Yt=se;++it<Ae;){xt=he[it];var _i=d[xt],Si=f[xt];if(O)var so=se?O(Si,_i,xt,f,d,K):O(_i,Si,xt,d,f,K);if(!(so===e?_i===Si||N(_i,Si,b,O,K):so)){fi=!1;break}Yt||(Yt=xt=="constructor")}if(fi&&!Yt){var Rr=d.constructor,lo=f.constructor;Rr!=lo&&"constructor"in d&&"constructor"in f&&!(typeof Rr=="function"&&Rr instanceof Rr&&typeof lo=="function"&&lo instanceof lo)&&(fi=!1)}return K.delete(d),K.delete(f),fi}function Vs(d){return sp(og(d,e,pg),d+"")}function Qf(d){return xc(d,or,ip)}function Jf(d){return xc(d,$r,eg)}var ep=ba?function(d){return ba.get(d)}:bp;function Uc(d){for(var f=d.name+"",b=Bo[f],O=Ri.call(Bo,f)?b.length:0;O--;){var N=b[O],K=N.func;if(K==null||K==d)return N.name}return f}function Ra(d){var f=Ri.call(G,"placeholder")?G:d;return f.placeholder}function Wt(){var d=G.iteratee||gp;return d=d===gp?$l:d,arguments.length?d(arguments[0],arguments[1]):d}function Gc(d,f){var b=d.__data__;return Iy(f)?b[typeof f=="string"?"string":"hash"]:b.map}function tp(d){for(var f=or(d),b=f.length;b--;){var O=f[b],N=d[O];f[b]=[O,N,ng(N)]}return f}function jl(d,f){var b=$u(d,f);return Ic(b)?b:e}function Sy(d){var f=Ri.call(d,Ps),b=d[Ps];try{d[Ps]=e;var O=!0}catch{}var N=Fl.call(d);return O&&(f?d[Ps]=b:delete d[Ps]),N}var ip=dl?function(d){return d==null?[]:(d=Di(d),Mt(dl(d),function(f){return tc.call(d,f)}))}:Cp,eg=dl?function(d){for(var f=[];d;)Vn(f,ip(d)),d=os(d);return f}:Cp,Er=nr;(Ms&&Er(new Ms(new ArrayBuffer(1)))!=It||Bl&&Er(new Bl)!=k||Vl&&Er(Vl.resolve())!=X||Ns&&Er(new Ns)!=Me||ul&&Er(new ul)!=ze)&&(Er=function(d){var f=nr(d),b=f==$?d.constructor:e,O=b?Xl(b):"";if(O)switch(O){case Ca:return It;case oc:return k;case ya:return X;case Pf:return Me;case sc:return ze}return f});function wy(d,f,b){for(var O=-1,N=b.length;++O<N;){var K=b[O],se=K.size;switch(K.type){case"drop":d+=se;break;case"dropRight":f-=se;break;case"take":f=ir(f,d+se);break;case"takeRight":d=Ji(d,f-se);break}}return{start:d,end:f}}function xy(d){var f=d.match(ki);return f?f[1].split(Ui):[]}function tg(d,f,b){f=$o(f,d);for(var O=-1,N=f.length,K=!1;++O<N;){var se=fs(f[O]);if(!(K=d!=null&&b(d,se)))break;d=d[se]}return K||++O!=N?K:(N=d==null?0:d.length,!!N&&Kc(N)&&zs(se,N)&&(si(d)||ql(d)))}function Ty(d){var f=d.length,b=new d.constructor(f);return f&&typeof d[0]=="string"&&Ri.call(d,"index")&&(b.index=d.index,b.input=d.input),b}function ig(d){return typeof d.constructor=="function"&&!Bd(d)?fl(os(d)):{}}function Oy(d,f,b){var O=d.constructor;switch(f){case Xt:return qf(d);case be:case Le:return new O(+d);case It:return uy(d,b);case Ci:case q:case W:case me:case ke:case st:case rt:case ut:case Rt:return Hv(d,b);case k:return new O;case te:case pe:return new O(d);case Fe:return cy(d);case Me:return new O;case Ue:return hy(d)}}function Ay(d,f){var b=f.length;if(!b)return d;var O=b-1;return f[O]=(b>1?"& ":"")+f[O],f=f.join(b>2?", ":" "),d.replace(ti,`{
/* [wrapped with `+f+`] */
`)}function ky(d){return si(d)||ql(d)||!!(ic&&d&&d[ic])}function zs(d,f){var b=typeof d;return f=f??xe,!!f&&(b=="number"||b!="symbol"&&Gi.test(d))&&d>-1&&d%1==0&&d<f}function Dr(d,f,b){if(!Sn(b))return!1;var O=typeof f;return(O=="number"?Wr(b)&&zs(f,b.length):O=="string"&&f in b)?jo(b[f],d):!1}function np(d,f){if(si(d))return!1;var b=typeof d;return b=="number"||b=="symbol"||b=="boolean"||d==null||oo(d)?!0:pt.test(d)||!ot.test(d)||f!=null&&d in Di(f)}function Iy(d){var f=typeof d;return f=="string"||f=="number"||f=="symbol"||f=="boolean"?d!=="__proto__":d===null}function rp(d){var f=Uc(d),b=G[f];if(typeof b!="function"||!(f in mi.prototype))return!1;if(d===b)return!0;var O=ep(b);return!!O&&d===O[0]}function Dy(d){return!!Qu&&Qu in d}var Ry=Rs?Us:yp;function Bd(d){var f=d&&d.constructor,b=typeof f=="function"&&f.prototype||Ds;return d===b}function ng(d){return d===d&&!Sn(d)}function rg(d,f){return function(b){return b==null?!1:b[d]===f&&(f!==e||d in Di(b))}}function Py(d){var f=Xc(d,function(O){return b.size===h&&b.clear(),O}),b=f.cache;return f}function Fy(d,f){var b=d[1],O=f[1],N=b|O,K=N<(x|S|B),se=O==B&&b==D||O==B&&b==Q&&d[7].length<=f[8]||O==(B|Q)&&f[7].length<=f[8]&&b==D;if(!(K||se))return d;O&x&&(d[2]=f[2],N|=b&x?0:y);var he=f[3];if(he){var Ae=d[3];d[3]=Ae?Vv(Ae,he,f[4]):he,d[4]=Ae?io(d[3],c):f[4]}return he=f[5],he&&(Ae=d[5],d[5]=Ae?zv(Ae,he,f[6]):he,d[6]=Ae?io(d[5],c):f[6]),he=f[7],he&&(d[7]=he),O&B&&(d[8]=d[8]==null?f[8]:ir(d[8],f[8])),d[9]==null&&(d[9]=f[9]),d[0]=f[0],d[1]=N,d}function My(d){var f=[];if(d!=null)for(var b in Di(d))f.push(b);return f}function Ny(d){return Fl.call(d)}function og(d,f,b){return f=Ji(f===e?d.length-1:f,0),function(){for(var O=arguments,N=-1,K=Ji(O.length-f,0),se=Pe(K);++N<K;)se[N]=O[f+N];N=-1;for(var he=Pe(f+1);++N<f;)he[N]=O[N];return he[f]=b(se),rn(d,this,he)}}function sg(d,f){return f.length<2?d:Uo(d,Y(f,0,-1))}function Ly(d,f){for(var b=d.length,O=ir(f.length,b),N=Gr(d);O--;){var K=f[O];d[O]=zs(K,b)?N[K]:e}return d}function op(d,f){if(!(f==="constructor"&&typeof d[f]=="function")&&f!="__proto__")return d[f]}var lg=dg(I),Vd=kf||function(d,f){return Ki.setTimeout(d,f)},sp=dg(V);function ag(d,f,b){var O=f+"";return sp(d,Ay(O,Hy(xy(O),b)))}function dg(d){var f=0,b=0;return function(){var O=Rf(),N=z-(O-b);if(b=O,N>0){if(++f>=J)return arguments[0]}else f=0;return d.apply(e,arguments)}}function Wc(d,f){var b=-1,O=d.length,N=O-1;for(f=f===e?O:f;++b<f;){var K=gl(b,N),se=d[K];d[K]=d[b],d[b]=se}return d.length=f,d}var ug=Py(function(d){var f=[];return d.charCodeAt(0)===46&&f.push(""),d.replace(ct,function(b,O,N,K){f.push(N?K.replace(Ln,"$1"):O||b)}),f});function fs(d){if(typeof d=="string"||oo(d))return d;var f=d+"";return f=="0"&&1/d==-De?"-0":f}function Xl(d){if(d!=null){try{return ma.call(d)}catch{}try{return d+""}catch{}}return""}function Hy(d,f){return on(Ye,function(b){var O="_."+b[0];f&b[1]&&!il(d,O)&&d.push(O)}),d.sort()}function cg(d){if(d instanceof mi)return d.clone();var f=new kr(d.__wrapped__,d.__chain__);return f.__actions__=Gr(d.__actions__),f.__index__=d.__index__,f.__values__=d.__values__,f}function By(d,f,b){(b?Dr(d,f,b):f===e)?f=1:f=Ji(di(f),0);var O=d==null?0:d.length;if(!O||f<1)return[];for(var N=0,K=0,se=Pe(Fs(O/f));N<O;)se[K++]=Y(d,N,N+=f);return se}function Vy(d){for(var f=-1,b=d==null?0:d.length,O=0,N=[];++f<b;){var K=d[f];K&&(N[O++]=K)}return N}function zy(){var d=arguments.length;if(!d)return[];for(var f=Pe(d-1),b=arguments[0],O=d;O--;)f[O-1]=arguments[O];return Vn(si(b)?Gr(b):[b],zn(f,1))}var Uy=oi(function(d,f){return Dn(d)?yr(d,zn(f,1,Dn,!0)):[]}),Gy=oi(function(d,f){var b=Ao(f);return Dn(b)&&(b=e),Dn(d)?yr(d,zn(f,1,Dn,!0),Wt(b,2)):[]}),Wy=oi(function(d,f){var b=Ao(f);return Dn(b)&&(b=e),Dn(d)?yr(d,zn(f,1,Dn,!0),e,b):[]});function $y(d,f,b){var O=d==null?0:d.length;return O?(f=b||f===e?1:di(f),Y(d,f<0?0:f,O)):[]}function Yy(d,f,b){var O=d==null?0:d.length;return O?(f=b||f===e?1:di(f),f=O-f,Y(d,0,f<0?0:f)):[]}function jy(d,f){return d&&d.length?Bi(d,Wt(f,3),!0,!0):[]}function Xy(d,f){return d&&d.length?Bi(d,Wt(f,3),!0):[]}function qy(d,f,b,O){var N=d==null?0:d.length;return N?(b&&typeof b!="number"&&Dr(d,f,b)&&(b=0,O=N),Sc(d,f,b,O)):[]}function hg(d,f,b){var O=d==null?0:d.length;if(!O)return-1;var N=b==null?0:di(b);return N<0&&(N=Ji(O+N,0)),w(d,Wt(f,3),N)}function fg(d,f,b){var O=d==null?0:d.length;if(!O)return-1;var N=O-1;return b!==e&&(N=di(b),N=b<0?Ji(O+N,0):ir(N,O-1)),w(d,Wt(f,3),N,!0)}function pg(d){var f=d==null?0:d.length;return f?zn(d,1):[]}function Ky(d){var f=d==null?0:d.length;return f?zn(d,De):[]}function Zy(d,f){var b=d==null?0:d.length;return b?(f=f===e?1:di(f),zn(d,f)):[]}function Qy(d){for(var f=-1,b=d==null?0:d.length,O={};++f<b;){var N=d[f];O[N[0]]=N[1]}return O}function mg(d){return d&&d.length?d[0]:e}function Jy(d,f,b){var O=d==null?0:d.length;if(!O)return-1;var N=b==null?0:di(b);return N<0&&(N=Ji(O+N,0)),R(d,f,N)}function eE(d){var f=d==null?0:d.length;return f?Y(d,0,-1):[]}var tE=oi(function(d){var f=Yi(d,In);return f.length&&f[0]===d[0]?Ta(f):[]}),iE=oi(function(d){var f=Ao(d),b=Yi(d,In);return f===Ao(b)?f=e:b.pop(),b.length&&b[0]===d[0]?Ta(b,Wt(f,2)):[]}),nE=oi(function(d){var f=Ao(d),b=Yi(d,In);return f=typeof f=="function"?f:e,f&&b.pop(),b.length&&b[0]===d[0]?Ta(b,e,f):[]});function rE(d,f){return d==null?"":nc.call(d,f)}function Ao(d){var f=d==null?0:d.length;return f?d[f-1]:e}function oE(d,f,b){var O=d==null?0:d.length;if(!O)return-1;var N=O;return b!==e&&(N=di(b),N=N<0?Ji(O+N,0):ir(N,O-1)),f===f?vd(d,f,N):w(d,ee,N,!0)}function sE(d,f){return d&&d.length?Fc(d,di(f)):e}var lE=oi(vg);function vg(d,f){return d&&d.length&&f&&f.length?Ld(d,f):d}function aE(d,f,b){return d&&d.length&&f&&f.length?Ld(d,f,Wt(b,2)):d}function dE(d,f,b){return d&&d.length&&f&&f.length?Ld(d,f,e,b):d}var uE=Vs(function(d,f){var b=d==null?0:d.length,O=as(d,f);return Nc(d,Yi(f,function(N){return zs(N,b)?+N:N}).sort(Bv)),O});function cE(d,f){var b=[];if(!(d&&d.length))return b;var O=-1,N=[],K=d.length;for(f=Wt(f,3);++O<K;){var se=d[O];f(se,O,d)&&(b.push(se),N.push(O))}return Nc(d,N),b}function lp(d){return d==null?d:rc.call(d)}function hE(d,f,b){var O=d==null?0:d.length;return O?(b&&typeof b!="number"&&Dr(d,f,b)?(f=0,b=O):(f=f==null?0:di(f),b=b===e?O:di(b)),Y(d,f,b)):[]}function fE(d,f){return tt(d,f)}function pE(d,f,b){return dt(d,f,Wt(b,2))}function mE(d,f){var b=d==null?0:d.length;if(b){var O=tt(d,f);if(O<b&&jo(d[O],f))return O}return-1}function vE(d,f){return tt(d,f,!0)}function gE(d,f,b){return dt(d,f,Wt(b,2),!0)}function _E(d,f){var b=d==null?0:d.length;if(b){var O=tt(d,f,!0)-1;if(jo(d[O],f))return O}return-1}function bE(d){return d&&d.length?mt(d):[]}function CE(d,f){return d&&d.length?mt(d,Wt(f,2)):[]}function yE(d){var f=d==null?0:d.length;return f?Y(d,1,f):[]}function EE(d,f,b){return d&&d.length?(f=b||f===e?1:di(f),Y(d,0,f<0?0:f)):[]}function SE(d,f,b){var O=d==null?0:d.length;return O?(f=b||f===e?1:di(f),f=O-f,Y(d,f<0?0:f,O)):[]}function wE(d,f){return d&&d.length?Bi(d,Wt(f,3),!1,!0):[]}function xE(d,f){return d&&d.length?Bi(d,Wt(f,3)):[]}var TE=oi(function(d){return ni(zn(d,1,Dn,!0))}),OE=oi(function(d){var f=Ao(d);return Dn(f)&&(f=e),ni(zn(d,1,Dn,!0),Wt(f,2))}),AE=oi(function(d){var f=Ao(d);return f=typeof f=="function"?f:e,ni(zn(d,1,Dn,!0),e,f)});function kE(d){return d&&d.length?ni(d):[]}function IE(d,f){return d&&d.length?ni(d,Wt(f,2)):[]}function DE(d,f){return f=typeof f=="function"?f:e,d&&d.length?ni(d,e,f):[]}function ap(d){if(!(d&&d.length))return[];var f=0;return d=Mt(d,function(b){if(Dn(b))return f=Ji(b.length,f),!0}),Nt(f,function(b){return Yi(d,He(b))})}function gg(d,f){if(!(d&&d.length))return[];var b=ap(d);return f==null?b:Yi(b,function(O){return rn(f,e,O)})}var RE=oi(function(d,f){return Dn(d)?yr(d,f):[]}),PE=oi(function(d){return _n(Mt(d,Dn))}),FE=oi(function(d){var f=Ao(d);return Dn(f)&&(f=e),_n(Mt(d,Dn),Wt(f,2))}),ME=oi(function(d){var f=Ao(d);return f=typeof f=="function"?f:e,_n(Mt(d,Dn),e,f)}),NE=oi(ap);function LE(d,f){return ai(d||[],f||[],Ul)}function HE(d,f){return ai(d||[],f||[],T)}var BE=oi(function(d){var f=d.length,b=f>1?d[f-1]:e;return b=typeof b=="function"?(d.pop(),b):e,gg(d,b)});function _g(d){var f=G(d);return f.__chain__=!0,f}function VE(d,f){return f(d),d}function $c(d,f){return f(d)}var zE=Vs(function(d){var f=d.length,b=f?d[0]:0,O=this.__wrapped__,N=function(K){return as(K,d)};return f>1||this.__actions__.length||!(O instanceof mi)||!zs(b)?this.thru(N):(O=O.slice(b,+b+(f?1:0)),O.__actions__.push({func:$c,args:[N],thisArg:e}),new kr(O,this.__chain__).thru(function(K){return f&&!K.length&&K.push(e),K}))});function UE(){return _g(this)}function GE(){return new kr(this.value(),this.__chain__)}function WE(){this.__values__===e&&(this.__values__=Rg(this.value()));var d=this.__index__>=this.__values__.length,f=d?e:this.__values__[this.__index__++];return{done:d,value:f}}function $E(){return this}function YE(d){for(var f,b=this;b instanceof Kn;){var O=cg(b);O.__index__=0,O.__values__=e,f?N.__wrapped__=O:f=O;var N=O;b=b.__wrapped__}return N.__wrapped__=d,f}function jE(){var d=this.__wrapped__;if(d instanceof mi){var f=d;return this.__actions__.length&&(f=new mi(this)),f=f.reverse(),f.__actions__.push({func:$c,args:[lp],thisArg:e}),new kr(f,this.__chain__)}return this.thru(lp)}function XE(){return Vi(this.__wrapped__,this.__actions__)}var qE=Lc(function(d,f,b){Ri.call(d,b)?++d[b]:ur(d,b,1)});function KE(d,f,b){var O=si(d)?xo:Ec;return b&&Dr(d,f,b)&&(f=e),O(d,Wt(f,3))}function ZE(d,f){var b=si(d)?Mt:wc;return b(d,Wt(f,3))}var QE=$v(hg),JE=$v(fg);function eS(d,f){return zn(Yc(d,f),1)}function tS(d,f){return zn(Yc(d,f),De)}function iS(d,f,b){return b=b===e?1:di(b),zn(Yc(d,f),b)}function bg(d,f){var b=si(d)?on:ro;return b(d,Wt(f,3))}function Cg(d,f){var b=si(d)?qn:Od;return b(d,Wt(f,3))}var nS=Lc(function(d,f,b){Ri.call(d,b)?d[b].push(f):ur(d,b,[f])});function rS(d,f,b,O){d=Wr(d)?d:Fa(d),b=b&&!O?di(b):0;var N=d.length;return b<0&&(b=Ji(N+b,0)),Zc(d)?b<=N&&d.indexOf(f,b)>-1:!!N&&R(d,f,b)>-1}var oS=oi(function(d,f,b){var O=-1,N=typeof f=="function",K=Wr(d)?Pe(d.length):[];return ro(d,function(se){K[++O]=N?rn(f,se,b):Hs(se,f,b)}),K}),sS=Lc(function(d,f,b){ur(d,b,f)});function Yc(d,f){var b=si(d)?Yi:Fd;return b(d,Wt(f,3))}function lS(d,f,b,O){return d==null?[]:(si(f)||(f=f==null?[]:[f]),b=O?e:b,si(b)||(b=b==null?[]:[b]),Ir(d,f,b))}var aS=Lc(function(d,f,b){d[b?0:1].push(f)},function(){return[[],[]]});function dS(d,f,b){var O=si(d)?To:bt,N=arguments.length<3;return O(d,Wt(f,4),b,N,ro)}function uS(d,f,b){var O=si(d)?fd:bt,N=arguments.length<3;return O(d,Wt(f,4),b,N,Od)}function cS(d,f){var b=si(d)?Mt:wc;return b(d,qc(Wt(f,3)))}function hS(d){var f=si(d)?Sd:Wo;return f(d)}function fS(d,f,b){(b?Dr(d,f,b):f===e)?f=1:f=di(f);var O=si(d)?wd:E;return O(d,f)}function pS(d){var f=si(d)?xd:j;return f(d)}function mS(d){if(d==null)return 0;if(Wr(d))return Zc(d)?ll(d):d.length;var f=Er(d);return f==k||f==Me?d.size:Oa(d).length}function vS(d,f,b){var O=si(d)?As:Oe;return b&&Dr(d,f,b)&&(f=e),O(d,Wt(f,3))}var gS=oi(function(d,f){if(d==null)return[];var b=f.length;return b>1&&Dr(d,f[0],f[1])?f=[]:b>2&&Dr(f[0],f[1],f[2])&&(f=[f[0]]),Ir(d,zn(f,1),[])}),jc=Ho||function(){return Ki.Date.now()};function _S(d,f){if(typeof f!="function")throw new Vr(s);return d=di(d),function(){if(--d<1)return f.apply(this,arguments)}}function yg(d,f,b){return f=b?e:f,f=d&&f==null?d.length:f,Bs(d,B,e,e,e,e,f)}function Eg(d,f){var b;if(typeof f!="function")throw new Vr(s);return d=di(d),function(){return--d>0&&(b=f.apply(this,arguments)),d<=1&&(f=e),b}}var dp=oi(function(d,f,b){var O=x;if(b.length){var N=io(b,Ra(dp));O|=P}return Bs(d,O,f,b,N)}),Sg=oi(function(d,f,b){var O=x|S;if(b.length){var N=io(b,Ra(Sg));O|=P}return Bs(f,O,d,b,N)});function wg(d,f,b){f=b?e:f;var O=Bs(d,D,e,e,e,e,e,f);return O.placeholder=wg.placeholder,O}function xg(d,f,b){f=b?e:f;var O=Bs(d,A,e,e,e,e,e,f);return O.placeholder=xg.placeholder,O}function Tg(d,f,b){var O,N,K,se,he,Ae,Ze=0,Qe=!1,it=!1,xt=!0;if(typeof d!="function")throw new Vr(s);f=ko(f)||0,Sn(b)&&(Qe=!!b.leading,it="maxWait"in b,K=it?Ji(ko(b.maxWait)||0,f):K,xt="trailing"in b?!!b.trailing:xt);function Ft(Rn){var Xo=O,Ws=N;return O=N=e,Ze=Rn,se=d.apply(Ws,Xo),se}function $t(Rn){return Ze=Rn,he=Vd(_i,f),Qe?Ft(Rn):se}function fi(Rn){var Xo=Rn-Ae,Ws=Rn-Ze,$g=f-Xo;return it?ir($g,K-Ws):$g}function Yt(Rn){var Xo=Rn-Ae,Ws=Rn-Ze;return Ae===e||Xo>=f||Xo<0||it&&Ws>=K}function _i(){var Rn=jc();if(Yt(Rn))return Si(Rn);he=Vd(_i,fi(Rn))}function Si(Rn){return he=e,xt&&O?Ft(Rn):(O=N=e,se)}function so(){he!==e&&Nv(he),Ze=0,O=Ae=N=he=e}function Rr(){return he===e?se:Si(jc())}function lo(){var Rn=jc(),Xo=Yt(Rn);if(O=arguments,N=this,Ae=Rn,Xo){if(he===e)return $t(Ae);if(it)return Nv(he),he=Vd(_i,f),Ft(Ae)}return he===e&&(he=Vd(_i,f)),se}return lo.cancel=so,lo.flush=Rr,lo}var bS=oi(function(d,f){return Td(d,1,f)}),CS=oi(function(d,f,b){return Td(d,ko(f)||0,b)});function yS(d){return Bs(d,L)}function Xc(d,f){if(typeof d!="function"||f!=null&&typeof f!="function")throw new Vr(s);var b=function(){var O=arguments,N=f?f.apply(this,O):O[0],K=b.cache;if(K.has(N))return K.get(N);var se=d.apply(this,O);return b.cache=K.set(N,se)||K,se};return b.cache=new(Xc.Cache||zo),b}Xc.Cache=zo;function qc(d){if(typeof d!="function")throw new Vr(s);return function(){var f=arguments;switch(f.length){case 0:return!d.call(this);case 1:return!d.call(this,f[0]);case 2:return!d.call(this,f[0],f[1]);case 3:return!d.call(this,f[0],f[1],f[2])}return!d.apply(this,f)}}function ES(d){return Eg(2,d)}var SS=ka(function(d,f){f=f.length==1&&si(f[0])?Yi(f[0],Qi(Wt())):Yi(zn(f,1),Qi(Wt()));var b=f.length;return oi(function(O){for(var N=-1,K=ir(O.length,b);++N<K;)O[N]=f[N].call(this,O[N]);return rn(d,this,O)})}),up=oi(function(d,f){var b=io(f,Ra(up));return Bs(d,P,e,f,b)}),Og=oi(function(d,f){var b=io(f,Ra(Og));return Bs(d,M,e,f,b)}),wS=Vs(function(d,f){return Bs(d,Q,e,e,e,f)});function xS(d,f){if(typeof d!="function")throw new Vr(s);return f=f===e?f:di(f),oi(d,f)}function TS(d,f){if(typeof d!="function")throw new Vr(s);return f=f==null?0:Ji(di(f),0),oi(function(b){var O=b[f],N=Yo(b,0,f);return O&&Vn(N,O),rn(d,this,N)})}function OS(d,f,b){var O=!0,N=!0;if(typeof d!="function")throw new Vr(s);return Sn(b)&&(O="leading"in b?!!b.leading:O,N="trailing"in b?!!b.trailing:N),Tg(d,f,{leading:O,maxWait:f,trailing:N})}function AS(d){return yg(d,1)}function kS(d,f){return up(Zn(f),d)}function IS(){if(!arguments.length)return[];var d=arguments[0];return si(d)?d:[d]}function DS(d){return Ur(d,v)}function RS(d,f){return f=typeof f=="function"?f:e,Ur(d,v,f)}function PS(d){return Ur(d,p|v)}function FS(d,f){return f=typeof f=="function"?f:e,Ur(d,p|v,f)}function MS(d,f){return f==null||yc(d,f,or(f))}function jo(d,f){return d===f||d!==d&&f!==f}var NS=zc(xa),LS=zc(function(d,f){return d>=f}),ql=Dd(function(){return arguments}())?Dd:function(d){return kn(d)&&Ri.call(d,"callee")&&!tc.call(d,"callee")},si=Pe.isArray,HS=el?Qi(el):Rd;function Wr(d){return d!=null&&Kc(d.length)&&!Us(d)}function Dn(d){return kn(d)&&Wr(d)}function BS(d){return d===!0||d===!1||kn(d)&&nr(d)==be}var _l=If||yp,VS=Ar?Qi(Ar):kc;function zS(d){return kn(d)&&d.nodeType===1&&!zd(d)}function US(d){if(d==null)return!0;if(Wr(d)&&(si(d)||typeof d=="string"||typeof d.splice=="function"||_l(d)||Pa(d)||ql(d)))return!d.length;var f=Er(d);if(f==k||f==Me)return!d.size;if(Bd(d))return!Oa(d).length;for(var b in d)if(Ri.call(d,b))return!1;return!0}function GS(d,f){return Wl(d,f)}function WS(d,f,b){b=typeof b=="function"?b:e;var O=b?b(d,f):e;return O===e?Wl(d,f,e,b):!!O}function cp(d){if(!kn(d))return!1;var f=nr(d);return f==Ge||f==nt||typeof d.message=="string"&&typeof d.name=="string"&&!zd(d)}function $S(d){return typeof d=="number"&&Hl(d)}function Us(d){if(!Sn(d))return!1;var f=nr(d);return f==yt||f==at||f==Ce||f==re}function Ag(d){return typeof d=="number"&&d==di(d)}function Kc(d){return typeof d=="number"&&d>-1&&d%1==0&&d<=xe}function Sn(d){var f=typeof d;return d!=null&&(f=="object"||f=="function")}function kn(d){return d!=null&&typeof d=="object"}var kg=Rl?Qi(Rl):Wf;function YS(d,f){return d===f||Pd(d,f,tp(f))}function jS(d,f,b){return b=typeof b=="function"?b:e,Pd(d,f,tp(f),b)}function XS(d){return Ig(d)&&d!=+d}function qS(d){if(Ry(d))throw new Kt(o);return Ic(d)}function KS(d){return d===null}function ZS(d){return d==null}function Ig(d){return typeof d=="number"||kn(d)&&nr(d)==te}function zd(d){if(!kn(d)||nr(d)!=$)return!1;var f=os(d);if(f===null)return!0;var b=Ri.call(f,"constructor")&&f.constructor;return typeof b=="function"&&b instanceof b&&ma.call(b)==Of}var hp=tl?Qi(tl):$f;function QS(d){return Ag(d)&&d>=-xe&&d<=xe}var Dg=Pl?Qi(Pl):Dc;function Zc(d){return typeof d=="string"||!si(d)&&kn(d)&&nr(d)==pe}function oo(d){return typeof d=="symbol"||kn(d)&&nr(d)==Ue}var Pa=Os?Qi(Os):Rc;function JS(d){return d===e}function ew(d){return kn(d)&&Er(d)==ze}function tw(d){return kn(d)&&nr(d)==Ne}var iw=zc(Aa),nw=zc(function(d,f){return d<=f});function Rg(d){if(!d)return[];if(Wr(d))return Zc(d)?Br(d):Gr(d);if(Nl&&d[Nl])return Ef(d[Nl]());var f=Er(d),b=f==k?sl:f==Me?Is:Fa;return b(d)}function Gs(d){if(!d)return d===0?d:0;if(d=ko(d),d===De||d===-De){var f=d<0?-1:1;return f*Te}return d===d?d:0}function di(d){var f=Gs(d),b=f%1;return f===f?b?f-b:f:0}function Pg(d){return d?ds(di(d),0,ne):0}function ko(d){if(typeof d=="number")return d;if(oo(d))return Re;if(Sn(d)){var f=typeof d.valueOf=="function"?d.valueOf():d;d=Sn(f)?f+"":f}if(typeof d!="string")return d===0?d:+d;d=an(d);var b=Xe.test(d);return b||ii.test(d)?ts(d.slice(2),b?2:8):Se.test(d)?Re:+d}function Fg(d){return hs(d,$r(d))}function rw(d){return d?ds(di(d),-xe,xe):d===0?d:0}function zi(d){return d==null?"":et(d)}var ow=Ia(function(d,f){if(Bd(f)||Wr(f)){hs(f,or(f),d);return}for(var b in f)Ri.call(f,b)&&Ul(d,b,f[b])}),Mg=Ia(function(d,f){hs(f,$r(f),d)}),Qc=Ia(function(d,f,b,O){hs(f,$r(f),d,O)}),sw=Ia(function(d,f,b,O){hs(f,or(f),d,O)}),lw=Vs(as);function aw(d,f){var b=fl(d);return f==null?b:Cc(b,f)}var dw=oi(function(d,f){d=Di(d);var b=-1,O=f.length,N=O>2?f[2]:e;for(N&&Dr(f[0],f[1],N)&&(O=1);++b<O;)for(var K=f[b],se=$r(K),he=-1,Ae=se.length;++he<Ae;){var Ze=se[he],Qe=d[Ze];(Qe===e||jo(Qe,Ds[Ze])&&!Ri.call(d,Ze))&&(d[Ze]=K[Ze])}return d}),uw=oi(function(d){return d.push(e,Qv),rn(Ng,e,d)});function cw(d,f){return g(d,Wt(f,3),Oo)}function hw(d,f){return g(d,Wt(f,3),Id)}function fw(d,f){return d==null?d:Ad(d,Wt(f,3),$r)}function pw(d,f){return d==null?d:kd(d,Wt(f,3),$r)}function mw(d,f){return d&&Oo(d,Wt(f,3))}function vw(d,f){return d&&Id(d,Wt(f,3))}function gw(d){return d==null?[]:wa(d,or(d))}function _w(d){return d==null?[]:wa(d,$r(d))}function fp(d,f,b){var O=d==null?e:Uo(d,f);return O===e?b:O}function bw(d,f){return d!=null&&tg(d,f,Tc)}function pp(d,f){return d!=null&&tg(d,f,Oc)}var Cw=jv(function(d,f,b){f!=null&&typeof f.toString!="function"&&(f=Fl.call(f)),d[f]=b},vp(Yr)),yw=jv(function(d,f,b){f!=null&&typeof f.toString!="function"&&(f=Fl.call(f)),Ri.call(d,f)?d[f].push(b):d[f]=[b]},Wt),Ew=oi(Hs);function or(d){return Wr(d)?Ed(d):Oa(d)}function $r(d){return Wr(d)?Ed(d,!0):Pc(d)}function Sw(d,f){var b={};return f=Wt(f,3),Oo(d,function(O,N,K){ur(b,f(O,N,K),O)}),b}function ww(d,f){var b={};return f=Wt(f,3),Oo(d,function(O,N,K){ur(b,N,f(O,N,K))}),b}var xw=Ia(function(d,f,b){rr(d,f,b)}),Ng=Ia(function(d,f,b,O){rr(d,f,b,O)}),Tw=Vs(function(d,f){var b={};if(d==null)return b;var O=!1;f=Yi(f,function(K){return K=$o(K,d),O||(O=K.length>1),K}),hs(d,Jf(d),b),O&&(b=Ur(b,p|m|v,Cy));for(var N=f.length;N--;)Jt(b,f[N]);return b});function Ow(d,f){return Lg(d,qc(Wt(f)))}var Aw=Vs(function(d,f){return d==null?{}:Mc(d,f)});function Lg(d,f){if(d==null)return{};var b=Yi(Jf(d),function(O){return[O]});return f=Wt(f),Nd(d,b,function(O,N){return f(O,N[0])})}function kw(d,f,b){f=$o(f,d);var O=-1,N=f.length;for(N||(N=1,d=e);++O<N;){var K=d==null?e:d[fs(f[O])];K===e&&(O=N,K=b),d=Us(K)?K.call(d):K}return d}function Iw(d,f,b){return d==null?d:T(d,f,b)}function Dw(d,f,b,O){return O=typeof O=="function"?O:e,d==null?d:T(d,f,b,O)}var Hg=Kv(or),Bg=Kv($r);function Rw(d,f,b){var O=si(d),N=O||_l(d)||Pa(d);if(f=Wt(f,4),b==null){var K=d&&d.constructor;N?b=O?new K:[]:Sn(d)?b=Us(K)?fl(os(d)):{}:b={}}return(N?on:Oo)(d,function(se,he,Ae){return f(b,se,he,Ae)}),b}function Pw(d,f){return d==null?!0:Jt(d,f)}function Fw(d,f,b){return d==null?d:wi(d,f,Zn(b))}function Mw(d,f,b,O){return O=typeof O=="function"?O:e,d==null?d:wi(d,f,Zn(b),O)}function Fa(d){return d==null?[]:ns(d,or(d))}function Nw(d){return d==null?[]:ns(d,$r(d))}function Lw(d,f,b){return b===e&&(b=f,f=e),b!==e&&(b=ko(b),b=b===b?b:0),f!==e&&(f=ko(f),f=f===f?f:0),ds(ko(d),f,b)}function Hw(d,f,b){return f=Gs(f),b===e?(b=f,f=0):b=Gs(b),d=ko(d),Ac(d,f,b)}function Bw(d,f,b){if(b&&typeof b!="boolean"&&Dr(d,f,b)&&(f=b=e),b===e&&(typeof f=="boolean"?(b=f,f=e):typeof d=="boolean"&&(b=d,d=e)),d===e&&f===e?(d=0,f=1):(d=Gs(d),f===e?(f=d,d=0):f=Gs(f)),d>f){var O=d;d=f,f=O}if(b||d%1||f%1){var N=Cd();return ir(d+N*(f-d+Js("1e-"+((N+"").length-1))),f)}return gl(d,f)}var Vw=Da(function(d,f,b){return f=f.toLowerCase(),d+(b?Vg(f):f)});function Vg(d){return mp(zi(d).toLowerCase())}function zg(d){return d=zi(d),d&&d.replace(Wi,md).replace(Es,"")}function zw(d,f,b){d=zi(d),f=et(f);var O=d.length;b=b===e?O:ds(di(b),0,O);var N=b;return b-=f.length,b>=0&&d.slice(b,N)==f}function Uw(d){return d=zi(d),d&&U.test(d)?d.replace(Fi,Wu):d}function Gw(d){return d=zi(d),d&&Bt.test(d)?d.replace(St,"\\$&"):d}var Ww=Da(function(d,f,b){return d+(b?"-":"")+f.toLowerCase()}),$w=Da(function(d,f,b){return d+(b?" ":"")+f.toLowerCase()}),Yw=Wv("toLowerCase");function jw(d,f,b){d=zi(d),f=di(f);var O=f?ll(d):0;if(!f||O>=f)return d;var N=(f-O)/2;return Vc(Ll(N),b)+d+Vc(Fs(N),b)}function Xw(d,f,b){d=zi(d),f=di(f);var O=f?ll(d):0;return f&&O<f?d+Vc(f-O,b):d}function qw(d,f,b){d=zi(d),f=di(f);var O=f?ll(d):0;return f&&O<f?Vc(f-O,b)+d:d}function Kw(d,f,b){return b||f==null?f=0:f&&(f=+f),_a(zi(d).replace(Ct,""),f||0)}function Zw(d,f,b){return(b?Dr(d,f,b):f===e)?f=1:f=di(f),Yl(zi(d),f)}function Qw(){var d=arguments,f=zi(d[0]);return d.length<3?f:f.replace(d[1],d[2])}var Jw=Da(function(d,f,b){return d+(b?"_":"")+f.toLowerCase()});function ex(d,f,b){return b&&typeof b!="number"&&Dr(d,f,b)&&(f=b=e),b=b===e?ne:b>>>0,b?(d=zi(d),d&&(typeof f=="string"||f!=null&&!hp(f))&&(f=et(f),!f&&ol(d))?Yo(Br(d),0,b):d.split(f,b)):[]}var tx=Da(function(d,f,b){return d+(b?" ":"")+mp(f)});function ix(d,f,b){return d=zi(d),b=b==null?0:ds(di(b),0,d.length),f=et(f),d.slice(b,b+f.length)==f}function nx(d,f,b){var O=G.templateSettings;b&&Dr(d,f,b)&&(f=e),d=zi(d),f=Qc({},f,O,Zv);var N=Qc({},f.imports,O.imports,Zv),K=or(N),se=ns(N,K),he,Ae,Ze=0,Qe=f.interpolate||Li,it="__p += '",xt=_d((f.escape||Li).source+"|"+Qe.source+"|"+(Qe===Ee?mn:Li).source+"|"+(f.evaluate||Li).source+"|$","g"),Ft="//# sourceURL="+(Ri.call(f,"sourceURL")?(f.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++ws+"]")+`
`;d.replace(xt,function(Yt,_i,Si,so,Rr,lo){return Si||(Si=so),it+=d.slice(Ze,lo).replace(vn,yf),_i&&(he=!0,it+=`' +
__e(`+_i+`) +
'`),Rr&&(Ae=!0,it+=`';
`+Rr+`;
__p += '`),Si&&(it+=`' +
((__t = (`+Si+`)) == null ? '' : __t) +
'`),Ze=lo+Yt.length,Yt}),it+=`';
`;var $t=Ri.call(f,"variable")&&f.variable;if(!$t)it=`with (obj) {
`+it+`
}
`;else if(Ni.test($t))throw new Kt(l);it=(Ae?it.replace(Ht,""):it).replace(Tt,"$1").replace(Ut,"$1;"),it="function("+($t||"obj")+`) {
`+($t?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(he?", __e = _.escape":"")+(Ae?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+it+`return __p
}`;var fi=Gg(function(){return Ai(K,Ft+"return "+it).apply(e,se)});if(fi.source=it,cp(fi))throw fi;return fi}function rx(d){return zi(d).toLowerCase()}function ox(d){return zi(d).toUpperCase()}function sx(d,f,b){if(d=zi(d),d&&(b||f===e))return an(d);if(!d||!(f=et(f)))return d;var O=Br(d),N=Br(f),K=rs(O,N),se=pd(O,N)+1;return Yo(O,K,se).join("")}function lx(d,f,b){if(d=zi(d),d&&(b||f===e))return d.slice(0,Xu(d)+1);if(!d||!(f=et(f)))return d;var O=Br(d),N=pd(O,Br(f))+1;return Yo(O,0,N).join("")}function ax(d,f,b){if(d=zi(d),d&&(b||f===e))return d.replace(Ct,"");if(!d||!(f=et(f)))return d;var O=Br(d),N=rs(O,Br(f));return Yo(O,N).join("")}function dx(d,f){var b=le,O=_e;if(Sn(f)){var N="separator"in f?f.separator:N;b="length"in f?di(f.length):b,O="omission"in f?et(f.omission):O}d=zi(d);var K=d.length;if(ol(d)){var se=Br(d);K=se.length}if(b>=K)return d;var he=b-ll(O);if(he<1)return O;var Ae=se?Yo(se,0,he).join(""):d.slice(0,he);if(N===e)return Ae+O;if(se&&(he+=Ae.length-he),hp(N)){if(d.slice(he).search(N)){var Ze,Qe=Ae;for(N.global||(N=_d(N.source,zi(_t.exec(N))+"g")),N.lastIndex=0;Ze=N.exec(Qe);)var it=Ze.index;Ae=Ae.slice(0,it===e?he:it)}}else if(d.indexOf(et(N),he)!=he){var xt=Ae.lastIndexOf(N);xt>-1&&(Ae=Ae.slice(0,xt))}return Ae+O}function ux(d){return d=zi(d),d&&Mi.test(d)?d.replace(Zt,qu):d}var cx=Da(function(d,f,b){return d+(b?" ":"")+f.toUpperCase()}),mp=Wv("toUpperCase");function Ug(d,f,b){return d=zi(d),f=b?e:f,f===e?Yu(d)?gd(d):pi(d):d.match(f)||[]}var Gg=oi(function(d,f){try{return rn(d,e,f)}catch(b){return cp(b)?b:new Kt(b)}}),hx=Vs(function(d,f){return on(f,function(b){b=fs(b),ur(d,b,dp(d[b],d))}),d});function fx(d){var f=d==null?0:d.length,b=Wt();return d=f?Yi(d,function(O){if(typeof O[1]!="function")throw new Vr(s);return[b(O[0]),O[1]]}):[],oi(function(O){for(var N=-1;++N<f;){var K=d[N];if(rn(K[0],this,O))return rn(K[1],this,O)}})}function px(d){return us(Ur(d,p))}function vp(d){return function(){return d}}function mx(d,f){return d==null||d!==d?f:d}var vx=Yv(),gx=Yv(!0);function Yr(d){return d}function gp(d){return $l(typeof d=="function"?d:Ur(d,p))}function _x(d){return Md(Ur(d,p))}function bx(d,f){return Go(d,Ur(f,p))}var Cx=oi(function(d,f){return function(b){return Hs(b,d,f)}}),yx=oi(function(d,f){return function(b){return Hs(d,b,f)}});function _p(d,f,b){var O=or(f),N=wa(f,O);b==null&&!(Sn(f)&&(N.length||!O.length))&&(b=f,f=d,d=this,N=wa(f,or(f)));var K=!(Sn(b)&&"chain"in b)||!!b.chain,se=Us(d);return on(N,function(he){var Ae=f[he];d[he]=Ae,se&&(d.prototype[he]=function(){var Ze=this.__chain__;if(K||Ze){var Qe=d(this.__wrapped__),it=Qe.__actions__=Gr(this.__actions__);return it.push({func:Ae,args:arguments,thisArg:d}),Qe.__chain__=Ze,Qe}return Ae.apply(d,Vn([this.value()],arguments))})}),d}function Ex(){return Ki._===this&&(Ki._=Af),this}function bp(){}function Sx(d){return d=di(d),oi(function(f){return Fc(f,d)})}var wx=Kf(Yi),xx=Kf(xo),Tx=Kf(As);function Wg(d){return np(d)?He(fs(d)):jf(d)}function Ox(d){return function(f){return d==null?e:Uo(d,f)}}var Ax=Xv(),kx=Xv(!0);function Cp(){return[]}function yp(){return!1}function Ix(){return{}}function Dx(){return""}function Rx(){return!0}function Px(d,f){if(d=di(d),d<1||d>xe)return[];var b=ne,O=ir(d,ne);f=Wt(f),d-=ne;for(var N=Nt(O,f);++b<d;)f(b);return N}function Fx(d){return si(d)?Yi(d,fs):oo(d)?[d]:Gr(ug(zi(d)))}function Mx(d){var f=++Tf;return zi(d)+f}var Nx=Bc(function(d,f){return d+f},0),Lx=Zf("ceil"),Hx=Bc(function(d,f){return d/f},1),Bx=Zf("floor");function Vx(d){return d&&d.length?Ls(d,Yr,xa):e}function zx(d,f){return d&&d.length?Ls(d,Wt(f,2),xa):e}function Ux(d){return we(d,Yr)}function Gx(d,f){return we(d,Wt(f,2))}function Wx(d){return d&&d.length?Ls(d,Yr,Aa):e}function $x(d,f){return d&&d.length?Ls(d,Wt(f,2),Aa):e}var Yx=Bc(function(d,f){return d*f},1),jx=Zf("round"),Xx=Bc(function(d,f){return d-f},0);function qx(d){return d&&d.length?zt(d,Yr):0}function Kx(d,f){return d&&d.length?zt(d,Wt(f,2)):0}return G.after=_S,G.ary=yg,G.assign=ow,G.assignIn=Mg,G.assignInWith=Qc,G.assignWith=sw,G.at=lw,G.before=Eg,G.bind=dp,G.bindAll=hx,G.bindKey=Sg,G.castArray=IS,G.chain=_g,G.chunk=By,G.compact=Vy,G.concat=zy,G.cond=fx,G.conforms=px,G.constant=vp,G.countBy=qE,G.create=aw,G.curry=wg,G.curryRight=xg,G.debounce=Tg,G.defaults=dw,G.defaultsDeep=uw,G.defer=bS,G.delay=CS,G.difference=Uy,G.differenceBy=Gy,G.differenceWith=Wy,G.drop=$y,G.dropRight=Yy,G.dropRightWhile=jy,G.dropWhile=Xy,G.fill=qy,G.filter=ZE,G.flatMap=eS,G.flatMapDeep=tS,G.flatMapDepth=iS,G.flatten=pg,G.flattenDeep=Ky,G.flattenDepth=Zy,G.flip=yS,G.flow=vx,G.flowRight=gx,G.fromPairs=Qy,G.functions=gw,G.functionsIn=_w,G.groupBy=nS,G.initial=eE,G.intersection=tE,G.intersectionBy=iE,G.intersectionWith=nE,G.invert=Cw,G.invertBy=yw,G.invokeMap=oS,G.iteratee=gp,G.keyBy=sS,G.keys=or,G.keysIn=$r,G.map=Yc,G.mapKeys=Sw,G.mapValues=ww,G.matches=_x,G.matchesProperty=bx,G.memoize=Xc,G.merge=xw,G.mergeWith=Ng,G.method=Cx,G.methodOf=yx,G.mixin=_p,G.negate=qc,G.nthArg=Sx,G.omit=Tw,G.omitBy=Ow,G.once=ES,G.orderBy=lS,G.over=wx,G.overArgs=SS,G.overEvery=xx,G.overSome=Tx,G.partial=up,G.partialRight=Og,G.partition=aS,G.pick=Aw,G.pickBy=Lg,G.property=Wg,G.propertyOf=Ox,G.pull=lE,G.pullAll=vg,G.pullAllBy=aE,G.pullAllWith=dE,G.pullAt=uE,G.range=Ax,G.rangeRight=kx,G.rearg=wS,G.reject=cS,G.remove=cE,G.rest=xS,G.reverse=lp,G.sampleSize=fS,G.set=Iw,G.setWith=Dw,G.shuffle=pS,G.slice=hE,G.sortBy=gS,G.sortedUniq=bE,G.sortedUniqBy=CE,G.split=ex,G.spread=TS,G.tail=yE,G.take=EE,G.takeRight=SE,G.takeRightWhile=wE,G.takeWhile=xE,G.tap=VE,G.throttle=OS,G.thru=$c,G.toArray=Rg,G.toPairs=Hg,G.toPairsIn=Bg,G.toPath=Fx,G.toPlainObject=Fg,G.transform=Rw,G.unary=AS,G.union=TE,G.unionBy=OE,G.unionWith=AE,G.uniq=kE,G.uniqBy=IE,G.uniqWith=DE,G.unset=Pw,G.unzip=ap,G.unzipWith=gg,G.update=Fw,G.updateWith=Mw,G.values=Fa,G.valuesIn=Nw,G.without=RE,G.words=Ug,G.wrap=kS,G.xor=PE,G.xorBy=FE,G.xorWith=ME,G.zip=NE,G.zipObject=LE,G.zipObjectDeep=HE,G.zipWith=BE,G.entries=Hg,G.entriesIn=Bg,G.extend=Mg,G.extendWith=Qc,_p(G,G),G.add=Nx,G.attempt=Gg,G.camelCase=Vw,G.capitalize=Vg,G.ceil=Lx,G.clamp=Lw,G.clone=DS,G.cloneDeep=PS,G.cloneDeepWith=FS,G.cloneWith=RS,G.conformsTo=MS,G.deburr=zg,G.defaultTo=mx,G.divide=Hx,G.endsWith=zw,G.eq=jo,G.escape=Uw,G.escapeRegExp=Gw,G.every=KE,G.find=QE,G.findIndex=hg,G.findKey=cw,G.findLast=JE,G.findLastIndex=fg,G.findLastKey=hw,G.floor=Bx,G.forEach=bg,G.forEachRight=Cg,G.forIn=fw,G.forInRight=pw,G.forOwn=mw,G.forOwnRight=vw,G.get=fp,G.gt=NS,G.gte=LS,G.has=bw,G.hasIn=pp,G.head=mg,G.identity=Yr,G.includes=rS,G.indexOf=Jy,G.inRange=Hw,G.invoke=Ew,G.isArguments=ql,G.isArray=si,G.isArrayBuffer=HS,G.isArrayLike=Wr,G.isArrayLikeObject=Dn,G.isBoolean=BS,G.isBuffer=_l,G.isDate=VS,G.isElement=zS,G.isEmpty=US,G.isEqual=GS,G.isEqualWith=WS,G.isError=cp,G.isFinite=$S,G.isFunction=Us,G.isInteger=Ag,G.isLength=Kc,G.isMap=kg,G.isMatch=YS,G.isMatchWith=jS,G.isNaN=XS,G.isNative=qS,G.isNil=ZS,G.isNull=KS,G.isNumber=Ig,G.isObject=Sn,G.isObjectLike=kn,G.isPlainObject=zd,G.isRegExp=hp,G.isSafeInteger=QS,G.isSet=Dg,G.isString=Zc,G.isSymbol=oo,G.isTypedArray=Pa,G.isUndefined=JS,G.isWeakMap=ew,G.isWeakSet=tw,G.join=rE,G.kebabCase=Ww,G.last=Ao,G.lastIndexOf=oE,G.lowerCase=$w,G.lowerFirst=Yw,G.lt=iw,G.lte=nw,G.max=Vx,G.maxBy=zx,G.mean=Ux,G.meanBy=Gx,G.min=Wx,G.minBy=$x,G.stubArray=Cp,G.stubFalse=yp,G.stubObject=Ix,G.stubString=Dx,G.stubTrue=Rx,G.multiply=Yx,G.nth=sE,G.noConflict=Ex,G.noop=bp,G.now=jc,G.pad=jw,G.padEnd=Xw,G.padStart=qw,G.parseInt=Kw,G.random=Bw,G.reduce=dS,G.reduceRight=uS,G.repeat=Zw,G.replace=Qw,G.result=kw,G.round=jx,G.runInContext=ve,G.sample=hS,G.size=mS,G.snakeCase=Jw,G.some=vS,G.sortedIndex=fE,G.sortedIndexBy=pE,G.sortedIndexOf=mE,G.sortedLastIndex=vE,G.sortedLastIndexBy=gE,G.sortedLastIndexOf=_E,G.startCase=tx,G.startsWith=ix,G.subtract=Xx,G.sum=qx,G.sumBy=Kx,G.template=nx,G.times=Px,G.toFinite=Gs,G.toInteger=di,G.toLength=Pg,G.toLower=rx,G.toNumber=ko,G.toSafeInteger=rw,G.toString=zi,G.toUpper=ox,G.trim=sx,G.trimEnd=lx,G.trimStart=ax,G.truncate=dx,G.unescape=ux,G.uniqueId=Mx,G.upperCase=cx,G.upperFirst=mp,G.each=bg,G.eachRight=Cg,G.first=mg,_p(G,function(){var d={};return Oo(G,function(f,b){Ri.call(G.prototype,b)||(d[b]=f)}),d}(),{chain:!1}),G.VERSION=n,on(["bind","bindKey","curry","curryRight","partial","partialRight"],function(d){G[d].placeholder=G}),on(["drop","take"],function(d,f){mi.prototype[d]=function(b){b=b===e?1:Ji(di(b),0);var O=this.__filtered__&&!f?new mi(this):this.clone();return O.__filtered__?O.__takeCount__=ir(b,O.__takeCount__):O.__views__.push({size:ir(b,ne),type:d+(O.__dir__<0?"Right":"")}),O},mi.prototype[d+"Right"]=function(b){return this.reverse()[d](b).reverse()}}),on(["filter","map","takeWhile"],function(d,f){var b=f+1,O=b==F||b==qe;mi.prototype[d]=function(N){var K=this.clone();return K.__iteratees__.push({iteratee:Wt(N,3),type:b}),K.__filtered__=K.__filtered__||O,K}}),on(["head","last"],function(d,f){var b="take"+(f?"Right":"");mi.prototype[d]=function(){return this[b](1).value()[0]}}),on(["initial","tail"],function(d,f){var b="drop"+(f?"":"Right");mi.prototype[d]=function(){return this.__filtered__?new mi(this):this[b](1)}}),mi.prototype.compact=function(){return this.filter(Yr)},mi.prototype.find=function(d){return this.filter(d).head()},mi.prototype.findLast=function(d){return this.reverse().find(d)},mi.prototype.invokeMap=oi(function(d,f){return typeof d=="function"?new mi(this):this.map(function(b){return Hs(b,d,f)})}),mi.prototype.reject=function(d){return this.filter(qc(Wt(d)))},mi.prototype.slice=function(d,f){d=di(d);var b=this;return b.__filtered__&&(d>0||f<0)?new mi(b):(d<0?b=b.takeRight(-d):d&&(b=b.drop(d)),f!==e&&(f=di(f),b=f<0?b.dropRight(-f):b.take(f-d)),b)},mi.prototype.takeRightWhile=function(d){return this.reverse().takeWhile(d).reverse()},mi.prototype.toArray=function(){return this.take(ne)},Oo(mi.prototype,function(d,f){var b=/^(?:filter|find|map|reject)|While$/.test(f),O=/^(?:head|last)$/.test(f),N=G[O?"take"+(f=="last"?"Right":""):f],K=O||/^find/.test(f);N&&(G.prototype[f]=function(){var se=this.__wrapped__,he=O?[1]:arguments,Ae=se instanceof mi,Ze=he[0],Qe=Ae||si(se),it=function(_i){var Si=N.apply(G,Vn([_i],he));return O&&xt?Si[0]:Si};Qe&&b&&typeof Ze=="function"&&Ze.length!=1&&(Ae=Qe=!1);var xt=this.__chain__,Ft=!!this.__actions__.length,$t=K&&!xt,fi=Ae&&!Ft;if(!K&&Qe){se=fi?se:new mi(this);var Yt=d.apply(se,he);return Yt.__actions__.push({func:$c,args:[it],thisArg:e}),new kr(Yt,xt)}return $t&&fi?d.apply(this,he):(Yt=this.thru(it),$t?O?Yt.value()[0]:Yt.value():Yt)})}),on(["pop","push","shift","sort","splice","unshift"],function(d){var f=pa[d],b=/^(?:push|sort|unshift)$/.test(d)?"tap":"thru",O=/^(?:pop|shift)$/.test(d);G.prototype[d]=function(){var N=arguments;if(O&&!this.__chain__){var K=this.value();return f.apply(si(K)?K:[],N)}return this[b](function(se){return f.apply(si(se)?se:[],N)})}}),Oo(mi.prototype,function(d,f){var b=G[f];if(b){var O=b.name+"";Ri.call(Bo,O)||(Bo[O]=[]),Bo[O].push({name:f,func:b})}}),Bo[Hc(e,S).name]=[{name:"wrapper",func:e}],mi.prototype.clone=lc,mi.prototype.reverse=Ff,mi.prototype.value=pl,G.prototype.at=zE,G.prototype.chain=UE,G.prototype.commit=GE,G.prototype.next=WE,G.prototype.plant=YE,G.prototype.reverse=jE,G.prototype.toJSON=G.prototype.valueOf=G.prototype.value=XE,G.prototype.first=G.prototype.head,Nl&&(G.prototype[Nl]=$E),G},Dt=Ku();Lo?((Lo.exports=Dt)._=Dt,Or._=Dt):Ki._=Dt}).call(Pr)}(hd,hd.exports)),hd.exports}var gf={exports:{}},Cv;function GC(){return Cv||(Cv=1,function(a,t){/*!
 *
 * Copyright 2009-2017 Kris Kowal under the terms of the MIT
 * license found at https://github.com/kriskowal/q/blob/v1/LICENSE
 *
 * With parts by Tyler Close
 * Copyright 2007-2009 Tyler Close under the terms of the MIT X license found
 * at http://www.opensource.org/licenses/mit-license.html
 * Forked at ref_send.js version: 2009-05-11
 *
 * With parts by Mark Miller
 * Copyright (C) 2011 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 */(function(e){typeof bootstrap=="function"?bootstrap("promise",e):a.exports=e()})(function(){var e=!1;try{throw new Error}catch(q){e=!!q.stack}var n=_e(),r,o=function(){},s=function(){var q={task:void 0,next:null},W=q,me=!1,ke=void 0,st=!1,rt=[];function ut(){for(var Ut,Zt;q.next;)q=q.next,Ut=q.task,q.task=void 0,Zt=q.domain,Zt&&(q.domain=void 0,Zt.enter()),Rt(Ut,Zt);for(;rt.length;)Ut=rt.pop(),Rt(Ut);me=!1}function Rt(Ut,Zt){try{Ut()}catch(Fi){if(st)throw Zt&&Zt.exit(),setTimeout(ut,0),Zt&&Zt.enter(),Fi;setTimeout(function(){throw Fi},0)}Zt&&Zt.exit()}if(s=function(Ut){W=W.next={task:Ut,domain:st&&process.domain,next:null},me||(me=!0,ke())},typeof process=="object"&&process.toString()==="[object process]"&&process.nextTick)st=!0,ke=function(){process.nextTick(ut)};else if(typeof setImmediate=="function")typeof window<"u"?ke=setImmediate.bind(window,ut):ke=function(){setImmediate(ut)};else if(typeof MessageChannel<"u"){var Ht=new MessageChannel;Ht.port1.onmessage=function(){ke=Tt,Ht.port1.onmessage=ut,ut()};var Tt=function(){Ht.port2.postMessage(0)};ke=function(){setTimeout(ut,0),Tt()}}else ke=function(){setTimeout(ut,0)};return s.runAfter=function(Ut){rt.push(Ut),me||(me=!0,ke())},s}(),l=Function.call;function u(q){return function(){return l.apply(q,arguments)}}var h=u(Array.prototype.slice),c=u(Array.prototype.reduce||function(q,W){var me=0,ke=this.length;if(arguments.length===1)do{if(me in this){W=this[me++];break}if(++me>=ke)throw new TypeError}while(1);for(;me<ke;me++)me in this&&(W=q(W,this[me],me));return W}),p=u(Array.prototype.indexOf||function(q){for(var W=0;W<this.length;W++)if(this[W]===q)return W;return-1}),m=u(Array.prototype.map||function(q,W){var me=this,ke=[];return c(me,function(st,rt,ut){ke.push(q.call(W,rt,ut,me))},void 0),ke}),v=Object.create||function(q){function W(){}return W.prototype=q,new W},_=Object.defineProperty||function(q,W,me){return q[W]=me.value,q},C=u(Object.prototype.hasOwnProperty),x=Object.keys||function(q){var W=[];for(var me in q)C(q,me)&&W.push(me);return W},S=u(Object.prototype.toString);function y(q){return q===Object(q)}function D(q){return S(q)==="[object StopIteration]"||q instanceof A}var A;typeof ReturnValue<"u"?A=ReturnValue:A=function(q){this.value=q};var P="From previous event:";function M(q,W){if(e&&W.stack&&typeof q=="object"&&q!==null&&q.stack){for(var me=[],ke=W;ke;ke=ke.source)ke.stack&&(!q.__minimumStackCounter__||q.__minimumStackCounter__>ke.stackCounter)&&(_(q,"__minimumStackCounter__",{value:ke.stackCounter,configurable:!0}),me.unshift(ke.stack));me.unshift(q.stack);var st=me.join(`
`+P+`
`),rt=B(st);_(q,"stack",{value:rt,configurable:!0})}}function B(q){for(var W=q.split(`
`),me=[],ke=0;ke<W.length;++ke){var st=W[ke];!le(st)&&!Q(st)&&st&&me.push(st)}return me.join(`
`)}function Q(q){return q.indexOf("(module.js:")!==-1||q.indexOf("(node.js:")!==-1}function L(q){var W=/at .+ \((.+):(\d+):(?:\d+)\)$/.exec(q);if(W)return[W[1],Number(W[2])];var me=/at ([^ ]+):(\d+):(?:\d+)$/.exec(q);if(me)return[me[1],Number(me[2])];var ke=/.*@(.+):(\d+)$/.exec(q);if(ke)return[ke[1],Number(ke[2])]}function le(q){var W=L(q);if(!W)return!1;var me=W[0],ke=W[1];return me===r&&ke>=n&&ke<=Ci}function _e(){if(e)try{throw new Error}catch(ke){var q=ke.stack.split(`
`),W=q[0].indexOf("@")>0?q[1]:q[2],me=L(W);return me?(r=me[0],me[1]):void 0}}function J(q,W,me){return function(){return typeof console<"u"&&typeof console.warn=="function"&&console.warn(W+" is deprecated, use "+me+" instead.",new Error("").stack),q.apply(q,arguments)}}function z(q){return q instanceof xe?q:fe(q)?te(q):k(q)}z.resolve=z,z.nextTick=s,z.longStackSupport=!1;var F=1;typeof process=="object"&&process&&process.env&&process.env.Q_DEBUG&&(z.longStackSupport=!0),z.defer=ae;function ae(){var q=[],W=[],me,ke=v(ae.prototype),st=v(xe.prototype);if(st.promiseDispatch=function(ut,Rt,Ht){var Tt=h(arguments);q?(q.push(Tt),Rt==="when"&&Ht[1]&&W.push(Ht[1])):z.nextTick(function(){me.promiseDispatch.apply(me,Tt)})},st.valueOf=function(){if(q)return st;var ut=Re(me);return ne(ut)&&(me=ut),ut},st.inspect=function(){return me?me.inspect():{state:"pending"}},z.longStackSupport&&e)try{throw new Error}catch(ut){st.stack=ut.stack.substring(ut.stack.indexOf(`
`)+1),st.stackCounter=F++}function rt(ut){me=ut,z.longStackSupport&&e&&(st.source=ut),c(q,function(Rt,Ht){z.nextTick(function(){ut.promiseDispatch.apply(ut,Ht)})},void 0),q=void 0,W=void 0}return ke.promise=st,ke.resolve=function(ut){me||rt(z(ut))},ke.fulfill=function(ut){me||rt(k(ut))},ke.reject=function(ut){me||rt(at(ut))},ke.notify=function(ut){me||c(W,function(Rt,Ht){z.nextTick(function(){Ht(ut)})},void 0)},ke}ae.prototype.makeNodeResolver=function(){var q=this;return function(W,me){W?q.reject(W):arguments.length>2?q.resolve(h(arguments,1)):q.resolve(me)}},z.Promise=qe,z.promise=qe;function qe(q){if(typeof q!="function")throw new TypeError("resolver must be a function.");var W=ae();try{q(W.resolve,W.reject,W.notify)}catch(me){W.reject(me)}return W.promise}qe.race=De,qe.all=Ue,qe.reject=at,qe.resolve=z,z.passByCopy=function(q){return q},xe.prototype.passByCopy=function(){return this},z.join=function(q,W){return z(q).join(W)},xe.prototype.join=function(q){return z([this,q]).spread(function(W,me){if(W===me)return W;throw new Error("Q can't join: not the same: "+W+" "+me)})},z.race=De;function De(q){return qe(function(W,me){for(var ke=0,st=q.length;ke<st;ke++)z(q[ke]).then(W,me)})}xe.prototype.race=function(){return this.then(z.race)},z.makePromise=xe;function xe(q,W,me){W===void 0&&(W=function(rt){return at(new Error("Promise does not support operation: "+rt))}),me===void 0&&(me=function(){return{state:"unknown"}});var ke=v(xe.prototype);if(ke.promiseDispatch=function(rt,ut,Rt){var Ht;try{q[ut]?Ht=q[ut].apply(ke,Rt):Ht=W.call(ke,ut,Rt)}catch(Tt){Ht=at(Tt)}rt&&rt(Ht)},ke.inspect=me,me){var st=me();st.state==="rejected"&&(ke.exception=st.reason),ke.valueOf=function(){var rt=me();return rt.state==="pending"||rt.state==="rejected"?ke:rt.value}}return ke}xe.prototype.toString=function(){return"[object Promise]"},xe.prototype.then=function(q,W,me){var ke=this,st=ae(),rt=!1;function ut(Tt){try{return typeof q=="function"?q(Tt):Tt}catch(Ut){return at(Ut)}}function Rt(Tt){if(typeof W=="function"){M(Tt,ke);try{return W(Tt)}catch(Ut){return at(Ut)}}return at(Tt)}function Ht(Tt){return typeof me=="function"?me(Tt):Tt}return z.nextTick(function(){ke.promiseDispatch(function(Tt){rt||(rt=!0,st.resolve(ut(Tt)))},"when",[function(Tt){rt||(rt=!0,st.resolve(Rt(Tt)))}])}),ke.promiseDispatch(void 0,"when",[void 0,function(Tt){var Ut,Zt=!1;try{Ut=Ht(Tt)}catch(Fi){if(Zt=!0,z.onerror)z.onerror(Fi);else throw Fi}Zt||st.notify(Ut)}]),st.promise},z.tap=function(q,W){return z(q).tap(W)},xe.prototype.tap=function(q){return q=z(q),this.then(function(W){return q.fcall(W).thenResolve(W)})},z.when=Te;function Te(q,W,me,ke){return z(q).then(W,me,ke)}xe.prototype.thenResolve=function(q){return this.then(function(){return q})},z.thenResolve=function(q,W){return z(q).thenResolve(W)},xe.prototype.thenReject=function(q){return this.then(function(){throw q})},z.thenReject=function(q,W){return z(q).thenReject(W)},z.nearer=Re;function Re(q){if(ne(q)){var W=q.inspect();if(W.state==="fulfilled")return W.value}return q}z.isPromise=ne;function ne(q){return q instanceof xe}z.isPromiseAlike=fe;function fe(q){return y(q)&&typeof q.then=="function"}z.isPending=Be;function Be(q){return ne(q)&&q.inspect().state==="pending"}xe.prototype.isPending=function(){return this.inspect().state==="pending"},z.isFulfilled=Ye;function Ye(q){return!ne(q)||q.inspect().state==="fulfilled"}xe.prototype.isFulfilled=function(){return this.inspect().state==="fulfilled"},z.isRejected=Ve;function Ve(q){return ne(q)&&q.inspect().state==="rejected"}xe.prototype.isRejected=function(){return this.inspect().state==="rejected"};var ue=[],Ce=[],be=[],Le=!0;function nt(){ue.length=0,Ce.length=0,Le||(Le=!0)}function Ge(q,W){Le&&(typeof process=="object"&&typeof process.emit=="function"&&z.nextTick.runAfter(function(){p(Ce,q)!==-1&&(process.emit("unhandledRejection",W,q),be.push(q))}),Ce.push(q),W&&typeof W.stack<"u"?ue.push(W.stack):ue.push("(no stack) "+W))}function yt(q){if(Le){var W=p(Ce,q);W!==-1&&(typeof process=="object"&&typeof process.emit=="function"&&z.nextTick.runAfter(function(){var me=p(be,q);me!==-1&&(process.emit("rejectionHandled",ue[W],q),be.splice(me,1))}),Ce.splice(W,1),ue.splice(W,1))}}z.resetUnhandledRejections=nt,z.getUnhandledReasons=function(){return ue.slice()},z.stopUnhandledRejectionTracking=function(){nt(),Le=!1},nt(),z.reject=at;function at(q){var W=xe({when:function(me){return me&&yt(this),me?me(q):this}},function(){return this},function(){return{state:"rejected",reason:q}});return Ge(W,q),W}z.fulfill=k;function k(q){return xe({when:function(){return q},get:function(W){return q[W]},set:function(W,me){q[W]=me},delete:function(W){delete q[W]},post:function(W,me){return W==null?q.apply(void 0,me):q[W].apply(q,me)},apply:function(W,me){return q.apply(W,me)},keys:function(){return x(q)}},void 0,function(){return{state:"fulfilled",value:q}})}function te(q){var W=ae();return z.nextTick(function(){try{q.then(W.resolve,W.reject,W.notify)}catch(me){W.reject(me)}}),W.promise}z.master=ge;function ge(q){return xe({isDef:function(){}},function(me,ke){return pe(q,me,ke)},function(){return z(q).inspect()})}z.spread=$;function $(q,W,me){return z(q).spread(W,me)}xe.prototype.spread=function(q,W){return this.all().then(function(me){return q.apply(void 0,me)},W)},z.async=X;function X(q){return function(){function W(rt,ut){var Rt;if(typeof StopIteration>"u"){try{Rt=me[rt](ut)}catch(Ht){return at(Ht)}return Rt.done?z(Rt.value):Te(Rt.value,ke,st)}else{try{Rt=me[rt](ut)}catch(Ht){return D(Ht)?z(Ht.value):at(Ht)}return Te(Rt,ke,st)}}var me=q.apply(this,arguments),ke=W.bind(W,"next"),st=W.bind(W,"throw");return ke()}}z.spawn=re;function re(q){z.done(z.async(q)())}z.return=Fe;function Fe(q){throw new A(q)}z.promised=Me;function Me(q){return function(){return $([this,Ue(arguments)],function(W,me){return q.apply(W,me)})}}z.dispatch=pe;function pe(q,W,me){return z(q).dispatch(W,me)}xe.prototype.dispatch=function(q,W){var me=this,ke=ae();return z.nextTick(function(){me.promiseDispatch(ke.resolve,q,W)}),ke.promise},z.get=function(q,W){return z(q).dispatch("get",[W])},xe.prototype.get=function(q){return this.dispatch("get",[q])},z.set=function(q,W,me){return z(q).dispatch("set",[W,me])},xe.prototype.set=function(q,W){return this.dispatch("set",[q,W])},z.del=z.delete=function(q,W){return z(q).dispatch("delete",[W])},xe.prototype.del=xe.prototype.delete=function(q){return this.dispatch("delete",[q])},z.mapply=z.post=function(q,W,me){return z(q).dispatch("post",[W,me])},xe.prototype.mapply=xe.prototype.post=function(q,W){return this.dispatch("post",[q,W])},z.send=z.mcall=z.invoke=function(q,W){return z(q).dispatch("post",[W,h(arguments,2)])},xe.prototype.send=xe.prototype.mcall=xe.prototype.invoke=function(q){return this.dispatch("post",[q,h(arguments,1)])},z.fapply=function(q,W){return z(q).dispatch("apply",[void 0,W])},xe.prototype.fapply=function(q){return this.dispatch("apply",[void 0,q])},z.try=z.fcall=function(q){return z(q).dispatch("apply",[void 0,h(arguments,1)])},xe.prototype.fcall=function(){return this.dispatch("apply",[void 0,h(arguments)])},z.fbind=function(q){var W=z(q),me=h(arguments,1);return function(){return W.dispatch("apply",[this,me.concat(h(arguments))])}},xe.prototype.fbind=function(){var q=this,W=h(arguments);return function(){return q.dispatch("apply",[this,W.concat(h(arguments))])}},z.keys=function(q){return z(q).dispatch("keys",[])},xe.prototype.keys=function(){return this.dispatch("keys",[])},z.all=Ue;function Ue(q){return Te(q,function(W){var me=0,ke=ae();return c(W,function(st,rt,ut){var Rt;ne(rt)&&(Rt=rt.inspect()).state==="fulfilled"?W[ut]=Rt.value:(++me,Te(rt,function(Ht){W[ut]=Ht,--me===0&&ke.resolve(W)},ke.reject,function(Ht){ke.notify({index:ut,value:Ht})}))},void 0),me===0&&ke.resolve(W),ke.promise})}xe.prototype.all=function(){return Ue(this)},z.any=ft;function ft(q){if(q.length===0)return z.resolve();var W=z.defer(),me=0;return c(q,function(ke,st,rt){var ut=q[rt];me++,Te(ut,Rt,Ht,Tt);function Rt(Ut){W.resolve(Ut)}function Ht(Ut){if(me--,me===0){var Zt=Ut||new Error(""+Ut);Zt.message="Q can't get fulfillment value from any promise, all promises were rejected. Last error message: "+Zt.message,W.reject(Zt)}}function Tt(Ut){W.notify({index:rt,value:Ut})}},void 0),W.promise}xe.prototype.any=function(){return ft(this)},z.allResolved=J(ze,"allResolved","allSettled");function ze(q){return Te(q,function(W){return W=m(W,z),Te(Ue(m(W,function(me){return Te(me,o,o)})),function(){return W})})}xe.prototype.allResolved=function(){return ze(this)},z.allSettled=Ne;function Ne(q){return z(q).allSettled()}xe.prototype.allSettled=function(){return this.then(function(q){return Ue(m(q,function(W){W=z(W);function me(){return W.inspect()}return W.then(me,me)}))})},z.fail=z.catch=function(q,W){return z(q).then(void 0,W)},xe.prototype.fail=xe.prototype.catch=function(q){return this.then(void 0,q)},z.progress=Xt;function Xt(q,W){return z(q).then(void 0,void 0,W)}xe.prototype.progress=function(q){return this.then(void 0,void 0,q)},z.fin=z.finally=function(q,W){return z(q).finally(W)},xe.prototype.fin=xe.prototype.finally=function(q){if(!q||typeof q.apply!="function")throw new Error("Q can't apply finally callback");return q=z(q),this.then(function(W){return q.fcall().then(function(){return W})},function(W){return q.fcall().then(function(){throw W})})},z.done=function(q,W,me,ke){return z(q).done(W,me,ke)},xe.prototype.done=function(q,W,me){var ke=function(rt){z.nextTick(function(){if(M(rt,st),z.onerror)z.onerror(rt);else throw rt})},st=q||W||me?this.then(q,W,me):this;typeof process=="object"&&process&&process.domain&&(ke=process.domain.bind(ke)),st.then(void 0,ke)},z.timeout=function(q,W,me){return z(q).timeout(W,me)},xe.prototype.timeout=function(q,W){var me=ae(),ke=setTimeout(function(){(!W||typeof W=="string")&&(W=new Error(W||"Timed out after "+q+" ms"),W.code="ETIMEDOUT"),me.reject(W)},q);return this.then(function(st){clearTimeout(ke),me.resolve(st)},function(st){clearTimeout(ke),me.reject(st)},me.notify),me.promise},z.delay=function(q,W){return W===void 0&&(W=q,q=void 0),z(q).delay(W)},xe.prototype.delay=function(q){return this.then(function(W){var me=ae();return setTimeout(function(){me.resolve(W)},q),me.promise})},z.nfapply=function(q,W){return z(q).nfapply(W)},xe.prototype.nfapply=function(q){var W=ae(),me=h(q);return me.push(W.makeNodeResolver()),this.fapply(me).fail(W.reject),W.promise},z.nfcall=function(q){var W=h(arguments,1);return z(q).nfapply(W)},xe.prototype.nfcall=function(){var q=h(arguments),W=ae();return q.push(W.makeNodeResolver()),this.fapply(q).fail(W.reject),W.promise},z.nfbind=z.denodeify=function(q){if(q===void 0)throw new Error("Q can't wrap an undefined function");var W=h(arguments,1);return function(){var me=W.concat(h(arguments)),ke=ae();return me.push(ke.makeNodeResolver()),z(q).fapply(me).fail(ke.reject),ke.promise}},xe.prototype.nfbind=xe.prototype.denodeify=function(){var q=h(arguments);return q.unshift(this),z.denodeify.apply(void 0,q)},z.nbind=function(q,W){var me=h(arguments,2);return function(){var ke=me.concat(h(arguments)),st=ae();ke.push(st.makeNodeResolver());function rt(){return q.apply(W,arguments)}return z(rt).fapply(ke).fail(st.reject),st.promise}},xe.prototype.nbind=function(){var q=h(arguments,0);return q.unshift(this),z.nbind.apply(void 0,q)},z.nmapply=z.npost=function(q,W,me){return z(q).npost(W,me)},xe.prototype.nmapply=xe.prototype.npost=function(q,W){var me=h(W||[]),ke=ae();return me.push(ke.makeNodeResolver()),this.dispatch("post",[q,me]).fail(ke.reject),ke.promise},z.nsend=z.nmcall=z.ninvoke=function(q,W){var me=h(arguments,2),ke=ae();return me.push(ke.makeNodeResolver()),z(q).dispatch("post",[W,me]).fail(ke.reject),ke.promise},xe.prototype.nsend=xe.prototype.nmcall=xe.prototype.ninvoke=function(q){var W=h(arguments,1),me=ae();return W.push(me.makeNodeResolver()),this.dispatch("post",[q,W]).fail(me.reject),me.promise},z.nodeify=It;function It(q,W){return z(q).nodeify(W)}xe.prototype.nodeify=function(q){if(q)this.then(function(W){z.nextTick(function(){q(null,W)})},function(W){z.nextTick(function(){q(W)})});else return this},z.noConflict=function(){throw new Error("Q.noConflict only works when Q is used as a global")};var Ci=_e();return z})}(gf)),gf.exports}var yv=function(){var a={183:function(r,o,s){var l=s(804),u=s(328),h=function(c){this.x=null,this.y=null,this.width=null,this.height=null,c&&(this.setPos(c.x,c.y),this.setDimensions(c.width,c.height))};l.extend(h.prototype,{setPos:function(c,p){this.x=c,this.y=p},setDimensions:function(c,p){this.width=c,this.height=p},toXML:function(c,p){var m=u.createElement(c,"xdr:absoluteAnchor"),v=u.createElement(c,"xdr:pos");v.setAttribute("x",this.x),v.setAttribute("y",this.y),m.appendChild(v);var _=u.createElement(c,"xdr:ext");return _.setAttribute("cx",this.width),_.setAttribute("cy",this.height),m.appendChild(_),m.appendChild(p),m.appendChild(u.createElement(c,"xdr:clientData")),m}}),r.exports=h},75:function(r,o,s){var l=s(804),u=function(){};l.extend(u.prototype,{}),r.exports=u},982:function(r,o,s){var l=s(804),u=s(328),h=function(c){this.x=null,this.y=null,this.xOff=null,this.yOff=null,this.width=null,this.height=null,c&&(this.setPos(c.x,c.y,c.xOff,c.yOff),this.setDimensions(c.width,c.height))};l.extend(h.prototype,{setPos:function(c,p,m,v){this.x=c,this.y=p,m!==void 0&&(this.xOff=m),v!==void 0&&(this.yOff=v)},setDimensions:function(c,p){this.width=c,this.height=p},toXML:function(c,p){var m=u.createElement(c,"xdr:oneCellAnchor"),v=u.createElement(c,"xdr:from"),_=u.createElement(c,"xdr:col");_.appendChild(c.createTextNode(this.x));var C=u.createElement(c,"xdr:colOff");C.appendChild(c.createTextNode(this.xOff||0));var x=u.createElement(c,"xdr:row");x.appendChild(c.createTextNode(this.y));var S=u.createElement(c,"xdr:rowOff");S.appendChild(c.createTextNode(this.yOff||0)),v.appendChild(_),v.appendChild(C),v.appendChild(x),v.appendChild(S),m.appendChild(v);var y=u.createElement(c,"xdr:ext");return y.setAttribute("cx",this.width),y.setAttribute("cy",this.height),m.appendChild(y),m.appendChild(p),m.appendChild(u.createElement(c,"xdr:clientData")),m}}),r.exports=h},147:function(r,o,s){var l=s(804),u=s(328),h=s(890),c=function(){this.media=null,this.id=l.uniqueId("Picture"),this.pictureId=u.uniqueId("Picture"),this.fill={},this.mediaData=null};c.prototype=new h,l.extend(c.prototype,{setMedia:function(p){this.mediaData=p},setDescription:function(p){this.description=p},setFillType:function(p){this.fill.type=p},setFillConfig:function(p){l.extend(this.fill,p)},getMediaType:function(){return"image"},getMediaData:function(){return this.mediaData},setRelationshipId:function(p){this.mediaData.rId=p},toXML:function(p){var m=u.createElement(p,"xdr:pic"),v=u.createElement(p,"xdr:nvPicPr"),_=u.createElement(p,"xdr:cNvPr",[["id",this.pictureId],["name",this.mediaData.fileName],["descr",this.description||""]]);v.appendChild(_);var C=u.createElement(p,"xdr:cNvPicPr");C.appendChild(u.createElement(p,"a:picLocks",[["noChangeAspect","1"],["noChangeArrowheads","1"]])),v.appendChild(C),m.appendChild(v);var x=u.createElement(p,"xdr:blipFill");x.appendChild(u.createElement(p,"a:blip",[["xmlns:r",u.schemas.relationships],["r:embed",this.mediaData.rId]])),x.appendChild(u.createElement(p,"a:srcRect"));var S=u.createElement(p,"a:stretch");S.appendChild(u.createElement(p,"a:fillRect")),x.appendChild(S),m.appendChild(x);var y=u.createElement(p,"xdr:spPr",[["bwMode","auto"]]),D=u.createElement(p,"a:xfrm");y.appendChild(D);var A=u.createElement(p,"a:prstGeom",[["prst","rect"]]);return y.appendChild(A),m.appendChild(y),this.anchor.toXML(p,m)}}),r.exports=c},527:function(r,o,s){var l=s(804),u=s(328),h=function(c){this.from={xOff:0,yOff:0},this.to={xOff:0,yOff:0},c&&(this.setFrom(c.from.x,c.from.y,c.to.xOff,c.to.yOff),this.setTo(c.to.x,c.to.y,c.to.xOff,c.to.yOff))};l.extend(h.prototype,{setFrom:function(c,p,m,v){this.from.x=c,this.from.y=p,m!==void 0&&(this.from.xOff=m),v!==void 0&&(this.from.yOff=m)},setTo:function(c,p,m,v){this.to.x=c,this.to.y=p,m!==void 0&&(this.to.xOff=m),v!==void 0&&(this.to.yOff=m)},toXML:function(c,p){var m=u.createElement(c,"xdr:twoCellAnchor"),v=u.createElement(c,"xdr:from"),_=u.createElement(c,"xdr:col");_.appendChild(c.createTextNode(this.from.x));var C=u.createElement(c,"xdr:colOff");C.appendChild(c.createTextNode(this.from.xOff));var x=u.createElement(c,"xdr:row");x.appendChild(c.createTextNode(this.from.y));var S=u.createElement(c,"xdr:rowOff");S.appendChild(c.createTextNode(this.from.yOff)),v.appendChild(_),v.appendChild(C),v.appendChild(x),v.appendChild(S);var y=u.createElement(c,"xdr:to"),D=u.createElement(c,"xdr:col");D.appendChild(c.createTextNode(this.to.x));var A=u.createElement(c,"xdr:colOff");A.appendChild(c.createTextNode(this.from.xOff));var P=u.createElement(c,"xdr:row");P.appendChild(c.createTextNode(this.to.y));var M=u.createElement(c,"xdr:rowOff");return M.appendChild(c.createTextNode(this.from.yOff)),y.appendChild(D),y.appendChild(A),y.appendChild(P),y.appendChild(M),m.appendChild(v),m.appendChild(y),m.appendChild(p),m.appendChild(u.createElement(c,"xdr:clientData")),m}}),r.exports=h},890:function(r,o,s){var l=s(804),u=s(183),h=s(982),c=s(527),p=function(){this.id=l.uniqueId("Drawing")};l.extend(p.prototype,{createAnchor:function(m,v){switch(v=v||{},v.drawing=this,m){case"absoluteAnchor":this.anchor=new u(v);break;case"oneCellAnchor":this.anchor=new h(v);break;case"twoCellAnchor":this.anchor=new c(v);break}return this.anchor}}),Object.defineProperties(p,{AbsoluteAnchor:{get:function(){return s(183)}},Chart:{get:function(){return s(75)}},OneCellAnchor:{get:function(){return s(982)}},Picture:{get:function(){return s(147)}},TwoCellAnchor:{get:function(){return s(527)}}}),r.exports=p},861:function(r,o,s){var l=s(804),u=s(328),h=s(785),c=function(){this.drawings=[],this.relations=new h,this.id=l.uniqueId("Drawings")};l.extend(c.prototype,{addDrawing:function(p){this.drawings.push(p)},getCount:function(){return this.drawings.length},toXML:function(){var p=u.createXmlDoc(u.schemas.spreadsheetDrawing,"xdr:wsDr"),m=p.documentElement;m.setAttribute("xmlns:a",u.schemas.drawing),m.setAttribute("xmlns:r",u.schemas.relationships),m.setAttribute("xmlns:xdr",u.schemas.spreadsheetDrawing);for(var v=0,_=this.drawings.length;v<_;v++){var C=this.relations.getRelationshipId(this.drawings[v].getMediaData());C||(C=this.relations.addRelation(this.drawings[v].getMediaData(),this.drawings[v].getMediaType())),this.drawings[v].setRelationshipId(C),m.appendChild(this.drawings[v].toXML(p))}return p}}),r.exports=c},753:function(r,o,s){var l=s(804),u=function(){this.state=null,this.xSplit=null,this.ySplit=null,this.activePane="bottomRight",this.topLeftCell=null};l.extend(u.prototype,{freezePane:function(h,c,p){this._freezePane={xSplit:h,ySplit:c,cell:p}},exportXML:function(h){var c=h.createElement("pane");return this.state!==null&&(c.setAttribute("xSplit",this._freezePane.xSplit),c.setAttribute("ySplit",this._freezePane.ySplit),c.setAttribute("topLeftCell",this._freezePane.cell),c.setAttribute("activePane","bottomRight"),c.setAttribute("state","frozen")),c}}),r.exports=u},255:function(r){r.exports={}},864:function(r){r.exports={pixelsToEMUs:function(o){return Math.round(o*914400/96)}}},785:function(r,o,s){var l=s(804),u=s(328),h=s(255),c=function(){this.relations={},this.lastId=1};l.uniqueId("rId"),l.extend(c.prototype,{importData:function(p){this.relations=p.relations,this.lastId=p.lastId},exportData:function(){return{relations:this.relations,lastId:this.lastId}},addRelation:function(p,m){return this.relations[p.id]={id:l.uniqueId("rId"),schema:u.schemas[m],object:p},this.relations[p.id].id},getRelationshipId:function(p){return this.relations[p.id]?this.relations[p.id].id:null},toXML:function(){var p=u.createXmlDoc(u.schemas.relationshipPackage,"Relationships"),m=p.documentElement;return l.each(this.relations,function(v,_){var C=u.createElement(p,"Relationship",[["Id",v.id],["Type",v.schema],["Target",v.object.target||h[_]]]);v.object.targetMode&&C.setAttribute("TargetMode",v.object.targetMode),m.appendChild(C)}),p}}),r.exports=c},349:function(r,o,s){var l=s(804),u=s(328),h=function(){this.strings={},this.stringArray=[],this.id=l.uniqueId("SharedStrings")};l.extend(h.prototype,{addString:function(c){return this.strings[c]=this.stringArray.length,this.stringArray[this.stringArray.length]=c,this.strings[c]},exportData:function(){return this.strings},toXML:function(){var c=u.createXmlDoc(u.schemas.spreadsheetml,"sst"),p=c.documentElement;this.stringArray.reverse();var m=this.stringArray.length;p.setAttribute("count",m),p.setAttribute("uniqueCount",m);var v=c.createElement("si"),_=c.createElement("t");_.appendChild(c.createTextNode("--placeholder--")),v.appendChild(_);for(var C=this.stringArray;m--;){var x=v.cloneNode(!0);x.firstChild.firstChild.nodeValue=C[m],p.appendChild(x)}return c}}),r.exports=h},958:function(r,o,s){var l=s(804),u=s(753),h=s(328),c=function(p){p=p||{},this.pane=p.pane||new u,this.showZeros=null,this.defaultGridColor=null,this.colorId=null,this.rightToLeft=null,this.showFormulas=null,this.showGridLines=null,this.showOutlineSymbols=null,this.showRowColHeaders=null,this.showRuler=null,this.showWhiteSpace=null,this.tabSelected=null,this.topLeftCell=null,this.viewType=null,this.windowProtection=null,this.zoomScale=null,this.zoomScaleNormal=null,this.zoomScalePageLayoutView=null,this.zoomScaleSheetLayoutView=null};l.extend(c.prototype,{freezePane:function(p,m,v){this.pane.state="frozen",this.pane.xSplit=p,this.pane.ySplit=m,this.pane.topLeftCell=v},exportXML:function(p){var m=p.createElement("sheetViews"),v=p.createElement("sheetView");return h.setAttributesOnDoc(v,{workbookViewId:0,showZeros:{v:this.showZeros,type:Boolean},defaultGridColor:{v:this.defaultGridColor,type:Boolean},colorId:this.colorId,rightToLeft:{v:this.rightToLeft,type:Boolean},showFormulas:{v:this.showFormulas,type:Boolean},showGridLines:{v:this.showGridLines,type:Boolean},showOutlineSymbols:{v:this.showOutlineSymbols,type:Boolean},showRowColHeaders:{v:this.showRowColHeaders,type:Boolean},showRuler:{v:this.showRuler,type:Boolean},showWhiteSpace:{v:this.showWhiteSpace,type:Boolean},tabSelected:{v:this.tabSelected,type:Boolean},viewType:this.viewType,windowProtection:{v:this.windowProtection,type:Boolean},zoomScale:{v:this.zoomScale,type:Boolean},zoomScaleNormal:this.zoomScaleNormal,zoomScalePageLayoutView:this.zoomScalePageLayoutView,zoomScaleSheetLayoutView:this.zoomScaleSheetLayoutView}),v.appendChild(this.pane.exportXML(p)),m.appendChild(v),m}}),r.exports=c},747:function(r,o,s){var l=s(804),u=s(328),h=function(){this.id=l.uniqueId("StyleSheet"),this.cellStyles=[{name:"Normal",xfId:"0",builtinId:"0"}],this.defaultTableStyle=!1,this.differentialStyles=[{}],this.masterCellFormats=[{numFmtId:0,fontId:0,fillId:0,borderId:0,xfid:0}],this.masterCellStyles=[{numFmtId:0,fontId:0,fillId:0,borderId:0}],this.fonts=[{}],this.numberFormatters=[],this.fills=[{},{type:"pattern",patternType:"gray125",fgColor:"FF333333",bgColor:"FF333333"}],this.borders=[{top:{},left:{},right:{},bottom:{},diagonal:{}}],this.tableStyles=[]};l.extend(h.prototype,{createSimpleFormatter:function(c){var p=this.masterCellFormats.length,m={id:p};switch(c){case"date":m.numFmtId=14;break}return this.masterCellFormats.push(m),m},createFill:function(c){var p=this.fills.length,m=c;return m.id=p,this.fills.push(m),m},createNumberFormatter:function(c){var p=this.numberFormatters.length+100,m={id:p,formatCode:c};return this.numberFormatters.push(m),m},createFormat:function(c){var p=this.masterCellFormats.length,m={id:p};if(c.protection&&(m.protection=c.protection),c.font&&l.isObject(c.font))m.fontId=this.createFontStyle(c.font).id;else if(c.font){if(l.isNaN(parseInt(c.font,10)))throw"Passing a non-numeric font id is not supported";m.fontId=c.font}if(c.format&&l.isString(c.format))m.numFmtId=this.createNumberFormatter(c.format).id;else if(c.format){if(l.isNaN(parseInt(c.format,10)))throw"Invalid number formatter id";m.numFmtId=c.format}if(c.border&&l.isObject(c.border))m.borderId=this.createBorderFormatter(c.border).id;else if(c.border){if(l.isNaN(parseInt(c.border,10)))throw"Passing a non-numeric border id is not supported";m.borderId=c.border}if(c.fill&&l.isObject(c.fill))m.fillId=this.createFill(c.fill).id;else if(c.fill){if(l.isNaN(parseInt(c.fill,10)))throw"Passing a non-numeric fill id is not supported";m.fillId=c.fill}return c.alignment&&l.isObject(c.alignment)&&(m.alignment=l.pick(c.alignment,"horizontal","justifyLastLine","readingOrder","relativeIndent","shrinkToFit","textRotation","vertical","wrapText")),this.masterCellFormats.push(m),m},createDifferentialStyle:function(c){var p=this.differentialStyles.length,m={id:p};return c.font&&l.isObject(c.font)&&(m.font=c.font),c.border&&l.isObject(c.border)&&(m.border=l.defaults(c.border,{top:{},left:{},right:{},bottom:{},diagonal:{}})),c.fill&&l.isObject(c.fill)&&(m.fill=c.fill),c.alignment&&l.isObject(c.alignment)&&(m.alignment=c.alignment),c.format&&l.isString(c.format)&&(m.numFmt=c.format),this.differentialStyles[p]=m,m},createTableStyle:function(c){this.tableStyles.push(c)},createBorderFormatter:function(c){return l.defaults(c,{top:{},left:{},right:{},bottom:{},diagonal:{},id:this.borders.length}),this.borders.push(c),c},createFontStyle:function(c){var p=this.fonts.length,m={id:p};return c.bold&&(m.bold=!0),c.italic&&(m.italic=!0),c.superscript&&(m.vertAlign="superscript"),c.subscript&&(m.vertAlign="subscript"),c.underline&&(l.indexOf(["double","singleAccounting","doubleAccounting"],c.underline)!==-1?m.underline=c.underline:m.underline=!0),c.strike&&(m.strike=!0),c.outline&&(m.outline=!0),c.shadow&&(m.shadow=!0),c.size&&(m.size=c.size),c.color&&(m.color=c.color),c.fontName&&(m.fontName=c.fontName),this.fonts.push(m),m},exportBorders:function(c){var p=c.createElement("borders");p.setAttribute("count",this.borders.length);for(var m=0,v=this.borders.length;m<v;m++)p.appendChild(this.exportBorder(c,this.borders[m]));return p},exportBorder:function(c,p){var m=c.createElement("border"),v=this,_=function(C){var x=c.createElement(C);return p[C].style&&x.setAttribute("style",p[C].style),p[C].color&&x.appendChild(v.exportColor(c,p[C].color)),x};return m.appendChild(_("left")),m.appendChild(_("right")),m.appendChild(_("top")),m.appendChild(_("bottom")),m.appendChild(_("diagonal")),m},exportColor:function(c,p){var m=c.createElement("color");return l.isString(p)?(m.setAttribute("rgb",p),m):(l.isUndefined(p.tint)||m.setAttribute("tint",p.tint),l.isUndefined(p.auto)||m.setAttribute("auto",!!p.auto),l.isUndefined(p.theme)||m.setAttribute("theme",p.theme),m)},exportMasterCellFormats:function(c){for(var p=u.createElement(c,"cellXfs",[["count",this.masterCellFormats.length]]),m=0,v=this.masterCellFormats.length;m<v;m++){var _=this.masterCellFormats[m];p.appendChild(this.exportCellFormatElement(c,_))}return p},exportMasterCellStyles:function(c){for(var p=u.createElement(c,"cellStyleXfs",[["count",this.masterCellStyles.length]]),m=0,v=this.masterCellStyles.length;m<v;m++){var _=this.masterCellStyles[m];p.appendChild(this.exportCellFormatElement(c,_))}return p},exportCellFormatElement:function(c,p){var m=c.createElement("xf"),v=["applyAlignment","applyBorder","applyFill","applyFont","applyNumberFormat","applyProtection","borderId","fillId","fontId","numFmtId","pivotButton","quotePrefix","xfId"],_=l.filter(l.keys(p),function(S){if(l.indexOf(v,S)!==-1)return!0});if(p.alignment){var C=p.alignment;m.appendChild(this.exportAlignment(c,C))}p.protection&&(m.appendChild(this.exportProtection(c,p.protection)),m.setAttribute("applyProtection","1"));for(var x=_.length;x--;)m.setAttribute(_[x],p[_[x]]);return p.fillId&&m.setAttribute("applyFill","1"),p.fontId&&m.setAttribute("applyFont","1"),p.borderId&&m.setAttribute("applyBorder","1"),p.alignment&&m.setAttribute("applyAlignment","1"),p.numFmtId&&m.setAttribute("applyNumberFormat","1"),p.numFmtId!==void 0&&p.xfId===void 0&&m.setAttribute("xfId","0"),m},exportAlignment:function(c,p){for(var m=c.createElement("alignment"),v=l.keys(p),_=0,C=v.length;_<C;_++)m.setAttribute(v[_],p[v[_]]);return m},exportFonts:function(c){var p=c.createElement("fonts");p.setAttribute("count",this.fonts.length);for(var m=0,v=this.fonts.length;m<v;m++){var _=this.fonts[m];p.appendChild(this.exportFont(c,_))}return p},exportFont:function(c,p){var m=c.createElement("font");if(p.size){var v=c.createElement("sz");v.setAttribute("val",p.size),m.appendChild(v)}if(p.fontName){var _=c.createElement("name");_.setAttribute("val",p.fontName),m.appendChild(_)}if(p.bold&&m.appendChild(c.createElement("b")),p.italic&&m.appendChild(c.createElement("i")),p.vertAlign){var C=c.createElement("vertAlign");C.setAttribute("val",p.vertAlign),m.appendChild(C)}if(p.underline){var x=c.createElement("u");p.underline!==!0&&x.setAttribute("val",p.underline),m.appendChild(x)}return p.strike&&m.appendChild(c.createElement("strike")),p.shadow&&m.appendChild(c.createElement("shadow")),p.outline&&m.appendChild(c.createElement("outline")),p.color&&m.appendChild(this.exportColor(c,p.color)),m},exportFills:function(c){var p=c.createElement("fills");p.setAttribute("count",this.fills.length);for(var m=0,v=this.fills.length;m<v;m++){var _=this.fills[m];p.appendChild(this.exportFill(c,_))}return p},exportFill:function(c,p){var m,v=c.createElement("fill");return p.type==="pattern"?(m=this.exportPatternFill(c,p),v.appendChild(m)):p.type==="gradient"&&(m=this.exportGradientFill(c,p),v.appendChild(m)),v},exportGradientFill:function(c,p){var m=c.createElement("gradientFill");p.degree?m.setAttribute("degree",p.degree):p.left&&(m.setAttribute("left",p.left),m.setAttribute("right",p.right),m.setAttribute("top",p.top),m.setAttribute("bottom",p.bottom));var v=c.createElement("stop");v.setAttribute("position",p.start.pureAt||0);var _=c.createElement("color");typeof p.start=="string"||p.start.color?_.setAttribute("rgb",p.start.color||p.start):(p.start.theme,_.setAttribute("theme",p.start.theme));var C=c.createElement("stop"),x=c.createElement("color");return C.setAttribute("position",p.end.pureAt||1),typeof p.start=="string"||p.end.color?x.setAttribute("rgb",p.end.color||p.end):(p.end.theme,x.setAttribute("theme",p.end.theme)),v.appendChild(_),C.appendChild(x),m.appendChild(v),m.appendChild(C),m},exportPatternFill:function(c,p){var m=u.createElement(c,"patternFill",[["patternType",p.patternType]]);p.bgColor||(p.bgColor="FFFFFFFF"),p.fgColor||(p.fgColor="FFFFFFFF");var v=c.createElement("bgColor");l.isString(p.bgColor)?v.setAttribute("rgb",p.bgColor):p.bgColor.theme?v.setAttribute("theme",p.bgColor.theme):v.setAttribute("rgb",p.bgColor.rbg);var _=c.createElement("fgColor");return l.isString(p.fgColor)?_.setAttribute("rgb",p.fgColor):p.fgColor.theme?_.setAttribute("theme",p.fgColor.theme):_.setAttribute("rgb",p.fgColor.rbg),m.appendChild(_),m.appendChild(v),m},exportNumberFormatters:function(c){var p=c.createElement("numFmts");p.setAttribute("count",this.numberFormatters.length);for(var m=0,v=this.numberFormatters.length;m<v;m++){var _=this.numberFormatters[m];p.appendChild(this.exportNumberFormatter(c,_))}return p},exportNumberFormatter:function(c,p){var m=c.createElement("numFmt");return m.setAttribute("numFmtId",p.id),m.setAttribute("formatCode",p.formatCode),m},exportCellStyles:function(c){var p=c.createElement("cellStyles");p.setAttribute("count",this.cellStyles.length);for(var m=0,v=this.cellStyles.length;m<v;m++){var _=this.cellStyles[m];delete _.id;var C=u.createElement(c,"cellStyle");p.appendChild(C);for(var x=l.keys(_),S=x.length;S--;)C.setAttribute(x[S],_[x[S]])}return p},exportDifferentialStyles:function(c){var p=c.createElement("dxfs");p.setAttribute("count",this.differentialStyles.length);for(var m=0,v=this.differentialStyles.length;m<v;m++){var _=this.differentialStyles[m];p.appendChild(this.exportDFX(c,_))}return p},exportDFX:function(c,p){var m=c.createElement("dxf");return p.font&&m.appendChild(this.exportFont(c,p.font)),p.fill&&m.appendChild(this.exportFill(c,p.fill)),p.border&&m.appendChild(this.exportBorder(c,p.border)),p.numFmt&&m.appendChild(this.exportNumberFormatter(c,p.numFmt)),p.alignment&&m.appendChild(this.exportAlignment(c,p.alignment)),m},exportTableStyles:function(c){var p=c.createElement("tableStyles");p.setAttribute("count",this.tableStyles.length),this.defaultTableStyle&&p.setAttribute("defaultTableStyle",this.defaultTableStyle);for(var m=0,v=this.tableStyles.length;m<v;m++)p.appendChild(this.exportTableStyle(c,this.tableStyles[m]));return p},exportTableStyle:function(c,p){var m=c.createElement("tableStyle");m.setAttribute("name",p.name),m.setAttribute("pivot",0);var v=0;return l.each(p,function(_,C){if(C!=="name"){v++;var x=c.createElement("tableStyleElement");x.setAttribute("type",C),x.setAttribute("dxfId",_),m.appendChild(x)}}),m.setAttribute("count",v),m},exportProtection:function(c,p){var m=c.createElement("protection");for(var v in p)p.hasOwnProperty(v)&&m.setAttribute(v,p[v]);return m},toXML:function(){var c=u.createXmlDoc(u.schemas.spreadsheetml,"styleSheet"),p=c.documentElement;return p.appendChild(this.exportNumberFormatters(c)),p.appendChild(this.exportFonts(c)),p.appendChild(this.exportFills(c)),p.appendChild(this.exportBorders(c)),p.appendChild(this.exportMasterCellStyles(c)),p.appendChild(this.exportMasterCellFormats(c)),p.appendChild(this.exportCellStyles(c)),p.appendChild(this.exportDifferentialStyles(c)),this.tableStyles.length&&p.appendChild(this.exportTableStyles(c)),c}}),r.exports=h},496:function(r,o,s){var l=s(804),u=s(328),h=function(c){l.defaults(this,{name:"",displayName:"",dataCellStyle:null,dataDfxId:null,headerRowBorderDxfId:null,headerRowCellStyle:null,headerRowCount:1,headerRowDxfId:null,insertRow:!1,insertRowShift:!1,ref:null,tableBorderDxfId:null,totalsRowBorderDxfId:null,totalsRowCellStyle:null,totalsRowCount:0,totalsRowDxfId:null,tableColumns:[],autoFilter:null,sortState:null,styleInfo:{}}),this.initialize(c)};l.extend(h.prototype,{initialize:function(c){this.displayName=l.uniqueId("Table"),this.name=this.displayName,this.id=this.name,this.tableId=this.id.replace("Table",""),l.extend(this,c)},setReferenceRange:function(c,p){this.ref=[c,p]},setTableColumns:function(c){l.each(c,function(p){this.addTableColumn(p)},this)},addTableColumn:function(c){if(l.isString(c)&&(c={name:c}),!c.name)throw"Invalid argument for addTableColumn - minimum requirement is a name property";this.tableColumns.push(c)},setSortState:function(c){this.sortState=c},toXML:function(){var c=u.createXmlDoc(u.schemas.spreadsheetml,"table"),p=c.documentElement;p.setAttribute("id",this.tableId),p.setAttribute("name",this.name),p.setAttribute("displayName",this.displayName);var m=this.ref[0],v=this.ref[1];if(p.setAttribute("ref",u.positionToLetterRef(m[0],m[1])+":"+u.positionToLetterRef(v[0],v[1])),p.setAttribute("totalsRowCount",this.totalsRowCount),p.setAttribute("headerRowCount",this.headerRowCount),this.headerRowDxfId&&p.setAttribute("headerRowDxfId",this.headerRowDxfId),this.headerRowBorderDxfId&&p.setAttribute("headerRowBorderDxfId",this.headerRowBorderDxfId),!this.ref)throw"Needs at least a reference range";return this.autoFilter||this.addAutoFilter(this.ref[0],this.ref[1]),p.appendChild(this.exportAutoFilter(c)),p.appendChild(this.exportTableColumns(c)),p.appendChild(this.exportTableStyleInfo(c)),c},exportTableColumns:function(c){var p=c.createElement("tableColumns");p.setAttribute("count",this.tableColumns.length);for(var m=this.tableColumns,v=0,_=m.length;v<_;v++){var C=m[v],x=c.createElement("tableColumn");x.setAttribute("id",v+1),x.setAttribute("name",C.name),p.appendChild(x),C.totalsRowFunction&&x.setAttribute("totalsRowFunction",C.totalsRowFunction),C.totalsRowLabel&&x.setAttribute("totalsRowLabel",C.totalsRowLabel)}return p},exportAutoFilter:function(c){var p=c.createElement("autoFilter"),m=this.autoFilter[0],v=this.autoFilter[1];return p.setAttribute("ref",u.positionToLetterRef(m[0],m[1])+":"+u.positionToLetterRef(v[0],v[1]-this.totalsRowCount)),p},exportTableStyleInfo:function(c){var p=this.styleInfo,m=c.createElement("tableStyleInfo");return m.setAttribute("name",p.themeStyle),m.setAttribute("showFirstColumn",p.showFirstColumn?"1":"0"),m.setAttribute("showLastColumn",p.showLastColumn?"1":"0"),m.setAttribute("showColumnStripes",p.showColumnStripes?"1":"0"),m.setAttribute("showRowStripes",p.showRowStripes?"1":"0"),m},addAutoFilter:function(c,p){this.autoFilter=[c,p]}}),r.exports=h},952:function(r,o,s){var l=s(434),u=s(804),h=s(328),c=s(747),p=s(20),m=s(349),v=s(785),_=s(255),C=s(543),x=function(S){this.worksheets=[],this.tables=[],this.drawings=[],this.media={},this.initialize(S)};u.extend(x.prototype,{initialize:function(){this.id=u.uniqueId("Workbook"),this.styleSheet=new c,this.sharedStrings=new m,this.relations=new v,this.relations.addRelation(this.styleSheet,"stylesheet"),this.relations.addRelation(this.sharedStrings,"sharedStrings")},createWorksheet:function(S){return S=S||{},u.defaults(S,{name:"Sheet ".concat(this.worksheets.length+1)}),new p(S)},getStyleSheet:function(){return this.styleSheet},addTable:function(S){this.tables.push(S)},addDrawings:function(S){this.drawings.push(S)},setPrintTitleTop:function(S,y){this.printTitles==null&&(this.printTitles={}),this.printTitles[S]==null&&(this.printTitles[S]={}),this.printTitles[S].top=y},setPrintTitleLeft:function(S,y){this.printTitles==null&&(this.printTitles={}),this.printTitles[S]==null&&(this.printTitles[S]={}),this.printTitles[S].left=String.fromCharCode(64+y)},addMedia:function(S,y,D,A){var P=y.split("."),M=P[P.length-1];if(!A)switch(M.toLowerCase()){case"jpeg":case"jpg":A="image/jpeg";break;case"png":A="image/png";break;case"gif":A="image/gif";break;default:A=null;break}return this.media[y]||(this.media[y]={id:y,data:D,fileName:y,contentType:A,extension:M}),this.media[y]},addWorksheet:function(S){this.relations.addRelation(S,"worksheet"),S.setSharedStringCollection(this.sharedStrings),this.worksheets.push(S)},createContentTypes:function(){var S=h.createXmlDoc(h.schemas.contentTypes,"Types"),y=S.documentElement,D,A;y.appendChild(h.createElement(S,"Default",[["Extension","rels"],["ContentType","application/vnd.openxmlformats-package.relationships+xml"]])),y.appendChild(h.createElement(S,"Default",[["Extension","xml"],["ContentType","application/xml"]]));var P={};for(var M in this.media)this.media.hasOwnProperty(M)&&(P[this.media[M].extension]=this.media[M].contentType);for(var B in P)P.hasOwnProperty(B)&&y.appendChild(h.createElement(S,"Default",[["Extension",B],["ContentType",P[B]]]));for(y.appendChild(h.createElement(S,"Override",[["PartName","/xl/workbook.xml"],["ContentType","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml"]])),y.appendChild(h.createElement(S,"Override",[["PartName","/xl/sharedStrings.xml"],["ContentType","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml"]])),y.appendChild(h.createElement(S,"Override",[["PartName","/xl/styles.xml"],["ContentType","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml"]])),D=0,A=this.worksheets.length;D<A;D++)y.appendChild(h.createElement(S,"Override",[["PartName","/xl/worksheets/sheet"+(D+1)+".xml"],["ContentType","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml"]]));for(D=0,A=this.tables.length;D<A;D++)y.appendChild(h.createElement(S,"Override",[["PartName","/xl/tables/table"+(D+1)+".xml"],["ContentType","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml"]]));for(D=0,A=this.drawings.length;D<A;D++)y.appendChild(h.createElement(S,"Override",[["PartName","/xl/drawings/drawing"+(D+1)+".xml"],["ContentType","application/vnd.openxmlformats-officedocument.drawing+xml"]]));return S},toXML:function(){var S=h.createXmlDoc(h.schemas.spreadsheetml,"workbook"),y=S.documentElement;y.setAttribute("xmlns:r",h.schemas.relationships);for(var D=31,A=h.createElement(S,"sheets"),P=0,M=this.worksheets.length;P<M;P++){var B=S.createElement("sheet");typeof console<"u"&&this.worksheets[P].name.length>D&&console.log("Microsoft Excel requires work sheet names to be less than "+(D+1)+' characters long, work sheet name "'+this.worksheets[P].name+'" is '+this.worksheets[P].name.length+" characters long"),B.setAttribute("name",this.worksheets[P].name),B.setAttribute("sheetId",P+1),B.setAttribute("r:id",this.relations.getRelationshipId(this.worksheets[P])),A.appendChild(B)}y.appendChild(A);var Q=h.createElement(S,"definedNames"),L=0;for(var le in this.printTitles)if(this.printTitles.hasOwnProperty(le)){var _e=this.printTitles[le],J=S.createElement("definedName");J.setAttribute("name","_xlnm.Print_Titles"),J.setAttribute("localSheetId",L++);var z="";_e.top&&(z+=le+"!$1:$"+_e.top,_e.left&&(z+=",")),_e.left&&(z+=le+"!$A:$"+_e.left),J.appendChild(S.createTextNode(z)),Q.appendChild(J)}return y.appendChild(Q),S},createWorkbookRelationship:function(){var S=h.createXmlDoc(h.schemas.relationshipPackage,"Relationships"),y=S.documentElement;return y.appendChild(h.createElement(S,"Relationship",[["Id","rId1"],["Type",h.schemas.officeDocument],["Target","xl/workbook.xml"]])),S},_generateCorePaths:function(S){var y,D;for(_[this.styleSheet.id]="styles.xml",_[this.sharedStrings.id]="sharedStrings.xml",_[this.id]="/xl/workbook.xml",y=0,D=this.tables.length;y<D;y++)S["/xl/tables/table"+(y+1)+".xml"]=this.tables[y].toXML(),_[this.tables[y].id]="/xl/tables/table"+(y+1)+".xml";for(var A in this.media)if(this.media.hasOwnProperty(A)){var P=this.media[A];S["/xl/media/"+A]=P.data,_[A]="/xl/media/"+A}for(y=0,D=this.drawings.length;y<D;y++)S["/xl/drawings/drawing"+(y+1)+".xml"]=this.drawings[y].toXML(),_[this.drawings[y].id]="/xl/drawings/drawing"+(y+1)+".xml",S["/xl/drawings/_rels/drawing"+(y+1)+".xml.rels"]=this.drawings[y].relations.toXML()},_prepareFilesForPackaging:function(S){u.extend(S,{"/[Content_Types].xml":this.createContentTypes(),"/_rels/.rels":this.createWorkbookRelationship(),"/xl/styles.xml":this.styleSheet.toXML(),"/xl/workbook.xml":this.toXML(),"/xl/sharedStrings.xml":this.sharedStrings.toXML(),"/xl/_rels/workbook.xml.rels":this.relations.toXML()}),u.each(S,function(y,D){if(D.indexOf(".xml")!==-1||D.indexOf(".rels")!==-1){y instanceof C?S[D]=y.toString():S[D]=y.xml||new window.XMLSerializer().serializeToString(y);var A=S[D].replace(/xmlns=""/g,"");A=A.replace(/NS[\d]+:/g,""),A=A.replace(/xmlns:NS[\d]+=""/g,""),S[D]=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
`+A}})},generateFiles:function(){var S={};this._generateCorePaths(S);for(var y=0,D=this.worksheets.length;y<D;y++)S["/xl/worksheets/sheet"+(y+1)+".xml"]=this.worksheets[y].toXML(),_[this.worksheets[y].id]="worksheets/sheet"+(y+1)+".xml",S["/xl/worksheets/_rels/sheet"+(y+1)+".xml.rels"]=this.worksheets[y].relations.toXML();return this._prepareFilesForPackaging(S),l.resolve(S)}}),r.exports=x},20:function(r,o,s){var l=s(804),u=s(328),h=s(785),c=s(958),p=function(m){this.relations=null,this.columnFormats=[],this.data=[],this.mergedCells=[],this.columns=[],this.sheetProtection=!1,this._headers=[],this._footers=[],this._tables=[],this._drawings=[],this._rowInstructions={},this._freezePane={},this.hyperlinks=[],this.sheetView=m.sheetView||new c,this.showZeros=null,this.initialize(m)};l.extend(p.prototype,{initialize:function(m){m=m||{},this.name=m.name,this.id=l.uniqueId("Worksheet"),this._timezoneOffset=new Date().getTimezoneOffset()*60*1e3,m.columns&&this.setColumns(m.columns),this.relations=new h},exportData:function(){return{relations:this.relations.exportData(),columnFormats:this.columnFormats,data:this.data,columns:this.columns,mergedCells:this.mergedCells,_headers:this._headers,_footers:this._footers,_tables:this._tables,_rowInstructions:this._rowInstructions,_freezePane:this._freezePane,name:this.name,id:this.id}},importData:function(m){this.relations.importData(m.relations),delete m.relations,l.extend(this,m)},setSharedStringCollection:function(m){this.sharedStrings=m},addTable:function(m){this._tables.push(m),this.relations.addRelation(m,"table")},addDrawings:function(m){this._drawings.push(m),this.relations.addRelation(m,"drawingRelationship")},setRowInstructions:function(m,v){this._rowInstructions[m]=v},setHeader:function(m){if(!l.isArray(m))throw"Invalid argument type - setHeader expects an array of three instructions";this._headers=m},setFooter:function(m){if(!l.isArray(m))throw"Invalid argument type - setFooter expects an array of three instructions";this._footers=m},compilePageDetailPackage:function(m){return m=m||"",["&L",this.compilePageDetailPiece(m[0]||""),"&C",this.compilePageDetailPiece(m[1]||""),"&R",this.compilePageDetailPiece(m[2]||"")].join("")},compilePageDetailPiece:function(m){if(l.isString(m))return'&"-,Regular"'.concat(m);if(l.isObject(m)&&!l.isArray(m)){var v="";if(m.font||m.bold){var _=m.bold?"Bold":"Regular";v+='&"'+(m.font||"-"),v+=","+_+'"'}else v+='&"-,Regular"';return m.underline&&(v+="&U"),m.fontSize&&(v+="&"+m.fontSize),v+=m.text,v}if(l.isArray(m)){var C=this;return l.reduce(m,function(x,S){return x.concat(C.compilePageDetailPiece(S))},"")}},exportHeader:function(m){var v=m.createElement("oddHeader");return v.appendChild(m.createTextNode(this.compilePageDetailPackage(this._headers))),v},exportFooter:function(m){var v=m.createElement("oddFooter");return v.appendChild(m.createTextNode(this.compilePageDetailPackage(this._footers))),v},_buildCache:function(m){var v=m.createElement("c"),_=m.createElement("v");_.appendChild(m.createTextNode("--temp--")),v.appendChild(_);var C=m.createElement("c"),x=m.createElement("f");x.appendChild(m.createTextNode("--temp--")),C.appendChild(x);var S=m.createElement("c");S.setAttribute("t","s");var y=m.createElement("v");return y.appendChild(m.createTextNode("--temp--")),S.appendChild(y),{number:v,date:v,string:S,formula:C}},collectSharedStrings:function(){for(var m=this.data,v={},_=0,C=m.length;_<C;_++)for(var x=m[_],S=x.length,y=0;y<S;y++){var D=x[y],A=D&&D.metadata||{};D&&typeof D=="object"&&(D=D.value),A.type||typeof D=="number"&&(A.type="number"),(A.type==="text"||!A.type)&&typeof v[D]>"u"&&(v[D]=!0)}return l.keys(v)},toXML:function(){var m=this.data,v=this.columns||[],_=u.createXmlDoc(u.schemas.spreadsheetml,"worksheet"),C=_.documentElement,x,S,y;C.setAttribute("xmlns:r",u.schemas.relationships),C.setAttribute("xmlns:mc",u.schemas.markupCompat);var D=0,A=u.createElement(_,"sheetData"),P=this._buildCache(_);for(y=0,S=m.length;y<S;y++){var M=m[y],B=M.length;D=B>D?B:D;for(var Q=_.createElement("row"),L=0;L<B;L++){v[L]=v[L]||{};var le=M[L],_e,J=le&&le.metadata||{};switch(le&&typeof le=="object"&&(le=le.value),J.type||typeof le=="number"&&(J.type="number"),J.type){case"number":_e=P.number.cloneNode(!0),_e.firstChild.firstChild.nodeValue=le;break;case"date":_e=P.date.cloneNode(!0),_e.firstChild.firstChild.nodeValue=25569+(le-this._timezoneOffset)/864e5;break;case"formula":_e=P.formula.cloneNode(!0),_e.firstChild.firstChild.nodeValue=le;break;case"text":default:var z;typeof this.sharedStrings.strings[le]<"u"?z=this.sharedStrings.strings[le]:z=this.sharedStrings.addString(le),_e=P.string.cloneNode(!0),_e.firstChild.firstChild.nodeValue=z;break}J.style?_e.setAttribute("s",J.style):this._rowInstructions[y]&&this._rowInstructions[y].style!==void 0&&_e.setAttribute("s",this._rowInstructions[y].style),_e.setAttribute("r",u.positionToLetterRef(L+1,y+1)),Q.appendChild(_e)}if(Q.setAttribute("r",y+1),this._rowInstructions[y]){var F=this._rowInstructions[y];F.height!==void 0&&(Q.setAttribute("customHeight","1"),Q.setAttribute("ht",F.height)),F.style!==void 0&&(Q.setAttribute("customFormat","1"),Q.setAttribute("s",F.style))}A.appendChild(Q)}if(D!==0?C.appendChild(u.createElement(_,"dimension",[["ref",u.positionToLetterRef(1,1)+":"+u.positionToLetterRef(D,m.length)]])):C.appendChild(u.createElement(_,"dimension",[["ref",u.positionToLetterRef(1,1)]])),C.appendChild(this.sheetView.exportXML(_)),this.columns.length&&C.appendChild(this.exportColumns(_)),C.appendChild(A),this.sheetProtection&&C.appendChild(this.sheetProtection.exportXML(_)),this.hyperlinks.length>0){var ae=_.createElement("hyperlinks"),qe=this.hyperlinks;for(x=0,S=qe.length;x<S;x++){var De=_.createElement("hyperlink"),xe=qe[x];De.setAttribute("ref",xe.cell),xe.id=u.uniqueId("hyperlink"),this.relations.addRelation({id:xe.id,target:xe.location,targetMode:xe.targetMode||"External"},"hyperlink"),De.setAttribute("r:id",this.relations.getRelationshipId(xe)),ae.appendChild(De)}C.appendChild(ae)}if(this.mergedCells.length>0){var Te=_.createElement("mergeCells");for(x=0,S=this.mergedCells.length;x<S;x++){var Re=_.createElement("mergeCell");Re.setAttribute("ref",this.mergedCells[x][0]+":"+this.mergedCells[x][1]),Te.appendChild(Re)}C.appendChild(Te)}if(this.exportPageSettings(_,C),this._headers.length>0||this._footers.length>0){var ne=_.createElement("headerFooter");this._headers.length>0&&ne.appendChild(this.exportHeader(_)),this._footers.length>0&&ne.appendChild(this.exportFooter(_)),C.appendChild(ne)}for(x=0,S=this._drawings.length;x<S;x++){var fe=_.createElement("drawing");fe.setAttribute("r:id",this.relations.getRelationshipId(this._drawings[x])),C.appendChild(fe)}if(this._tables.length>0){var Be=_.createElement("tableParts");for(Be.setAttribute("count",this._tables.length),x=0,S=this._tables.length;x<S;x++){var Ye=_.createElement("tablePart");Ye.setAttribute("r:id",this.relations.getRelationshipId(this._tables[x])),Be.appendChild(Ye)}C.appendChild(Be)}return _},exportColumns:function(m){for(var v=u.createElement(m,"cols"),_=0,C=this.columns.length;_<C;_++){var x=this.columns[_],S=u.createElement(m,"col",[["min",x.min||_+1],["max",x.max||_+1]]);x.hidden&&S.setAttribute("hidden",1),x.bestFit&&S.setAttribute("bestFit",1),(x.customWidth||x.width)&&S.setAttribute("customWidth",1),x.width?S.setAttribute("width",x.width):S.setAttribute("width",9.140625),v.appendChild(S)}return v},exportPageSettings:function(m,v){if(this._margin){var _=.7,C=this._margin.left?this._margin.left:_,x=this._margin.right?this._margin.right:_,S=this._margin.top?this._margin.top:_,y=this._margin.bottom?this._margin.bottom:_;_=.3;var D=this._margin.header?this._margin.header:_,A=this._margin.footer?this._margin.footer:_;v.appendChild(u.createElement(m,"pageMargins",[["top",S],["bottom",y],["left",C],["right",x],["header",D],["footer",A]]))}this._orientation&&v.appendChild(u.createElement(m,"pageSetup",[["orientation",this._orientation]]))},setPageOrientation:function(m){this._orientation=m},setPageMargin:function(m){this._margin=m},setColumns:function(m){this.columns=m},setData:function(m){this.data=m},mergeCells:function(m,v){this.mergedCells.push([m,v])},freezePane:function(m,v,_){this.sheetView.freezePane(m,v,_)},setColumnFormats:function(m){this.columnFormats=m}}),r.exports=p},543:function(r,o,s){var l=s(804),u=function(h,c){this.documentElement=this.createElement(c),this.documentElement.setAttribute("xmlns",h)};l.extend(u.prototype,{createElement:function(h){return new u.XMLNode({nodeName:h})},createTextNode:function(h){return new u.TextNode(h)},toString:function(){return this.documentElement.toString()}}),u.Node=function(){},u.Node.Create=function(h){switch(h.type){case"XML":return new u.XMLNode(h);case"TEXT":return new u.TextNode(h.nodeValue)}},u.TextNode=function(h){this.nodeValue=h},l.extend(u.TextNode.prototype,{toJSON:function(){return{nodeValue:this.nodeValue,type:"TEXT"}},toString:function(){return l.escape(this.nodeValue)}}),u.XMLNode=function(h){if(this.nodeName=h.nodeName,this.children=[],this.nodeValue=h.nodeValue||"",this.attributes={},h.children)for(var c=0,p=h.children.length;c<p;c++)this.appendChild(u.Node.Create(h.children[c]));if(h.attributes)for(var m in h.attributes)h.attributes.hasOwnProperty(m)&&this.setAttribute(m,h.attributes[m])},l.extend(u.XMLNode.prototype,{toString:function(){var h="<"+this.nodeName;for(var c in this.attributes)this.attributes.hasOwnProperty(c)&&(h=h+" "+c+'="'+l.escape(this.attributes[c])+'"');for(var p="",m=0,v=this.children.length;m<v;m++)p+=this.children[m].toString();return p?h+=">"+p+"</"+this.nodeName+">":h+="/>",h},toJSON:function(){for(var h=[],c=0,p=this.children.length;c<p;c++)h.push(this.children[c].toJSON());return{nodeName:this.nodeName,children:h,nodeValue:this.nodeValue,attributes:this.attributes,type:"XML"}},setAttribute:function(h,c){if(c===null){delete this.attributes[h],delete this[h];return}this.attributes[h]=c,this[h]=c},appendChild:function(h){this.children.push(h),this.firstChild=this.children[0]},cloneNode:function(){return new u.XMLNode(this.toJSON())}}),r.exports=u},328:function(r,o,s){var l=s(543),u=s(804),h={_idSpaces:{},uniqueId:function(c){return this._idSpaces[c]||(this._idSpaces[c]=1),this._idSpaces[c]++},createXmlDoc:function(c,p){return new l(c||null,p,null)},createElement:function(c,p,m){var v=c.createElement(p);m=m||[];for(var _=m.length;_--;)v.setAttribute(m[_][0],m[_][1]);return v},setAttributesOnDoc:function(c,p){u.forEach(p,function(m,v){if(u.isPlainObject(m))if(m.v!==null&&m.v!==void 0)switch(m.type){case Boolean:m=m.v?"1":"0";break}else m=null;m!=null&&c.setAttribute(v,m)})},LETTER_REFS:{},positionToLetterRef:function(c,p){var m=1,v,_=c,C="",x="ABCDEFGHIJKLMNOPQRSTUVWXYZ";if(this.LETTER_REFS[c])return this.LETTER_REFS[c].concat(p);for(;_>0;)_-=Math.pow(26,m-1),v=_%Math.pow(26,m),_-=v,v=v/Math.pow(26,m-1),C=x.charAt(v)+C,m+=1;return this.LETTER_REFS[c]=C,C.concat(p)},schemas:{worksheet:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet",sharedStrings:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",stylesheet:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",relationships:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",relationshipPackage:"http://schemas.openxmlformats.org/package/2006/relationships",contentTypes:"http://schemas.openxmlformats.org/package/2006/content-types",spreadsheetml:"http://schemas.openxmlformats.org/spreadsheetml/2006/main",markupCompat:"http://schemas.openxmlformats.org/markup-compatibility/2006",x14ac:"http://schemas.microsoft.com/office/spreadsheetml/2009/9/ac",officeDocument:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",package:"http://schemas.openxmlformats.org/package/2006/relationships",table:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/table",spreadsheetDrawing:"http://schemas.openxmlformats.org/drawingml/2006/spreadsheetDrawing",drawing:"http://schemas.openxmlformats.org/drawingml/2006/main",drawingRelationship:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",image:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",chart:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chart",hyperlink:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink"}};r.exports=h},450:function(r,o,s){var l=s(952),u=s(496),h=s(804),c=function(p){this.workbook=new l,this.stylesheet=this.workbook.getStyleSheet(),this.columns={},this.predefinedStyles={},this.predefinedFormatters={date:this.stylesheet.createSimpleFormatter("date"),currency:this.stylesheet.createFormat({format:"$ #,##0.00;$ #,##0.00;-",font:{color:"FFE9F50A"}}),header:this.stylesheet.createFormat({font:{bold:!0,underline:!0,color:{theme:3}},alignment:{horizontal:"center"}})},p!=null?this.worksheet=this.workbook.createWorksheet(p):this.worksheet=this.workbook.createWorksheet(),this.workbook.addWorksheet(this.worksheet),this.worksheet.setPageOrientation("landscape"),this.table=new u,this.table.styleInfo.themeStyle="TableStyleLight1",this.worksheet.addTable(this.table),this.workbook.addTable(this.table)};h.extend(c.prototype,{setHeader:function(){this.worksheet.setHeader.apply(this.worksheet,arguments)},setFooter:function(){this.worksheet.setFooter.apply(this.worksheet,arguments)},prepare:function(){return this.workbook},setData:function(p){this.worksheet.setData(p),this.data=p,this.table.setReferenceRange([1,1],[this.columns.length,p.length])},setColumns:function(p){this.columns=p,this.worksheet.setColumns(p),this.table.setTableColumns(p),this.table.setReferenceRange([1,1],[this.columns.length,this.data.length])},getWorksheet:function(){return this.worksheet}}),r.exports=c},133:function(r,o,s){r.exports={BasicReport:s(450)}},396:function(r,o,s){var l=s(804),u=s(952),h=s(395),c={createWorkbook:function(){return new u},config:{forceUIThread:!1},createFile:function(p,m){var v=new h;return p.generateFiles().then(function(_){return l.each(_,function(C,x){x=x.substr(1),x.indexOf(".xml")!==-1||x.indexOf(".rel")!==-1?v.file(x,C,{base64:!1}):v.file(x,C,{base64:!0,binary:!0})}),v.generateAsync(l.defaults(m||{},{type:"base64"}))})}};r.exports=c},351:function(r,o,s){var l=r.exports={Drawings:s(861),Drawing:s(890),Pane:s(753),Paths:s(255),Positioning:s(864),RelationshipManager:s(785),SharedStrings:s(349),SheetView:s(958),StyleSheet:s(747),Table:s(496),util:s(328),Workbook:s(952),Worksheet:s(20),XMLDOM:s(543),Builder:s(396),Template:s(133)};try{typeof window<"u"&&(window.ExcelBuilder=l)}catch{console.info("Not attaching EB to window")}},395:function(r){r.exports=zC()},804:function(r){r.exports=UC()},434:function(r){r.exports=GC()}},t={};function e(r){if(t[r])return t[r].exports;var o=t[r]={exports:{}},s=!0;try{a[r](o,o.exports,e),s=!1}finally{s&&delete t[r]}return o.exports}var n=typeof n<"u"?n:"";return e.ab=n+"/",e(351)}();const Ev=eh(yv),WC=bl({__proto__:null,default:Ev},[yv]),$C=a=>a,YC=(a,t,e,n,r)=>({value:typeof a=="string"&&/\d/g.test(a)?jC(a,t,r):a,metadata:{style:e}});function jC(a,t,e){let n=a;if(typeof a=="string"&&a){const r=Ko("decimalSeparator",t,e,je.DEFAULT_NUMBER_DECIMAL_SEPARATOR),o=parseFloat(r===","?a.replace(/[^0-9\,\-]+/g,"").replace(",","."):a.replace(/[^\d\.\-]/g,""));n=isNaN(o)?a:o}return n}function XC(a,t,e,n,r=!0){const o=za(e);let s,l=$C;return o===ie.number&&r&&(s=_f(a,t,e,n,"cell").stylesheetFormatter.id,l=YC),{stylesheetFormatterId:s,getDataValueParser:l}}function qC(a,t,e){var n,r;return(r=(n=a==null?void 0:a[e])===null||n===void 0?void 0:n[t.field])!==null&&r!==void 0?r:0}function KC(a,t,e){var n;let r;if(e==="group")switch(a.groupTotalsFormatter){case Ti.avgTotalsCurrency:case Ti.avgTotalsDollar:case Ti.sumTotalsCurrency:case Ti.sumTotalsCurrencyColored:case Ti.sumTotalsDollar:case Ti.sumTotalsDollarBold:case Ti.sumTotalsDollarColored:case Ti.sumTotalsDollarColoredBold:r="currency";break;case Ti.avgTotalsPercentage:r="percent";break;case Ti.avgTotals:case Ti.minTotals:case Ti.maxTotals:case Ti.sumTotals:case Ti.sumTotalsColored:case Ti.sumTotalsBold:default:r="decimal";break}else if(a.formatter===ln.multiple&&Array.isArray((n=a.params)===null||n===void 0?void 0:n.formatters)){r="decimal";for(const o of a.params.formatters)if(r=Sv(o),r!=="decimal")break}else r=Sv(a.formatter);return cn(a,t,r,e)}function Sv(a){let t;switch(a){case ln.currency:case ln.dollar:case ln.dollarColored:case ln.dollarColoredBold:t="currency";break;case ln.percent:case ln.percentComplete:case ln.percentCompleteBar:case ln.percentCompleteBarWithText:case ln.percentSymbol:t="percent";break;case ln.decimal:default:t="decimal";break}return t}function _f(a,t,e,n,r){var o;let s="",l="",u;const h=za(e);if(r==="group")switch(e.groupTotalsFormatter){case Ti.avgTotals:case Ti.avgTotalsCurrency:case Ti.avgTotalsDollar:case Ti.avgTotalsPercentage:l="avg";break;case Ti.minTotals:l="min";break;case Ti.maxTotals:l="max";break;case Ti.sumTotals:case Ti.sumTotalsBold:case Ti.sumTotalsColored:case Ti.sumTotalsCurrency:case Ti.sumTotalsCurrencyColored:case Ti.sumTotalsDollar:case Ti.sumTotalsDollarColoredBold:case Ti.sumTotalsDollarColored:case Ti.sumTotalsDollarBold:l="sum";break;default:u=t.numberFormatter;break}else switch(h){case ie.number:switch(e.formatter){case ln.multiple:if(Array.isArray((o=e.params)===null||o===void 0?void 0:o.formatters))for(const c of e.params.formatters){const{stylesheetFormatter:p}=_f(a,t,{...e,formatter:c},n,r);if(p!==t.numberFormatter){u=p;break}}u||(u=t.numberFormatter);break;case ln.currency:case ln.decimal:case ln.dollar:case ln.dollarColored:case ln.dollarColoredBold:case ln.percent:case ln.percentComplete:case ln.percentCompleteBar:case ln.percentCompleteBarWithText:case ln.percentSymbol:s=xv(e,n,"cell");break;default:u=t.numberFormatter;break}break}return!u&&(e.formatter||e.groupTotalsFormatter)&&(s=xv(e,n,r,l),t.hasOwnProperty(s)||(t[s]=a.createFormat({format:s})),u=t[s]),{stylesheetFormatter:u,groupType:l}}function wv(a){const[t,e,n,r,o,s,l,u]=(a==null?void 0:a.match(/^([^\d\(\-]*)([\(]?)([^\d]*)([\-]?[\w]]?[\d\s]*[.,\d]*[\d]*[^)\s\%]?)([^\d.,)]*)([\)]?)([^\d]*)$/i))||[],h=(o||"").replace(/1/g,"0").replace(/[2]/g,"#");return[Vu(e??""),n??"",Vu(r??""),h,Vu(s??""),l??"",Vu(u??"")].join("").replace(",",",")}function xv(a,t,e,n=""){let r="",o="",s="";const{minDecimal:l,maxDecimal:u,thousandSeparator:h}=KC(a,t,e),p=parseFloat(`${h?"2220":"0"}.${ZC(l,u)}`);return e==="group"&&a.groupTotalsFormatter?(o=sr(a.groupTotalsFormatter({[n]:{[a.field]:p}},a,t)),s=sr(a.groupTotalsFormatter({[n]:{[a.field]:-p}},a,t))):a.formatter&&(o=sr(a.formatter(0,0,p,a,{},t)),s=sr(a.formatter(0,0,-p,a,{},t))),o&&s&&(r=wv(o)+";"+wv(s)),r}function Vu(a){return a&&`"${a}"`}function ZC(a,t){return Tv("1",a)+Tv("2",t-a)}function Tv(a,t){let e="";for(let n=0;n<t;n++)e+=a;return e}const kl=Ev||WC,QC={filename:"export",format:un.xlsx};class JC{constructor(){this._fileFormat=un.xlsx,this._columnHeaders=[],this._hasColumnTitlePreHeader=!1,this._hasGroupedItems=!1,this._pubSubService=null,this._regularCellExcelFormats={},this._groupTotalExcelFormats={},this.className="ExcelExportService"}get _datasetIdPropName(){var t,e;return(e=(t=this._gridOptions)===null||t===void 0?void 0:t.datasetIdPropertyName)!==null&&e!==void 0?e:"id"}get _dataView(){var t;return(t=this._grid)===null||t===void 0?void 0:t.getData()}get _gridOptions(){var t;return((t=this._grid)===null||t===void 0?void 0:t.getOptions())||{}}get stylesheet(){return this._stylesheet}get stylesheetFormats(){return this._stylesheetFormats}get groupTotalExcelFormats(){return this._groupTotalExcelFormats}get regularCellExcelFormats(){return this._regularCellExcelFormats}dispose(){var t;(t=this._pubSubService)===null||t===void 0||t.unsubscribeAll()}init(t,e){var n,r,o;if(this._grid=t,this._pubSubService=e.get("PubSubService"),this._locales=(r=(n=this._gridOptions)===null||n===void 0?void 0:n.locales)!==null&&r!==void 0?r:je.locales,this._translaterService=(o=this._gridOptions)===null||o===void 0?void 0:o.translater,this._gridOptions.enableTranslate&&(!this._translaterService||!this._translaterService.translate))throw new Error('[Slickgrid-Universal] requires a Translate Service to be passed in the "translater" Grid Options when "enableTranslate" is enabled. (example: this.gridOptions = { enableTranslate: true, translater: this.translaterService })')}exportToExcel(t){var e;if(!this._grid||!this._dataView||!this._pubSubService)throw new Error('[Slickgrid-Universal] it seems that the SlickGrid & DataView objects and/or PubSubService are not initialized did you forget to enable the grid option flag "enableExcelExport"?');return(e=this._pubSubService)===null||e===void 0||e.publish("onBeforeExportToExcel",!0),this._excelExportOptions=uo({...QC,...this._gridOptions.excelExportOptions,...t}),this._fileFormat=this._excelExportOptions.format||un.xlsx,this._regularCellExcelFormats={},this._groupTotalExcelFormats={},new Promise(n=>{const r={name:this._excelExportOptions.sheetName||"Sheet1"};this._workbook=kl.Workbook?new kl.Workbook:kl.createWorkbook(),this._sheet=kl.Worksheet?new kl.Worksheet(r):this._workbook.createWorksheet(r),this._stylesheet=this._workbook.getStyleSheet();const o=this._stylesheet.createFormat({font:{bold:!0}}),s=this._stylesheet.createFormat({format:"@"}),l=this._stylesheet.createFormat({format:"0"});this._stylesheetFormats={boldFormatter:o,numberFormatter:l,stringFormatter:s},this._sheet.setColumnFormats([o]);const u=this.getDataOutput();setTimeout(async()=>{var h,c,p,m,v,_,C;!((c=(h=this._gridOptions)===null||h===void 0?void 0:h.excelExportOptions)===null||c===void 0)&&c.customExcelHeader&&this._gridOptions.excelExportOptions.customExcelHeader(this._workbook,this._sheet);const x=((p=this._grid)===null||p===void 0?void 0:p.getColumns())||[];this._sheet.setColumns(this.getColumnStyles(x));const S=this._sheet.data;let y=S;Array.isArray(S)&&Array.isArray(u)&&(y=this._sheet.data.concat(u)),this._sheet.setData(y),this._workbook.addWorksheet(this._sheet);const D=(v=(m=kl.Builder)===null||m===void 0?void 0:m.createFile)!==null&&v!==void 0?v:kl.createFile;let A=(_=this._excelExportOptions)===null||_===void 0?void 0:_.mimeType;A===void 0&&(A=this._fileFormat===un.xls?"application/vnd.ms-excel":"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet");const P=A===""?{type:"blob"}:{type:"blob",mimeType:A},M=await D(this._workbook,P),B={filename:`${this._excelExportOptions.filename}.${this._fileFormat}`,format:this._fileFormat};this.startDownloadFile({...B,blob:M,data:this._sheet.data}),(C=this._pubSubService)===null||C===void 0||C.publish("onAfterExportToExcel",B),n(!0)})})}getExcelColumnNameByIndex(t){const e="ZABCDEFGHIJKLMNOPQRSTUVWXY";let n=Math.floor(t/26);const r=Math.floor(t%26);return r===0&&n--,t>26?this.getExcelColumnNameByIndex(n)+e[r]:e[r]+""}startDownloadFile(t){if(typeof navigator.msSaveOrOpenBlob=="function")navigator.msSaveOrOpenBlob(t.blob,t.filename);else{const e=document.createElement("a"),n=URL.createObjectURL(t.blob);e&&document&&(e.textContent="download",e.href=n,e.setAttribute("download",t.filename),e.style.visibility="hidden",document.body.appendChild(e),e.click(),document.body.removeChild(e))}}getDataOutput(){var t,e;const n=((t=this._grid)===null||t===void 0?void 0:t.getColumns())||[],r=[],o=(e=this._gridOptions)===null||e===void 0?void 0:e.excelExportOptions,s=o==null?void 0:o.columnHeaderStyle;let l=this._stylesheetFormats.boldFormatter.id;if(s&&(l=this._stylesheet.createFormat(s).id),this._gridOptions.createPreHeaderPanel&&this._gridOptions.showPreHeaderPanel&&!this._gridOptions.enableDraggableGrouping){const u=this._stylesheet.createFormat({alignment:{horizontal:"center"},font:{bold:!0}});r.push(this.getColumnGroupedHeaderTitlesData(n,{style:u==null?void 0:u.id})),this._hasColumnTitlePreHeader=!0}return r.push(this.getColumnHeaderData(n,{style:l})),this.pushAllGridRowDataToArray(r,n),r}getColumnStyles(t){var e,n,r;const o=this._dataView.getGrouping(),s=[];return Array.isArray(o)&&o.length>0&&s.push({bestFit:!0,columnStyles:(r=(n=(e=this._gridOptions)===null||e===void 0?void 0:e.excelExportOptions)===null||n===void 0?void 0:n.customColumnWidth)!==null&&r!==void 0?r:10}),t.forEach(l=>{var u,h,c,p,m,v,_;const C=(u=l.excludeFromExport)!==null&&u!==void 0?u:!1;(l.width===void 0||l.width>0)&&!C&&s.push({bestFit:!0,width:(_=(p=(h=l.exportColumnWidth)!==null&&h!==void 0?h:(c=l.excelExportOptions)===null||c===void 0?void 0:c.width)!==null&&p!==void 0?p:(v=(m=this._gridOptions)===null||m===void 0?void 0:m.excelExportOptions)===null||v===void 0?void 0:v.customColumnWidth)!==null&&_!==void 0?_:10})}),s}getColumnGroupedHeaderTitlesData(t,e){let n=[];this._groupedColumnHeaders=this.getColumnGroupedHeaderTitles(t)||[],this._groupedColumnHeaders&&Array.isArray(this._groupedColumnHeaders)&&this._groupedColumnHeaders.length>0&&(n=this._groupedColumnHeaders.map(s=>({value:s.title,metadata:e})));let r=0;const o=this._groupedColumnHeaders.length;for(let s=0;s<o;s++)if(s+1===o||s+1<o&&this._groupedColumnHeaders[s].title!==this._groupedColumnHeaders[s+1].title){const l=this.getExcelColumnNameByIndex(r+1),u=this.getExcelColumnNameByIndex(s+1);this._sheet.mergeCells(`${l}1`,`${u}1`),r=s+1}return n}getColumnHeaderData(t,e){let n=[];this._columnHeaders=this.getColumnHeaders(t)||[],this._columnHeaders&&Array.isArray(this._columnHeaders)&&this._columnHeaders.length>0&&(n=this._columnHeaders.map(o=>({value:sr(o.title),metadata:e})));const r=this.getGroupColumnTitle();return r&&n.unshift({value:r,metadata:e}),n}getGroupColumnTitle(){var t;let e=this._excelExportOptions.groupingColumnHeaderTitle;!e&&this._gridOptions.enableTranslate&&(!((t=this._translaterService)===null||t===void 0)&&t.translate)?e=this._translaterService.translate(`${ao(this._gridOptions)}GROUP_BY`):e||(e=this._locales&&this._locales.TEXT_GROUP_BY);const n=this._dataView.getGrouping();return Array.isArray(n)&&n.length>0?(this._hasGroupedItems=!0,e):(this._hasGroupedItems=!1,null)}getColumnGroupedHeaderTitles(t){const e=[];return t&&Array.isArray(t)&&t.forEach(n=>{var r;let o="";n.columnGroupKey&&this._gridOptions.enableTranslate&&(!((r=this._translaterService)===null||r===void 0)&&r.translate)?o=this._translaterService.translate(n.columnGroupKey):o=n.columnGroup||"";const s=n.excludeFromExport||!1;(n.width===void 0||n.width>0)&&!s&&e.push({key:n.field||n.id,title:o||""})}),e}getColumnHeaders(t){const e=[];return t&&Array.isArray(t)&&t.forEach(n=>{var r;let o="";(n.nameKey||n.nameKey)&&this._gridOptions.enableTranslate&&(!((r=this._translaterService)===null||r===void 0)&&r.translate)?o=this._translaterService.translate(n.nameKey||n.nameKey):o=n.name||yl(n.field);const s=n.excludeFromExport||!1;(n.width===void 0||n.width>0)&&!s&&e.push({key:(n.field||n.id)+"",title:o})}),e}pushAllGridRowDataToArray(t,e){const n=this._dataView.getLength();for(let r=0;r<n;r++){const o=this._dataView.getItem(r);o&&!o.hasOwnProperty("getItem")&&(o[this._datasetIdPropName]!==null&&o[this._datasetIdPropName]!==void 0?t.push(this.readRegularRowData(e,r,o)):this._hasGroupedItems&&o.__groupTotals===void 0?t.push([this.readGroupedRowTitle(o)]):o.__groupTotals&&t.push(this.readGroupedTotalRows(e,o)))}return t}readRegularRowData(t,e,n){var r,o,s,l,u,h;let c=0;const p=[],m=t.length;let v=1,_=0;const C=this._dataView.getItemMetadata(e);for(let x=0;x<m;x++){const S=t[x];if(S.excludeFromExport)continue;this._hasGroupedItems&&c===0&&p.push("");let y=1,D;if(C!=null&&C.columns){const A=C.columns,P=A[S.id]||A[x];!isNaN(v)&&+v>1||v==="*"&&x>0||(v=(r=P==null?void 0:P.colspan)!==null&&r!==void 0?r:1),v==="*"?y=t.length-x:(y=v,S.id in A&&(D=S.id,_=x))}if(v==="*"&&x>0||!isNaN(v)&&+v>1&&S.id!==D){const A=e+(this._hasColumnTitlePreHeader?3:2);if(typeof v=="number"&&y-1===1){const P=this.getExcelColumnNameByIndex(_+1),M=this.getExcelColumnNameByIndex(x+1);this._sheet.mergeCells(`${P}${A}`,`${M}${A}`),p.push("")}else if(v==="*"&&y===1){const P=this.getExcelColumnNameByIndex(x+1);this._sheet.mergeCells(`A${A}`,`${P}${A}`)}else p.push("");typeof v=="number"&&!isNaN(v)&&+v>1&&(y=v--)}else{let A="";const P=za(S),M={...this._excelExportOptions};if(S.exportWithFormatter!==!1&&nh(P)&&(M.exportWithFormatter=!0),A=Sh(e,x,S,n,this._grid,M),!this._regularCellExcelFormats.hasOwnProperty(S.id)){const L=(s=(o=S.excelExportOptions)===null||o===void 0?void 0:o.autoDetectCellFormat)!==null&&s!==void 0?s:(l=this._excelExportOptions)===null||l===void 0?void 0:l.autoDetectCellFormat,le=XC(this._stylesheet,this._stylesheetFormats,S,this._grid,L);!((u=S.excelExportOptions)===null||u===void 0)&&u.style&&(le.stylesheetFormatterId=this._stylesheet.createFormat(S.excelExportOptions.style).id),!((h=S.excelExportOptions)===null||h===void 0)&&h.valueParserCallback&&(le.getDataValueParser=S.excelExportOptions.valueParserCallback),this._regularCellExcelFormats[S.id]=le}typeof A=="string"&&(S.sanitizeDataExport||this._excelExportOptions.sanitizeDataExport)&&(A=sr(A));const{stylesheetFormatterId:B,getDataValueParser:Q}=this._regularCellExcelFormats[S.id];A=Q(A,S,B,this._stylesheet,this._gridOptions),p.push(A),c++}}return p}readGroupedRowTitle(t){const e=sr(t.title);if(this._excelExportOptions&&this._excelExportOptions.addGroupIndentation){const n=this._excelExportOptions&&this._excelExportOptions.groupCollapsedSymbol||"",r=this._excelExportOptions&&this._excelExportOptions.groupExpandedSymbol||"";return(t.collapsed?n:r)+" "+Ga(5*t.level)+e}return e}readGroupedTotalRows(t,e){const r=[this._excelExportOptions.groupingAggregatorRowText||""];return t.forEach(o=>{var s,l,u,h,c,p,m,v;let _="";const C=za(o),x=o.excludeFromExport||!1;o.exportCustomGroupTotalsFormatter&&(_=o.exportCustomGroupTotalsFormatter(e,o,this._grid));const S=(l=(s=o.excelExportOptions)===null||s===void 0?void 0:s.autoDetectCellFormat)!==null&&l!==void 0?l:(u=this._excelExportOptions)===null||u===void 0?void 0:u.autoDetectCellFormat;if(C===ie.number&&S!==!1){let y=this._groupTotalExcelFormats[o.id];y!=null&&y.groupType||(y=_f(this._stylesheet,this._stylesheetFormats,o,this._grid,"group"),!((h=o.groupTotalsExcelExportOptions)===null||h===void 0)&&h.style&&(y.stylesheetFormatter=this._stylesheet.createFormat(o.groupTotalsExcelExportOptions.style)),this._groupTotalExcelFormats[o.id]=y);const D=(p=(c=o.groupTotalsExcelExportOptions)===null||c===void 0?void 0:c.valueParserCallback)!==null&&p!==void 0?p:qC;((m=e[y.groupType])===null||m===void 0?void 0:m[o.field])!==void 0&&(_={value:D(e,o,y.groupType,this._stylesheet),metadata:{style:(v=y.stylesheetFormatter)===null||v===void 0?void 0:v.id}})}else o.groupTotalsFormatter&&(_=o.groupTotalsFormatter(e,o,this._grid));typeof _=="string"&&(o.sanitizeDataExport||this._excelExportOptions.sanitizeDataExport)&&(_=sr(_)),(o.width===void 0||o.width>0)&&!x&&r.push(_)}),r}}class ey{constructor(){this._cellType="slick-cell",this._rxjs=null,this._sharedService=null,this._defaultOptions={className:"slick-custom-tooltip",offsetLeft:0,offsetRight:0,offsetTopBottom:4,hideArrow:!1,regularTooltipWhiteSpace:"pre-line",whiteSpace:"normal"},this.name="CustomTooltip",this._eventHandler=new Slick.EventHandler}get addonOptions(){return this._addonOptions}get cancellablePromise(){return this._cancellablePromise}get cellAddonOptions(){return this._cellAddonOptions}get className(){var t,e;return(e=(t=this._cellAddonOptions)===null||t===void 0?void 0:t.className)!==null&&e!==void 0?e:"slick-custom-tooltip"}get dataView(){return this._grid.getData()||{}}get gridOptions(){return this._grid.getOptions()||{}}get gridUid(){var t;return((t=this._grid)===null||t===void 0?void 0:t.getUID())||""}get gridUidSelector(){return this.gridUid?`.${this.gridUid}`:""}get tooltipElm(){return this._tooltipElm}addRxJsResource(t){this._rxjs=t}init(t,e){var n,r;this._grid=t,this._rxjs=e.get("RxJsFacade"),this._sharedService=e.get("SharedService"),this._addonOptions={...this._defaultOptions,...(r=(n=this._sharedService)===null||n===void 0?void 0:n.gridOptions)===null||r===void 0?void 0:r.customTooltip},this._eventHandler.subscribe(t.onMouseEnter,this.handleOnMouseEnter.bind(this)).subscribe(t.onHeaderMouseEnter,(o,s)=>this.handleOnHeaderMouseEnterByType(o,s,"slick-header-column")).subscribe(t.onHeaderRowMouseEnter,(o,s)=>this.handleOnHeaderMouseEnterByType(o,s,"slick-headerrow-column")).subscribe(t.onMouseLeave,this.hideTooltip.bind(this)).subscribe(t.onHeaderMouseLeave,this.hideTooltip.bind(this)).subscribe(t.onHeaderRowMouseLeave,this.hideTooltip.bind(this))}dispose(){this.hideTooltip(),this._cancellablePromise=void 0,this._eventHandler.unsubscribeAll()}hideTooltip(){var t,e;(t=this._cancellablePromise)===null||t===void 0||t.cancel(),(e=this._observable$)===null||e===void 0||e.unsubscribe();const n=document.body.querySelector(`.${this.className}${this.gridUidSelector}`);n==null||n.remove()}getOptions(){return this._addonOptions}setOptions(t){this._addonOptions={...this._addonOptions,...t}}asyncProcessCallback(t,e,n,r,o){var s,l,u;this.hideTooltip();const h={...o,[(l=(s=this.addonOptions)===null||s===void 0?void 0:s.asyncParamsPropName)!==null&&l!==void 0?l:"__params"]:t};!((u=this._cellAddonOptions)===null||u===void 0)&&u.useRegularTooltip?this.renderRegularTooltip(this._cellAddonOptions.asyncPostFormatter,e,n,r,h):this.renderTooltipFormatter(this._cellAddonOptions.asyncPostFormatter,e,n,r,h)}handleOnHeaderMouseEnterByType(t,e,n){var r,o,s;this._cellType=n,this.hideTooltip();const l={row:-1,cell:this._grid.getColumns().findIndex(p=>{var m,v;return((v=(m=e==null?void 0:e.column)===null||m===void 0?void 0:m.id)!==null&&v!==void 0?v:"")===p.id})},u=e.column,h={},c=n==="slick-headerrow-column";if(e=e||{},e.cell=l.cell,e.row=l.row,e.columnDef=u,e.dataContext=h,e.grid=this._grid,e.type=c?"header-row":"header",this._cellAddonOptions={...this._addonOptions,...u==null?void 0:u.customTooltip},!(u!=null&&u.disableTooltip||typeof((r=this._cellAddonOptions)===null||r===void 0?void 0:r.usabilityOverride)=="function"&&!this._cellAddonOptions.usabilityOverride(e))&&u&&t.target){this._cellNodeElm=t.target.closest(`.${n}`);const p=c?this._cellAddonOptions.headerRowFormatter:this._cellAddonOptions.headerFormatter;if(!((o=this._cellAddonOptions)===null||o===void 0)&&o.useRegularTooltip||!p){const m=c?!((s=this._cellAddonOptions)===null||s===void 0)&&s.useRegularTooltip?null:p:u.name;this.renderRegularTooltip(m,l,null,u,h)}else this._cellNodeElm&&typeof p=="function"&&this.renderTooltipFormatter(p,l,null,u,h)}}async handleOnMouseEnter(t){var e,n,r,o,s,l,u,h;if(this._cellType="slick-cell",this.hideTooltip(),t&&this._grid){const c=(n=(e=t==null?void 0:t.target)===null||e===void 0?void 0:e.closest(".slick-cell"))===null||n===void 0?void 0:n.className,p=c&&/l\d+/.exec(c||"")?this._grid.getCellFromEvent(t):null;if(p){const m=this.dataView?this.dataView.getItem(p.row):this._grid.getDataItem(p.row),v=this._grid.getColumns()[p.cell];if(this._cellNodeElm=this._grid.getCellNode(p.row,p.cell),m&&v){if(this._cellAddonOptions={...this._addonOptions,...v==null?void 0:v.customTooltip},v!=null&&v.disableTooltip||typeof((r=this._cellAddonOptions)===null||r===void 0?void 0:r.usabilityOverride)=="function"&&!this._cellAddonOptions.usabilityOverride({cell:p.cell,row:p.row,dataContext:m,column:v,grid:this._grid,type:"cell"}))return;const _=m.hasOwnProperty(v.field)?m[v.field]:null,C=this._grid.getEditorLock().isActive()?null:_;if(this._cellAddonOptions.useRegularTooltip&&!(!((o=this._cellAddonOptions)===null||o===void 0)&&o.asyncProcess)||!(!((s=this._cellAddonOptions)===null||s===void 0)&&s.formatter))this.renderRegularTooltip(v.formatter,p,C,v,m);else if(typeof((l=this._cellAddonOptions)===null||l===void 0?void 0:l.formatter)=="function"&&this.renderTooltipFormatter(this._cellAddonOptions.formatter,p,C,v,m),typeof((u=this._cellAddonOptions)===null||u===void 0?void 0:u.asyncProcess)=="function"){const x=this._cellAddonOptions.asyncProcess(p.row,p.cell,_,v,m,this._grid);if(this._cellAddonOptions.asyncPostFormatter||console.error('[Slickgrid-Universal] when using "asyncProcess" with Custom Tooltip, you must also provide an "asyncPostFormatter" formatter.'),x instanceof Promise)this._cancellablePromise=xp(x),this._cancellablePromise.promise.then(S=>this.asyncProcessCallback(S,p,_,v,m)).catch(S=>{S instanceof La||console.error(S)});else if(!((h=this._rxjs)===null||h===void 0)&&h.isObservable(x)){const S=this._rxjs;this._observable$=x.pipe(S.switchMap(y=>S.of(y))).subscribe(y=>this.asyncProcessCallback(y,p,_,v,m),y=>console.error(y))}}}}}}parseFormatterAndSanitize(t,e,n,r,o){if(typeof t=="function"){const s=t(e.row,e.cell,n,r,o,this._grid),l=typeof s=="object"&&(s!=null&&s.text)?s.text:typeof s=="string"?s:"";return Mn(this.gridOptions,l)}else if(typeof t=="string")return Mn(this.gridOptions,t);return""}renderRegularTooltip(t,e,n,r,o){var s,l,u,h,c,p,m,v;const _=Ie("div",{innerHTML:this.parseFormatterAndSanitize(t,e,n,r,o)});let C=(s=r==null?void 0:r.toolTip)!==null&&s!==void 0?s:"",x;C||(this._cellType==="slick-cell"&&this._cellNodeElm&&this._cellNodeElm.clientWidth<this._cellNodeElm.scrollWidth&&!(!((l=this._cellAddonOptions)===null||l===void 0)&&l.useRegularTooltipFromFormatterOnly)?(C=(h=(u=this._cellNodeElm.textContent)===null||u===void 0?void 0:u.trim())!==null&&h!==void 0?h:"",!((c=this._cellAddonOptions)===null||c===void 0)&&c.tooltipTextMaxLength&&C.length>((p=this._cellAddonOptions)===null||p===void 0?void 0:p.tooltipTextMaxLength)&&(C=C.substring(0,this._cellAddonOptions.tooltipTextMaxLength-3)+"..."),x=this._cellNodeElm):(!((m=this._cellAddonOptions)===null||m===void 0)&&m.useRegularTooltipFromFormatterOnly?x=_.querySelector("[title], [data-slick-tooltip]"):(x=iu(this._cellNodeElm,["title","data-slick-tooltip"])?this._cellNodeElm:_.querySelector("[title], [data-slick-tooltip]"),(!x||!iu(x,["title","data-slick-tooltip"]))&&this._cellNodeElm&&(x=this._cellNodeElm.querySelector("[title], [data-slick-tooltip]"))),(!C||typeof t=="function"&&(!((v=this._cellAddonOptions)===null||v===void 0)&&v.useRegularTooltipFromFormatterOnly))&&(C=iu(x,["title","data-slick-tooltip"])||""))),C!==""&&this.renderTooltipFormatter(t,e,n,r,o,C),this.swapAndClearTitleAttribute(x,C)}renderTooltipFormatter(t,e,n,r,o,s,l){var u,h,c,p,m,v,_,C,x,S;if(this._tooltipElm=Ie("div",{className:this.className}),this._tooltipElm.classList.add(this.gridUid),this._tooltipElm.classList.add("l"+e.cell),this._tooltipElm.classList.add("r"+e.cell),n==null){const A=(u=this._cellNodeElm)===null||u===void 0?void 0:u.querySelector("[title], [data-slick-tooltip]");n=iu(A,["title","data-slick-tooltip"])||n}let y=s||this.parseFormatterAndSanitize(t,e,n,r,o)||"";y=!((h=this._cellAddonOptions)===null||h===void 0)&&h.tooltipTextMaxLength&&y.length>this._cellAddonOptions.tooltipTextMaxLength?y.substring(0,this._cellAddonOptions.tooltipTextMaxLength-3)+"...":y;let D="";!s||!((c=this._cellAddonOptions)===null||c===void 0)&&c.renderRegularTooltipAsHtml?(D=Mn(this.gridOptions,y),this._tooltipElm.innerHTML=D,this._tooltipElm.style.whiteSpace=(m=(p=this._cellAddonOptions)===null||p===void 0?void 0:p.whiteSpace)!==null&&m!==void 0?m:this._defaultOptions.whiteSpace):(D=y||"",this._tooltipElm.textContent=D,this._tooltipElm.style.whiteSpace=(_=(v=this._cellAddonOptions)===null||v===void 0?void 0:v.regularTooltipWhiteSpace)!==null&&_!==void 0?_:this._defaultOptions.regularTooltipWhiteSpace),!((C=this._cellAddonOptions)===null||C===void 0)&&C.maxHeight&&(this._tooltipElm.style.maxHeight=`${this._cellAddonOptions.maxHeight}px`),!((x=this._cellAddonOptions)===null||x===void 0)&&x.maxWidth&&(this._tooltipElm.style.maxWidth=`${this._cellAddonOptions.maxWidth}px`),D&&(document.body.appendChild(this._tooltipElm),this.reposition(e),!((S=this._cellAddonOptions)===null||S===void 0)&&S.hideArrow||this._tooltipElm.classList.add("tooltip-arrow"),this.swapAndClearTitleAttribute(l,y))}reposition(t){var e,n,r,o,s,l,u,h,c,p,m,v,_;if(this._tooltipElm){this._cellNodeElm=this._cellNodeElm||this._grid.getCellNode(t.row,t.cell);const C=Un(this._cellNodeElm)||{top:0,left:0},x=this._cellNodeElm.offsetWidth,S=this._tooltipElm.getBoundingClientRect().height,y=this._tooltipElm.getBoundingClientRect().width,D=document.body.offsetWidth||window.innerWidth;let A=(C.top||0)-this._tooltipElm.offsetHeight-((n=(e=this._cellAddonOptions)===null||e===void 0?void 0:e.offsetTopBottom)!==null&&n!==void 0?n:0),P=(C.left||0)-((o=(r=this._cellAddonOptions)===null||r===void 0?void 0:r.offsetRight)!==null&&o!==void 0?o:0);const M=(l=(s=this._cellAddonOptions)===null||s===void 0?void 0:s.position)!==null&&l!==void 0?l:"auto";M==="center"?(P+=x/2-y/2+((h=(u=this._cellAddonOptions)===null||u===void 0?void 0:u.offsetRight)!==null&&h!==void 0?h:0),this._tooltipElm.classList.remove("arrow-left-align"),this._tooltipElm.classList.remove("arrow-right-align"),this._tooltipElm.classList.add("arrow-center-align")):M==="right-align"||(M==="auto"||M!=="left-align")&&P+y>D?(P-=y-x-((p=(c=this._cellAddonOptions)===null||c===void 0?void 0:c.offsetLeft)!==null&&p!==void 0?p:0),this._tooltipElm.classList.remove("arrow-center-align"),this._tooltipElm.classList.remove("arrow-left-align"),this._tooltipElm.classList.add("arrow-right-align")):(this._tooltipElm.classList.remove("arrow-center-align"),this._tooltipElm.classList.remove("arrow-right-align"),this._tooltipElm.classList.add("arrow-left-align")),M==="bottom"||(M==="auto"||M!=="top")&&S>tu(this._cellNodeElm).top?(A=(C.top||0)+((m=this.gridOptions.rowHeight)!==null&&m!==void 0?m:0)+((_=(v=this._cellAddonOptions)===null||v===void 0?void 0:v.offsetTopBottom)!==null&&_!==void 0?_:0),this._tooltipElm.classList.remove("arrow-down"),this._tooltipElm.classList.add("arrow-up")):(this._tooltipElm.classList.add("arrow-down"),this._tooltipElm.classList.remove("arrow-up")),this._tooltipElm.style.top=`${A}px`,this._tooltipElm.style.left=`${P}px`}}swapAndClearTitleAttribute(t,e){var n;const r=t||this._cellNodeElm&&(this._cellNodeElm.hasAttribute("title")&&this._cellNodeElm.getAttribute("title")?this._cellNodeElm:(n=this._cellNodeElm)===null||n===void 0?void 0:n.querySelector("[title]"));r&&(r.setAttribute("data-slick-tooltip",e||""),r.hasAttribute("title")&&r.setAttribute("title",""))}}function zu(a,t,e){return t<=a&&a<=e}function Ov(a){if(a===void 0)return{};if(a===Object(a))return a;throw TypeError("Could not convert argument to dictionary")}function ty(a){for(var t=String(a),e=t.length,n=0,r=[];n<e;){var o=t.charCodeAt(n);if(o<55296||o>57343)r.push(o);else if(56320<=o&&o<=57343)r.push(65533);else if(55296<=o&&o<=56319)if(n===e-1)r.push(65533);else{var s=a.charCodeAt(n+1);if(56320<=s&&s<=57343){var l=o&1023,u=s&1023;r.push(65536+(l<<10)+u),n+=1}else r.push(65533)}n+=1}return r}var Av=-1;function kv(a){this.tokens=[].slice.call(a)}kv.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.shift():Av},prepend:function(a){if(Array.isArray(a))for(var t=a;t.length;)this.tokens.unshift(t.pop());else this.tokens.unshift(a)},push:function(a){if(Array.isArray(a))for(var t=a;t.length;)this.tokens.push(t.shift());else this.tokens.push(a)}};var bf=-1,Iv="utf-8";function Uu(a,t){if(!(this instanceof Uu))return new Uu(a,t);if(a=a!==void 0?String(a).toLowerCase():Iv,a!==Iv)throw new Error("Encoding not supported. Only utf-8 is supported");t=Ov(t),this._streaming=!1,this._encoder=null,this._options={fatal:!!t.fatal},Object.defineProperty(this,"encoding",{value:"utf-8"})}Uu.prototype={encode:function(t,e){t=t?String(t):"",e=Ov(e),this._streaming||(this._encoder=new iy(this._options)),this._streaming=!!e.stream;for(var n=[],r=new kv(ty(t)),o;!r.endOfStream()&&(o=this._encoder.handler(r,r.read()),o!==bf);)Array.isArray(o)?n.push.apply(n,o):n.push(o);if(!this._streaming){for(;o=this._encoder.handler(r,r.read()),o!==bf;)Array.isArray(o)?n.push.apply(n,o):n.push(o);this._encoder=null}return new Uint8Array(n)}};function iy(a){a.fatal,this.handler=function(t,e){if(e===Av)return bf;if(zu(e,0,127))return e;var n,r;zu(e,128,2047)?(n=1,r=192):zu(e,2048,65535)?(n=2,r=224):zu(e,65536,1114111)&&(n=3,r=240);for(var o=[(e>>6*n)+r];n>0;){var s=e>>6*(n-1);o.push(128|s&63),n-=1}return o}}const ny={delimiter:ms.comma,filename:"export",format:un.csv,useUtf8WithBom:!0};class ry{constructor(){this._delimiter=",",this._exportQuoteWrapper="",this._fileFormat=un.csv,this._lineCarriageReturn=`
`,this._columnHeaders=[],this._hasGroupedItems=!1,this.className="TextExportService"}get _datasetIdPropName(){return this._gridOptions&&this._gridOptions.datasetIdPropertyName||"id"}get _dataView(){var t;return((t=this._grid)===null||t===void 0?void 0:t.getData)&&this._grid.getData()}get _gridOptions(){var t;return!((t=this._grid)===null||t===void 0)&&t.getOptions?this._grid.getOptions():{}}dispose(){var t;(t=this._pubSubService)===null||t===void 0||t.unsubscribeAll()}init(t,e){var n;if(this._grid=t,this._pubSubService=e.get("PubSubService"),this._locales=this._gridOptions&&this._gridOptions.locales||je.locales,this._translaterService=(n=this._gridOptions)===null||n===void 0?void 0:n.translater,this._gridOptions.enableTranslate&&(!this._translaterService||!this._translaterService.translate))throw new Error('[Slickgrid-Universal] requires a Translate Service to be passed in the "translater" Grid Options when "enableTranslate" is enabled. (example: this.gridOptions = { enableTranslate: true, translater: this.translaterService })')}exportToFile(t){if(!this._grid||!this._dataView||!this._pubSubService)throw new Error('[Slickgrid-Universal] it seems that the SlickGrid & DataView objects and/or PubSubService are not initialized did you forget to enable the grid option flag "enableTextExport"?');return new Promise(e=>{var n;(n=this._pubSubService)===null||n===void 0||n.publish("onBeforeExportToTextFile",!0),this._exportOptions=uo({...ny,...this._gridOptions.textExportOptions,...t}),this._delimiter=this._exportOptions.delimiterOverride||this._exportOptions.delimiter||"",this._fileFormat=this._exportOptions.format||un.csv;const r=this.getDataOutput();setTimeout(()=>{var o;const s={filename:`${this._exportOptions.filename}.${this._fileFormat}`,format:this._fileFormat||un.csv,mimeType:this._exportOptions.mimeType||"text/plain",useUtf8WithBom:this._exportOptions&&this._exportOptions.hasOwnProperty("useUtf8WithBom")?this._exportOptions.useUtf8WithBom:!0};this.startDownloadFile({...s,content:r}),(o=this._pubSubService)===null||o===void 0||o.publish("onAfterExportToTextFile",s),e(!0)},0)})}startDownloadFile(t){const e=k_(t.content);let n;t.format===un.csv?n=new Uu("utf-8").encode(e):n=e;const r=new Blob([t.useUtf8WithBom?"\uFEFF":"",n],{type:t.mimeType});if(typeof navigator.msSaveOrOpenBlob=="function")navigator.msSaveOrOpenBlob(r,t.filename);else{const o=document.createElement("a"),s=URL.createObjectURL(r);o.textContent="download",o.href=s,o.setAttribute("download",t.filename),o.style.visibility="hidden",document.body.appendChild(o),o.click(),document.body.removeChild(o)}}getDataOutput(){var t,e,n;const r=this._grid.getColumns()||[];let o=this._exportOptions.groupingColumnHeaderTitle;!o&&this._gridOptions.enableTranslate&&(!((t=this._translaterService)===null||t===void 0)&&t.translate)&&(!((n=(e=this._translaterService)===null||e===void 0?void 0:e.getCurrentLanguage)===null||n===void 0)&&n.call(e))?o=this._translaterService.translate(`${ao(this._gridOptions)}GROUP_BY`):o||(o=this._locales&&this._locales.TEXT_GROUP_BY),this._exportQuoteWrapper=this._fileFormat===un.csv?'"':"";let s="";const l=this._dataView.getGrouping();if(l&&Array.isArray(l)&&l.length>0?(this._hasGroupedItems=!0,s+=this._fileFormat===un.csv?`"${o}"${this._delimiter}`:`${o}${this._delimiter}`):this._hasGroupedItems=!1,this._gridOptions.createPreHeaderPanel&&this._gridOptions.showPreHeaderPanel&&!this._gridOptions.enableDraggableGrouping&&(this._groupedColumnHeaders=this.getColumnGroupedHeaderTitles(r)||[],this._groupedColumnHeaders&&Array.isArray(this._groupedColumnHeaders)&&this._groupedColumnHeaders.length>0)){const u=this._groupedColumnHeaders.map(h=>`${this._exportQuoteWrapper}${h.title}${this._exportQuoteWrapper}`);s+=u.join(this._delimiter)+this._lineCarriageReturn}if(this._columnHeaders=this.getColumnHeaders(r)||[],this._columnHeaders&&Array.isArray(this._columnHeaders)&&this._columnHeaders.length>0){const u=this._columnHeaders.map(h=>sr(`${this._exportQuoteWrapper}${h.title}${this._exportQuoteWrapper}`));s+=u.join(this._delimiter)+this._lineCarriageReturn}return s+=this.getAllGridRowData(r,this._lineCarriageReturn),s}getAllGridRowData(t,e){const n=[],r=this._dataView.getLength();for(let o=0;o<r;o++){const s=this._dataView.getItem(o);s&&!s.hasOwnProperty("getItem")&&(s[this._datasetIdPropName]!==null&&s[this._datasetIdPropName]!==void 0?n.push(this.readRegularRowData(t,o,s)):this._hasGroupedItems&&s.__groupTotals===void 0?n.push(this.readGroupedTitleRow(s)):s.__groupTotals&&n.push(this.readGroupedTotalRow(t,s)))}return n.join(e)}getColumnGroupedHeaderTitles(t){const e=[];return t&&Array.isArray(t)&&t.forEach(n=>{var r,o,s;let l="";n.columnGroupKey&&this._gridOptions.enableTranslate&&(!((r=this._translaterService)===null||r===void 0)&&r.translate)&&(!((s=(o=this._translaterService)===null||o===void 0?void 0:o.getCurrentLanguage)===null||s===void 0)&&s.call(o))?l=this._translaterService.translate(n.columnGroupKey):l=n.columnGroup||"";const u=n.excludeFromExport||!1;(n.width===void 0||n.width>0)&&!u&&e.push({key:n.field||n.id,title:l||""})}),e}getColumnHeaders(t){const e=[];return t&&Array.isArray(t)&&t.forEach(n=>{var r,o,s;let l="";(n.nameKey||n.nameKey)&&this._gridOptions.enableTranslate&&(!((r=this._translaterService)===null||r===void 0)&&r.translate)&&(!((s=(o=this._translaterService)===null||o===void 0?void 0:o.getCurrentLanguage)===null||s===void 0)&&s.call(o))?l=this._translaterService.translate(n.nameKey||n.nameKey):l=n.name||yl(n.field);const u=n.excludeFromExport||!1;(n.width===void 0||n.width>0)&&!u&&e.push({key:n.field||n.id,title:l||""})}),e}readRegularRowData(t,e,n){var r;let o=0;const s=[],l=this._exportQuoteWrapper;let u=1;const h=this._dataView.getItemMetadata(e);for(let c=0,p=t.length;c<p;c++){const m=t[c];if(m.excludeFromExport)continue;if(this._hasGroupedItems&&o===0){const _=this._fileFormat===un.csv?'""':"";s.push(_)}let v;if(h!=null&&h.columns){const _=h==null?void 0:h.columns,C=_[m.id]||_[c];!isNaN(u)&&+u>1||u==="*"&&c>0||(u=(r=C==null?void 0:C.colspan)!==null&&r!==void 0?r:1),u!=="*"&&m.id in _&&(v=m.id)}if(u==="*"&&c>0||!isNaN(u)&&+u>1&&m.id!==v)s.push(""),!isNaN(u)&&+u>1&&u--;else{let _=Sh(e,c,m,n,this._grid,this._exportOptions);(m.sanitizeDataExport||this._exportOptions.sanitizeDataExport)&&(_=sr(_)),this._fileFormat===un.csv&&_&&(_=_.toString().replace(/"/gi,'""'));const C=m!=null&&m.exportCsvForceToKeepAsString?"=":"";s.push(C+l+_+l)}o++}return s.join(this._delimiter)}readGroupedTitleRow(t){let e=sr(t.title);const n=this._exportQuoteWrapper;return e=Ga(5*t.level)+e,this._fileFormat===un.csv&&(e=e.toString().replace(/"/gi,'""')),n+e+n}readGroupedTotalRow(t,e){const n=this._exportOptions.delimiter,r=this._exportOptions.format,o=this._exportOptions.groupingAggregatorRowText||"",s=this._exportQuoteWrapper,l=[`${s}${o}${s}`];return t.forEach(u=>{let h="";const c=u.excludeFromExport||!1;u.groupTotalsFormatter&&(h=u.groupTotalsFormatter(e,u,this._grid)),(u.sanitizeDataExport||this._exportOptions.sanitizeDataExport)&&(h=sr(h)),r===un.csv&&(h=h.toString().replace(/"/gi,'""')),(u.width===void 0||u.width>0)&&!c&&l.push(s+h+s)}),l.join(n)}}var Dv={exports:{}};(function(a,t){(function(e,n){n(t)})(Pr,function(e){var n=typeof window<"u"&&window.flatpickr!==void 0?window.flatpickr:{l10ns:{}},r={firstDayOfWeek:1,weekdays:{shorthand:["dim","lun","mar","mer","jeu","ven","sam"],longhand:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"]},months:{shorthand:["janv","fvr","mars","avr","mai","juin","juil","aot","sept","oct","nov","dc"],longhand:["janvier","fvrier","mars","avril","mai","juin","juillet","aot","septembre","octobre","novembre","dcembre"]},ordinal:function(s){return s>1?"":"er"},rangeSeparator:" au ",weekAbbreviation:"Sem",scrollTitle:"Dfiler pour augmenter la valeur",toggleTitle:"Cliquer pour basculer",time_24hr:!0};n.l10ns.fr=r;var o=n.l10ns;e.French=r,e.default=o,Object.defineProperty(e,"__esModule",{value:!0})})})(Dv,Dv.exports),function(a){function t(ue,Ce){this.event=ue;let be=ue,Le=Ce,nt=!1,Ge=!1,yt=!1,at;if(ue){const k=["altKey","ctrlKey","metaKey","shiftKey","key","keyCode","clientX","clientY","offsetX","offsetY","pageX","pageY","bubbles","type","which","x","y"];for(let te of k)this[te]=ue[te]}this.target=be?be.target:void 0,this.stopPropagation=function(){nt=!0,be&&be.stopPropagation()},this.isPropagationStopped=function(){return nt},this.stopImmediatePropagation=function(){Ge=!0,be&&be.stopImmediatePropagation()},this.isImmediatePropagationStopped=function(){return Ge},this.getNativeEvent=function(){return be},this.preventDefault=function(){be&&be.preventDefault(),yt=!0},this.isDefaultPrevented=function(){return be?be.defaultPrevented:yt},this.addReturnValue=function(k){at===void 0&&k!==void 0&&(at=k)},this.getReturnValue=function(){return at},this.getArguments=function(){return Le}}function e(){var ue=[];this.subscribe=function(Ce){ue.push(Ce)},this.unsubscribe=function(Ce){for(var be=ue.length-1;be>=0;be--)ue[be]===Ce&&ue.splice(be,1)},this.notify=function(Ce,be,Le){be instanceof t||(be=new t(be,Ce)),Le=Le||this;for(var nt=0;nt<ue.length&&!(be.isPropagationStopped()||be.isImmediatePropagationStopped());nt++){const Ge=ue[nt].call(Le,be,Ce);be.addReturnValue(Ge)}return be}}function n(){var ue=[];this.subscribe=function(Ce,be){return ue.push({event:Ce,handler:be}),Ce.subscribe(be),this},this.unsubscribe=function(Ce,be){for(var Le=ue.length;Le--;)if(ue[Le].event===Ce&&ue[Le].handler===be){ue.splice(Le,1),Ce.unsubscribe(be);return}return this},this.unsubscribeAll=function(){for(var Ce=ue.length;Ce--;)ue[Ce].event.unsubscribe(ue[Ce].handler);return ue=[],this}}function r(ue,Ce,be,Le){be===void 0&&Le===void 0&&(be=ue,Le=Ce),this.fromRow=Math.min(ue,be),this.fromCell=Math.min(Ce,Le),this.toRow=Math.max(ue,be),this.toCell=Math.max(Ce,Le),this.isSingleRow=function(){return this.fromRow==this.toRow},this.isSingleCell=function(){return this.fromRow==this.toRow&&this.fromCell==this.toCell},this.contains=function(nt,Ge){return nt>=this.fromRow&&nt<=this.toRow&&Ge>=this.fromCell&&Ge<=this.toCell},this.toString=function(){return this.isSingleCell()?"("+this.fromRow+":"+this.fromCell+")":"("+this.fromRow+":"+this.fromCell+" - "+this.toRow+":"+this.toCell+")"}}function o(){this.__nonDataRow=!0}function s(){this.__group=!0,this.level=0,this.count=0,this.value=null,this.title=null,this.collapsed=!1,this.selectChecked=!1,this.totals=null,this.rows=[],this.groups=null,this.groupingKey=null}s.prototype=new o,s.prototype.equals=function(ue){return this.value===ue.value&&this.count===ue.count&&this.collapsed===ue.collapsed&&this.title===ue.title};function l(){this.__groupTotals=!0,this.group=null,this.initialized=!1}l.prototype=new o;function u(){var ue=null;this.isActive=function(Ce){return Ce?ue===Ce:ue!==null},this.activate=function(Ce){if(Ce!==ue){if(ue!==null)throw new Error("SlickGrid.EditorLock.activate: an editController is still active, can't activate another editController");if(!Ce.commitCurrentEdit)throw new Error("SlickGrid.EditorLock.activate: editController must implement .commitCurrentEdit()");if(!Ce.cancelCurrentEdit)throw new Error("SlickGrid.EditorLock.activate: editController must implement .cancelCurrentEdit()");ue=Ce}},this.deactivate=function(Ce){if(ue){if(ue!==Ce)throw new Error("SlickGrid.EditorLock.deactivate: specified editController is not the currently active one");ue=null}},this.commitCurrentEdit=function(){return ue?ue.commitCurrentEdit():!0},this.cancelCurrentEdit=function(){return ue?ue.cancelCurrentEdit():!0}}function h(ue){return ue.replace(/(\b)(on[a-z]+)(\s*)=|javascript:([^>]*)[^>]*|(<\s*)(\/*)script([<>]*).*(<\s*)(\/*)script(>*)|(&lt;)(\/*)(script|script defer)(.*)(&gt;|&gt;">)/gi,"")}function c(ue){let Ce=0,be=0,Le=0,nt=0;const Ge=a.innerHeight||0,yt=a.innerWidth||0,at=D(),k=at.top,te=at.left,ge=y(ue);if(ge){const $=ge.top||0,X=ge.left||0;be=$-k,Ce=Ge-($-k),Le=X-te,nt=yt-(X-te)}return{top:be,bottom:Ce,left:Le,right:nt}}function p(ue,Ce,be){const Le=document.createElement(ue);return Ce&&Object.keys(Ce).forEach(nt=>{const Ge=Ce[nt];typeof Ge=="object"?Object.assign(Le[nt],Ge):Le[nt]=Ce[nt]}),be&&be.appendChild&&be.appendChild(Le),Le}function m(ue,Ce){let be=null;return(...Le)=>{Ce>=0?(clearTimeout(be),be=setTimeout(()=>ue.apply(null,Le),Ce)):ue.apply(null)}}function v(ue){if(ue&&ue.firstChild)for(;ue.firstChild;)ue.lastChild&&ue.removeChild(ue.lastChild);return ue}function _(ue,Ce){let be=0;if(ue){const Le=Ce==="height"?"clientHeight":"clientWidth",nt=Ce==="height"?["top","bottom"]:["left","right"];be=ue[Le];for(const Ge of nt){const yt=parseFloat(C(ue,`padding-${Ge}`))||0;be-=yt}}return be}function C(ue,Ce){return ue&&ue.getComputedStyle?a.getComputedStyle(ue,null).getPropertyValue(Ce):null}function x(ue){return ue==null?!0:Object.entries(ue).length===0}function S(){}function y(ue){if(!ue||!ue.getBoundingClientRect)return;const Ce=ue.getBoundingClientRect(),be=document.documentElement;return{top:Ce.top+a.pageYOffset-be.clientTop,left:Ce.left+a.pageXOffset-be.clientLeft}}function D(){return{left:a.pageXOffset||document.documentElement.scrollLeft||0,top:a.pageYOffset||document.documentElement.scrollTop||0}}function A(ue,Ce){if(!(!ue||!ue.getBoundingClientRect)){if(Ce===void 0)return ue.getBoundingClientRect().width;M(ue,"width",Ce)}}function P(ue,Ce){if(ue){if(Ce===void 0)return ue.getBoundingClientRect().height;M(ue,"height",Ce)}}function M(ue,Ce,be){typeof be=="function"?be=be():typeof be=="string"?ue.style[Ce]=be:ue.style[Ce]=be+"px"}function B(ue,Ce){return!ue||!Ce?!1:!L(Ce).every(function(Le){return ue!=Le})}function Q(ue){return ue.offsetWidth===0&&ue.offsetHeight===0}function L(ue,Ce){const be=[],Le=Ce==":visible",nt=Ce==":hidden";for(;(ue=ue.parentNode)&&ue!==document&&!(!ue||!ue.parentNode);)nt?Q(ue)&&be.push(ue):Le?Q(ue)||be.push(ue):(!Ce||ue.matches(Ce))&&be.push(ue);return be}function le(ue){var Ce=parseFloat(ue);return isNaN(Ce)?0:Ce}function _e(ue,Ce){Ce=Ce||"",Array.isArray(ue)?ue.forEach(function(be){be.style.display=Ce}):ue.style.display=Ce}function J(ue){Array.isArray(ue)?ue.forEach(function(Ce){Ce.style.display="none"}):ue.style.display="none"}function z(ue,Ce){return ae(ue,"slideUp",Ce)}function F(ue,Ce){return ae(ue,"slideDown",Ce)}function ae(ue,Ce,be){if(a.jQuery!==void 0){a.jQuery(ue)[Ce]("fast",be);return}Ce==="slideUp"?J(ue):_e(ue),be()}var qe=Object.getPrototypeOf,De={},xe=De.toString,Te=De.hasOwnProperty,Re=Te.toString,ne=Re.call(Object);function fe(ue){return typeof ue=="function"&&typeof ue.nodeType!="number"&&typeof ue.item!="function"}function Be(ue){var Ce,be;return!ue||xe.call(ue)!=="[object Object]"?!1:(Ce=qe(ue),Ce?(be=Te.call(Ce,"constructor")&&Ce.constructor,typeof be=="function"&&Re.call(be)===ne):!0)}function Ye(){var ue,Ce,be,Le,nt,Ge,yt=arguments[0],at=1,k=arguments.length,te=!1;for(typeof yt=="boolean"?(te=yt,yt=arguments[at]||{},at++):yt=yt||{},typeof yt!="object"&&!fe(yt)&&(yt={}),at===k&&(yt=this,at--);at<k;at++)if((ue=arguments[at])!=null)for(Ce in ue)Le=ue[Ce],!(Ce==="__proto__"||yt===Le)&&(te&&Le&&(Be(Le)||(nt=Array.isArray(Le)))?(be=yt[Ce],nt&&!Array.isArray(be)?Ge=[]:!nt&&!Be(be)?Ge={}:Ge=be,nt=!1,yt[Ce]=Ye(te,Ge,Le)):Le!==void 0&&(yt[Ce]=Le));return yt}function Ve(){this.boundedEvents=[],this.destroy=function(){this.unbindAll(),this.boundedEvents=[]},this.bind=function(ue,Ce,be,Le){ue.addEventListener(Ce,be,Le),this.boundedEvents.push({element:ue,eventName:Ce,listener:be})},this.unbind=function(ue,Ce,be){ue&&ue.removeEventListener&&ue.removeEventListener(Ce,be)},this.unbindByEventName=function(ue,Ce){const be=this.boundedEvents.find(Le=>Le.element===ue&&Le.eventName===Ce);be&&this.unbind(be.element,be.eventName,be.listener)},this.unbindAll=function(){for(;this.boundedEvents.length>0;){const ue=this.boundedEvents.pop(),{element:Ce,eventName:be,listener:Le}=ue;this.unbind(Ce,be,Le)}}}a.Slick={Event:e,EventData:t,EventHandler:n,Range:r,NonDataRow:o,Group:s,GroupTotals:l,RegexSanitizer:h,EditorLock:u,BindingEventService:Ve,Utils:{debounce:m,extend:Ye,calculateAvailableSpace:c,createDomElement:p,emptyElement:v,innerSize:_,isEmptyObject:x,noop:S,offset:y,height:P,width:A,setStyleSize:M,contains:B,toFloat:le,parents:L,show:_e,hide:J,slideUp:z,slideDown:F,storage:{_storage:new WeakMap,put:function(ue,Ce,be){this._storage.has(ue)||this._storage.set(ue,new Map),this._storage.get(ue).set(Ce,be)},get:function(ue,Ce){const be=this._storage.get(ue);return be?be.get(Ce):null},remove:function(ue,Ce){var be=this._storage.get(ue).delete(Ce);return!this._storage.get(ue).size===0&&this._storage.delete(ue),be}}},GlobalEditorLock:new u,keyCode:{SPACE:8,BACKSPACE:8,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,RIGHT:39,TAB:9,UP:38,A:65},preClickClassName:"slick-edit-preclick",GridAutosizeColsMode:{None:"NOA",LegacyOff:"LOF",LegacyForceFit:"LFF",IgnoreViewport:"IGV",FitColsToViewport:"FCV",FitViewportToCols:"FVC"},ColAutosizeMode:{Locked:"LCK",Guide:"GUI",Content:"CON",ContentExpandOnly:"CXO",ContentIntelligent:"CTI"},RowSelectionMode:{FirstRow:"FS1",FirstNRows:"FSN",AllRows:"ALL",LastRow:"LS1"},ValueFilterMode:{None:"NONE",DeDuplicate:"DEDP",GetGreatestAndSub:"GR8T",GetLongestTextAndSub:"LNSB",GetLongestText:"LNSC"},WidthEvalMode:{Auto:"AUTO",TextOnly:"CANV",HTML:"HTML"}},typeof Pr<"u"&&(Pr.Slick=a.Slick)}(window),function(){function a(n){let{containerElement:r,onDragInit:o,onDragStart:s,onDrag:l,onDragEnd:u}=n,h,c,p,m,v,_;if(r||(r=document),!r||typeof r.addEventListener!="function")throw new Error("[Slick.Draggable] You did not provide a valid container html element that will be used for dragging.");let C={dragSource:r,dragHandle:null};r&&(r.addEventListener("mousedown",y),r.addEventListener("touchstart",y));function x(M,B,Q){typeof M=="function"&&M(B,Q)}function S(){r&&(r.removeEventListener("mousedown",y),r.removeEventListener("touchstart",y))}function y(M){h=M.target;const B=M.touches?M.touches[0]:M,{target:Q}=B;if(!n.allowDragFrom||n.allowDragFrom&&h.matches(n.allowDragFrom)){C.dragHandle=h;const L=P();c=L.left+B.clientX,p=L.top+B.clientY,m=B.clientX-B.clientX,v=B.clientY-B.clientY,C=Object.assign(C,{deltaX:m,deltaY:v,startX:c,startY:p,target:Q}),x(o,M,C),document.addEventListener("mousemove",D),document.addEventListener("touchmove",D),document.addEventListener("mouseup",A),document.addEventListener("touchend",A),document.addEventListener("touchcancel",A)}}function D(M){const B=M.touches?M.touches[0]:M;m=B.clientX-c,v=B.clientY-p;const{target:Q}=B;_||(C=Object.assign(C,{deltaX:m,deltaY:v,startX:c,startY:p,target:Q}),x(s,M,C),_=!0),C=Object.assign(C,{deltaX:m,deltaY:v,startX:c,startY:p,target:Q}),x(l,M,C)}function A(M){const{target:B}=M;C=Object.assign(C,{target:B}),x(u,M,C),document.removeEventListener("mousemove",D),document.removeEventListener("touchmove",D),document.removeEventListener("mouseup",A),document.removeEventListener("touchend",A),document.removeEventListener("touchcancel",A),_=!1}function P(){return{left:window.pageXOffset||document.documentElement.scrollLeft||0,top:window.pageYOffset||document.documentElement.scrollTop||0}}return{destroy:S}}function t(n){let{element:r,onMouseWheel:o}=n;function s(){r.removeEventListener("wheel",u),r.removeEventListener("mousewheel",u)}function l(){r.addEventListener("wheel",u),r.addEventListener("mousewheel",u)}function u(h){const c=h||window.event;let p=0,m=0,v=0;c.wheelDelta&&(p=c.wheelDelta/120),c.detail&&(p=-c.detail/3),v=p,c.axis!==void 0&&c.axis===c.HORIZONTAL_AXIS&&(v=0,m=-1*p),c.wheelDeltaY!==void 0&&(v=c.wheelDeltaY/120),c.wheelDeltaX!==void 0&&(m=-1*c.wheelDeltaX/120),typeof o=="function"&&o(h,p,m,v)}return l(),{destroy:s}}function e(n){const{resizeableElement:r,resizeableHandleElement:o,onResizeStart:s,onResize:l,onResizeEnd:u}=n;if(!o||typeof o.addEventListener!="function")throw new Error("[Slick.Resizable] You did not provide a valid html element that will be used for the handle to resize.");function h(){o&&typeof o.removeEventListener=="function"&&(o.removeEventListener("mousedown",p),o.removeEventListener("touchstart",p))}function c(_,C){typeof _=="function"&&_(C,{resizeableElement:r,resizeableHandleElement:o})}function p(_){_.preventDefault();const C=_.touches?_.changedTouches[0]:_;c(s,C),document.addEventListener("mousemove",m),document.addEventListener("mouseup",v),document.addEventListener("touchmove",m),document.addEventListener("touchend",v)}function m(_){_.preventDefault&&_.type!=="touchmove"&&_.preventDefault();const C=_.touches?_.changedTouches[0]:_;typeof l=="function"&&(l(C,{resizeableElement:r,resizeableHandleElement:o}),l(C,{resizeableElement:r,resizeableHandleElement:o}))}function v(_){const C=_.touches?_.changedTouches[0]:_;c(u,C),document.removeEventListener("mousemove",m),document.removeEventListener("mouseup",v),document.removeEventListener("touchmove",m),document.removeEventListener("touchend",v)}return o.addEventListener("mousedown",p),o.addEventListener("touchstart",p),{destroy:h}}Slick.Utils.extend(Slick,{Draggable:a,MouseWheel:t,Resizable:e})}();/**
 * @license
 * (c) 2009-2016 Michael Leibman
 * michael{dot}leibman{at}gmail{dot}com
 * http://github.com/mleibman/slickgrid
 *
 * Distributed under MIT license.
 * All rights reserved.
 *
 * SlickGrid v4.0.1
 *
 * NOTES:
 *     Cell/row DOM manipulations are done directly bypassing JS DOM manipulation methods.
 *     This increases the speed dramatically, but can only be done safely because there are no event handlers
 *     or data associated with any cell/row DOM nodes.  Cell editors must make sure they implement .destroy()
 *     and do proper cleanup.
 */if(typeof Slick>"u")throw new Error('"slick.core.js" not loaded');(function(){var a,t;function e(n,r,o,s){var l={alwaysShowVerticalScroll:!1,alwaysAllowHorizontalScroll:!1,explicitInitialization:!1,rowHeight:25,defaultColumnWidth:80,enableAddRow:!1,leaveSpaceForNewRows:!1,editable:!1,autoEdit:!0,autoCommitEdit:!1,suppressActiveCellChangeOnEdit:!1,enableCellNavigation:!0,enableColumnReorder:!0,asyncEditorLoading:!1,asyncEditorLoadDelay:100,forceFitColumns:!1,enableAsyncPostRender:!1,asyncPostRenderDelay:50,enableAsyncPostRenderCleanup:!1,asyncPostRenderCleanupDelay:40,autoHeight:!1,editorLock:Slick.GlobalEditorLock,showColumnHeader:!0,showHeaderRow:!1,headerRowHeight:25,createFooterRow:!1,showFooterRow:!1,footerRowHeight:25,createPreHeaderPanel:!1,showPreHeaderPanel:!1,preHeaderPanelHeight:25,showTopPanel:!1,topPanelHeight:25,formatterFactory:null,editorFactory:null,cellFlashingCssClass:"flashing",selectedCellCssClass:"selected",multiSelect:!0,enableTextSelectionOnCells:!1,dataItemColumnValueExtractor:null,frozenBottom:!1,frozenColumn:-1,frozenRow:-1,frozenRightViewportMinWidth:100,fullWidthRows:!1,multiColumnSort:!1,numberedMultiColumnSort:!1,tristateMultiColumnSort:!1,sortColNumberInSeparateSpan:!1,defaultFormatter:kf,forceSyncScrolling:!1,addNewRowCssClass:"new-row",preserveCopiedSelectionOnPaste:!1,showCellSelection:!0,viewportClass:null,minRowBuffer:3,emulatePagingWhenScrolling:!0,editorCellNavOnLRKeys:!1,enableMouseWheelScrollHandler:!0,doPaging:!0,autosizeColsMode:Slick.GridAutosizeColsMode.LegacyOff,autosizeColPaddingPx:4,autosizeTextAvgToMWidthRatio:.75,viewportSwitchToScrollModeWidthPercent:void 0,viewportMinWidthPx:void 0,viewportMaxWidthPx:void 0,suppressCssChangesOnHiddenInit:!1,ffMaxSupportedCssHeight:6e6,maxSupportedCssHeight:1e9,sanitizer:void 0,logSanitizedHtml:!1},u={name:"",resizable:!0,sortable:!1,minWidth:30,maxWidth:void 0,rerenderOnResize:!1,headerCssClass:null,defaultSortAsc:!0,focusable:!0,selectable:!0,hidden:!1},h={ignoreHeaderText:!1,colValueArray:void 0,allowAddlPercent:void 0,formatterOverride:void 0,autosizeMode:Slick.ColAutosizeMode.ContentIntelligent,rowSelectionModeOnInit:void 0,rowSelectionMode:Slick.RowSelectionMode.FirstNRows,rowSelectionCount:100,valueFilterMode:Slick.ValueFilterMode.None,widthEvalMode:Slick.WidthEvalMode.Auto,sizeToRemaining:void 0,widthPx:void 0,contentSizePx:0,headerWidthPx:0,colDataTypeOf:void 0},c,p,m,v,_,C=0,x=0,S=1;const y=Slick.Utils,D=y.show,A=y.hide;var P=new Slick.BindingEventService,M=!1,B,Q="slickgrid_"+Math.round(1e6*Math.random()),L=this,le,_e,J=[],z=[],F,ae,qe,De,xe,Te,Re,ne,fe,Be,Ye,Ve,ue,Ce,be,Le,nt,Ge,yt=[],at,k,te,ge,$,X,re,Fe,Me,pe,Ue,ft,ze,Ne=0,Xt=0,It=0,Ci=0,q,W=!1,me=0,ke=-1,st=0,rt=0,ut=0,Rt=0,Ht=0,Tt=0,Ut=1,Zt,Fi,Mi,U,Z,ce=null,Ee=null,ot,pt,ct={},St=0,Bt=0,Ct=0,vt=0,ti=0,ki=0,Ui=0,Qt=0,Ni,Ln=[],mn=[],_t={},Se={},Xe=[],wt=[],ii=[],Gi=!1,Wi=!1,Li=Mf(Kn,50),vn=null,Gn=null,qt=null,$i={},ar=null,go=null,Jn=[],er=0,_o=0,vr=0,dr,Tr,Wn,Hn,ci,Bn,Jr,bo,gn,tr,gr,_r,oe,de,ye,We,Je,lt,Ot,Vt,hi,yi,Ei,En,$n,Yn,jn,eo,br,Co,Hi,Oi,Hr,Es,yo,Qs={position:"absolute",visibility:"hidden",display:"block"},Ss,ha=[],es=!1,ws=!1,Ii=null,gi=[],Eo=[],So,xs;function Il(){if(typeof n=="string"?B=document.querySelector(n):B=n,!B)throw new Error("SlickGrid requires a valid container, "+n+" does not exist in the DOM.");if(t=t||il(),s=y.extend(!0,{},l,s),Fl(),u.width=s.defaultColumnWidth,s.suppressCssChangesOnHiddenInit||ts(),Ds(),s.enableColumnReorder&&!Sortable)throw new Error("SlickGrid requires Sortable.js module to be loaded");pt={commitCurrentEdit:jf,cancelCurrentEdit:Ld},y.emptyElement(B),B.style.overflow="hidden",B.style.outline=0,B.classList.add(Q),B.classList.add("ui-widget");const E=window.getComputedStyle(B);/relative|absolute|fixed/.test(E.position)||(B.style.position="relative"),le=y.createDomElement("div",{tabIndex:0,style:{position:"fixed",width:"0px",height:"0px",top:"0px",left:"0px",outline:"0px"}},B),dr=y.createDomElement("div",{className:"slick-pane slick-pane-header slick-pane-left",tabIndex:0},B),Tr=y.createDomElement("div",{className:"slick-pane slick-pane-header slick-pane-right",tabIndex:0},B),Wn=y.createDomElement("div",{className:"slick-pane slick-pane-top slick-pane-left",tabIndex:0},B),Hn=y.createDomElement("div",{className:"slick-pane slick-pane-top slick-pane-right",tabIndex:0},B),ci=y.createDomElement("div",{className:"slick-pane slick-pane-bottom slick-pane-left",tabIndex:0},B),Bn=y.createDomElement("div",{className:"slick-pane slick-pane-bottom slick-pane-right",tabIndex:0},B),s.createPreHeaderPanel&&(Be=y.createDomElement("div",{className:"slick-preheader-panel ui-state-default",style:{overflow:"hidden",position:"relative"}},dr),Be.appendChild(document.createElement("div")),fe=y.createDomElement("div",null,Be),Ye=y.createDomElement("div",{style:{display:"block",height:"1px",position:"absolute",top:"0px",left:"0px"}},Be),ue=y.createDomElement("div",{className:"slick-preheader-panel ui-state-default",style:{overflow:"hidden",position:"relative"}},Tr),Ve=y.createDomElement("div",null,ue),y.createDomElement("div",{style:{display:"block",height:"1px",position:"absolute",top:"0px",left:"0px"}},ue),s.showPreHeaderPanel||(A(Be),A(ue))),Jr=y.createDomElement("div",{className:"slick-header ui-state-default slick-header-left"},dr),bo=y.createDomElement("div",{className:"slick-header ui-state-default slick-header-right"},Tr),J.push(Jr),J.push(bo),gn=y.createDomElement("div",{className:"slick-header-columns slick-header-columns-left",style:{left:"-1000px"}},Jr),tr=y.createDomElement("div",{className:"slick-header-columns slick-header-columns-right",style:{left:"-1000px"}},bo),z=[gn,tr],gr=y.createDomElement("div",{className:"slick-headerrow ui-state-default"},Wn),_r=y.createDomElement("div",{className:"slick-headerrow ui-state-default"},Hn),ae=[gr,_r],qe=y.createDomElement("div",{style:{display:"block",height:"1px",position:"absolute",top:"0px",left:"0px"}},gr),De=y.createDomElement("div",{style:{display:"block",height:"1px",position:"absolute",top:"0px",left:"0px"}},_r),ye=y.createDomElement("div",{className:"slick-headerrow-columns slick-headerrow-columns-left"},gr),We=y.createDomElement("div",{className:"slick-headerrow-columns slick-headerrow-columns-right"},_r),F=[ye,We],Ot=y.createDomElement("div",{className:"slick-top-panel-scroller ui-state-default"},Wn),Vt=y.createDomElement("div",{className:"slick-top-panel-scroller ui-state-default"},Hn),Ce=[Ot,Vt],hi=y.createDomElement("div",{className:"slick-top-panel",style:{width:"10000px"}},Ot),yi=y.createDomElement("div",{className:"slick-top-panel",style:{width:"10000px"}},Vt),be=[hi,yi],s.showColumnHeader||J.forEach(function(T){A(T)}),s.showTopPanel||Ce.forEach(function(T){A(T)}),s.showHeaderRow||ae.forEach(function(T){A(T)}),Ei=y.createDomElement("div",{className:"slick-viewport slick-viewport-top slick-viewport-left",tabIndex:0},Wn),En=y.createDomElement("div",{className:"slick-viewport slick-viewport-top slick-viewport-right",tabIndex:0},Hn),$n=y.createDomElement("div",{className:"slick-viewport slick-viewport-bottom slick-viewport-left",tabIndex:0},ci),Yn=y.createDomElement("div",{className:"slick-viewport slick-viewport-bottom slick-viewport-right",tabIndex:0},Bn),Le=[Ei,En,$n,Yn],s.viewportClass&&Le.forEach(function(T){T.classList.add(...s.viewportClass.split(" "))}),Fi=Ei,jn=y.createDomElement("div",{className:"grid-canvas grid-canvas-top grid-canvas-left",tabIndex:0},Ei),eo=y.createDomElement("div",{className:"grid-canvas grid-canvas-top grid-canvas-right",tabIndex:0},En),br=y.createDomElement("div",{className:"grid-canvas grid-canvas-bottom grid-canvas-left",tabIndex:0},$n),Co=y.createDomElement("div",{className:"grid-canvas grid-canvas-bottom grid-canvas-right",tabIndex:0},Yn),nt=[jn,eo,br,Co],a=a||wo(),Zt=jn,Ye&&y.width(Ye,qn()+a.width),z.forEach(function(T){y.width(T,on())}),y.width(qe,qn()+a.width),y.width(De,qn()+a.width),s.createFooterRow&&(de=y.createDomElement("div",{className:"slick-footerrow ui-state-default"},Hn),oe=y.createDomElement("div",{className:"slick-footerrow ui-state-default"},Wn),Te=[oe,de],Re=y.createDomElement("div",{style:{display:"block",height:"1px",position:"absolute",top:"0px",left:"0px"}},oe),y.width(Re,qn()+a.width),ne=y.createDomElement("div",{style:{display:"block",height:"1px",position:"absolute",top:"0px",left:"0px"}},de),y.width(ne,qn()+a.width),Je=y.createDomElement("div",{className:"slick-footerrow-columns slick-footerrow-columns-left"},oe),lt=y.createDomElement("div",{className:"slick-footerrow-columns slick-footerrow-columns-right"},de),xe=[Je,lt],s.showFooterRow||Te.forEach(function(T){A(T)})),_e=le.cloneNode(!0),B.appendChild(_e),s.explicitInitialization||Js()}function Js(){M||(M=!0,ul(),Ns(),yf(),Mt(z),s.enableTextSelectionOnCells||Le.forEach(function(E){P.bind(E,"selectstart.ui",function(T){T.target instanceof HTMLInputElement||T.target instanceof HTMLTextAreaElement})}),pd(),Gu(),Wu(),md(),bd(),zt(),Ke(),Nt(),$u(),Cr(),As(),P.bind(B,"resize.slickgrid",Cr),Le.forEach(function(E){P.bind(E,"scroll",pl)}),s.enableMouseWheelScrollHandler&&Le.forEach(function(E){gi.push(Slick.MouseWheel({element:E,onMouseWheel:cc}))}),J.forEach(function(E){P.bind(E,"contextmenu",vc),P.bind(E,"click",gc)}),ae.forEach(function(E){P.bind(E,"scroll",kr)}),s.createFooterRow&&(xe.forEach(function(E){P.bind(E,"contextmenu",_c),P.bind(E,"click",bc)}),Te.forEach(function(E){P.bind(E,"scroll",mi)})),s.createPreHeaderPanel&&P.bind(Be,"scroll",lc),P.bind(le,"keydown",ml),P.bind(_e,"keydown",ml),nt.forEach(function(E){P.bind(E,"keydown",ml),P.bind(E,"click",hc),P.bind(E,"dblclick",ls),P.bind(E,"contextmenu",fc),P.bind(E,"mouseover",Ed),P.bind(E,"mouseout",Sd)}),Slick.Draggable&&(Ii=Slick.Draggable({containerElement:B,allowDragFrom:"div.slick-cell",onDragInit:Bf,onDragStart:zo,onDrag:Vf,onDragEnd:zf})),s.suppressCssChangesOnHiddenInit||Ts())}function ts(){Ss=y.parents(B,":hidden");for(const T of Ss){var E={};for(const I in Qs)E[I]=T.style[I],T.style[I]=Qs[I];ha.push(E)}}function Ts(){let E=0;for(const I of Ss){var T=ha[E++];for(const V in Qs)I.style[V]=T[V]}}function At(){return s.frozenColumn>-1}function Ki(E){mn.unshift(E),E.init(L)}function Or(E){for(var T=mn.length;T>=0;T--)if(mn[T]===E){mn[T].destroy&&mn[T].destroy(),mn.splice(T,1);break}}function Lo(E){for(var T=mn.length-1;T>=0;T--)if(mn[T].pluginName===E)return mn[T]}function Dl(E){Ni&&(Ni.onSelectedRangesChanged.unsubscribe(Zu),Ni.destroy&&Ni.destroy()),Ni=E,Ni&&(Ni.init(L),Ni.onSelectedRangesChanged.subscribe(Zu))}function to(){return Ni}function Xn(E,T){return rn(Ar(),E,T)}function el(E){return E===void 0||(E instanceof Slick.EventData&&(E=E.getNativeEvent()),Zt=E.target.closest(".grid-canvas")),Zt}function Ar(){return nt}function Rl(E,T){return rn(tl(),E,T)}function tl(){return Le}function Pl(E){return Os(E),Fi}function Os(E){return E instanceof Slick.EventData&&(E=E.getNativeEvent()),Fi=E.target.closest(".slick-viewport"),Fi}function rn(E,T,I){if(E){T||(T=0),I||(I=0);var V=typeof T=="number"?T:Pe(T),j=W&&I>=ke+(s.frozenBottom?0:1),Y=At()&&V>s.frozenColumn;return E[(j?2:0)+(Y?1:0)]}}function wo(){var E=y.createDomElement("div",{className:Le.className,style:{position:"absolute",top:"-10000px",left:"-10000px",overflow:"auto",width:"100px",height:"100px"}},document.body),T=y.createDomElement("div",{style:{width:"200px",height:"200px",overflow:"auto"}},E),I={width:E.offsetWidth-E.clientWidth,height:E.offsetHeight-E.clientHeight};return T.remove(),E.remove(),I}function on(){Me=pe=Ue=0;for(var E=!s.autoHeight,T=0,I=o.length;T<I;T++)if(!(!o[T]||o[T].hidden)){var V=o[T].width;s.frozenColumn>-1&&T>s.frozenColumn?Ue+=V:pe+=V}return E&&(s.frozenColumn>-1&&T>s.frozenColumn?Ue+=a.width:pe+=a.width),At()?(pe=pe+1e3,Ue=Math.max(Ue,$)+pe,Ue+=a.width):(pe+=a.width,pe=Math.max(pe,$)+1e3),Me=pe+Ue,Math.max(Me,$)+1e3}function qn(){var E=ze?$-a.width:$,T=o.length;for(re=Fe=0;T--;)!o[T]||o[T].hidden||(At()&&T>s.frozenColumn?Fe+=o[T].width:re+=o[T].width);var I=re+Fe;if(s.fullWidthRows){var V=Math.max(I,E)-I;V>0&&(I+=V,At()?Fe+=V:re+=V)}return I}function xo(E){var T=X,I=re,V=Fe,j;if(X=qn(),j=X!==T||re!==I||Fe!==V,j||At()||W)if(y.width(jn,re),on(),y.width(gn,pe),y.width(tr,Ue),At()){const Y=y.width(B)||0;if(Y>0&&re>Y)throw new Error("[SlickGrid] Frozen columns cannot be wider than the actual grid container width. Make sure to have less columns freezed or make your grid container wider");y.width(eo,Fe),y.width(dr,re),y.setStyleSize(Tr,"left",re),y.setStyleSize(Tr,"width",$-re),y.width(Wn,re),y.setStyleSize(Hn,"left",re),y.width(Hn,$-re),y.width(gr,re),y.width(_r,$-re),y.width(ye,re),y.width(We,Fe),s.createFooterRow&&(y.width(oe,re),y.width(de,$-re),y.width(Je,re),y.width(lt,Fe)),s.createPreHeaderPanel&&y.width(fe,X),y.width(Ei,re),y.width(En,$-re),W&&(y.width(ci,re),y.setStyleSize(Bn,"left",re),y.width($n,re),y.width(Yn,$-re),y.width(br,re),y.width(Co,Fe))}else y.width(dr,"100%"),y.width(Wn,"100%"),y.width(gr,"100%"),y.width(ye,X),s.createFooterRow&&(y.width(oe,"100%"),y.width(Je,X)),s.createPreHeaderPanel&&y.width(fe,X),y.width(Ei,"100%"),W&&(y.width($n,"100%"),y.width(br,re));ft=X>=$-a.width,y.width(qe,X+(ze?a.width:0)),y.width(De,X+(ze?a.width:0)),s.createFooterRow&&(y.width(Re,X+(ze?a.width:0)),y.width(ne,X+(ze?a.width:0))),(j||E)&&Kt()}function Mt(E){E.forEach(function(T){T.setAttribute("unselectable","on"),T.style.MozUserSelect="none",P.bind(T,"selectstart.ui",function(){return!1})})}function il(){let E=1e6;const T=navigator.userAgent.toLowerCase().match(/firefox/)?s.ffMaxSupportedCssHeight:s.maxSupportedCssHeight,I=y.createDomElement("div",{style:{display:"hidden"}},document.body);for(;;){const V=E*2;y.height(I,V);const j=y.height(I);if(V>T||j!==V)break;E=V}return I.remove(),E}function nl(){return Q}function Yi(){return Ne}function Vn(){return a}function To(){return{width:ze?a.width:0,height:ft?a.height:0}}function fd(){return q}function As(){for(var E=W&&!s.frozenBottom?br:jn;(E=E.parentNode)!=document.body&&E!=null;)(E==Ei||E.scrollWidth!=E.clientWidth||E.scrollHeight!=E.clientHeight)&&(yt.push(E),P.bind(E,"scroll."+Q,zn))}function is(){yt.forEach(function(E){P.unbindByEventName(E,"scroll."+Q)}),yt=[]}function rl(E,T,I){if(M){var V=Pe(E);if(V!=null){var j=o[V],Y=An(V);Y&&(T!==void 0&&(o[V].name=T),I!==void 0&&(o[V].toolTip=I),Dt(L.onBeforeHeaderCellDestroy,{node:Y,column:j,grid:L}),Y.setAttribute("title",I||""),T!==void 0&&(Y.children[0].innerHTML=Wo(T)),Dt(L.onHeaderCellRendered,{node:Y,column:j,grid:L}))}}}function pi(E){if(!E)return At()?z:gn;var T=Pe(E.id);return At()?T<=s.frozenColumn?gn:tr:gn}function g(E){var T=typeof E=="number"?E:Pe(E),I=At()?T<=s.frozenColumn?gn:tr:gn,V=At()?T<=s.frozenColumn?T:T-s.frozenColumn-1:T;return I.children[V]}function w(){return At()?F:F[0]}function R(){return At()?xe:xe[0]}function H(){return fe}function ee(){return Ve}function we(E){var T=typeof E=="number"?E:Pe(E),I;return At()?T<=s.frozenColumn?I=ye:(I=We,T-=s.frozenColumn+1):I=ye,I.children[T]}function He(E){var T=typeof E=="number"?E:Pe(E),I;return At()?T<=s.frozenColumn?I=Je:(I=lt,T-=s.frozenColumn+1):I=Je,I.children[T]}function Ke(){if(s.createFooterRow){xe.forEach(function(I){I.querySelectorAll(".slick-footerrow-column").forEach(function(j){const Y=y.storage.get(j,"column");Dt(L.onBeforeFooterRowCellDestroy,{node:j,column:Y,grid:L})})}),y.emptyElement(Je),y.emptyElement(lt);for(var E=0;E<o.length;E++){var T=o[E];if(!T||T.hidden)continue;const I=y.createDomElement("div",{className:`ui-state-default slick-footerrow-column l${E} r${E}`},At()&&E>s.frozenColumn?lt:Je),V=At()&&E<=s.frozenColumn?"frozen":null;V&&I.classList.add(V),y.storage.put(I,"column",T),Dt(L.onFooterRowCellRendered,{node:I,column:T,grid:L})}}}function bt(E){E.target.classList.add("ui-state-hover")}function ht(E){E.target.classList.remove("ui-state-hover")}function zt(){z.forEach(function(I){I.querySelectorAll(".slick-header-column").forEach(function(j){var Y=y.storage.get(j,"column");Y&&Dt(L.onBeforeHeaderCellDestroy,{node:j,column:Y,grid:L})})}),y.emptyElement(gn),y.emptyElement(tr),on(),y.width(gn,pe),y.width(tr,Ue),F.forEach(function(I){I.querySelectorAll(".slick-headerrow-column").forEach(function(j){const Y=y.storage.get(j,"column");Y&&Dt(L.onBeforeHeaderRowCellDestroy,{node:this,column:Y,grid:L})})}),y.emptyElement(ye),y.emptyElement(We),s.createFooterRow&&(Je.querySelectorAll(".slick-footerrow-column").forEach(function(V){var j=y.storage.get(V,"column");j&&Dt(L.onBeforeFooterRowCellDestroy,{node:this,column:j,grid:L})}),y.emptyElement(Je),At()&&(lt.querySelectorAll(".slick-footerrow-column").forEach(function(j){var Y=y.storage.get(j,"column");Y&&Dt(L.onBeforeFooterRowCellDestroy,{node:this,column:Y,grid:L})}),y.emptyElement(lt)));for(var E=0;E<o.length;E++){const I=o[E];if(!I||I.hidden)continue;const V=At()?E<=s.frozenColumn?gn:tr:gn,j=At()?E<=s.frozenColumn?ye:We:ye,Y=y.createDomElement("div",{id:`${Q+I.id}`,dataset:{id:I.id},className:"ui-state-default slick-header-column",title:I.toolTip||""},V);y.createDomElement("span",{className:"slick-column-name",innerHTML:Wo(I.name)},Y),y.width(Y,I.width-Ne);let Oe=I.headerCssClass||null;if(Oe&&Y.classList.add(...Oe.split(" ")),Oe=At()&&E<=s.frozenColumn?"frozen":null,Oe&&Y.classList.add(Oe),P.bind(Y,"mouseenter",pc),P.bind(Y,"mouseleave",mc),y.storage.put(Y,"column",I),(s.enableColumnReorder||I.sortable)&&(P.bind(Y,"mouseenter",bt),P.bind(Y,"mouseleave",ht)),I.hasOwnProperty("headerCellAttrs")&&I.headerCellAttrs instanceof Object)for(var T in I.headerCellAttrs)I.headerCellAttrs.hasOwnProperty(T)&&Y.setAttribute(T,I.headerCellAttrs[T]);if(I.sortable&&(Y.classList.add("slick-header-sortable"),y.createDomElement("div",{className:`slick-sort-indicator ${s.numberedMultiColumnSort&&!s.sortColNumberInSeparateSpan?" slick-sort-indicator-numbered":""}`},Y),s.numberedMultiColumnSort&&s.sortColNumberInSeparateSpan&&y.createDomElement("div",{className:"slick-sort-indicator-numbered"},Y)),Dt(L.onHeaderCellRendered,{node:Y,column:I,grid:L}),s.showHeaderRow){const tt=y.createDomElement("div",{className:`ui-state-default slick-headerrow-column l${E} r${E}`},j),dt=At()&&E<=s.frozenColumn?"frozen":null;dt&&tt.classList.add(dt),P.bind(tt,"mouseenter",no),P.bind(tt,"mouseleave",Uf),y.storage.put(tt,"column",I),Dt(L.onHeaderRowCellRendered,{node:tt,column:I,grid:L})}if(s.createFooterRow&&s.showFooterRow){const tt=At()?E<=s.frozenColumn?xe[0]:xe[1]:xe[0],dt=y.createDomElement("div",{className:`ui-state-default slick-footerrow-column l${E} r${E}`},tt);y.storage.put(dt,"column",I),Dt(L.onFooterRowCellRendered,{node:dt,column:I,grid:L})}}Di(Xe),ks(),s.enableColumnReorder&&(typeof s.enableColumnReorder=="function"?s.enableColumnReorder(L,z,Ne,Rs,ks,o,Pe,Q,Dt):Zi())}function Nt(){z.forEach(function(E){P.bind(E,"click",function(T){if(!ws&&!T.target.classList.contains("slick-resizable-handle")){var I=T.target.closest(".slick-header-column");if(I){var V=y.storage.get(I,"column");if(V.sortable){if(!ve().commitCurrentEdit())return;for(var j=Xe.slice(),Y=null,Oe=0;Oe<Xe.length;Oe++)if(Xe[Oe].columnId==V.id){Y=Xe[Oe],Y.sortAsc=!Y.sortAsc;break}var tt=!!Y;s.tristateMultiColumnSort?(Y||(Y={columnId:V.id,sortAsc:V.defaultSortAsc}),tt&&Y.sortAsc&&(Xe.splice(Oe,1),Y=null),s.multiColumnSort||(Xe=[]),Y&&(!tt||!s.multiColumnSort)&&Xe.push(Y)):T.metaKey&&s.multiColumnSort?Y&&Xe.splice(Oe,1):((!T.shiftKey&&!T.metaKey||!s.multiColumnSort)&&(Xe=[]),Y?Xe.length===0&&Xe.push(Y):(Y={columnId:V.id,sortAsc:V.defaultSortAsc},Xe.push(Y)));var dt;s.multiColumnSort?dt={multiColumnSort:!0,previousSortColumns:j,sortCols:Xe.map(function(mt){return{columnId:o[Pe(mt.columnId)].id,sortCol:o[Pe(mt.columnId)],sortAsc:mt.sortAsc}})}:dt={multiColumnSort:!1,previousSortColumns:j,columnId:Xe.length>0?V.id:null,sortCol:Xe.length>0?V:null,sortAsc:Xe.length>0?Xe[0].sortAsc:!0},Dt(L.onBeforeSort,dt,T).getReturnValue()!==!1&&(Di(Xe),Dt(L.onSort,dt,T))}}}})})}function Zi(){So&&(So.destroy(),xs.destroy());var E=null;function T(){Hi.scrollLeft=Hi.scrollLeft+10}function I(){Hi.scrollLeft=Hi.scrollLeft-10}var V,j={animation:50,direction:"horizontal",chosenClass:"slick-header-column-active",ghostClass:"slick-sortable-placeholder",draggable:".slick-header-column",dragoverBubble:!1,revertClone:!0,scroll:!At(),onStart:function(Y){V=!At()||y.offset(Y.item).left>y.offset(Hi).left,V&&Y.originalEvent.pageX>B.clientWidth?E||(E=setInterval(T,100)):V&&Y.originalEvent.pageX<y.offset(Hi).left?E||(E=setInterval(I,100)):(clearInterval(E),E=null)},onEnd:function(Y){clearInterval(E),E=null;var Oe=null;if(ve().commitCurrentEdit()){var tt=So.toArray();tt=tt.concat(xs.toArray());for(var dt=[],mt=0;mt<tt.length;mt++)dt.push(o[Pe(tt[mt])]);Rs(dt),Dt(L.onColumnsReordered,{impactedColumns:Qi(Oe)}),Y.stopPropagation(),ks()}}};So=Sortable.create(gn,j),xs=Sortable.create(tr,j)}function an(){const E=Array.from(z[0].children),T=Array.from(z[1].children);return E.concat(T)}function Qi(E){var T=[];if(E)for(var I=E.start;I<=E.end;I++)T.push(o[I]);else T=o;return T}function ns(E){const T=E.target.parentElement.id.replace(Q,"");Dt(L.onColumnsResizeDblClick,{triggeredByColumn:T})}function ks(){if(typeof Slick.Resizable>"u")throw new Error('Slick.Resizable is undefined, make sure to import "slick.interactions.js"');var E,T,I,V,j,Y,Oe,tt,dt=0;const mt=an();for(let Et=0;Et<mt.length;Et++)mt[Et].querySelectorAll(".slick-resizable-handle").forEach(function(Jt){Jt.remove()}),!(Et>=o.length||!o[Et]||o[Et].hidden)&&o[Et].resizable&&(Oe===void 0&&(Oe=Et),tt=Et);if(Oe!==void 0)for(let Et=0;Et<mt.length;Et++){const et=mt[Et];if(Et>=o.length||!o[Et]||o[Et].hidden||Et<Oe||s.forceFitColumns&&Et>=tt)continue;const ni=y.createDomElement("div",{className:"slick-resizable-handle",role:"separator",ariaOrientation:"horizontal"},et);P.bind(ni,"dblclick",ns),Eo.push(Slick.Resizable({resizeableElement:et,resizeableHandleElement:ni,onResizeStart:function(Jt,wi){var Bi=Jt.touches?Jt.touches[0]:Jt;if(!ve().commitCurrentEdit())return!1;V=Bi.pageX,dt=0,wi.resizeableElement.classList.add("slick-header-column-active");var Vi=null,_n=null;for(let Zn=0;Zn<mt.length;Zn++)Zn>=o.length||!o[Zn]||o[Zn].hidden||(o[Zn].previousWidth=mt[Zn].offsetWidth);if(s.forceFitColumns)for(Vi=0,_n=0,E=Et+1;E<o.length;E++)I=o[E],I&&I.resizable&&!I.hidden&&(_n!==null&&(I.maxWidth?_n+=I.maxWidth-I.previousWidth:_n=null),Vi+=I.previousWidth-Math.max(I.minWidth||0,q));var ai=0,In=0;for(E=0;E<=Et;E++)I=o[E],I&&I.resizable&&!I.hidden&&(In!==null&&(I.maxWidth?In+=I.maxWidth-I.previousWidth:In=null),ai+=I.previousWidth-Math.max(I.minWidth||0,q));Vi===null&&(Vi=1e5),ai===null&&(ai=1e5),_n===null&&(_n=1e5),In===null&&(In=1e5),Y=V+Math.min(Vi,In),j=V-Math.min(ai,_n)},onResize:function(Jt,wi){var Bi=Jt.touches?Jt.touches[0]:Jt;ws=!0;var Vi,_n=Math.min(Y,Math.max(j,Bi.pageX))-V,ai,In=0,Zn=0,$o=ze?$-a.width:$;if(_n<0){for(ai=_n,E=Et;E>=0;E--)I=o[E],I&&I.resizable&&!I.hidden&&(Vi=Math.max(I.minWidth||0,q),ai&&I.previousWidth+ai<Vi?(ai+=I.previousWidth-Vi,I.width=Vi):(I.width=I.previousWidth+ai,ai=0));for(T=0;T<=Et;T++)I=o[T],!(!I||I.hidden)&&(At()&&T>s.frozenColumn?Zn+=I.width:In+=I.width);if(s.forceFitColumns)for(ai=-_n,E=Et+1;E<o.length;E++)I=o[E],!(!I||I.hidden)&&I.resizable&&(ai&&I.maxWidth&&I.maxWidth-I.previousWidth<ai?(ai-=I.maxWidth-I.previousWidth,I.width=I.maxWidth):(I.width=I.previousWidth+ai,ai=0),At()&&E>s.frozenColumn?Zn+=I.width:In+=I.width);else for(E=Et+1;E<o.length;E++)I=o[E],!(!I||I.hidden)&&(At()&&E>s.frozenColumn?Zn+=I.width:In+=I.width);if(s.forceFitColumns)for(ai=-_n,E=Et+1;E<o.length;E++)I=o[E],!(!I||I.hidden)&&I.resizable&&(ai&&I.maxWidth&&I.maxWidth-I.previousWidth<ai?(ai-=I.maxWidth-I.previousWidth,I.width=I.maxWidth):(I.width=I.previousWidth+ai,ai=0))}else{for(ai=_n,In=0,Zn=0,E=Et;E>=0;E--)if(I=o[E],!(!I||I.hidden)&&I.resizable)if(ai&&I.maxWidth&&I.maxWidth-I.previousWidth<ai)ai-=I.maxWidth-I.previousWidth,I.width=I.maxWidth;else{var ka=I.previousWidth+ai,Yo=re+ai;At()&&E<=s.frozenColumn?(ka>dt&&Yo<$o-s.frozenRightViewportMinWidth&&(dt=ka),I.width=Yo+s.frozenRightViewportMinWidth>$o?dt:ka):I.width=ka,ai=0}for(T=0;T<=Et;T++)I=o[T],!(!I||I.hidden)&&(At()&&T>s.frozenColumn?Zn+=I.width:In+=I.width);if(s.forceFitColumns)for(ai=-_n,E=Et+1;E<o.length;E++)I=o[E],!(!I||I.hidden)&&I.resizable&&(Vi=Math.max(I.minWidth||0,q),ai&&I.previousWidth+ai<Vi?(ai+=I.previousWidth-Vi,I.width=Vi):(I.width=I.previousWidth+ai,ai=0),At()&&E>s.frozenColumn?Zn+=I.width:In+=I.width);else for(E=Et+1;E<o.length;E++)I=o[E],!(!I||I.hidden)&&(At()&&E>s.frozenColumn?Zn+=I.width:In+=I.width)}At()&&In!=re&&(y.width(gn,In+1e3),y.setStyleSize(Tr,"left",In)),kt(),s.syncColumnCellResize&&Kt(),Dt(L.onColumnsDrag,{triggeredByColumn:wi.resizeableElement,resizeHandle:wi.resizeableHandleElement})},onResizeEnd:function(Jt,wi){wi.resizeableElement.classList.remove("slick-header-column-active");var Bi=wi.resizeableElement.id.replace(Q,"");Dt(L.onBeforeColumnsResize,{triggeredByColumn:Bi}).getReturnValue()===!0&&kt();var Vi;for(E=0;E<o.length;E++)I=o[E],!(!I||I.hidden)&&(Vi=mt[E].offsetWidth,I.previousWidth!==Vi&&I.rerenderOnResize&&Ji());xo(!0),Kn(),Dt(L.onColumnsResized,{triggeredByColumn:Bi}),setTimeout(function(){ws=!1},300)}}))}}function rs(E){var T=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],I=getComputedStyle(E),V=0;return T.forEach(function(j){V+=y.toFloat(I[j])}),V}function pd(){if(s.frozenColumn=s.frozenColumn>=0&&s.frozenColumn<o.length?parseInt(s.frozenColumn):-1,s.frozenRow>-1){W=!0,me=s.frozenRow*s.rowHeight;var E=ji();ke=s.frozenBottom?E-s.frozenRow:s.frozenRow}else W=!1}function Gu(){At()?(D(Tr),D(Hn),W?(D(ci),D(Bn)):(A(Bn),A(ci))):(A(Tr),A(Hn),A(Bn),W?D(ci):(A(Bn),A(ci)))}function md(){Ei.style["overflow-x"]=At()?W&&!s.alwaysAllowHorizontalScroll?"hidden":"scroll":W&&!s.alwaysAllowHorizontalScroll?"hidden":"auto",Ei.style["overflow-y"]=!At()&&s.alwaysShowVerticalScroll?"scroll":At()?"hidden":W?"scroll":"auto",En.style["overflow-x"]=At()?W&&!s.alwaysAllowHorizontalScroll?"hidden":"scroll":W&&!s.alwaysAllowHorizontalScroll?"hidden":"auto",En.style["overflow-y"]=s.alwaysShowVerticalScroll?"scroll":(At(),W?"scroll":"auto"),$n.style["overflow-x"]=At()?W&&!s.alwaysAllowHorizontalScroll?"scroll":"auto":(W&&!s.alwaysAllowHorizontalScroll,"auto"),$n.style["overflow-y"]=!At()&&s.alwaysShowVerticalScroll?"scroll":At()?"hidden":W?"scroll":"auto",Yn.style["overflow-x"]=At()?W&&!s.alwaysAllowHorizontalScroll?"scroll":"auto":(W&&!s.alwaysAllowHorizontalScroll,"auto"),Yn.style["overflow-y"]=s.alwaysShowVerticalScroll?"scroll":(At(),"auto"),s.viewportClass&&(Ei.classList.add(...s.viewportClass.split(" ")),En.classList.add(...s.viewportClass.split(" ")),$n.classList.add(...s.viewportClass.split(" ")),Yn.classList.add(...s.viewportClass.split(" ")))}function Wu(){At()?(Hr=bo,Es=_r,yo=de,W?s.frozenBottom?(Hi=Yn,Oi=En):Hi=Oi=Yn:Hi=Oi=En):(Hr=Jr,Es=gr,yo=oe,W?s.frozenBottom?(Hi=$n,Oi=Ei):Hi=Oi=$n:Hi=Oi=Ei)}function yf(){const E=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],T=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],I=z[0];Ne=Xt=0,It=Ci=0;let V=y.createDomElement("div",{className:"ui-state-default slick-header-column",style:{visibility:"hidden"},textContent:"-"},I),j=getComputedStyle(V);j["box-sizing"]!="border-box"&&j["-moz-box-sizing"]!="border-box"&&j["-webkit-box-sizing"]!="border-box"&&(E.forEach(function(Oe){Ne+=y.toFloat(j[Oe])}),T.forEach(function(Oe){Xt+=y.toFloat(j[Oe])})),V.remove();const Y=y.createDomElement("div",{className:"slick-row"},nt[0]);V=y.createDomElement("div",{className:"slick-cell",id:"",style:{visibility:"hidden",textContent:"-"}},Y),j=getComputedStyle(V),j["box-sizing"]!="border-box"&&j["-moz-box-sizing"]!="border-box"&&j["-webkit-box-sizing"]!="border-box"&&(E.forEach(function(Oe){It+=y.toFloat(j[Oe])}),T.forEach(function(Oe){Ci+=y.toFloat(j[Oe])})),Y.remove(),q=Math.max(Ne,It)}function $u(){Ge=y.createDomElement("template",{innerHTML:'<style type="text/css" rel="stylesheet" />'}).content.firstChild,document.head.appendChild(Ge);for(var T=s.rowHeight-Ci,I=["."+Q+" .slick-group-header-column { left: 1000px; }","."+Q+" .slick-header-column { left: 1000px; }","."+Q+" .slick-top-panel { height:"+s.topPanelHeight+"px; }","."+Q+" .slick-preheader-panel { height:"+s.preHeaderPanelHeight+"px; }","."+Q+" .slick-headerrow-columns { height:"+s.headerRowHeight+"px; }","."+Q+" .slick-footerrow-columns { height:"+s.footerRowHeight+"px; }","."+Q+" .slick-cell { height:"+T+"px; }","."+Q+" .slick-row { height:"+s.rowHeight+"px; }"],V=0;V<o.length;V++)!o[V]||o[V].hidden||(I.push("."+Q+" .l"+V+" { }"),I.push("."+Q+" .r"+V+" { }"));Ge.styleSheet?Ge.styleSheet.cssText=I.join(" "):Ge.appendChild(document.createTextNode(I.join(" ")))}function ol(E){var T;if(!at){var I=document.styleSheets;for(T=0;T<I.length;T++)if((I[T].ownerNode||I[T].owningElement)==Ge){at=I[T];break}if(!at)throw new Error("SlickGrid Cannot find stylesheet.");k=[],te=[];var V=at.cssRules||at.rules,j,Y;for(T=0;T<V.length;T++){var Oe=V[T].selectorText;(j=/\.l\d+/.exec(Oe))?(Y=parseInt(j[0].substr(2,j[0].length-2),10),k[Y]=V[T]):(j=/\.r\d+/.exec(Oe))&&(Y=parseInt(j[0].substr(2,j[0].length-2),10),te[Y]=V[T])}}return{left:k[E],right:te[E]}}function Yu(){Ge.remove(),at=null}function Ef(E){P.unbindAll(),Ii=sl(Ii),gi=sl(gi),Eo=sl(Eo),ve().cancelCurrentEdit(),Dt(L.onBeforeDestroy,{});for(var T=mn.length;T--;)Or(mn[T]);s.enableColumnReorder&&So&&typeof So.destroy=="function"&&(So.destroy(),xs.destroy()),is(),P.unbindByEventName(B,"resize.slickgrid",Cr),Yu(),nt.forEach(function(j){P.unbindByEventName(j,"keydown",ml),P.unbindByEventName(j,"click",hc),P.unbindByEventName(j,"dblclick",ls),P.unbindByEventName(j,"contextmenu",fc),P.unbindByEventName(j,"mouseover",Ed),P.unbindByEventName(j,"mouseout",Sd)}),Le.forEach(function(j){P.unbindByEventName(j,"scroll",pl)}),J.forEach(function(j){P.unbindByEventName(j,"contextmenu",vc),P.unbindByEventName(j,"click",gc)}),ae.forEach(function(j){P.unbindByEventName(j,"scroll",kr)}),xe&&xe.forEach(function(j){P.unbindByEventName(j,"contextmenu",_c),P.unbindByEventName(j,"click",bc)}),Te&&Te.forEach(function(j){P.unbindByEventName(j,"scroll",mi)}),Be&&P.unbindByEventName(Be,"scroll",lc),P.unbindByEventName(le,"keydown",ml),P.unbindByEventName(_e,"keydown",ml);const I=B.querySelectorAll(".slick-resizable-handle");[].forEach.call(I,function(j){P.unbindByEventName(j,"dblclick",ns)});const V=B.querySelectorAll(".slick-header-column");[].forEach.call(V,function(j){P.unbindByEventName(j,"mouseenter",pc),P.unbindByEventName(j,"mouseleave",mc),P.unbindByEventName(j,"mouseenter",bt),P.unbindByEventName(j,"mouseleave",ht)}),B.replaceChildren(),B.classList.remove(Q),E&&ju()}function sl(E){if(E){const T=Array.isArray(E)?E:[E];let I;for(;(I=T.pop())!=null;)I&&typeof I.destroy=="function"&&I.destroy()}return E=Array.isArray(E)?[]:null,E}function ju(){Zt=null,Fi=null,yt=null,nt=null,jn=null,eo=null,br=null,Co=null,B=null,le=null,_e=null,gn=null,tr=null,z=null,F=null,ye=null,We=null,qe=null,De=null,Es=null,ae=null,gr=null,_r=null,Hr=null,J=null,Jr=null,bo=null,Ss=null,xe=null,Je=null,lt=null,Re=null,ne=null,Te=null,oe=null,de=null,yo=null,fe=null,Ve=null,Be=null,ue=null,Ye=null,be=null,Ce=null,Ge=null,Ot=null,Vt=null,hi=null,yi=null,dr=null,Tr=null,Wn=null,Hn=null,ci=null,Bn=null,Le=null,Ei=null,En=null,$n=null,Yn=null,Hi=null,Oi=null}var io=null,Is=null;function Sf(E,T){var I=null,V=-1;if(typeof E=="number")I=o[E],V=E;else if(typeof E=="string")for(i=0;i<o.length;i++)o[i].Id===E&&(I=o[i],V=i);if(!I)return;const j=Xn(0,0);Br(I,V,j,T,V)}function fa(E){return!E.ignoreHeaderText&&!E.sizeToRemaining&&E.contentSizePx===E.headerWidthPx&&E.widthPx<100}function vd(E,T){ts(),ll(E,T),Ts()}function ll(E,T){if(E=E||s.autosizeColsMode,E===Slick.GridAutosizeColsMode.LegacyForceFit||E===Slick.GridAutosizeColsMode.LegacyOff){xf();return}if(E!==Slick.GridAutosizeColsMode.None){io=document.createElement("canvas"),io&&io.getContext&&(Is=io.getContext("2d"));var I=Xn(0,0),V=ze?$-a.width:$,j,Y,Oe,tt,dt=0,mt=0,Et=0,et=0,ni=0;for(j=0;j<o.length;j++)Y=o[j],Br(Y,j,I,T,j),ni+=Y.autoSize.autosizeMode===Slick.ColAutosizeMode.Locked?Y.width:fa(Y.autoSize)?Y.autoSize.widthPx:0,et+=Y.autoSize.autosizeMode===Slick.ColAutosizeMode.Locked?Y.width:fa(Y.autoSize)?Y.autoSize.widthPx:Y.minWidth,dt+=Y.autoSize.widthPx,mt+=Y.autoSize.sizeToRemaining?0:Y.autoSize.widthPx,Et+=Y.autoSize.sizeToRemaining&&Y.minWidth||0;var Jt=dt-mt;if(E===Slick.GridAutosizeColsMode.FitViewportToCols){var wi=dt+a.width;E=Slick.GridAutosizeColsMode.IgnoreViewport,s.viewportMaxWidthPx&&wi>s.viewportMaxWidthPx?(wi=s.viewportMaxWidthPx,E=Slick.GridAutosizeColsMode.FitColsToViewport):s.viewportMinWidthPx&&wi<s.viewportMinWidthPx&&(wi=s.viewportMinWidthPx,E=Slick.GridAutosizeColsMode.FitColsToViewport),y.width(B,wi)}if(E===Slick.GridAutosizeColsMode.FitColsToViewport)if(Jt>0&&mt<V-Et){for(j=0;j<o.length;j++)if(Y=o[j],!(!Y||Y.hidden)){var Bi=V-mt;Y.autoSize.sizeToRemaining?Oe=Bi*Y.autoSize.widthPx/Jt:Oe=Y.autoSize.widthPx,Y.rerenderOnResize&&Y.width!=Oe&&(tt=!0),Y.width=Oe}}else if(s.viewportSwitchToScrollModeWidthPercent&&mt+Et>V*s.viewportSwitchToScrollModeWidthPercent/100||et>V)E=Slick.GridAutosizeColsMode.IgnoreViewport;else{var Vi=mt-ni,_n=V-ni-Et;for(j=0;j<o.length;j++)Y=o[j],!(!Y||Y.hidden)&&(Oe=Y.width,Y.autoSize.autosizeMode!==Slick.ColAutosizeMode.Locked&&!fa(Y.autoSize)&&(Y.autoSize.sizeToRemaining?Oe=Y.minWidth:(Oe=_n/Vi*Y.autoSize.widthPx-1,Oe<Y.minWidth&&(Oe=Y.minWidth),Vi-=Y.autoSize.widthPx,_n-=Oe)),fa(Y.autoSize)&&(Oe=Y.autoSize.widthPx,Oe<Y.minWidth&&(Oe=Y.minWidth)),Y.rerenderOnResize&&Y.width!=Oe&&(tt=!0),Y.width=Oe)}if(E===Slick.GridAutosizeColsMode.IgnoreViewport)for(j=0;j<o.length;j++)!o[j]||o[j].hidden||(Oe=o[j].autoSize.widthPx,o[j].rerenderOnResize&&o[j].width!=Oe&&(tt=!0),o[j].width=Oe);gd(tt)}}function Br(E,T,I,V,j){var Y=E.autoSize;if(Y.widthPx=E.width,Y.autosizeMode===Slick.ColAutosizeMode.Locked||Y.autosizeMode===Slick.ColAutosizeMode.Guide)return;var Oe=ji();const tt=new RegExp(/\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}(\.\d{3})?Z/);if(Y.autosizeMode===Slick.ColAutosizeMode.ContentIntelligent){var dt=Y.colDataTypeOf,mt;if(Oe>0){var Et=dn(0);Et&&(mt=Et[E.field],tt.test(mt)&&(mt=Date.parse(mt)),dt=typeof mt,dt==="object"&&(mt instanceof Date&&(dt="date"),typeof moment<"u"&&mt instanceof moment&&(dt="moment")))}dt==="boolean"&&(Y.colValueArray=[!0,!1]),dt==="number"&&(Y.valueFilterMode=Slick.ValueFilterMode.GetGreatestAndSub,Y.rowSelectionMode=Slick.RowSelectionMode.AllRows),dt==="string"&&(Y.valueFilterMode=Slick.ValueFilterMode.GetLongestText,Y.rowSelectionMode=Slick.RowSelectionMode.AllRows,Y.allowAddlPercent=5),dt==="date"&&(Y.colValueArray=[new Date(2009,8,30,12,20,20)]),dt==="moment"&&typeof moment<"u"&&(Y.colValueArray=[moment([2009,8,30,12,20,20])])}var et=Y.contentSizePx=Xu(E,T,I,V,j);et===0&&(et=Y.widthPx);var ni=Y.allowAddlPercent?1+Y.allowAddlPercent/100:1;et=et*ni+s.autosizeColPaddingPx,E.minWidth&&et<E.minWidth&&(et=E.minWidth),E.maxWidth&&et>E.maxWidth&&(et=E.maxWidth),(Y.autosizeMode===Slick.ColAutosizeMode.ContentExpandOnly||E.editor&&E.editor.ControlFillsColumn)&&et<E.width&&(et=E.width),Y.widthPx=et}function Xu(E,T,I,V,j){var Y=E.autoSize,Oe=1,tt,dt,mt=0,Et=0;if(Y.headerWidthPx=0,Y.ignoreHeaderText||(Y.headerWidthPx=wf(E)),Y.headerWidthPx===0&&(Y.headerWidthPx=E.width?E.width:E.maxWidth?E.maxWidth:E.minWidth?E.minWidth:20),Y.colValueArray)return Et=qu(E,I,Y.colValueArray),Math.max(Y.headerWidthPx,Et);var et={};et.colIndex=T,et.rowCount=ji(),et.startIndex=0,et.endIndex=et.rowCount-1,et.valueArr=null,et.getRowVal=function(ai){return dn(ai)[E.field]};var ni=(V?Y.rowSelectionModeOnInit:void 0)||Y.rowSelectionMode;if(ni===Slick.RowSelectionMode.FirstRow&&(et.endIndex=0),ni===Slick.RowSelectionMode.LastRow&&(et.endIndex=et.startIndex=et.rowCount-1),ni===Slick.RowSelectionMode.FirstNRows&&(et.endIndex=Math.min(Y.rowSelectionCount,et.rowCount)-1),Y.valueFilterMode===Slick.ValueFilterMode.DeDuplicate){var Jt={};for(tt=et.startIndex;tt<=et.endIndex;tt++)Jt[et.getRowVal(tt)]=!0;if(Object.keys)et.valueArr=Object.keys(Jt);else{et.valueArr=[];for(var wi in Jt)et.valueArr.push(wi)}et.startIndex=0,et.endIndex=et.length-1}if(Y.valueFilterMode===Slick.ValueFilterMode.GetGreatestAndSub){var Bi,Vi=0;for(tt=et.startIndex;tt<=et.endIndex;tt++)dt=et.getRowVal(tt),Math.abs(dt)>Vi&&(Bi=dt,Vi=Math.abs(dt));Bi=""+Bi,Bi=Array(Bi.length+1).join("9"),Bi=+Bi,et.valueArr=[Bi],et.startIndex=et.endIndex=0}if(Y.valueFilterMode===Slick.ValueFilterMode.GetLongestTextAndSub){for(tt=et.startIndex;tt<=et.endIndex;tt++)dt=et.getRowVal(tt),(dt||"").length>mt&&(mt=dt.length);dt=Array(mt+1).join("m"),Oe=s.autosizeTextAvgToMWidthRatio,et.maxLen=mt,et.valueArr=[dt],et.startIndex=et.endIndex=0}if(Y.valueFilterMode===Slick.ValueFilterMode.GetLongestText){mt=0;var _n=0;for(tt=et.startIndex;tt<=et.endIndex;tt++)dt=et.getRowVal(tt),(dt||"").length>mt&&(mt=dt.length,_n=tt);dt=et.getRowVal(_n),et.maxLen=mt,et.valueArr=[dt],et.startIndex=et.endIndex=0}return et.maxLen&&et.maxLen>30&&j>1&&(Y.sizeToRemaining=!0),Et=qu(E,I,et)*Oe,Math.max(Y.headerWidthPx,Et)}function qu(E,T,I){const V=y.createDomElement("div",{className:"slick-row ui-widget-content"},T),j=y.createDomElement("div",{className:"slick-cell"},V);j.style.position="absolute",j.style.visibility="hidden",j.style["text-overflow"]="initial",j.style["white-space"]="nowrap";var Y,Oe,tt=0,dt,mt,Et,et=E.autoSize.widthEvalMode===Slick.WidthEvalMode.TextOnly;if(E.autoSize.widthEvalMode===Slick.WidthEvalMode.Auto){var ni=!E.formatterOverride&&!E.formatter,Jt=E.formatterOverride&&E.formatterOverride.ReturnsTextOnly||!E.formatterOverride&&E.formatter&&E.formatter.ReturnsTextOnly;et=ni||Jt}if(Is&&et){const wi=getComputedStyle(j);for(Is.font=wi["font-size"]+" "+wi["font-family"],Y=I.startIndex;Y<=I.endIndex;Y++)Et=I.valueArr?I.valueArr[Y]:I.getRowVal(Y),E.formatterOverride?mt=E.formatterOverride(Y,I.colIndex,Et,E,dn(Y),L):E.formatter?mt=E.formatter(Y,I.colIndex,Et,E,dn(Y),L):mt=""+Et,Oe=mt?Is.measureText(mt).width:0,Oe>tt&&(tt=Oe,dt=mt);return j.innerHTML=dt,Oe=j.offsetWidth,V.remove(),Oe}for(Y=I.startIndex;Y<=I.endIndex;Y++)Et=I.valueArr?I.valueArr[Y]:I.getRowVal(Y),E.formatterOverride?mt=E.formatterOverride(Y,I.colIndex,Et,E,dn(Y),L):E.formatter?mt=E.formatter(Y,I.colIndex,Et,E,dn(Y),L):mt=""+Et,Ms(mt,j),Oe=j.offsetWidth,Oe>tt&&(tt=Oe);return V.remove(),tt}function wf(E){var T=0,I=nl()+E.id,V=document.getElementById(I),j=I+"_";if(V){var Y=V.cloneNode(!0);Y.id=j,Y.style.cssText="position: absolute; visibility: hidden;right: auto;text-overflow: initial;white-space: nowrap;",V.parentNode.insertBefore(Y,V),T=Y.offsetWidth,Y.parentNode.removeChild(Y)}else{let Oe=pi(E);V=y.createDomElement("div",{id:j,className:"ui-state-default slick-header-column"},Oe),y.createDomElement("span",{className:"slick-column-name",innerHTML:Wo(E.name)},V),Y.style.cssText="position: absolute; visibility: hidden;right: auto;text-overflow: initial;white-space: nowrap;",E.headerCssClass&&V.classList.add(...E.headerCssClass.split(" ")),T=V.offsetWidth,Oe.removeChild(V)}return T}function xf(){var E,T,I=[],V=0,j=0,Y,Oe=ze?$-a.width:$;for(E=0;E<o.length;E++)T=o[E],!(!T||T.hidden)&&(I.push(T.width),j+=T.width,T.resizable&&(V+=T.width-Math.max(T.minWidth,q)));for(Y=j;j>Oe&&V;){var tt=(j-Oe)/V;for(E=0;E<o.length&&j>Oe;E++)if(T=o[E],!(!T||T.hidden)){var dt=I[E];if(!(!T.resizable||dt<=T.minWidth||dt<=q)){var mt=Math.max(T.minWidth,q),Et=Math.floor(tt*(dt-mt))||1;Et=Math.min(Et,dt-mt),j-=Et,V-=Et,I[E]-=Et}}if(Y<=j)break;Y=j}for(Y=j;j<Oe;){var et=Oe/j;for(E=0;E<o.length&&j<Oe;E++)if(T=o[E],!(!T||T.hidden)){var ni=I[E],Jt;!T.resizable||T.maxWidth<=ni?Jt=0:Jt=Math.min(Math.floor(et*ni)-ni,T.maxWidth-ni||1e6)||1,j+=Jt,I[E]+=j<=Oe?Jt:0}if(Y>=j)break;Y=j}var wi=!1;for(E=0;E<o.length;E++)!T||T.hidden||(o[E].rerenderOnResize&&o[E].width!=I[E]&&(wi=!0),o[E].width=I[E]);gd(wi)}function gd(E){kt(),xo(!0),Dt(L.onAutosizeColumns,{columns:o}),E&&(Ji(),Kn())}function Ku(){return o.filter(E=>!E.hidden)}function Dt(E,T,I){return I=I||new Slick.EventData(I,T),T=T||{},T.grid=L,E.notify(T,I,L)}function ve(){return s.editorLock}function $e(){return pt}function Pe(E){return Se[E]}function kt(){if(!M)return;let E=0,T=Ku();z.forEach(function(I){for(let V=0;V<I.children.length;V++,E++){const j=I.children[V],Oe=((T[E]||{}).width||0)-Ne;y.width(j)!==Oe&&y.width(j,Oe)}}),bd()}function Kt(){for(var E=0,T,I,V=0;V<o.length;V++)o[V]&&o[V].hidden||(T=o[V].width,I=ol(V),I.left.style.left=E+"px",I.right.style.right=(s.frozenColumn!=-1&&V>s.frozenColumn?Fe:re)-E-T+"px",s.frozenColumn!=V&&(E+=o[V].width)),s.frozenColumn==V&&(E=0)}function Ai(E,T){Di([{columnId:E,sortAsc:T}])}function An(E){let T=null;return z.every(function(I){const V=I.children.length;return E<V?(T=I.children[E],!1):(E-=V,!0)}),T}function Di(E){Xe=E;const T=s.numberedMultiColumnSort&&Xe.length>1;z.forEach(function(V){let j=V.querySelectorAll(".slick-header-column-sorted");j.forEach(function(Y){Y.classList.remove("slick-header-column-sorted")}),j=V.querySelectorAll(".slick-sort-indicator"),j.forEach(function(Y){Y.classList.remove("slick-sort-indicator-asc"),Y.classList.remove("slick-sort-indicator-desc")}),j=V.querySelectorAll(".slick-sort-indicator-numbered"),j.forEach(function(Y){Y.textContent=""})});let I=1;Xe.forEach(function(V){V.sortAsc==null&&(V.sortAsc=!0);const j=Pe(V.columnId);if(j!=null){const Y=An(j);if(Y){Y.classList.add("slick-header-column-sorted");let Oe=Y.querySelector(".slick-sort-indicator");Oe.classList.add(V.sortAsc?"slick-sort-indicator-asc":"slick-sort-indicator-desc"),T&&(Oe=Y.querySelector(".slick-sort-indicator-numbered"),Oe.textContent=I)}}I++})}function _d(){return Xe}function Zu(E,T){const I=E.getNativeEvent();var V=Ln.slice(0);Ln=[];for(var j={},Y=0;Y<T.length;Y++)for(var Oe=T[Y].fromRow;Oe<=T[Y].toRow;Oe++){j[Oe]||(Ln.push(Oe),j[Oe]={});for(var tt=T[Y].fromCell;tt<=T[Y].toCell;tt++)Mc(Oe,tt)&&(j[Oe][o[tt].id]=s.selectedCellCssClass)}if(uc(s.selectedCellCssClass,j),Vr(V,Ln)){var dt=I&&I.detail&&I.detail.caller||"click",mt=gl().filter(function(et){return V.indexOf(et)<0}),Et=V.filter(function(et){return gl().indexOf(et)<0});Dt(L.onSelectedRowsChanged,{rows:gl(),previousSelectedRows:V,caller:dt,changedSelectedRows:mt,changedUnselectedRows:Et},E)}}function Vr(E,T){return Array.isArray(E)&&Array.isArray(T)&&T.sort().toString()!==E.sort().toString()}function pa(){return o}function bd(){wt=[],ii=[];for(var E=0,T=0,I=o.length;T<I;T++)!o[T]||o[T].hidden||(wt[T]=E,ii[T]=E+o[T].width,s.frozenColumn==T?E=0:E+=o[T].width)}function Ds(){Se={};for(var E=0;E<o.length;E++){o[E].width&&(o[E].widthRequest=o[E].width);var T=o[E]=y.extend({},u,o[E]);T.autoSize=y.extend({},h,T.autoSize),Se[T.id]=E,T.minWidth&&T.width<T.minWidth&&(T.width=T.minWidth),T.maxWidth&&T.width>T.maxWidth&&(T.width=T.maxWidth)}}function Rs(E){Dt(L.onBeforeSetColumns,{previousColumns:o,newColumns:E,grid:L}),o=E,o=E,Ri()}function ma(){Dt(L.onBeforeUpdateColumns,{columns:o,grid:L}),Ri()}function Ri(){Ds(),bd(),M&&(Gu(),md(),Ji(),zt(),Ke(),Yu(),$u(),Cr(),xo(),kt(),Kt(),pl(),to()&&to().refreshSelections&&to().refreshSelections())}function Tf(){return s}function Qu(E,T,I,V){if(ve().commitCurrentEdit()){yr(),E.showColumnHeader!==void 0&&Ml(E.showColumnHeader),s.enableAddRow!==E.enableAddRow&&rc(ji());var j=y.extend(!0,{},s);s=y.extend(s,E),Dt(L.onSetOptions,{optionsBefore:j,optionsAfter:s}),Fl(),pd(),E.frozenBottom!==void 0&&(es=!0),Le.forEach(function(Y){Y.style["overflow-y"]=s.autoHeight?"hidden":"auto"}),T||Kn(),Wu(),V||md(),I||Rs(o),s.enableMouseWheelScrollHandler&&Le&&(!gi||gi.length===0)?Le.forEach(function(Y){gi.push(Slick.MouseWheel({element:Y,onMouseWheel:cc}))}):s.enableMouseWheelScrollHandler===!1&&sl(gi)}}function Fl(){s.autoHeight&&(s.leaveSpaceForNewRows=!1),s.forceFitColumns&&(s.autosizeColsMode=Slick.GridAutosizeColsMode.LegacyForceFit,console.log("forceFitColumns option is deprecated - use autosizeColsMode"))}function Of(E,T){r=E,Ji(),Bo(),T&&Ho(0)}function Af(){return r}function ji(){return r.getLength?r.getLength():r&&r.length||0}function zr(){return ji()+(s.enableAddRow&&(!Gi||Wi)?1:0)}function dn(E){return r.getItem?r.getItem(E):r[E]}function va(){return be[0]}function Ju(){return be}function os(E,T,I,V){var j=V!==!1;if(s[E]!=I)if(s[E]=I,I){if(j){y.slideDown(T,Cr);return}D(T),Cr()}else{if(j){y.slideUp(T,Cr);return}A(T),Cr()}}function ec(E,T){os("showTopPanel",Ce,E,T)}function tc(E,T){os("showHeaderRow",ae,E,T)}function Ml(E,T){os("showColumnHeader",J,E,T)}function ic(E,T){os("showFooterRow",Te,E,T)}function Nl(E,T){os("showPreHeaderPanel",[Be,ue],E,T)}function Ps(){return B}function al(E){return s.rowHeight*E-x}function ga(E){return Math.floor((E+x)/s.rowHeight)}function Ho(E){E=Math.max(E,0),E=Math.min(E,c-y.height(Oi)+(ft||At()?a.height:0));var T=x;C=Math.min(v-1,Math.floor(E/m)),x=Math.round(C*_);var I=E-x;if(x!=T){var V=Ca(I);nc(V),fl()}Ct!=I&&(S=Ct+T<I+x?1:-1,ti=vt=Ct=I,At()&&(Ei.scrollTop=I),W&&($n.scrollTop=Yn.scrollTop=I),Oi.scrollTop=I,Dt(L.onViewportChanged,{}))}function kf(E,T,I,V,j,Y){return I==null?"":(I+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function Fs(E,T){var I=r.getItemMetadata&&r.getItemMetadata(E),V=I&&I.columns&&(I.columns[T.id]||I.columns[Pe(T.id)]);return V&&V.formatter||I&&I.formatter||T.formatter||s.formatterFactory&&s.formatterFactory.getFormatter(T)||s.defaultFormatter}function Ll(E,T){var I=o[T],V=r.getItemMetadata&&r.getItemMetadata(E),j=V&&V.columns;return j&&j[I.id]&&j[I.id].editor!==void 0?j[I.id].editor:j&&j[T]&&j[T].editor!==void 0?j[T].editor:I.editor||s.editorFactory&&s.editorFactory.getEditor(I)}function dl(E,T){return s.dataItemColumnValueExtractor?s.dataItemColumnValueExtractor(E,T):E[T.field]}function If(E,T,I,V,j){var Y=dn(I),Oe=I<j&&!Y,tt="slick-row"+(W&&I<=s.frozenRow?" frozen":"")+(Oe?" loading":"")+(I===U&&s.showCellSelection?" active":"")+(I%2==1?" odd":" even");Y||(tt+=" "+s.addNewRowCssClass);var dt=r.getItemMetadata&&r.getItemMetadata(I);dt&&dt.cssClasses&&(tt+=" "+dt.cssClasses);var mt=vl(I),Et=`<div class="ui-widget-content ${tt}" style="top:${al(I)-mt}px">`;E.push(Et),At()&&T.push(Et);for(var et,ni,Jt=0,wi=o.length;Jt<wi;Jt++)if(ni=o[Jt],!(!ni||ni.hidden)){if(et=1,dt&&dt.columns){var Bi=dt.columns[ni.id]||dt.columns[Jt];et=Bi&&Bi.colspan||1,et==="*"&&(et=wi-Jt)}if(ii[Math.min(wi-1,Jt+et-1)]>V.leftPx){if(!ni.alwaysRenderColumn&&wt[Jt]>V.rightPx)break;At()&&Jt>s.frozenColumn?Hl(T,I,Jt,et,Y):Hl(E,I,Jt,et,Y)}else(ni.alwaysRenderColumn||At()&&Jt<=s.frozenColumn)&&Hl(E,I,Jt,et,Y);et>1&&(Jt+=et-1)}E.push("</div>"),At()&&T.push("</div>")}function Hl(E,T,I,V,j){var Y=o[I],Oe="slick-cell l"+I+" r"+Math.min(o.length-1,I+V-1)+(Y.cssClass?" "+Y.cssClass:"");At()&&I<=s.frozenColumn&&(Oe+=" frozen"),T===U&&I===Z&&s.showCellSelection&&(Oe+=" active");for(var tt in _t)_t[tt][T]&&_t[tt][T][Y.id]&&(Oe+=" "+_t[tt][T][Y.id]);var dt=null,mt="";j&&(dt=dl(j,Y),mt=Fs(T,Y)(T,I,dt,Y,j,L),mt==null&&(mt=""));var et=Dt(L.onBeforeAppendCell,{row:T,cell:I,value:dt,dataContext:j}).getReturnValue(),ni=typeof et=="string"?et:"";mt&&mt.addClasses&&(ni+=(ni?" ":"")+mt.addClasses);var Jt=mt&&mt.toolTip?"title='"+mt.toolTip+"'":"",wi="";if(Y.hasOwnProperty("cellAttrs")&&Y.cellAttrs instanceof Object)for(var tt in Y.cellAttrs)Y.cellAttrs.hasOwnProperty(tt)&&(wi+=" "+tt+'="'+Y.cellAttrs[tt]+'" ');E.push(`<div class="${Oe+(ni?" "+ni:"")}" ${Jt+wi}>`),j&&E.push(Object.prototype.toString.call(mt)!=="[object Object]"?mt:mt.text),E.push("</div>"),ct[T].cellRenderQueue.push(I),ct[T].cellColSpans[I]=V}function nc(E){for(var T in ct){var I=!0;W&&(s.frozenBottom&&T>=ke||!s.frozenBottom&&T<=ke)&&(I=!1),(T=parseInt(T,10))!==U&&(T<E.top||T>E.bottom)&&I&&_a(T)}s.enableAsyncPostRenderCleanup&&zl()}function Df(){Bo(),Ji(),Kn()}function Ji(){Ee&&yr();for(var E in ct)_a(E);s.enableAsyncPostRenderCleanup&&zl()}function ir(E,T,I){er++;for(var V in T)T.hasOwnProperty(V)&&Jn.push({actionType:"C",groupId:er,node:E.cellNodesByColumnIdx[V|0],columnIdx:V|0,rowIdx:I});Jn.push({actionType:"R",groupId:er,node:E.rowNode}),E.rowNode.forEach(function(j){j.remove()})}function Rf(E,T,I){Jn.push({actionType:"C",groupId:er,node:E,columnIdx:T,rowIdx:I}),E.remove()}function _a(E){var T=ct[E];T&&(s.enableAsyncPostRenderCleanup&&$i[E]?ir(T,$i[E],E):T.rowNode.forEach(function(I){I.parentElement&&I.parentElement.removeChild(I)}),delete ct[E],delete $i[E],St--,vr++)}function Cd(E){var T,I;if(!(!E||!E.length)){for(S=0,I=E.length,T=0;T<I;T++)Ee&&U===E[T]&&yr(),ct[E[T]]&&_a(E[T]);s.enableAsyncPostRenderCleanup&&zl()}}function rc(E){!E&&E!==0||Cd([E])}function Ms(E,T,I){if(E==null&&(E=""),Object.prototype.toString.call(E)!=="[object Object]"){T.innerHTML=Wo(E);return}T.innerHTML=Wo(E.text),E.removeClasses&&!I&&E.removeClasses.split(" ").forEach(function(j){T.classList.remove(j)}),E.addClasses&&E.addClasses.split(" ").forEach(function(j){T.classList.add(j)}),E.toolTip&&T.setAttribute("title",E.toolTip)}function Bl(E,T){var I=rr(E,T);if(I){var V=o[T],j=dn(E);if(Ee&&U===E&&Z===T)Ee.loadValue(j);else{var Y=j?Fs(E,V)(E,T,dl(j,V),V,j,L):"";Ms(Y,I),G(E)}}}function Vl(E){var T=ct[E];if(T){ya(E);var I,V=dn(E);for(var j in T.cellNodesByColumnIdx)if(T.cellNodesByColumnIdx.hasOwnProperty(j)){j=j|0;var Y=o[j],Oe=T.cellNodesByColumnIdx[j];E===U&&j===Z&&Ee?Ee.loadValue(V):V?(I=Fs(E,Y)(E,j,dl(V,Y),Y,V,L),Ms(I,Oe)):Oe.innerHTML=""}G(E)}}function Ns(){if((!s.autoHeight||s.frozenColumn!=-1)&&(Rt=s.showTopPanel?s.topPanelHeight+rs(Ce[0]):0,Ht=s.showHeaderRow?s.headerRowHeight+rs(ae[0]):0,Tt=s.showFooterRow?s.footerRowHeight+rs(Te[0]):0),s.autoHeight){let E=dr.offsetHeight;E+=s.showHeaderRow?s.headerRowHeight+rs(ae[0]):0,E+=s.showFooterRow?s.footerRowHeight+rs(Te[0]):0,E+=qn()>$?a.height:0,ge=s.rowHeight*zr()+(s.frozenColumn==-1?E:0)}else{const E=s.showColumnHeader?y.toFloat(y.height(J[0]))+rs(J[0]):0,T=s.createPreHeaderPanel&&s.showPreHeaderPanel?s.preHeaderPanelHeight+rs(Be):0,I=getComputedStyle(B);ge=y.toFloat(I.height)-y.toFloat(I.paddingTop)-y.toFloat(I.paddingBottom)-E-Rt-Ht-Tt-T}return Bt=Math.ceil(ge/s.rowHeight),ge}function ul(){$=parseFloat(y.innerSize(B,"width"))}function Cr(){if(M){if(st=0,rt=0,ut=0,ul(),Ns(),W?s.frozenBottom?(st=ge-me-a.height,rt=me+a.height):(st=me,rt=ge-me):st=ge,st+=Rt+Ht+Tt,At()&&s.autoHeight&&(st+=a.height),ut=st-Rt-Ht-Tt,s.autoHeight){if(At()){const T=getComputedStyle(Jr);y.height(B,st+y.toFloat(T.height))}Wn.style.position="relative"}y.setStyleSize(Wn,"top",y.height(dr)||(s.showHeaderRow?s.headerRowHeight:0)+(s.showPreHeaderPanel?s.preHeaderPanelHeight:0)),y.height(Wn,st);var E=Wn.offsetTop+st;s.autoHeight||y.height(Ei,ut),At()?(y.setStyleSize(Hn,"top",y.height(dr)),y.height(Hn,st),y.height(En,ut),W&&(y.setStyleSize(ci,"top",E),y.height(ci,rt),y.setStyleSize(Bn,"top",E),y.height(Bn,rt),y.height(Yn,rt))):W&&(y.width(ci,"100%"),y.height(ci,rt),y.setStyleSize(ci,"top",E)),W?(y.height($n,rt),s.frozenBottom?(y.height(br,me),At()&&y.height(Co,me)):(y.height(jn,me),At()&&y.height(eo,me))):y.height(En,ut),(!a||!a.width)&&(a=wo()),s.autosizeColsMode===Slick.GridAutosizeColsMode.LegacyForceFit&&vd(),Bo(),pl(),ki=-1,Kn()}}function ba(E){Gi=E.pageSize!==0,Wi=E.pageNum==E.totalPages-1}function Bo(){if(M){var E=ji(),T=zr(),I=0,tt=W&&!s.frozenBottom?y.height(br):y.height(jn);if(W)var I=ji()-s.frozenRow;else var I=T+(s.leaveSpaceForNewRows?Bt-1:0);var V=y.height(Oi),j=ze;ze=s.alwaysShowVerticalScroll||!s.autoHeight&&I*s.rowHeight>V,yr();var Y=E-1;for(var Oe in ct)Oe>Y&&_a(Oe);s.enableAsyncPostRenderCleanup&&zl(),ce&&U>Y&&Sa();var tt=p;s.autoHeight?p=s.rowHeight*I:(c=Math.max(s.rowHeight*I,V-a.height),c<t?(p=m=c,v=1,_=0):(p=t,m=p/100,v=Math.floor(c/m),_=(c-p)/(v-1))),(p!==tt||es)&&(W&&!s.frozenBottom?(y.height(br,p),At()&&y.height(Co,p)):(y.height(jn,p),y.height(eo,p)),vt=Oi.scrollTop,es=!1);var dt=vt+x<=c-V;c==0||vt==0?C=x=0:Ho(dt?vt+x:c-V+a.height),p!=tt&&s.autoHeight&&Cr(),s.autosizeColsMode===Slick.GridAutosizeColsMode.LegacyForceFit&&j!=ze&&vd(),xo(!1)}}function Ca(E,T){return E==null&&(E=vt),T==null&&(T=Qt),{top:ga(E),bottom:ga(E+ge)+1,leftPx:T,rightPx:T+$}}function oc(E,T){var I=Ca(E,T),V=Math.round(ge/s.rowHeight),j=s.minRowBuffer;return S==-1?(I.top-=V,I.bottom+=j):S==1?(I.top-=j,I.bottom+=V):(I.top-=j,I.bottom+=j),I.top=Math.max(0,I.top),I.bottom=Math.min(zr()-1,I.bottom),I.leftPx-=$,I.rightPx+=$,I.leftPx=Math.max(0,I.leftPx),I.rightPx=Math.min(X,I.rightPx),I}function ya(E){const T=ct[E];if(T&&T.cellRenderQueue.length){const I=T.rowNode;let V=Array.from(I[0].children);I.length>1&&(V=V.concat(Array.from(I[1].children)));let j=V.length-1;for(;T.cellRenderQueue.length;){const Y=T.cellRenderQueue.pop();T.cellNodesByColumnIdx[Y]=V[j--]}}}function Pf(E,T){if(!(W&&(s.frozenBottom&&T>ke||T<=ke))){var I=ct[T],V=[];for(var j in I.cellNodesByColumnIdx)if(I.cellNodesByColumnIdx.hasOwnProperty(j)&&(j=j|0,!(j<=s.frozenColumn)&&!(Array.isArray(o)&&o[j]&&o[j].alwaysRenderColumn))){var Y=I.cellColSpans[j];(wt[j]>E.rightPx||ii[Math.min(o.length-1,j+Y-1)]<E.leftPx)&&(T==U&&j==Z||V.push(j))}for(var Oe,tt;(Oe=V.pop())!=null;)tt=I.cellNodesByColumnIdx[Oe],s.enableAsyncPostRenderCleanup&&$i[T]&&$i[T][Oe]?Rf(tt,Oe,T):tt.parentElement.removeChild(tt),delete I.cellColSpans[Oe],delete I.cellNodesByColumnIdx[Oe],$i[T]&&delete $i[T][Oe]}}function sc(E){for(var T,I=[],V=[],j,Y,Oe=E.top,tt=E.bottom;Oe<=tt;Oe++)if(T=ct[Oe],!!T){ya(Oe),Pf(E,Oe),j=0;var dt=r.getItemMetadata&&r.getItemMetadata(Oe);dt=dt&&dt.columns;for(var mt=dn(Oe),Et=0,et=o.length;Et<et;Et++)if(!(!o[Et]||o[Et].hidden)){if(wt[Et]>E.rightPx)break;if((Y=T.cellColSpans[Et])!=null){Et+=Y>1?Y-1:0;continue}if(Y=1,dt){var ni=dt[o[Et].id]||dt[Et];Y=ni&&ni.colspan||1,Y==="*"&&(Y=et-Et)}ii[Math.min(et-1,Et+Y-1)]>E.leftPx&&(Hl(I,Oe,Et,Y,mt),j++),Et+=Y>1?Y-1:0}j&&V.push(Oe)}if(I.length)for(var Jt=y.createDomElement("div",{innerHTML:Wo(I.join(""))}),wi,Bi;(wi=V.pop())!=null;){T=ct[wi];for(var Vi;(Vi=T.cellRenderQueue.pop())!=null;)Bi=Jt.lastChild,At()&&Vi>s.frozenColumn?T.rowNode[1].appendChild(Bi):T.rowNode[0].appendChild(Bi),T.cellNodesByColumnIdx[Vi]=Bi}}function cl(E){for(var T=[],I=[],V=[],j=!1,Y=ji(),Oe=E.top,tt=E.bottom;Oe<=tt;Oe++)ct[Oe]||W&&s.frozenBottom&&Oe==ji()||(St++,V.push(Oe),ct[Oe]={rowNode:null,cellColSpans:[],cellNodesByColumnIdx:[],cellRenderQueue:[]},If(T,I,Oe,E,Y),ce&&U===Oe&&(j=!0),_o++);if(!V.length)return;let dt=y.createDomElement("div",{innerHTML:Wo(T.join(""))}),mt=y.createDomElement("div",{innerHTML:Wo(I.join(""))});for(var Oe=0,tt=V.length;Oe<tt;Oe++)W&&V[Oe]>=ke?At()?(ct[V[Oe]].rowNode=[dt.firstChild,mt.firstChild],br.appendChild(dt.firstChild),Co.appendChild(mt.firstChild)):(ct[V[Oe]].rowNode=[dt.firstChild],br.appendChild(dt.firstChild)):At()?(ct[V[Oe]].rowNode=[dt.firstChild,mt.firstChild],jn.appendChild(dt.firstChild),eo.appendChild(mt.firstChild)):(ct[V[Oe]].rowNode=[dt.firstChild],jn.appendChild(dt.firstChild));j&&(ce=rr(U,Z))}function hl(){s.enableAsyncPostRender&&(clearTimeout(Gn),Gn=setTimeout(ac,s.asyncPostRenderDelay))}function zl(){s.enableAsyncPostRenderCleanup&&(clearTimeout(qt),qt=setTimeout(dc,s.asyncPostRenderCleanupDelay))}function G(E){for(var T in $i[E])$i[E].hasOwnProperty(T)&&($i[E][T]="C");go=Math.min(go,E),ar=Math.max(ar,E),hl()}function fl(){for(var E in ct){var T=E?parseInt(E):0;y.setStyleSize("top",al(T))}}function Kn(){if(M){Li.dequeue();var E=Ca(),T=oc();if(nc(T),ki!=Qt){if(W){var I=y.extend(!0,{},T);s.frozenBottom?(I.top=ke,I.bottom=ji()):(I.top=0,I.bottom=s.frozenRow),sc(I)}sc(T)}cl(T),W&&(s.frozenBottom?cl({top:ke,bottom:ji()-1,leftPx:T.leftPx,rightPx:T.rightPx}):cl({top:0,bottom:s.frozenRow-1,leftPx:T.leftPx,rightPx:T.rightPx})),go=E.top,ar=Math.min(zr()-1,E.bottom),hl(),ti=vt,ki=Qt,Dt(L.onRendered,{startRow:E.top,endRow:E.bottom,grid:L})}}function kr(){var E=Es.scrollLeft;E!=Hi.scrollLeft&&(Hi.scrollLeft=E)}function mi(){var E=yo.scrollLeft;E!=Hi.scrollLeft&&(Hi.scrollLeft=E)}function lc(){Ff(Be)}function Ff(E){var T=E.scrollLeft;T!=Hi.scrollLeft&&(Hi.scrollLeft=T)}function pl(){return vt=Oi.scrollTop,Qt=Hi.scrollLeft,ss(!1)}function ss(E){var T=Oi.scrollHeight-Oi.clientHeight,I=Oi.scrollWidth-Oi.clientWidth;T=Math.max(0,T),I=Math.max(0,I),vt>T&&(vt=T),Qt>I&&(Qt=I);var V=Math.abs(vt-Ct),j=Math.abs(Qt-Ui);if(j&&(Ui=Qt,Hi.scrollLeft=Qt,Hr.scrollLeft=Qt,Ce[0].scrollLeft=Qt,s.createFooterRow&&(yo.scrollLeft=Qt),s.createPreHeaderPanel&&(At()?ue.scrollLeft=Qt:Be.scrollLeft=Qt),At()?(W&&(En.scrollLeft=Qt),_r.scrollLeft=Qt):(W&&(Ei.scrollLeft=Qt),gr.scrollLeft=Qt)),V&&!s.autoHeight)if(S=Ct<vt?1:-1,Ct=vt,E&&(Oi.scrollTop=vt),At()&&(W&&!s.frozenBottom?$n.scrollTop=vt:Ei.scrollTop=vt),V<ge)Ho(vt+x);else{var Y=x;p==ge?C=0:C=Math.min(v-1,Math.floor(vt*((c-ge)/(p-ge))*(1/m))),x=Math.round(C*_),Y!=x&&Ji()}if(j||V){var Oe=Math.abs(ki-Qt),tt=Math.abs(ti-vt);(Oe>20||tt>20)&&(s.forceSyncScrolling||tt<ge&&Oe<$?Kn():Li.enqueue(),Dt(L.onViewportChanged,{}))}return Dt(L.onScroll,{scrollLeft:Qt,scrollTop:vt}),!!(j||V)}function Mf(E,T){var I=!1,V=!1;function j(){I?V=!0:Oe()}function Y(){V=!1}function Oe(){I=!0,setTimeout(tt,T),E()}function tt(){V?(Y(),Oe()):I=!1}return{enqueue:j,dequeue:Y}}function ac(){for(var E=ji();go<=ar;){var T=S>=0?go++:ar--,I=ct[T];if(!(!I||T>=E)){$i[T]||($i[T]={}),ya(T);for(var V in I.cellNodesByColumnIdx)if(I.cellNodesByColumnIdx.hasOwnProperty(V)){V=V|0;var j=o[V],Y=$i[T][V];if(j.asyncPostRender&&Y!=="R"){var Oe=I.cellNodesByColumnIdx[V];Oe&&j.asyncPostRender(Oe,T,dn(T),j,Y==="C"),$i[T][V]="R"}}Gn=setTimeout(ac,s.asyncPostRenderDelay);return}}}function dc(){if(Jn.length>0){for(var E=Jn[0].groupId;Jn.length>0&&Jn[0].groupId==E;){var T=Jn.shift();if(T.actionType=="R"&&T.node.forEach(function(V){V.remove()}),T.actionType=="C"){var I=o[T.columnIdx];I.asyncPostRenderCleanup&&T.node&&I.asyncPostRenderCleanup(T.node,T.rowIdx,I)}}qt=setTimeout(dc,s.asyncPostRenderCleanupDelay)}}function yd(E,T){var I,V,j,Y;for(var Oe in ct){if(Y=T&&T[Oe],j=E&&E[Oe],Y)for(V in Y)(!j||Y[V]!=j[V])&&(I=rr(Oe,Pe(V)),I&&I.classList.remove(Y[V]));if(j)for(V in j)(!Y||Y[V]!=j[V])&&(I=rr(Oe,Pe(V)),I&&I.classList.add(j[V]))}}function Nf(E,T){if(_t[E])throw new Error("SlickGrid addCellCssStyles: cell CSS hash with key '"+E+"' already exists.");_t[E]=T,yd(T,null),Dt(L.onCellCssStylesChanged,{key:E,hash:T,grid:L})}function Vo(E){_t[E]&&(yd(null,_t[E]),delete _t[E],Dt(L.onCellCssStylesChanged,{key:E,hash:null,grid:L}))}function uc(E,T){const I=_t[E];_t[E]=T,yd(T,I),Dt(L.onCellCssStylesChanged,{key:E,hash:T,grid:L})}function Lf(E){return _t[E]}function Hf(E,T,I){I=I||250;function V(j,Y){Y<1||setTimeout(function(){Y%2==0?j.classList.add(s.cellFlashingCssClass):j.classList.remove(s.cellFlashingCssClass),V(j,Y-1)},I)}if(ct[E]){const j=rr(E,T);j&&V(j,5)}}function cc(E,T,I,V){vt=Math.max(0,Oi.scrollTop-V*s.rowHeight),Qt=Hi.scrollLeft+I*10;var j=ss(!0);j&&E.preventDefault()}function Bf(E,T){var I=Gl(E);if(!I||!wd(I.row,I.cell))return!1;var V=Dt(L.onDragInit,T,E);return V.isImmediatePropagationStopped()?V.getReturnValue():!1}function zo(E,T){var I=Gl(E);if(!I||!wd(I.row,I.cell))return!1;var V=Dt(L.onDragStart,T,E);return V.isImmediatePropagationStopped()?V.getReturnValue():!1}function Vf(E,T){return Dt(L.onDrag,T,E).getReturnValue()}function zf(E,T){Dt(L.onDragEnd,T,E)}function ml(E){var I=Dt(L.onKeyDown,{row:U,cell:Z},E).isImmediatePropagationStopped(),V=Slick.keyCode;if(!I&&!E.shiftKey&&!E.altKey){if(s.editable&&Ee&&Ee.keyCaptureList&&Ee.keyCaptureList.indexOf(E.which)>-1)return;E.which==V.HOME?I=E.ctrlKey?Oc():Fd():E.which==V.END&&(I=E.ctrlKey?Ac():Md())}if(!I)if(!E.shiftKey&&!E.altKey&&!E.ctrlKey){if(s.editable&&Ee&&Ee.keyCaptureList&&Ee.keyCaptureList.indexOf(E.which)>-1)return;if(E.which==V.ESCAPE){if(!ve().isActive())return;Ec()}else E.which==V.PAGE_DOWN?(xa(),I=!0):E.which==V.PAGE_UP?(Tc(),I=!0):E.which==V.LEFT?I=Rc():E.which==V.RIGHT?I=Dc():E.which==V.UP?I=Oa():E.which==V.DOWN?I=$l():E.which==V.TAB?I=Pc():E.which==V.ENTER&&(s.editable&&(Ee?U===ji()?$l():Od():ve().commitCurrentEdit()&&ro(void 0,void 0,E)),I=!0)}else E.which==V.TAB&&E.shiftKey&&!E.ctrlKey&&!E.altKey&&(I=Aa());if(I){E.stopPropagation(),E.preventDefault();try{E.originalEvent.keyCode=0}catch{}}}function hc(E){let T=E;if(T instanceof Slick.EventData?T=E.getNativeEvent():E=void 0,!Ee&&(T.target!=document.activeElement||T.target.classList.contains("slick-cell"))){var I=Id();ur(),wa(I)}var V=Gl(T);if(!(!V||Ee!==null&&U==V.row&&Z==V.cell)&&(E=Dt(L.onClick,{row:V.row,cell:V.cell},E||T),!E.isImmediatePropagationStopped()&&Ir(V.row,V.cell)&&(!ve().isActive()||ve().commitCurrentEdit()))){Uo(V.row,!1);var j=T.target&&T.target.className===Slick.preClickClassName,Y=o[V.cell],Oe=!!(s.editable&&Y&&Y.editor&&s.suppressActiveCellChangeOnEdit);us(rr(V.row,V.cell),null,j,Oe,T)}}function fc(E){var T=E.target.closest(".slick-cell");T&&(ce===T&&Ee!==null||Dt(L.onContextMenu,{},E))}function ls(E){var T=Gl(E);!T||Ee!==null&&U==T.row&&Z==T.cell||(Dt(L.onDblClick,{row:T.row,cell:T.cell},E),!E.defaultPrevented&&s.editable&&Nd(T.row,T.cell,!0,E))}function pc(E){const T=y.storage.get(E.target.closest(".slick-header-column"),"column");T&&Dt(L.onHeaderMouseEnter,{column:T,grid:L},E)}function mc(E){const T=y.storage.get(E.target.closest(".slick-header-column"),"column");T&&Dt(L.onHeaderMouseLeave,{column:T,grid:L},E)}function no(E){const T=y.storage.get(E.target.closest(".slick-headerrow-column"),"column");T&&Dt(L.onHeaderRowMouseEnter,{column:T,grid:L},E)}function Uf(E){const T=y.storage.get(E.target.closest(".slick-headerrow-column"),"column");T&&Dt(L.onHeaderRowMouseLeave,{column:T,grid:L},E)}function vc(E){var T=E.target.closest(".slick-header-column"),I=T&&y.storage.get(T,"column");Dt(L.onHeaderContextMenu,{column:I},E)}function gc(E){if(!ws){var T=E.target.closest(".slick-header-column"),I=T&&y.storage.get(T,"column");I&&Dt(L.onHeaderClick,{column:I},E)}}function _c(E){var T=E.target.closest(".slick-footerrow-column"),I=T&&y.storage.get(T,"column");Dt(L.onFooterContextMenu,{column:I},E)}function bc(E){var T=E.target.closest(".slick-footerrow-column"),I=T&&y.storage.get(T,"column");Dt(L.onFooterClick,{column:I},E)}function Ed(E){Dt(L.onMouseEnter,{},E)}function Sd(E){Dt(L.onMouseLeave,{},E)}function wd(E,T){return!(E<0||E>=ji()||T<0||T>=o.length)}function xd(E,T){for(var I=ga(T),V=0,j=0,Y=0;Y<o.length&&j<E;Y++)!o[Y]||o[Y].hidden||(j+=o[Y].width,V++);return V<0&&(V=0),{row:I,cell:V-1}}function Ea(E){var T=/l\d+/.exec(E.className);if(!T)throw new Error("SlickGrid getCellFromNode: cannot get cell - "+E.className);return parseInt(T[0].substr(1,T[0].length-1),10)}function Ul(E){for(var T in ct)for(var I in ct[T].rowNode)if(ct[T].rowNode[I]===E)return T?parseInt(T):0;return null}function vl(E){let T=0;return W?s.frozenBottom?E>=ke?p<ut?T=ke*s.rowHeight:T=p:T=0:E>=ke?T=me:T=0:T=0,T}function Gl(E){E instanceof Slick.EventData&&(E=E.getNativeEvent());var T=E.touches?E.touches[0]:E,I,V,j=E.target.closest(".slick-cell");if(!j)return null;if(I=Ul(j.parentNode),W){var Y=y.offset(y.parents(j,".grid-canvas")[0]),Oe=0,tt=y.parents(j,".grid-canvas-bottom").length;tt&&(Oe=s.frozenBottom?y.height(jn):me),I=xd(T.clientX-Y.left,T.clientY-Y.top+Oe+document.documentElement.scrollTop).row}return V=Ea(j),I==null||V==null?null:{row:I,cell:V}}function Cc(E,T){if(!wd(E,T))return null;for(var I=vl(E),V=al(E)-I,j=V+s.rowHeight-1,Y=0,Oe=0;Oe<T;Oe++)!o[Oe]||o[Oe].hidden||(Y+=o[Oe].width,s.frozenColumn==Oe&&(Y=0));var tt=Y+o[T].width;return{top:V,left:Y,bottom:j,right:tt}}function Sa(){us(null,!1)}function ur(){Ut==-1?le.focus():_e.focus()}function as(E,T,I){if(Uo(E,I),!(T<=s.frozenColumn)){var V=cs(E,T);ds(wt[T],ii[T+(V>1?V-1:0)])}}function ds(E,T){var I=Qt+y.width(Hi)-(ze?a.width:0);E<Qt?(Hi.scrollLeft=E,pl(),Kn()):T>I&&(Hi.scrollLeft=Math.min(E,T-Hi.clientWidth),pl(),Kn())}function Ur(E){ds(wt[E],ii[E])}function us(E,T,I,V,j){if(ce!==null&&(yr(),ce.classList.remove("active"),ct[U]&&ct[U].rowNode.forEach(function(mt){mt.classList.remove("active")})),ce=E,ce!=null){var Y=y.offset(ce),Oe=Math.floor(y.offset(y.parents(ce,".grid-canvas")[0]).top),tt=y.parents(ce,".grid-canvas-bottom").length;W&&tt&&(Oe-=s.frozenBottom?y.height(jn):me);var dt=xd(Y.left,Math.ceil(Y.top)-Oe);U=dt.row,Z=Mi=Z=Mi=Ea(ce),T==null&&(T=U==ji()||s.autoEdit),s.showCellSelection&&(ce.classList.add("active"),ct[U]&&ct[U].rowNode.forEach(function(mt){mt.classList.add("active")})),s.editable&&T&&Td(U,Z)&&(clearTimeout(vn),s.asyncEditorLoading?vn=setTimeout(function(){ro(void 0,I,j)},s.asyncEditorLoadDelay):ro(void 0,I,j))}else U=Z=null;V||Dt(L.onActiveCellChanged,kd())}function yc(){if(document.selection&&document.selection.empty)try{document.selection.empty()}catch{}else if(window.getSelection){var E=window.getSelection();E&&E.removeAllRanges&&E.removeAllRanges()}}function Td(E,T){var I=ji();return!(E<I&&!dn(E)||o[T].cannotTriggerInsert&&E>=I||!o[T]||o[T].hidden||!Ll(E,T))}function yr(){if(Ee){if(Dt(L.onBeforeCellEditorDestroy,{editor:Ee}),Ee.destroy(),Ee=null,ce){var E=dn(U);if(ce.classList.remove("editable"),ce.classList.remove("invalid"),E){var T=o[Z],I=Fs(U,T),V=I(U,Z,dl(E,T),T,E,L);Ms(V,ce),G(U)}}navigator.userAgent.toLowerCase().match(/msie/)&&yc(),ve().deactivate(pt)}}function ro(E,T,I){if(ce){if(!s.editable)throw new Error("SlickGrid makeActiveCellEditable : should never get called when options.editable is false");if(clearTimeout(vn),!!Td(U,Z)){var V=o[Z],j=dn(U);if(Dt(L.onBeforeEditCell,{row:U,cell:Z,item:j,column:V,target:"grid"}).getReturnValue()===!1){ur();return}ve().activate(pt),ce.classList.add("editable");var Y=E||Ll(U,Z);!E&&!Y.suppressClearOnEdit&&(ce.innerHTML="");var Oe=r.getItemMetadata&&r.getItemMetadata(U);Oe=Oe&&Oe.columns;var tt=Oe&&(Oe[V.id]||Oe[Z]);Ee=new Y({grid:L,gridPosition:Ls(B),position:Ls(ce),container:ce,column:V,columnMetaData:tt,item:j||{},event:I,commitChanges:Od,cancelChanges:Ec}),j&&(Ee.loadValue(j),T&&Ee.preClick&&Ee.preClick()),ot=Ee.serializeValue(),Ee.position&&zn()}}}function Od(){ve().commitCurrentEdit()&&(ur(),s.autoEdit&&!s.autoCommitEdit&&$l())}function Ec(){ve().cancelCurrentEdit()&&ur()}function Ls(E){var T={top:E.offsetTop,left:E.offsetLeft,bottom:0,right:0,width:E.offsetWidth,height:E.offsetWidth,visible:!0};T.bottom=T.top+T.height,T.right=T.left+T.width;for(var I=E.offsetParent;(E=E.parentNode)!=document.body&&!(!E||!E.parentNode);){const V=getComputedStyle(E);T.visible&&E.scrollHeight!=E.offsetHeight&&V.overflowY!="visible"&&(T.visible=T.bottom>E.scrollTop&&T.top<E.scrollTop+E.clientHeight),T.visible&&E.scrollWidth!=E.offsetWidth&&V.overflowX!="visible"&&(T.visible=T.right>E.scrollLeft&&T.left<E.scrollLeft+E.clientWidth),T.left-=E.scrollLeft,T.top-=E.scrollTop,E===I&&(T.left+=E.offsetLeft,T.top+=E.offsetTop,I=E.offsetParent),T.bottom=T.top+T.height,T.right=T.left+T.width}return T}function Sc(){return Ls(ce)}function wc(){return Ls(B)}function zn(){if(ce&&(Dt(L.onActiveCellPositionChanged,{}),Ee)){var E=Sc();Ee.show&&Ee.hide&&(E.visible?Ee.show():Ee.hide()),Ee.position&&Ee.position(E)}}function Ad(){return Ee}function kd(){return ce?{row:U,cell:Z}:null}function Oo(){return ce}function Id(){var E=null;if(window.getSelection){var T=window.getSelection();T.rangeCount>0&&(E=T.getRangeAt(0))}return E}function wa(E){if(window.getSelection&&E){var T=window.getSelection();T.removeAllRanges(),T.addRange(E)}}function Uo(E,T){if(!W||!s.frozenBottom&&E>ke-1||s.frozenBottom&&E<ke-1){var I=y.height(Oi),V=W&&!s.frozenBottom?E-s.frozenRow:E,j=V*s.rowHeight,Y=(V+1)*s.rowHeight-I+(ft?a.height:0);(V+1)*s.rowHeight>vt+I+x?(Ho(T?j:Y),Kn()):V*s.rowHeight<vt+x&&(Ho(T?Y:j),Kn())}}function xc(E){Ho(E*s.rowHeight),Kn()}function nr(E){var T=E*Bt,I=vt+s.rowHeight-1;if(Ho((ga(I)+T)*s.rowHeight),Kn(),s.enableCellNavigation&&U!=null){var V=U+T,j=zr();V>=j&&(V=j-1),V<0&&(V=0);for(var Y=0,Oe=null,tt=Mi;Y<=Mi;)Ir(V,Y)&&(Oe=Y),Y+=cs(V,Y);Oe!==null?(us(rr(V,Oe)),Mi=tt):Sa()}}function xa(){nr(1)}function Tc(){nr(-1)}function Oc(){Ta(0)}function Ac(){Ta(ji()-1)}function Ta(E){var T=ji();if(!T)return!0;if(E<0?E=0:E>=T&&(E=T-1),as(E,0,!0),s.enableCellNavigation&&U!=null){for(var I=0,V=null,j=Mi;I<=Mi;)Ir(E,I)&&(V=I),I+=cs(E,I);V!==null?(us(rr(E,V)),Mi=j):Sa()}return!0}function cs(E,T){var I=r.getItemMetadata&&r.getItemMetadata(E);if(!I||!I.columns)return 1;var V=I.columns[o[T].id]||I.columns[T],j=V&&V.colspan;return j==="*"?j=o.length-T:j=j||1,j}function Hs(E){for(var T=0;T<o.length;){if(Ir(E,T))return T;T+=cs(E,T)}return null}function Dd(E){for(var T=0,I=null;T<o.length;)Ir(E,T)&&(I=T),T+=cs(E,T);return I}function Rd(E,T,I){if(T>=o.length)return null;do T+=cs(E,T);while(T<o.length&&!Ir(E,T));return T<o.length?{row:E,cell:T,posX:T}:null}function kc(E,T,I){if(T<=0)return null;var V=Hs(E);if(V===null||V>=T)return null;for(var j={row:E,cell:V,posX:V},Y;;){if(Y=Rd(j.row,j.cell,j.posX),!Y)return null;if(Y.cell>=T)return j;j=Y}}function Wl(E,T,I){for(var V,j=zr();;){if(++E>=j)return null;for(V=T=0;T<=I;)V=T,T+=cs(E,T);if(Ir(E,V))return{row:E,cell:V,posX:I}}}function Gf(E,T,I){for(var V;;){if(--E<0)return null;for(V=T=0;T<=I;)V=T,T+=cs(E,T);if(Ir(E,V))return{row:E,cell:V,posX:I}}}function Wf(E,T,I){if(E==null&&T==null&&(E=T=0,Ir(E,T)))return{row:E,cell:T,posX:T};var V=Rd(E,T);if(V)return V;var j=null,Y=zr();for(E===Y-1&&E--;++E<Y;)if(j=Hs(E),j!==null)return{row:E,cell:j,posX:j};return null}function Pd(E,T,I){if(E==null&&T==null&&(E=zr()-1,T=o.length-1,Ir(E,T)))return{row:E,cell:T,posX:T};for(var V,j;!V&&(V=kc(E,T),!V);){if(--E<0)return null;T=0,j=Dd(E),j!==null&&(V={row:E,cell:j,posX:j})}return V}function Ic(E,T,I){var V=Hs(E);return V===null?null:{row:E,cell:V,posX:V}}function $f(E,T,I){var V=Dd(E);return V===null?null:{row:E,cell:V,posX:V}}function Dc(){return Go("right")}function Rc(){return Go("left")}function $l(){return Go("down")}function Oa(){return Go("up")}function Pc(){return Go("next")}function Aa(){return Go("prev")}function Fd(){return Go("home")}function Md(){return Go("end")}function Go(E){if(!s.enableCellNavigation||!ce&&E!="prev"&&E!="next")return!1;if(!ve().commitCurrentEdit())return!0;ur();var T={up:-1,down:1,left:-1,right:1,prev:-1,next:1,home:-1,end:1};Ut=T[E];var I={up:Gf,down:Wl,left:kc,right:Rd,prev:Pd,next:Wf,home:Ic,end:$f},V=I[E],j=V(U,Z,Mi);if(j){if(W&&s.frozenBottom&j.row==ji())return;var Y=j.row==ji();return(!s.frozenBottom&&j.row>=ke||s.frozenBottom&&j.row<ke)&&as(j.row,j.cell,!Y&&s.emulatePagingWhenScrolling),us(rr(j.row,j.cell)),Mi=j.posX,!0}else return us(rr(U,Z)),!1}function rr(E,T){if(ct[E]){ya(E);try{return ct[E].cellNodesByColumnIdx.length>T?ct[E].cellNodesByColumnIdx[T]:null}catch{return ct[E].cellNodesByColumnIdx[T]}}return null}function Yf(E,T,I,V,j){M&&(E>ji()||E<0||T>=o.length||T<0||s.enableCellNavigation&&(as(E,T,!1),us(rr(E,T),I,V,j)))}function Fc(E,T,I){M&&(E>ji()||E<0||T>=o.length||T<0||(U=E,I||as(E,T||0,!1)))}function Ir(E,T){if(!s.enableCellNavigation||E>=zr()||E<0||T>=o.length||T<0||!o[T]||o[T].hidden)return!1;var I=r.getItemMetadata&&r.getItemMetadata(E);if(I&&typeof I.focusable<"u")return!!I.focusable;var V=I&&I.columns;return V&&V[o[T].id]&&typeof V[o[T].id].focusable<"u"?!!V[o[T].id].focusable:V&&V[T]&&typeof V[T].focusable<"u"?!!V[T].focusable:!!o[T].focusable}function Mc(E,T){if(E>=ji()||E<0||T>=o.length||T<0||!o[T]||o[T].hidden)return!1;var I=r.getItemMetadata&&r.getItemMetadata(E);if(I&&typeof I.selectable<"u")return!!I.selectable;var V=I&&I.columns&&(I.columns[o[T].id]||I.columns[T]);return V&&typeof V.selectable<"u"?!!V.selectable:!!o[T].selectable}function Nd(E,T,I,V){if(M&&Ir(E,T)&&ve().commitCurrentEdit()){as(E,T,!1);var j=rr(E,T),Y=o[T],Oe=!!(s.editable&&Y&&Y.editor&&s.suppressActiveCellChangeOnEdit);us(j,I||E===ji()||s.autoEdit,null,Oe,V),Ee||ur()}}function jf(){var E=dn(U),T=o[Z];if(Ee){if(Ee.isValueChanged()){var I=Ee.validate();if(I.valid){if(U<ji()){var V={row:U,cell:Z,editor:Ee,serializedValue:Ee.serializeValue(),prevSerializedValue:ot,execute:function(){this.editor.applyValue(E,this.serializedValue),Vl(this.row),Dt(L.onCellChange,{command:"execute",row:this.row,cell:this.cell,item:E,column:T})},undo:function(){this.editor.applyValue(E,this.prevSerializedValue),Vl(this.row),Dt(L.onCellChange,{command:"undo",row:this.row,cell:this.cell,item:E,column:T})}};s.editCommandHandler?(yr(),s.editCommandHandler(E,T,V)):(V.execute(),yr())}else{var j={};Ee.applyValue(j,Ee.serializeValue()),yr(),Dt(L.onAddNewRow,{item:j,column:T})}return!ve().isActive()}else return ce.classList.remove("invalid"),y.width(ce),ce.classList.add("invalid"),Dt(L.onValidationError,{editor:Ee,cellNode:ce,validationResults:I,row:U,cell:Z,column:T}),Ee.focus(),!1}yr()}return!0}function Ld(){return yr(),!0}function Nc(E){for(var T=[],I=o.length-1,V=0;V<E.length;V++)T.push(new Slick.Range(E[V],0,E[V],I));return T}function gl(){if(!Ni)throw new Error("SlickGrid Selection model is not set");return Ln.slice(0)}function Xf(E,T){if(!Ni)throw new Error("SlickGrid Selection model is not set");L&&L.getEditorLock&&!L.getEditorLock().isActive()&&Ni.setSelectedRanges(Nc(E),T||"SlickGrid.setSelectedRows")}var Yl=0,oi=30;function Wo(E,T){if(!s.sanitizer||typeof E!="string")return E;var I=s.sanitizer(E);return!T&&s.logSanitizedHtml&&Yl<=oi&&I!==E&&(console.log("sanitizer altered html: "+E+" --> "+I),Yl===oi&&console.log("sanitizer: silencing messages after first "+oi),Yl++),I}this.debug=function(){var E="";E+=`
counter_rows_rendered:  `+_o,E+=`
counter_rows_removed:  `+vr,E+=`
renderedRows:  `+St,E+=`
numVisibleRows:  `+Bt,E+=`
maxSupportedCssHeight:  `+t,E+=`
n(umber of pages):  `+v,E+=`
(current) page:  `+C,E+=`
page height (ph):  `+m,E+=`
vScrollDir:  `+S,alert(E)},Slick.Utils.extend(this,{slickGridVersion:"4.0.1",onScroll:new Slick.Event,onBeforeSort:new Slick.Event,onSort:new Slick.Event,onHeaderMouseEnter:new Slick.Event,onHeaderMouseLeave:new Slick.Event,onHeaderRowMouseEnter:new Slick.Event,onHeaderRowMouseLeave:new Slick.Event,onHeaderContextMenu:new Slick.Event,onHeaderClick:new Slick.Event,onHeaderCellRendered:new Slick.Event,onBeforeHeaderCellDestroy:new Slick.Event,onHeaderRowCellRendered:new Slick.Event,onFooterRowCellRendered:new Slick.Event,onFooterContextMenu:new Slick.Event,onFooterClick:new Slick.Event,onBeforeHeaderRowCellDestroy:new Slick.Event,onBeforeFooterRowCellDestroy:new Slick.Event,onMouseEnter:new Slick.Event,onMouseLeave:new Slick.Event,onClick:new Slick.Event,onDblClick:new Slick.Event,onContextMenu:new Slick.Event,onKeyDown:new Slick.Event,onAddNewRow:new Slick.Event,onBeforeAppendCell:new Slick.Event,onValidationError:new Slick.Event,onViewportChanged:new Slick.Event,onColumnsReordered:new Slick.Event,onColumnsDrag:new Slick.Event,onColumnsResized:new Slick.Event,onColumnsResizeDblClick:new Slick.Event,onBeforeColumnsResize:new Slick.Event,onCellChange:new Slick.Event,onCompositeEditorChange:new Slick.Event,onBeforeEditCell:new Slick.Event,onBeforeCellEditorDestroy:new Slick.Event,onBeforeDestroy:new Slick.Event,onActiveCellChanged:new Slick.Event,onActiveCellPositionChanged:new Slick.Event,onDragInit:new Slick.Event,onDragStart:new Slick.Event,onDrag:new Slick.Event,onDragEnd:new Slick.Event,onSelectedRowsChanged:new Slick.Event,onCellCssStylesChanged:new Slick.Event,onAutosizeColumns:new Slick.Event,onBeforeSetColumns:new Slick.Event,onBeforeUpdateColumns:new Slick.Event,onRendered:new Slick.Event,onSetOptions:new Slick.Event,registerPlugin:Ki,unregisterPlugin:Or,getPluginByName:Lo,getColumns:pa,setColumns:Rs,updateColumns:ma,getVisibleColumns:Ku,getColumnIndex:Pe,updateColumnHeader:rl,setSortColumn:Ai,setSortColumns:Di,getSortColumns:_d,autosizeColumns:vd,autosizeColumn:Sf,getOptions:Tf,setOptions:Qu,getData:Af,getDataLength:ji,getDataItem:dn,setData:Of,getSelectionModel:to,setSelectionModel:Dl,getSelectedRows:gl,setSelectedRows:Xf,getContainerNode:Ps,updatePagingStatusFromView:ba,applyFormatResultToCellNode:Ms,render:Kn,reRenderColumns:gd,invalidate:Df,invalidateRow:rc,invalidateRows:Cd,invalidateAllRows:Ji,updateCell:Bl,updateRow:Vl,getViewport:Ca,getRenderedRange:oc,resizeCanvas:Cr,updateRowCount:Bo,scrollRowIntoView:Uo,scrollRowToTop:xc,scrollCellIntoView:as,scrollColumnIntoView:Ur,getCanvasNode:Xn,getUID:nl,getHeaderColumnWidthDiff:Yi,getScrollbarDimensions:Vn,getHeadersWidth:on,getCanvasWidth:qn,getCanvases:Ar,getActiveCanvasNode:el,getViewportNode:Rl,getViewports:tl,getActiveViewportNode:Pl,setActiveViewportNode:Os,focus:ur,scrollTo:Ho,cacheCssForHiddenInit:ts,restoreCssFromHiddenInit:Ts,getCellFromPoint:xd,getCellFromEvent:Gl,getActiveCell:kd,setActiveCell:Yf,setActiveRow:Fc,getActiveCellNode:Oo,getActiveCellPosition:Sc,resetActiveCell:Sa,editActiveCell:ro,getCellEditor:Ad,getCellNode:rr,getCellNodeBox:Cc,canCellBeSelected:Mc,canCellBeActive:Ir,navigatePrev:Aa,navigateNext:Pc,navigateUp:Oa,navigateDown:$l,navigateLeft:Rc,navigateRight:Dc,navigatePageUp:Tc,navigatePageDown:xa,navigateTop:Oc,navigateBottom:Ac,navigateRowStart:Fd,navigateRowEnd:Md,gotoCell:Nd,getTopPanel:va,getTopPanels:Ju,setTopPanelVisibility:ec,getPreHeaderPanel:H,getPreHeaderPanelLeft:H,getPreHeaderPanelRight:ee,setPreHeaderPanelVisibility:Nl,getHeader:pi,getHeaderColumn:g,setHeaderRowVisibility:tc,getHeaderRow:w,getHeaderRowColumn:we,setFooterRowVisibility:ic,getFooterRow:R,getFooterRowColumn:He,getGridPosition:wc,flashCell:Hf,addCellCssStyles:Nf,setCellCssStyles:uc,removeCellCssStyles:Vo,getCellCssStyles:Lf,getFrozenRowOffset:vl,setColumnHeaderVisibility:Ml,sanitizeHtmlString:Wo,getDisplayedScrollbarDimensions:To,getAbsoluteColumnMinWidth:fd,init:Js,destroy:Ef,getEditorLock:ve,getEditController:$e}),Il()}Slick.Utils.extend(Slick,{Grid:e})})(),function(){function a(s){var l=this,u={groupItemMetadataProvider:null,inlineFilters:!1},h="id",c=[],p=[],m=new Map,v=null,_=null,C=null,x=!1,S=!1,y=new Map,D=!0,A,P,M={},B={},Q,L=[],le,_e,J=[],z=null,F={getter:null,formatter:null,comparer:function(oe,de){return oe.value===de.value?0:oe.value>de.value?1:-1},predefinedValues:[],aggregators:[],aggregateEmpty:!1,aggregateCollapsed:!1,aggregateChildGroups:!1,collapsed:!1,displayTotalsRow:!0,lazyTotalsCalculation:!1},ae=[],qe=[],De=[],xe=":|:",Te=null,Re,ne=0,fe=0,Be=0,Ye=new Slick.Event,Ve=new Slick.Event,ue=new Slick.Event,Ce=new Slick.Event,be=new Slick.Event,Le=new Slick.Event,nt=new Slick.Event,Ge=new Slick.Event,yt=new Slick.Event;s=Slick.Utils.extend(!0,{},u,s);function at(oe){x=!0,S=oe===!0}function k(){var oe=S;S=!1,x=!1,oe&&(X(),Fe()),ci()}function te(){c=[],m=null,v=null,_=null,C=null,P=null,J=[],L=[],le=null,_e=null,z&&z.onSelectedRowsChanged&&z.onCellCssStylesChanged&&(z.onSelectedRowsChanged.unsubscribe(),z.onCellCssStylesChanged.unsubscribe()),l.onRowsOrCountChanged&&l.onRowsOrCountChanged.unsubscribe()}function ge(oe){M=oe}function $(oe){Q=oe}function X(){if(m){for(var oe,de,ye=0,We=0,Je=c.length;We<Je;We++){if(de=c[We],oe=de[h],oe===void 0)throw new Error("[SlickGrid DataView] Each data element must implement a unique 'id' property");y.has(oe)?m.delete(oe):(c[ye]=de,m.set(oe,ye),++ye)}c.length=ye,y=new Map}}function re(oe){if(!(S||!m)){oe=oe||0;for(var de,ye=oe,We=c.length;ye<We;ye++){if(de=c[ye][h],de===void 0)throw new Error("[SlickGrid DataView] Each data element must implement a unique 'id' property");m.set(de,ye)}}}function Fe(){if(!(S||!m)){for(var oe,de=0,ye=c.length;de<ye;de++)if(oe=c[de][h],oe===void 0||m.get(oe)!==de)throw new Error("[SlickGrid DataView] Each data element must implement a unique 'id' property")}}function Me(){return c}function pe(){return h}function Ue(oe,de){de!==void 0&&(h=de),c=L=oe,Ve.notify({idProperty:de,itemCount:c.length},null,l),m=new Map,re(),Fe(),ci()}function ft(oe){Le.notify(ze(),null,l).getReturnValue()!==!1&&(oe.pageSize!=null&&(ne=oe.pageSize,fe=ne?Math.min(fe,Math.max(0,Math.ceil(Be/ne)-1)):0),oe.pageNum!=null&&(fe=Math.min(oe.pageNum,Math.max(0,Math.ceil(Be/ne)-1))),nt.notify(ze(),null,l),ci())}function ze(){var oe=ne?Math.max(1,Math.ceil(Be/ne)):1;return{pageSize:ne,pageNum:fe,totalRows:Be,totalPages:oe,dataView:l}}function Ne(oe,de){D=de,P=oe,A=null,de===!1&&c.reverse(),c.sort(oe),de===!1&&c.reverse(),m=new Map,re(),ci()}function Xt(oe,de){D=de,A=oe,P=null;var ye=Object.prototype.toString;Object.prototype.toString=typeof oe=="function"?oe:function(){return this[oe]},de===!1&&c.reverse(),c.sort(),Object.prototype.toString=ye,de===!1&&c.reverse(),m=new Map,re(),ci()}function It(){P?Ne(P,D):A&&Xt(A,D)}function Ci(){return L}function q(){return L.length}function W(){return _}function me(oe){_=oe,s.inlineFilters&&(le=Jn(),_e=er()),ci()}function ke(){return ae}function st(oe){s.groupItemMetadataProvider||(s.groupItemMetadataProvider=new Slick.Data.GroupItemMetadataProvider),qe=[],De=[],oe=oe||[],ae=oe instanceof Array?oe:[oe];for(var de=0;de<ae.length;de++){var ye=ae[de]=Slick.Utils.extend(!0,{},F,ae[de]);ye.getterIsAFn=typeof ye.getter=="function",ye.compiledAccumulators=[];for(var We=ye.aggregators.length;We--;)ye.compiledAccumulators[We]=go(ye.aggregators[We]);De[de]={}}ci()}function rt(oe,de,ye){if(oe==null){st([]);return}st({getter:oe,formatter:de,comparer:ye})}function ut(oe,de){if(!ae.length)throw new Error("[SlickGrid DataView] At least one grouping must be specified before calling setAggregators().");ae[0].aggregators=oe,ae[0].aggregateCollapsed=de,st(ae)}function Rt(oe){return c[oe]}function Ht(oe){return m&&m.get(oe)}function Tt(){if(!v){v={};for(var oe=0,de=p.length;oe<de;oe++)v[p[oe][h]]=oe}}function Ut(oe){return Tt(),v[oe[h]]}function Zt(oe){return Tt(),v[oe]}function Fi(oe){return c[m&&m.get(oe)]}function Mi(oe){var de=[];Tt();for(var ye=0,We=oe.length;ye<We;ye++){var Je=v[oe[ye][h]];Je!=null&&(de[de.length]=Je)}return de}function U(oe){var de=[];Tt();for(var ye=0,We=oe.length;ye<We;ye++){var Je=v[oe[ye]];Je!=null&&(de[de.length]=Je)}return de}function Z(oe){for(var de=[],ye=0,We=oe.length;ye<We;ye++)if(oe[ye]<p.length){const Je=p[oe[ye]];de[de.length]=Je&&Je[h]}return de}function ce(oe,de){if(m){if(!m.has(oe))throw new Error("[SlickGrid DataView] Invalid id");if(oe!==de[h]){var ye=de[h];if(ye==null)throw new Error("[SlickGrid DataView] Cannot update item to associate with a null id");if(m.has(ye))throw new Error("[SlickGrid DataView] Cannot update item to associate with a non-unique id");m.set(ye,m.get(oe)),m.delete(oe),C&&C[oe]&&delete C[oe],oe=ye}c[m.get(oe)]=de,C||(C={}),C[oe]=!0}}function Ee(oe,de){ce(oe,de),ci()}function ot(oe,de){if(oe.length!==de.length)throw new Error("[SlickGrid DataView] Mismatch on the length of ids and items provided to update");for(var ye=0,We=de.length;ye<We;ye++)ce(oe[ye],de[ye]);ci()}function pt(oe,de){c.splice(oe,0,de),re(oe),ci()}function ct(oe,de){Array.prototype.splice.apply(c,[oe,0].concat(de)),re(oe),ci()}function St(oe){c.push(oe),re(c.length-1),ci()}function Bt(oe){c=c.concat(oe),re(c.length-oe.length),ci()}function Ct(oe){if(m)if(S)y.set(oe,!0);else{var de=m.get(oe);if(de===void 0)throw new Error("[SlickGrid DataView] Invalid id");m.delete(oe),c.splice(de,1),re(de),ci()}}function vt(oe){if(!(oe.length===0||!m))if(S)for(var de=0,ye=oe.length;de<ye;de++){var We=oe[de],Je=m.get(We);if(Je===void 0)throw new Error("[SlickGrid DataView] Invalid id");y.set(We,!0)}else{for(var lt=[],de=0,ye=oe.length;de<ye;de++){var We=oe[de],Je=m.get(We);if(Je===void 0)throw new Error("[SlickGrid DataView] Invalid id");m.delete(We),lt.push(Je)}lt.sort();for(var de=lt.length-1;de>=0;--de)c.splice(lt[de],1);re(lt[0]),ci()}}function ti(oe){if(!P)throw new Error("[SlickGrid DataView] sortedAddItem() requires a sort comparer, use sort()");pt(Ui(oe),oe)}function ki(oe,de){if(m){if(!m.has(oe)||oe!==de[h])throw new Error("[SlickGrid DataView] Invalid or non-matching id "+m.get(oe));if(!P)throw new Error("[SlickGrid DataView] sortedUpdateItem() requires a sort comparer, use sort()");var ye=Fi(oe);P(ye,de)!==0?(Ct(oe),ti(de)):Ee(oe,de)}}function Ui(oe){for(var de=0,ye=c.length;de<ye;){var We=de+ye>>>1;P(c[We],oe)===-1?de=We+1:ye=We}return de}function Qt(){return c.length}function Ni(){return p.length}function Ln(oe){var de=p[oe];if(de&&de.__group&&de.totals&&!de.totals.initialized){var ye=ae[de.level];ye.displayTotalsRow||(vn(de.totals),de.title=ye.formatter?ye.formatter(de):de.value)}else de&&de.__groupTotals&&!de.initialized&&vn(de);return de}function mn(oe){var de=p[oe];return de===void 0?null:de.__group?s.groupItemMetadataProvider.getGroupRowMetadata(de):de.__groupTotals?s.groupItemMetadataProvider.getTotalsRowMetadata(de):null}function _t(oe,de){if(oe==null)for(var ye=0;ye<ae.length;ye++)De[ye]={},ae[ye].collapsed=de,de===!0?yt.notify({level:ye,groupingKey:null}):Ge.notify({level:ye,groupingKey:null});else De[oe]={},ae[oe].collapsed=de,de===!0?yt.notify({level:oe,groupingKey:null}):Ge.notify({level:oe,groupingKey:null});ci()}function Se(oe){_t(oe,!0)}function Xe(oe){_t(oe,!1)}function wt(oe,de,ye){De[oe][de]=ae[oe].collapsed^ye,ci()}function ii(oe){var de=Array.prototype.slice.call(arguments),ye=de[0],We,Je;de.length===1&&ye.indexOf(xe)!==-1?(We=ye,Je=ye.split(xe).length-1):(We=de.join(xe),Je=de.length-1),wt(Je,We,!0),yt.notify({level:Je,groupingKey:We})}function Gi(oe){var de=Array.prototype.slice.call(arguments),ye=de[0],We,Je;de.length===1&&ye.indexOf(xe)!==-1?(Je=ye.split(xe).length-1,We=ye):(Je=de.length-1,We=de.join(xe)),wt(Je,We,!1),Ge.notify({level:Je,groupingKey:We})}function Wi(){return qe}function Li(oe,de){for(var ye,We,Je=[],lt={},Ot,Vt=de?de.level+1:0,hi=ae[Vt],yi=0,Ei=hi.predefinedValues.length;yi<Ei;yi++)We=hi.predefinedValues[yi],ye=lt[We],ye||(ye=new Slick.Group,ye.value=We,ye.level=Vt,ye.groupingKey=(de?de.groupingKey+xe:"")+We,Je[Je.length]=ye,lt[We]=ye);for(var yi=0,Ei=oe.length;yi<Ei;yi++)Ot=oe[yi],We=hi.getterIsAFn?hi.getter(Ot):Ot[hi.getter],ye=lt[We],ye||(ye=new Slick.Group,ye.value=We,ye.level=Vt,ye.groupingKey=(de?de.groupingKey+xe:"")+We,Je[Je.length]=ye,lt[We]=ye),ye.rows[ye.count++]=Ot;if(Vt<ae.length-1)for(var yi=0;yi<Je.length;yi++)ye=Je[yi],ye.groups=Li(ye.rows,ye);return Je.length&&qt(Je,Vt),Je.sort(ae[Vt].comparer),Je}function vn(oe){var de=oe.group,ye=ae[de.level],We=de.level==ae.length,Je,lt=ye.aggregators.length;if(!We&&ye.aggregateChildGroups)for(var Ot=de.groups.length;Ot--;)de.groups[Ot].totals.initialized||vn(de.groups[Ot].totals);for(;lt--;)Je=ye.aggregators[lt],Je.init(),!We&&ye.aggregateChildGroups?ye.compiledAccumulators[lt].call(Je,de.groups):ye.compiledAccumulators[lt].call(Je,de.rows),Je.storeResult(oe);oe.initialized=!0}function Gn(oe){var de=ae[oe.level],ye=new Slick.GroupTotals;ye.group=oe,oe.totals=ye,de.lazyTotalsCalculation||vn(ye)}function qt(oe,de){de=de||0;for(var ye=ae[de],We=ye.collapsed,Je=De[de],lt=oe.length,Ot;lt--;)Ot=oe[lt],!(Ot.collapsed&&!ye.aggregateCollapsed)&&(Ot.groups&&qt(Ot.groups,de+1),ye.aggregators.length&&(ye.aggregateEmpty||Ot.rows.length||Ot.groups&&Ot.groups.length)&&Gn(Ot),Ot.collapsed=We^Je[Ot.groupingKey],Ot.title=ye.formatter?ye.formatter(Ot):Ot.value)}function $i(oe,de){de=de||0;for(var ye=ae[de],We=[],Je,lt=0,Ot,Vt=0,hi=oe.length;Vt<hi;Vt++){if(Ot=oe[Vt],We[lt++]=Ot,!Ot.collapsed){Je=Ot.groups?$i(Ot.groups,de+1):Ot.rows;for(var yi=0,Ei=Je.length;yi<Ei;yi++)We[lt++]=Je[yi]}Ot.totals&&ye.displayTotalsRow&&(!Ot.collapsed||ye.aggregateCollapsed)&&(We[lt++]=Ot.totals)}return We}function ar(oe){var de=oe.toString(),ye=de.indexOf("function")>=0,We=ye?/^function[^(]*\(([^)]*)\)\s*{([\s\S]*)}$/:/^[^(]*\(([^)]*)\)\s*{([\s\S]*)}$/,Je=oe.toString().match(We);return{params:Je[1].split(","),body:Je[2]}}function go(oe){if(oe.accumulate){var de=ar(oe.accumulate),ye=new Function("_items","for (var "+de.params[0]+", _i=0, _il=_items.length; _i<_il; _i++) {"+de.params[0]+" = _items[_i]; "+de.body+"}"),We="compiledAccumulatorLoop";return ye.displayName=We,ye.name=_o(ye,We),ye}else return function(){}}function Jn(){var oe=ar(_),de="{ continue _coreloop; }$1",ye="{ _retval[_idx++] = $item$; continue _coreloop; }$1",We=oe.body.replace(/return false\s*([;}]|\}|$)/gi,de).replace(/return!1([;}]|\}|$)/gi,de).replace(/return true\s*([;}]|\}|$)/gi,ye).replace(/return!0([;}]|\}|$)/gi,ye).replace(/return ([^;}]+?)\s*([;}]|$)/gi,"{ if ($1) { _retval[_idx++] = $item$; }; continue _coreloop; }$2"),Je=["var _retval = [], _idx = 0; ","var $item$, $args$ = _args; ","_coreloop: ","for (var _i = 0, _il = _items.length; _i < _il; _i++) { ","$item$ = _items[_i]; ","$filter$; ","} ","return _retval; "].join("");Je=Je.replace(/\$filter\$/gi,We),Je=Je.replace(/\$item\$/gi,oe.params[0]),Je=Je.replace(/\$args\$/gi,oe.params[1]);var lt=new Function("_items,_args",Je),Ot="compiledFilter";return lt.displayName=Ot,lt.name=_o(lt,Ot),lt}function er(){var oe=ar(_),de="{ continue _coreloop; }$1",ye="{ _cache[_i] = true;_retval[_idx++] = $item$; continue _coreloop; }$1",We=oe.body.replace(/return false\s*([;}]|\}|$)/gi,de).replace(/return!1([;}]|\}|$)/gi,de).replace(/return true\s*([;}]|\}|$)/gi,ye).replace(/return!0([;}]|\}|$)/gi,ye).replace(/return ([^;}]+?)\s*([;}]|$)/gi,"{ if ((_cache[_i] = $1)) { _retval[_idx++] = $item$; }; continue _coreloop; }$2"),Je=["var _retval = [], _idx = 0; ","var $item$, $args$ = _args; ","_coreloop: ","for (var _i = 0, _il = _items.length; _i < _il; _i++) { ","$item$ = _items[_i]; ","if (_cache[_i]) { ","_retval[_idx++] = $item$; ","continue _coreloop; ","} ","$filter$; ","} ","return _retval; "].join("");Je=Je.replace(/\$filter\$/gi,We),Je=Je.replace(/\$item\$/gi,oe.params[0]),Je=Je.replace(/\$args\$/gi,oe.params[1]);var lt=new Function("_items,_args,_cache",Je),Ot="compiledFilterWithCaching";return lt.displayName=Ot,lt.name=_o(lt,Ot),lt}function _o(oe,de){try{Object.defineProperty(oe,"name",{writable:!0,value:de})}catch{oe.name=de}}function vr(oe,de){for(var ye=[],We=0,Je=0,lt=oe.length;Je<lt;Je++)_(oe[Je],de)&&(ye[We++]=oe[Je]);return ye}function dr(oe,de,ye){for(var We=[],Je=0,lt,Ot=0,Vt=oe.length;Ot<Vt;Ot++)lt=oe[Ot],ye[Ot]?We[Je++]=lt:_(lt,de)&&(We[Je++]=lt,ye[Ot]=!0);return We}function Tr(oe){if(_){var de=s.inlineFilters?le:vr,ye=s.inlineFilters?_e:dr;M.isFilterNarrowing?L=de(L,Q):M.isFilterExpanding?L=ye(oe,Q,J):M.isFilterUnchanged||(L=de(oe,Q))}else L=ne?oe:oe.concat();var We;return ne?(L.length<=fe*ne&&(L.length===0?fe=0:fe=Math.floor((L.length-1)/ne)),We=L.slice(ne*fe,ne*fe+ne)):We=L,{totalRows:L.length,rows:We}}function Wn(oe,de){var ye,We,Je,lt=[],Ot=0,Vt=Math.max(de.length,oe.length);M&&M.ignoreDiffsBefore&&(Ot=Math.max(0,Math.min(de.length,M.ignoreDiffsBefore))),M&&M.ignoreDiffsAfter&&(Vt=Math.min(de.length,Math.max(0,M.ignoreDiffsAfter)));for(var hi=Ot,yi=oe.length;hi<Vt;hi++)hi>=yi?lt[lt.length]=hi:(ye=de[hi],We=oe[hi],(!ye||ae.length&&(Je=ye.__nonDataRow||We.__nonDataRow)&&ye.__group!==We.__group||ye.__group&&!ye.equals(We)||Je&&(ye.__groupTotals||We.__groupTotals)||ye[h]!=We[h]||C&&C[ye[h]])&&(lt[lt.length]=hi));return lt}function Hn(oe){v=null,(M.isFilterNarrowing!=B.isFilterNarrowing||M.isFilterExpanding!=B.isFilterExpanding)&&(J=[]);var de=Tr(oe);Be=de.totalRows;var ye=de.rows;qe=[],ae.length&&(qe=Li(ye),qe.length&&(ye=$i(qe)));var We=Wn(p,ye);return p=ye,We}function ci(){if(!x){var oe=Slick.Utils.extend(!0,{},ze()),de=p.length,ye=Be,We=Hn(c);ne&&Be<fe*ne&&(fe=Math.max(0,Math.ceil(Be/ne)-1),We=Hn(c)),C=null,B=M,M={},ye!==Be&&Le.notify(oe,null,l)!==!1&&nt.notify(ze(),null,l),de!==p.length&&ue.notify({previous:de,current:p.length,itemCount:c.length,dataView:l,callingOnRowsChanged:We.length>0},null,l),We.length>0&&Ce.notify({rows:We,itemCount:c.length,dataView:l,calledOnRowCountChanged:de!==p.length},null,l),(de!==p.length||We.length>0)&&be.notify({rowsDiff:We,previousRowCount:de,currentRowCount:p.length,itemCount:c.length,rowCountChanged:de!==p.length,rowsChanged:We.length>0,dataView:l},null,l)}}function Bn(oe,de,ye){var We=this;z=oe;var Je;Te=We.mapRowsToIds(oe.getSelectedRows());function lt(Vt){Vt===!1?Te=[]:Te.sort().join(",")!==Vt.sort().join(",")&&(Te=Vt)}function Ot(){if(Te.length>0&&!Je){Je=!0;var Vt=We.mapIdsToRows(Te);if(!de){var hi={grid:z,ids:We.mapRowsToIds(Vt),rows:Vt,dataView:We};Re(hi),Ye.notify(Object.assign(hi,{selectedRowIds:Te,filteredIds:We.getAllSelectedFilteredIds()}),new Slick.EventData,We)}oe.setSelectedRows(Vt),Je=!1}}return oe.onSelectedRowsChanged.subscribe(function(Vt,hi){if(!Je){var yi=We.mapRowsToIds(hi.rows),Ei={grid:z,ids:yi,rows:hi.rows,added:!0,dataView:We};Re(Ei),Ye.notify(Object.assign(Ei,{selectedRowIds:Te,filteredIds:We.getAllSelectedFilteredIds()}),new Slick.EventData,We)}}),Re=function(Vt){if(!Je){Je=!0;var hi=typeof Vt.added>"u";if(hi)lt(Vt.ids);else{var yi;if(Vt.added)if(ye&&oe.getOptions().multiSelect){var Ei=Te.filter(function(En){return We.getRowById(En)===void 0});yi=Ei.concat(Vt.ids)}else yi=Vt.ids;else ye&&oe.getOptions().multiSelect?yi=Te.filter(function(En){return Vt.ids.indexOf(En)===-1}):yi=[];lt(yi)}Je=!1}},this.onRowsOrCountChanged.subscribe(Ot),Ye}function Jr(){return Te}function bo(){return gr().map(function(oe){return oe[h]})}function gn(oe,de){var ye=de&&de.isRowBeingAdded,We=de&&de.shouldTriggerEvent,Je=de&&de.applyRowSelectionToGrid;ye!==!1&&(ye=!0);var lt=l.mapIdsToRows(oe),Ot={grid:z,ids:oe,rows:lt,added:ye,dataView:l};Re(Ot),We!==!1&&Ye.notify(Object.assign(Ot,{selectedRowIds:Te,filteredIds:l.getAllSelectedFilteredIds()}),new Slick.EventData,l),Je!==!1&&z&&z.setSelectedRows(lt)}function tr(){var oe=[],de=Jr();return de.forEach(function(ye){oe.push(l.getItemById(ye))}),oe}function gr(){if(!Array.isArray(Te))return[];var oe=L.filter(function(de){return Te.some(function(ye){return de[h]===ye})});return oe||[]}function _r(oe,de){var ye,We;Je(oe.getCellCssStyles(de));function Je(Ot){ye={};for(var Vt in Ot){var hi=p[Vt][h];ye[hi]=Ot[Vt]}}function lt(){if(ye){We=!0,Tt();var Ot={};for(var Vt in ye){var hi=v[Vt];hi!=null&&(Ot[hi]=ye[Vt])}oe.setCellCssStyles(de,Ot),We=!1}}oe.onCellCssStylesChanged.subscribe(function(Ot,Vt){We||de==Vt.key&&(Vt.hash?Je(Vt.hash):(oe.onCellCssStylesChanged.unsubscribe(),l.onRowsOrCountChanged.unsubscribe(lt)))}),this.onRowsOrCountChanged.subscribe(lt)}Slick.Utils.extend(this,{beginUpdate:at,endUpdate:k,destroy:te,setPagingOptions:ft,getPagingInfo:ze,getIdPropertyName:pe,getItems:Me,setItems:Ue,setFilter:me,getFilter:W,getFilteredItems:Ci,getFilteredItemCount:q,sort:Ne,fastSort:Xt,reSort:It,setGrouping:st,getGrouping:ke,groupBy:rt,setAggregators:ut,collapseAllGroups:Se,expandAllGroups:Xe,collapseGroup:ii,expandGroup:Gi,getGroups:Wi,getAllSelectedIds:Jr,getAllSelectedItems:tr,getAllSelectedFilteredIds:bo,getAllSelectedFilteredItems:gr,setSelectedIds:gn,getIdxById:Ht,getRowByItem:Ut,getRowById:Zt,getItemById:Fi,getItemByIdx:Rt,mapItemsToRows:Mi,mapRowsToIds:Z,mapIdsToRows:U,setRefreshHints:ge,setFilterArgs:$,refresh:ci,updateItem:Ee,updateItems:ot,insertItem:pt,insertItems:ct,addItem:St,addItems:Bt,deleteItem:Ct,deleteItems:vt,sortedAddItem:ti,sortedUpdateItem:ki,syncGridSelection:Bn,syncGridCellCssStyles:_r,getItemCount:Qt,getLength:Ni,getItem:Ln,getItemMetadata:mn,onSelectedRowIdsChanged:Ye,onSetItemsCalled:Ve,onRowCountChanged:ue,onRowsChanged:Ce,onRowsOrCountChanged:be,onBeforePagingInfoChanged:Le,onPagingInfoChanged:nt,onGroupExpanded:Ge,onGroupCollapsed:yt})}function t(s){this.field_=s,this.init=function(){this.count_=0,this.nonNullCount_=0,this.sum_=0},this.accumulate=function(l){var u=l[this.field_];this.count_++,u!=null&&u!==""&&!isNaN(u)&&(this.nonNullCount_++,this.sum_+=parseFloat(u))},this.storeResult=function(l){l.avg||(l.avg={}),this.nonNullCount_!==0&&(l.avg[this.field_]=this.sum_/this.nonNullCount_)}}function e(s){this.field_=s,this.init=function(){this.min_=null},this.accumulate=function(l){var u=l[this.field_];u!=null&&u!==""&&!isNaN(u)&&(this.min_==null||u<this.min_)&&(this.min_=u)},this.storeResult=function(l){l.min||(l.min={}),l.min[this.field_]=this.min_}}function n(s){this.field_=s,this.init=function(){this.max_=null},this.accumulate=function(l){var u=l[this.field_];u!=null&&u!==""&&!isNaN(u)&&(this.max_==null||u>this.max_)&&(this.max_=u)},this.storeResult=function(l){l.max||(l.max={}),l.max[this.field_]=this.max_}}function r(s){this.field_=s,this.init=function(){this.sum_=null},this.accumulate=function(l){var u=l[this.field_];u!=null&&u!==""&&!isNaN(u)&&(this.sum_+=parseFloat(u))},this.storeResult=function(l){l.sum||(l.sum={}),l.sum[this.field_]=this.sum_}}function o(s){this.field_=s,this.init=function(){},this.storeResult=function(l){l.count||(l.count={}),l.count[this.field_]=l.group.rows.length}}Slick.Utils.extend(!0,Slick,{Data:{DataView:a,Aggregators:{Avg:t,Min:e,Max:n,Sum:r,Count:o}}})}();const Rv=$s||ps;class oy{get eventHandler(){return this._eventHandler}get gridUid(){var t,e;return(e=(t=this.grid)===null||t===void 0?void 0:t.getUID())!==null&&e!==void 0?e:""}get gridUidSelector(){return this.gridUid?`.${this.gridUid}`:""}get gridOptions(){return this.grid&&this.grid.getOptions?this.grid.getOptions():{}}get locales(){var t,e;return(e=(t=this.gridOptions)===null||t===void 0?void 0:t.locales)!==null&&e!==void 0?e:je.locales}set metrics(t){this.renderMetrics(t)}get leftFooterText(){var t,e;return(e=(t=document.querySelector(`.slick-custom-footer${this.gridUidSelector} .left-footer`))===null||t===void 0?void 0:t.textContent)!==null&&e!==void 0?e:""}set leftFooterText(t){this.renderLeftFooterText(t)}get rightFooterText(){var t,e;return(e=(t=document.querySelector(`.slick-custom-footer${this.gridUidSelector} .right-footer`))===null||t===void 0?void 0:t.textContent)!==null&&e!==void 0?e:""}set rightFooterText(t){this.renderRightFooterText(t)}constructor(t,e,n,r){var o,s,l,u,h,c,p;if(this.grid=t,this.customFooterOptions=e,this.pubSubService=n,this.translaterService=r,this._enableTranslate=!1,this._isLeftFooterOriginallyEmpty=!0,this._isLeftFooterDisplayingSelectionRowCount=!1,this._isRightFooterOriginallyEmpty=!0,this._selectedRowCount=0,this._subscriptions=[],this._bindingHelper=new mv,this._bindingHelper.querySelectorPrefix=`.${this.gridUid} `,this._eventHandler=new Slick.EventHandler,this._enableTranslate=(s=(o=this.gridOptions)===null||o===void 0?void 0:o.enableTranslate)!==null&&s!==void 0?s:!1,this._isLeftFooterOriginallyEmpty=!(!((l=this.gridOptions.customFooterOptions)===null||l===void 0)&&l.leftFooterText),this._isRightFooterOriginallyEmpty=!(!((u=this.gridOptions.customFooterOptions)===null||u===void 0)&&u.rightFooterText),this.registerOnSelectedRowsChangedWhenEnabled(e),this._enableTranslate&&(!this.translaterService||!this.translaterService.translate))throw new Error('[Slickgrid-Universal] requires a Translate Service to be installed and configured when the grid option "enableTranslate" is enabled.');if(this.translateCustomFooterTexts(),this._enableTranslate&&(!((h=this.pubSubService)===null||h===void 0)&&h.subscribe)){const m=(p=(c=this.translaterService)===null||c===void 0?void 0:c.eventName)!==null&&p!==void 0?p:"onLanguageChange";this._subscriptions.push(this.pubSubService.subscribe(m,()=>this.translateCustomFooterTexts()))}}dispose(){var t;this._eventHandler.unsubscribeAll(),this.pubSubService.unsubscribeAll(this._subscriptions),this._bindingHelper.dispose(),(t=this._footerElement)===null||t===void 0||t.remove()}renderFooter(t){this.translateCustomFooterTexts(),this.createFooterContainer(t)}renderMetrics(t){var e;const n=Rv(t.endTime).format(this.customFooterOptions.dateFormat);this._bindingHelper.setElementAttributeValue("span.last-update-timestamp","textContent",n),this._bindingHelper.setElementAttributeValue("span.item-count","textContent",t.itemCount),this._bindingHelper.setElementAttributeValue("span.total-count","textContent",t.totalItemCount),!((e=this.customFooterOptions.metricTexts)===null||e===void 0)&&e.lastUpdate&&this._bindingHelper.addElementBinding(this.customFooterOptions.metricTexts,"lastUpdate","span.text-last-update","textContent"),this._bindingHelper.addElementBinding(this.customFooterOptions.metricTexts,"items","span.text-items","textContent"),this._bindingHelper.addElementBinding(this.customFooterOptions.metricTexts,"of","span.text-of","textContent")}renderLeftFooterText(t){this._bindingHelper.setElementAttributeValue("div.left-footer","textContent",t)}renderRightFooterText(t){this._bindingHelper.setElementAttributeValue("div.right-footer","textContent",t)}translateCustomFooterTexts(){var t,e,n,r,o;if(this.gridOptions.enableTranslate&&(!((t=this.translaterService)===null||t===void 0)&&t.translate)){this.customFooterOptions.metricTexts=this.customFooterOptions.metricTexts||{};for(const s of Object.keys(this.customFooterOptions.metricTexts))if(s.lastIndexOf("Key")>0){const l=s.substring(0,s.lastIndexOf("Key"));this.customFooterOptions.metricTexts[l]=this.translaterService.translate(this.customFooterOptions.metricTexts[s]||" ")}this._isLeftFooterDisplayingSelectionRowCount&&(this.leftFooterText=`${this._selectedRowCount} ${this.customFooterOptions.metricTexts.itemsSelected}`)}else this.locales&&(this.customFooterOptions.metricTexts=this.customFooterOptions.metricTexts||{},this.customFooterOptions.metricTexts.lastUpdate=this.customFooterOptions.metricTexts.lastUpdate||((e=this.locales)===null||e===void 0?void 0:e.TEXT_LAST_UPDATE)||"TEXT_LAST_UPDATE",this.customFooterOptions.metricTexts.items=this.customFooterOptions.metricTexts.items||((n=this.locales)===null||n===void 0?void 0:n.TEXT_ITEMS)||"TEXT_ITEMS",this.customFooterOptions.metricTexts.itemsSelected=this.customFooterOptions.metricTexts.itemsSelected||((r=this.locales)===null||r===void 0?void 0:r.TEXT_ITEMS_SELECTED)||"TEXT_ITEMS_SELECTED",this.customFooterOptions.metricTexts.of=this.customFooterOptions.metricTexts.of||((o=this.locales)===null||o===void 0?void 0:o.TEXT_OF)||"TEXT_OF")}createFooterContainer(t){const e=Ie("div",{className:`slick-custom-footer ${this.gridUid}`,style:{width:"100%",height:`${this.customFooterOptions.footerHeight||20}px`}});e.appendChild(Ie("div",{className:`left-footer ${this.customFooterOptions.leftContainerClass}`,innerHTML:Mn(this.gridOptions,this.customFooterOptions.leftFooterText||"")})),e.appendChild(this.createFooterRightContainer()),this._footerElement=e,t!=null&&t.appendChild&&this._footerElement&&t.appendChild(this._footerElement)}createFooterRightContainer(){var t,e,n,r,o,s,l,u;const h=Ie("div",{className:`right-footer ${this.customFooterOptions.rightContainerClass||""}`});if(!this._isRightFooterOriginallyEmpty)h.innerHTML=Mn(this.gridOptions,this.customFooterOptions.rightFooterText||"");else if(!this.customFooterOptions.hideMetrics){h.classList.add("metrics");const c=Ie("span",{className:"timestamp"},h);if(!this.customFooterOptions.hideLastUpdateTimestamp){const p=this.createFooterLastUpdate();p&&c.appendChild(p)}h.appendChild(Ie("span",{className:"item-count",textContent:`${(e=(t=this.metrics)===null||t===void 0?void 0:t.itemCount)!==null&&e!==void 0?e:"0"}`})),this.customFooterOptions.hideTotalItemCount||(h.appendChild(document.createTextNode(`\r
`)),h.appendChild(Ie("span",{className:"text-of",textContent:` ${(r=(n=this.customFooterOptions.metricTexts)===null||n===void 0?void 0:n.of)!==null&&r!==void 0?r:"of"} `})),h.appendChild(document.createTextNode(`\r
`)),h.appendChild(Ie("span",{className:"total-count",textContent:`${(s=(o=this.metrics)===null||o===void 0?void 0:o.totalItemCount)!==null&&s!==void 0?s:"0"}`}))),h.appendChild(document.createTextNode(`\r
`)),h.appendChild(Ie("span",{className:"text-items",textContent:` ${(u=(l=this.customFooterOptions.metricTexts)===null||l===void 0?void 0:l.items)!==null&&u!==void 0?u:"items"} `}))}return h}createFooterLastUpdate(){var t,e,n,r;const o=(n=(e=(t=this.customFooterOptions)===null||t===void 0?void 0:t.metricTexts)===null||e===void 0?void 0:e.lastUpdate)!==null&&n!==void 0?n:"Last Update",s=Rv((r=this.metrics)===null||r===void 0?void 0:r.endTime).format(this.customFooterOptions.dateFormat),l=Ie("span");return l.appendChild(Ie("span",{className:"text-last-update",textContent:o})),l.appendChild(document.createTextNode(`\r
`)),l.appendChild(Ie("span",{className:"last-update-timestamp",textContent:s})),l.appendChild(Ie("span",{className:"separator",textContent:` ${this.customFooterOptions.metricSeparator||""} `})),l}registerOnSelectedRowsChangedWhenEnabled(t){var e,n,r,o;if((this.gridOptions.enableCheckboxSelector||this.gridOptions.enableRowSelection)&&t&&!t.hideRowSelectionCount&&this._isLeftFooterOriginallyEmpty){this._isLeftFooterDisplayingSelectionRowCount=!0;const l=(o=(n=(e=t.metricTexts)===null||e===void 0?void 0:e.itemsSelected)!==null&&n!==void 0?n:(r=this.locales)===null||r===void 0?void 0:r.TEXT_ITEMS_SELECTED)!==null&&o!==void 0?o:"TEXT_ITEMS_SELECTED";t.leftFooterText=`0 ${l}`,this._eventHandler.subscribe(this.grid.onSelectedRowsChanged,(u,h)=>{var c,p,m,v;this._selectedRowCount=h.rows.length;const _=(v=(p=(c=t.metricTexts)===null||c===void 0?void 0:c.itemsSelected)!==null&&p!==void 0?p:(m=this.locales)===null||m===void 0?void 0:m.TEXT_ITEMS_SELECTED)!==null&&v!==void 0?v:"TEXT_ITEMS_SELECTED";this.leftFooterText=`${this._selectedRowCount} ${_}`})}}}class sy{constructor(){this.dependencies=[]}get(t){const e=this.dependencies.find(n=>n.key===t);return e!=null&&e.instance?e.instance:null}dispose(){this.dependencies=[]}registerInstance(t,e){this.dependencies.some(r=>r.key===t)||this.dependencies.push({key:t,instance:e})}}var Cf;const ly=(Cf=la==null?void 0:Gt)!==null&&Cf!==void 0?Cf:la;window.Sortable=ly;class Pv{get eventHandler(){return this._eventHandler}get columnDefinitions(){return this._columnDefinitions||[]}set columnDefinitions(t){this._columnDefinitions=t,this._slickgridInitialized&&this.updateColumnDefinitionsList(this._columnDefinitions),t.length>0&&this.copyColumnWidthsReference(t)}get dataset(){var t;return((t=this.dataView)===null||t===void 0?void 0:t.getItems())||[]}set dataset(t){var e,n;const r=this._currentDatasetLength,o=Jo(t,this.dataset||[]);let l=!!(!((e=this._gridOptions)===null||e===void 0)&&e.enableDeepCopyDatasetOnPageLoad)?uo(t||[]):t;this.slickGrid&&(!((n=this.gridOptions)===null||n===void 0)&&n.enableTreeData)&&Array.isArray(t)&&(t.length>0||t.length!==r||!o)&&(this._isDatasetHierarchicalInitialized=!1,l=this.sortTreeDataset(t,!o)),this.refreshGridData(l||[]),this._currentDatasetLength=(t||[]).length,this.slickGrid&&this.gridOptions.autoFitColumnsOnFirstLoad&&r===0&&this.slickGrid.autosizeColumns()}get datasetHierarchical(){return this.sharedService.hierarchicalDataset}set datasetHierarchical(t){var e,n;const r=Jo(t,this.sharedService.hierarchicalDataset||[]),o=this._currentDatasetLength;this.sharedService.hierarchicalDataset=t,t&&this.columnDefinitions&&(!((e=this.filterService)===null||e===void 0)&&e.clearFilters)&&this.filterService.clearFilters(),this.dataView&&t&&this.slickGrid&&(!((n=this.sortService)===null||n===void 0)&&n.processTreeDataInitialSort)&&(this.sortService.processTreeDataInitialSort(),setTimeout(()=>{var s,l;const u=(l=(s=this.dataView)===null||s===void 0?void 0:s.getItemCount())!==null&&l!==void 0?l:0;u>0&&(u!==o||!r)&&this.filterService.refreshTreeDataFilters()})),this._isDatasetHierarchicalInitialized=!0}set eventPubSubService(t){this._eventPubSubService=t}get gridOptions(){return this._gridOptions||{}}set gridOptions(t){var e,n,r;let o;!((e=this.slickGrid)===null||e===void 0)&&e.getOptions?o=Slick.Utils.extend(!0,{},this.slickGrid.getOptions(),t):o=this.mergeGridOptions(t),!((n=this.sharedService)===null||n===void 0)&&n.gridOptions&&(!((r=this.slickGrid)===null||r===void 0)&&r.setOptions)&&(this.sharedService.gridOptions=o,this.slickGrid.setOptions(o,!1,!0),this.slickGrid.reRenderColumns(!0)),this._gridOptions=o}get paginationOptions(){return this._paginationOptions}set paginationOptions(t){var e;t&&this._paginationOptions?this._paginationOptions={...this._paginationOptions,...t}:this._paginationOptions=t,this.gridOptions.pagination=this._paginationOptions,this.paginationService.updateTotalItems((e=t==null?void 0:t.totalItems)!==null&&e!==void 0?e:0,!0)}get isDatasetInitialized(){return this._isDatasetInitialized}set isDatasetInitialized(t){this._isDatasetInitialized=t}get isGridInitialized(){return this._isGridInitialized}get instances(){return this._slickerGridInstances}get extensions(){return this._extensions}get registeredResources(){return this._registeredResources}constructor(t,e,n,r,o,s){var l,u,h,c,p,m,v,_,C,x,S,y,D,A,P,M,B,Q,L,le;if(this._currentDatasetLength=0,this._hideHeaderRowAfterPageLoad=!1,this._isDatasetInitialized=!1,this._isDatasetHierarchicalInitialized=!1,this._isGridInitialized=!1,this._isLocalGrid=!0,this._isPaginationInitialized=!1,this._registeredResources=[],this._slickgridInitialized=!1,this.customDataView=!1,this.totalItems=0,this.subscriptions=[],this.showPagination=!1,t.querySelectorAll(".slickgrid-container").length!==0)return;t.classList.add("grid-pane"),this._gridParentContainerElm=t,this._gridContainerElm=document.createElement("div"),this._gridContainerElm.classList.add("slickgrid-container"),t.appendChild(this._gridContainerElm),this._hideHeaderRowAfterPageLoad=(n==null?void 0:n.showHeaderRow)===!1,this._columnDefinitions=e||[],this._columnDefinitions.length>0&&this.copyColumnWidthsReference(this._columnDefinitions),this._gridOptions=this.mergeGridOptions(n||{});const _e=!!(!((l=this._gridOptions)===null||l===void 0)&&l.enableDeepCopyDatasetOnPageLoad);this.universalContainerService=(u=s==null?void 0:s.universalContainerService)!==null&&u!==void 0?u:new sy,this.translaterService=(h=s==null?void 0:s.translaterService)!==null&&h!==void 0?h:this._gridOptions.translater,this._eventPubSubService=(c=s==null?void 0:s.eventPubSubService)!==null&&c!==void 0?c:new Mp(t),this._eventPubSubService.eventNamingStyle=(m=(p=this._gridOptions)===null||p===void 0?void 0:p.eventNamingStyle)!==null&&m!==void 0?m:Do.camelCase;const J=new BC;this.backendUtilityService=(v=s==null?void 0:s.backendUtilityService)!==null&&v!==void 0?v:new Ep,this.gridEventService=(_=s==null?void 0:s.gridEventService)!==null&&_!==void 0?_:new N0,this.sharedService=(C=s==null?void 0:s.sharedService)!==null&&C!==void 0?C:new j0,this.collectionService=(x=s==null?void 0:s.collectionService)!==null&&x!==void 0?x:new Bp(this.translaterService),this.extensionUtility=(S=s==null?void 0:s.extensionUtility)!==null&&S!==void 0?S:new R_(this.sharedService,this.backendUtilityService,this.translaterService),this.filterFactory=new Mb(J,this.translaterService,this.collectionService),this.filterService=(y=s==null?void 0:s.filterService)!==null&&y!==void 0?y:new F0(this.filterFactory,this._eventPubSubService,this.sharedService,this.backendUtilityService),this.resizerService=(D=s==null?void 0:s.resizerService)!==null&&D!==void 0?D:new Y0(this._eventPubSubService),this.sortService=(A=s==null?void 0:s.sortService)!==null&&A!==void 0?A:new X0(this.sharedService,this._eventPubSubService,this.backendUtilityService),this.treeDataService=(P=s==null?void 0:s.treeDataService)!==null&&P!==void 0?P:new q0(this._eventPubSubService,this.sharedService,this.sortService),this.paginationService=(M=s==null?void 0:s.paginationService)!==null&&M!==void 0?M:new B0(this._eventPubSubService,this.sharedService,this.backendUtilityService),this.extensionService=(B=s==null?void 0:s.extensionService)!==null&&B!==void 0?B:new w0(this.extensionUtility,this.filterService,this._eventPubSubService,this.sharedService,this.sortService,this.treeDataService,this.translaterService),this.gridStateService=(Q=s==null?void 0:s.gridStateService)!==null&&Q!==void 0?Q:new L0(this.extensionService,this.filterService,this._eventPubSubService,this.sharedService,this.sortService,this.treeDataService),this.gridService=(L=s==null?void 0:s.gridService)!==null&&L!==void 0?L:new M0(this.gridStateService,this.filterService,this._eventPubSubService,this.paginationService,this.sharedService,this.sortService,this.treeDataService),this.groupingService=(le=s==null?void 0:s.groupingAndColspanService)!==null&&le!==void 0?le:new H0(this.extensionUtility,this._eventPubSubService),o&&(this.sharedService.hierarchicalDataset=(_e?uo(o||[]):o)||[]);const z=new Slick.EventHandler;this.universalContainerService.registerInstance("PubSubService",this._eventPubSubService),this.universalContainerService.registerInstance("EventPubSubService",this._eventPubSubService),this.universalContainerService.registerInstance("ExtensionUtility",this.extensionUtility),this.universalContainerService.registerInstance("FilterService",this.filterService),this.universalContainerService.registerInstance("CollectionService",this.collectionService),this.universalContainerService.registerInstance("ExtensionService",this.extensionService),this.universalContainerService.registerInstance("GridEventService",this.gridEventService),this.universalContainerService.registerInstance("GridService",this.gridService),this.universalContainerService.registerInstance("GridStateService",this.gridStateService),this.universalContainerService.registerInstance("GroupingAndColspanService",this.groupingService),this.universalContainerService.registerInstance("PaginationService",this.paginationService),this.universalContainerService.registerInstance("ResizerService",this.resizerService),this.universalContainerService.registerInstance("SharedService",this.sharedService),this.universalContainerService.registerInstance("SortService",this.sortService),this.universalContainerService.registerInstance("TranslaterService",this.translaterService),this.universalContainerService.registerInstance("TreeDataService",this.treeDataService),this.initialization(this._gridContainerElm,z),!o&&!this.gridOptions.backendServiceApi&&(this.dataset=r||[],this._currentDatasetLength=this.dataset.length)}emptyGridContainerElm(){var t,e;const n=(e=(t=this.gridOptions)===null||t===void 0?void 0:t.gridContainerId)!==null&&e!==void 0?e:"grid1",r=document.querySelector(`#${n}`);sn(r)}dispose(t=!1){var e,n,r,o,s,l,u,h,c,p,m,v,_,C,x,S,y,D,A,P,M,B,Q,L,le;if((e=this._eventPubSubService)===null||e===void 0||e.publish("onBeforeGridDestroy",this.slickGrid),(n=this._eventHandler)===null||n===void 0||n.unsubscribeAll(),(r=this._eventPubSubService)===null||r===void 0||r.publish("onAfterGridDestroyed",!0),(o=this.extensionService)===null||o===void 0||o.dispose(),(s=this.filterService)===null||s===void 0||s.dispose(),(l=this.gridEventService)===null||l===void 0||l.dispose(),(u=this.gridService)===null||u===void 0||u.dispose(),(h=this.gridStateService)===null||h===void 0||h.dispose(),(c=this.groupingService)===null||c===void 0||c.dispose(),(p=this.paginationService)===null||p===void 0||p.dispose(),(m=this.resizerService)===null||m===void 0||m.dispose(),(v=this.sortService)===null||v===void 0||v.dispose(),(_=this.treeDataService)===null||_===void 0||_.dispose(),(C=this.universalContainerService)===null||C===void 0||C.dispose(),Array.isArray(this._registeredResources)){for(;this._registeredResources.length>0;){const _e=this._registeredResources.pop();_e!=null&&_e.dispose&&_e.dispose()}this._registeredResources=[]}if((x=this.slickFooter)===null||x===void 0||x.dispose(),(S=this.slickEmptyWarning)===null||S===void 0||S.dispose(),(y=this.slickPagination)===null||y===void 0||y.dispose(),Wd(this.subscriptions),(D=this._eventPubSubService)===null||D===void 0||D.unsubscribeAll(),(A=this.dataView)===null||A===void 0||A.setItems([]),typeof((P=this.dataView)===null||P===void 0?void 0:P.destroy)=="function"&&((M=this.dataView)===null||M===void 0||M.destroy()),(B=this.slickGrid)===null||B===void 0||B.destroy(!0),this.slickGrid=null,sn(this._gridContainerElm),sn(this._gridParentContainerElm),(Q=this._gridContainerElm)===null||Q===void 0||Q.remove(),(L=this._gridParentContainerElm)===null||L===void 0||L.remove(),this.backendServiceApi){for(const _e of Object.keys(this.backendServiceApi))this.backendServiceApi[_e]=null;this.backendServiceApi=void 0}for(const _e of Object.keys(this.columnDefinitions))this.columnDefinitions[_e]=null;for(const _e of Object.keys(this.sharedService))this.sharedService[_e]=null;this.datasetHierarchical=void 0,this._columnDefinitions=[],t&&this.emptyGridContainerElm(),(le=this._eventPubSubService)===null||le===void 0||le.dispose(),this._slickerGridInstances=null}initialization(t,e){var n,r,o,s,l,u,h,c,p,m,v,_,C,x,S,y,D,A,P,M,B,Q,L,le,_e;if(this.gridOptions&&(this.gridOptions.frozenRow!==void 0&&this.gridOptions.frozenRow>=0||this.gridOptions.frozenColumn!==void 0&&this.gridOptions.frozenColumn>=0)&&this.gridOptions.enableMouseWheelScrollHandler===void 0&&(this.gridOptions.enableMouseWheelScrollHandler=!0),this._gridContainerElm=t,this._eventPubSubService.publish("onBeforeGridCreate",!0),this._eventHandler=e,this._gridOptions=this.mergeGridOptions(this._gridOptions||{}),this.backendServiceApi=(n=this._gridOptions)===null||n===void 0?void 0:n.backendServiceApi,this._isLocalGrid=!this.backendServiceApi,this._eventPubSubService.eventNamingStyle=(o=(r=this._gridOptions)===null||r===void 0?void 0:r.eventNamingStyle)!==null&&o!==void 0?o:Do.camelCase,this._paginationOptions=(s=this.gridOptions)===null||s===void 0?void 0:s.pagination,this.createBackendApiInternalPostProcessCallback(this._gridOptions),!this.customDataView){let ae={inlineFilters:(h=(u=(l=this._gridOptions)===null||l===void 0?void 0:l.dataView)===null||u===void 0?void 0:u.inlineFilters)!==null&&h!==void 0?h:!1};(this.gridOptions.draggableGrouping||this.gridOptions.enableGrouping)&&(this.groupItemMetadataProvider=new Mm,this.sharedService.groupItemMetadataProvider=this.groupItemMetadataProvider,ae={...ae,groupItemMetadataProvider:this.groupItemMetadataProvider}),this.dataView=new Slick.Data.DataView(ae),this._eventPubSubService.publish("onDataviewCreated",this.dataView)}this.preRegisterResources(),this._columnDefinitions=this.swapInternalEditorToSlickGridFactoryEditor(this._columnDefinitions||[]),this._gridOptions.autoAddCustomEditorFormatter&&cm(this._columnDefinitions,this._gridOptions.autoAddCustomEditorFormatter),this.sharedService.allColumns=this._columnDefinitions,this.sharedService.visibleColumns=this._columnDefinitions,this.extensionService.createExtensionsBeforeGridCreation(this._columnDefinitions,this._gridOptions),!((c=this.gridOptions.presets)===null||c===void 0)&&c.pinning&&(this.gridOptions={...this.gridOptions,...this.gridOptions.presets.pinning}),this.slickGrid=new Slick.Grid(t,this.dataView,this._columnDefinitions,this._gridOptions),this.sharedService.dataView=this.dataView,this.sharedService.slickGrid=this.slickGrid,this.sharedService.gridContainerElement=this._gridContainerElm,this.extensionService.bindDifferentExtensions(),this.bindDifferentHooks(this.slickGrid,this._gridOptions,this.dataView),this._slickgridInitialized=!0;const J=(m=(p=this._gridOptions)===null||p===void 0?void 0:p.frozenColumn)!==null&&m!==void 0?m:-1;if(J>=0&&J<=this._columnDefinitions.length&&this._columnDefinitions.length>0&&(this.sharedService.frozenVisibleColumnId=(_=(v=this._columnDefinitions[J])===null||v===void 0?void 0:v.id)!==null&&_!==void 0?_:""),this.registerResources(),this.slickGrid.init(),this.resizerService.init(this.slickGrid,this._gridParentContainerElm),!this.gridOptions.enablePagination&&this.gridOptions.showCustomFooter&&this.gridOptions.customFooterOptions&&(this.slickFooter=new oy(this.slickGrid,this.gridOptions.customFooterOptions,this._eventPubSubService,this.translaterService),this.slickFooter.renderFooter(this._gridParentContainerElm)),Array.isArray(this.dataset)){const F=!((C=this.gridOptions)===null||C===void 0)&&C.enableTreeData?this.sortTreeDataset(this.dataset):this.dataset;(x=this.dataView)===null||x===void 0||x.setItems(F,this._gridOptions.datasetIdPropertyName)}if(((y=(S=this.slickGrid)===null||S===void 0?void 0:S.getSelectionModel)===null||y===void 0?void 0:y.call(S))&&(!((D=this._gridOptions)===null||D===void 0)&&D.dataView)&&this._gridOptions.dataView.hasOwnProperty("syncGridSelection")){let F=!1;this._gridOptions.backendServiceApi&&this._gridOptions.dataView.hasOwnProperty("syncGridSelectionWithBackendService")&&(F=this._gridOptions.dataView.syncGridSelectionWithBackendService);const ae=this._gridOptions.dataView.syncGridSelection;if(typeof ae=="boolean"){let qe=ae;this._isLocalGrid||(qe=ae&&F),(A=this.dataView)===null||A===void 0||A.syncGridSelection(this.slickGrid,qe)}else typeof ae=="object"&&((P=this.dataView)===null||P===void 0||P.syncGridSelection(this.slickGrid,ae.preserveHidden,ae.preserveHiddenOnSelectionChange))}this.slickGrid.invalidate(),((B=(M=this.dataView)===null||M===void 0?void 0:M.getLength())!==null&&B!==void 0?B:0)>0&&(!this._isDatasetInitialized&&(this._gridOptions.enableCheckboxSelector||this._gridOptions.enableRowSelection)&&this.loadRowSelectionPresetWhenExists(),this.loadFilterPresetsWhenDatasetInitialized(),this._isDatasetInitialized=!0),this._hideHeaderRowAfterPageLoad&&(this.showHeaderRow(!1),this.sharedService.hideHeaderRowAfterPageLoad=this._hideHeaderRowAfterPageLoad),this.gridEventService.bindOnBeforeEditCell(this.slickGrid),this.gridEventService.bindOnCellChange(this.slickGrid),this.gridEventService.bindOnClick(this.slickGrid),!((Q=this.gridOptions)===null||Q===void 0)&&Q.backendServiceApi&&this.bindBackendCallbackFunctions(this.gridOptions),this._eventPubSubService.publish("onGridCreated",this.slickGrid),this.customDataView||this.executeAfterDataviewCreated(this.gridOptions),this.bindResizeHook(this.slickGrid,this.gridOptions),this._slickerGridInstances={dataView:this.dataView,slickGrid:this.slickGrid,dispose:this.dispose.bind(this),backendService:(le=(L=this.gridOptions)===null||L===void 0?void 0:L.backendServiceApi)===null||le===void 0?void 0:le.service,eventPubSubService:this._eventPubSubService,filterService:this.filterService,gridEventService:this.gridEventService,gridStateService:this.gridStateService,gridService:this.gridService,groupingService:this.groupingService,extensionService:this.extensionService,extensionUtility:this.extensionUtility,paginationService:this.paginationService,resizerService:this.resizerService,sortService:this.sortService,treeDataService:this.treeDataService},this._extensions=(_e=this.extensionService)===null||_e===void 0?void 0:_e.extensionList,this._eventPubSubService.publish("onSlickerGridCreated",this.instances),this._isGridInitialized=!0}mergeGridOptions(t){const e=Slick.Utils.extend(!0,{},uf,t);return e.enableFiltering&&!e.showHeaderRow&&(e.showHeaderRow=e.enableFiltering),e!=null&&e.pagination&&(t.enablePagination||t.backendServiceApi)&&t.pagination&&Array.isArray(t.pagination.pageSizes)&&(e.pagination.pageSizes=t.pagination.pageSizes),this.sharedService&&!e.enableFiltering&&e.enablePagination&&this._isLocalGrid&&(e.enableFiltering=!0,e.showHeaderRow=!1,this._hideHeaderRowAfterPageLoad=!0,this.sharedService.hideHeaderRowAfterPageLoad=!0),e}createBackendApiInternalPostProcessCallback(t){const e=t==null?void 0:t.backendServiceApi;if(e!=null&&e.service){const n=e.service;typeof n.getDatasetName=="function"&&(e.internalPostProcess=r=>{const o=e&&n&&typeof n.getDatasetName=="function"?n.getDatasetName():"";if(r&&r.data&&r.data[o]){const s=r.data[o].hasOwnProperty("nodes")?r.data[o].nodes:r.data[o],l=r.data[o].hasOwnProperty("totalCount")?r.data[o].totalCount:r.data[o].length;this.refreshGridData(s,l||0)}})}}bindDifferentHooks(t,e,n){var r,o;if(e.enableTranslate&&(!((r=this.translaterService)===null||r===void 0)&&r.addPubSubMessaging)&&this.translaterService.addPubSubMessaging(this._eventPubSubService),e.enableTranslate&&(this.extensionService.translateAllExtensions(),this.translateColumnHeaderTitleKeys(),this.translateColumnGroupKeys()),this.subscriptions.push(this._eventPubSubService.subscribe("onLanguageChange",()=>{e.enableTranslate&&(this.extensionService.translateAllExtensions(),this.translateColumnHeaderTitleKeys(),this.translateColumnGroupKeys(),e.createPreHeaderPanel&&!e.enableDraggableGrouping&&this.groupingService.translateGroupingAndColSpan())})),e.backendServiceApi){const s=e.backendServiceApi;!((o=s==null?void 0:s.service)===null||o===void 0)&&o.init&&s.service.init(s.options,e.pagination,this.slickGrid,this.sharedService)}if(n&&t){for(const s in t)t.hasOwnProperty(s)&&s.startsWith("on")&&this._eventHandler.subscribe(t[s],(l,u)=>{var h,c;const p=this._eventPubSubService.getEventNameByNamingConvention(s,(c=(h=this._gridOptions)===null||h===void 0?void 0:h.defaultSlickgridEventPrefix)!==null&&c!==void 0?c:"");return this._eventPubSubService.dispatchCustomEvent(p,{eventData:l,args:u})});for(const s in n)n.hasOwnProperty(s)&&s.startsWith("on")&&this._eventHandler.subscribe(n[s],(l,u)=>{var h,c;const p=this._eventPubSubService.getEventNameByNamingConvention(s,(c=(h=this._gridOptions)===null||h===void 0?void 0:h.defaultSlickgridEventPrefix)!==null&&c!==void 0?c:"");return this._eventPubSubService.dispatchCustomEvent(p,{eventData:l,args:u})});e.enableFiltering&&(this.filterService.init(t),e.backendServiceApi&&!e.backendServiceApi.useLocalFiltering?this.filterService.bindBackendOnFilter(t):this.filterService.bindLocalOnFilter(t)),e.enableSorting&&(e.backendServiceApi&&!e.backendServiceApi.useLocalSorting?this.sortService.bindBackendOnSort(t):this.sortService.bindLocalOnSort(t)),this._eventHandler.subscribe(n.onRowCountChanged,()=>{var s,l,u;t.invalidate(),this.handleOnItemCountChanged(((s=this.dataView)===null||s===void 0?void 0:s.getFilteredItemCount())||0,(u=(l=this.dataView)===null||l===void 0?void 0:l.getItemCount())!==null&&u!==void 0?u:0)}),this._eventHandler.subscribe(n.onSetItemsCalled,(s,l)=>{var u,h;this.handleOnItemCountChanged(((u=this.dataView)===null||u===void 0?void 0:u.getFilteredItemCount())||0,l.itemCount),l.itemCount>0&&(this.gridOptions.autosizeColumnsByCellContentOnFirstLoad||this.gridOptions.enableAutoResizeColumnsByCellContent)&&this.resizerService.resizeColumnsByCellContent(!(!((h=this.gridOptions)===null||h===void 0)&&h.resizeByContentOnlyOnFirstLoad))}),e&&e.enableFiltering&&!e.enableRowDetailView&&this._eventHandler.subscribe(n.onRowsChanged,(s,l)=>{l!=null&&l.rows&&Array.isArray(l.rows)&&(l.rows.forEach(u=>t.updateRow(u)),t.render())}),this._eventHandler.subscribe(t.onColumnsReordered,(s,l)=>{this.sharedService.hasColumnsReordered=!0,this.sharedService.visibleColumns=l.impactedColumns}),this.loadColumnPresetsWhenDatasetInitialized(),this.loadFilterPresetsWhenDatasetInitialized()}e!=null&&e.colspanCallback&&(n!=null&&n.getItem)&&(n!=null&&n.getItemMetadata)&&(n.getItemMetadata=s=>{let l=null;return e.colspanCallback&&(l=e.colspanCallback(n.getItem(s))),l})}bindBackendCallbackFunctions(t){var e,n,r,o,s,l;const u=t.backendServiceApi,h=u==null?void 0:u.service,c=(e=h==null?void 0:h.options)!==null&&e!==void 0?e:{},p=c?c!=null&&c.hasOwnProperty("executeProcessCommandOnInit")?c.executeProcessCommandOnInit:!0:!1;if(h){if(t!=null&&t.presets){if(h.updateFilters&&Array.isArray(t.presets.filters)&&t.presets.filters.length>0&&h.updateFilters(t.presets.filters,!0),h.updateSorters&&Array.isArray(t.presets.sorters)&&t.presets.sorters.length>0){const m=!((n=this._gridOptions)===null||n===void 0)&&n.multiColumnSort?t.presets.sorters:t.presets.sorters.slice(0,1);h.updateSorters(void 0,m)}if(h.updatePagination&&t.presets.pagination){const{pageNumber:m,pageSize:v}=t.presets.pagination;h.updatePagination(m,v)}}else{const m=this.filterService.getColumnFilters();m&&h.updateFilters&&h.updateFilters(m,!1)}if(u&&h&&(u.onInit||p)){const m=typeof h.buildQuery=="function"?h.buildQuery():"",v=p?(o=(r=u.process)===null||r===void 0?void 0:r.call(u,m))!==null&&o!==void 0?o:null:(l=(s=u.onInit)===null||s===void 0?void 0:s.call(u,m))!==null&&l!==void 0?l:null;setTimeout(()=>{var _,C,x,S;const y=this.backendUtilityService,D=new Date;u.preProcess&&u.preProcess();const A=(x=(C=(_=this.gridOptions)===null||_===void 0?void 0:_.pagination)===null||C===void 0?void 0:C.totalItems)!==null&&x!==void 0?x:0;v instanceof Promise?v.then(P=>y.executeBackendProcessesCallback(D,P,u,A)).catch(P=>y.onBackendError(P,u)):v&&(!((S=this.rxjs)===null||S===void 0)&&S.isObservable(v))&&this.subscriptions.push(v.subscribe(P=>y.executeBackendProcessesCallback(D,P,u,A),P=>y.onBackendError(P,u)))})}}}bindResizeHook(t,e){if(e.autoFitColumnsOnFirstLoad&&e.autosizeColumnsByCellContentOnFirstLoad||e.enableAutoSizeColumns&&e.enableAutoResizeColumnsByCellContent)throw new Error('[Slickgrid-Universal] You cannot enable both autosize/fit viewport & resize by content, you must choose which resize technique to use. You can enable these 2 options ("autoFitColumnsOnFirstLoad" and "enableAutoSizeColumns") OR these other 2 options ("autosizeColumnsByCellContentOnFirstLoad" and "enableAutoResizeColumnsByCellContent").');t&&e.autoFitColumnsOnFirstLoad&&e.enableAutoSizeColumns&&typeof t.autosizeColumns=="function"&&t.autosizeColumns(),e.gridHeight||e.gridWidth?this.resizerService.resizeGrid(0,{height:e.gridHeight,width:e.gridWidth}):this.resizerService.resizeGrid(),t&&(e!=null&&e.enableAutoResize)&&e.autoFitColumnsOnFirstLoad&&e.enableAutoSizeColumns&&typeof t.autosizeColumns=="function"&&t.autosizeColumns()}executeAfterDataviewCreated(t){var e;if(t.enableSorting&&t.presets&&Array.isArray(t.presets.sorters)){const n=!((e=this._gridOptions)===null||e===void 0)&&e.multiColumnSort?t.presets.sorters:t.presets.sorters.slice(0,1);this.sortService.loadGridSorters(n)}}paginationChanged(t){var e,n,r;const o=(n=(e=this.gridStateService)===null||e===void 0?void 0:e.needToPreserveRowSelection())!==null&&n!==void 0?n:!1;this.slickGrid&&!o&&(!((r=this._gridOptions)===null||r===void 0)&&r.backendServiceApi)&&(this.gridOptions.enableRowSelection||this.gridOptions.enableCheckboxSelector)&&this.slickGrid.setSelectedRows([]);const{pageNumber:s,pageSize:l}=t;this.sharedService&&l!==void 0&&s!==void 0&&(this.sharedService.currentPagination={pageNumber:s,pageSize:l}),this._eventPubSubService.publish("onGridStateChanged",{change:{newValues:{pageNumber:s,pageSize:l},type:cr.pagination},gridState:this.gridStateService.getCurrentGridState()})}refreshGridData(t,e){var n,r,o,s,l;if(this.slickGrid&&this._gridOptions){if(this._gridOptions.enablePagination&&this._isLocalGrid&&(this.showPagination=!0,this.loadLocalGridPagination(t)),this._gridOptions.enableEmptyDataWarningMessage&&Array.isArray(t)){const u=e||t.length;this.displayEmptyDataWarning(u<1)}if(Array.isArray(t)&&this.slickGrid&&(!((n=this.dataView)===null||n===void 0)&&n.setItems)){if(this.dataView.setItems(t,this._gridOptions.datasetIdPropertyName),!this._gridOptions.backendServiceApi&&!this._gridOptions.enableTreeData&&this.dataView.reSort(),t.length>0&&(this._isDatasetInitialized||(this.loadFilterPresetsWhenDatasetInitialized(),this._gridOptions.enableCheckboxSelector&&this.loadRowSelectionPresetWhenExists()),this._isDatasetInitialized=!0),t&&this.slickGrid.invalidate(),this.showPagination=!!(this._gridOptions&&(this._gridOptions.enablePagination||this._gridOptions.backendServiceApi&&this._gridOptions.enablePagination===void 0)),this._paginationOptions&&(!((r=this._gridOptions)===null||r===void 0)&&r.pagination)&&(!((o=this._gridOptions)===null||o===void 0)&&o.backendServiceApi)){const u=this.setPaginationOptionsWhenPresetDefined(this._gridOptions,this._paginationOptions),h=e!==void 0?e:(l=(s=this._gridOptions)===null||s===void 0?void 0:s.pagination)===null||l===void 0?void 0:l.totalItems;h!==void 0&&h!==this.totalItems&&(this.totalItems=+h),this._isPaginationInitialized?this.paginationService.updateTotalItems(this.totalItems):this.initializePaginationService(u)}if(this.slickGrid&&this._gridOptions.enableAutoResize){const u=this._gridOptions.autoResize&&this._gridOptions.autoResize.delay;this.resizerService.resizeGrid(u||10)}}}}updateColumnDefinitionsList(t){var e,n,r;this.slickGrid&&this._gridOptions&&Array.isArray(t)&&(t=this.swapInternalEditorToSlickGridFactoryEditor(t),this._gridOptions.autoAddCustomEditorFormatter&&cm(t,this._gridOptions.autoAddCustomEditorFormatter),this._gridOptions.enableTranslate?this.extensionService.translateColumnHeaders(!1,t):this.extensionService.renderColumnHeaders(t,!0),this.slickGrid&&(!((e=this._gridOptions)===null||e===void 0)&&e.enableAutoSizeColumns)?this.slickGrid.autosizeColumns():!((n=this._gridOptions)===null||n===void 0)&&n.enableAutoResizeColumnsByCellContent&&(!((r=this.resizerService)===null||r===void 0)&&r.resizeColumnsByCellContent)&&this.resizerService.resizeColumnsByCellContent())}showHeaderRow(t=!0){var e;return(e=this.slickGrid)===null||e===void 0||e.setHeaderRowVisibility(t,!1),this.slickGrid&&t===!0&&this._isGridInitialized&&this.slickGrid.setColumns(this.columnDefinitions),t}setPaginationOptionsWhenPresetDefined(t,e){var n;return!((n=t.presets)===null||n===void 0)&&n.pagination&&e&&!this._isPaginationInitialized&&(e.pageSize=t.presets.pagination.pageSize,e.pageNumber=t.presets.pagination.pageNumber),e}copyColumnWidthsReference(t){t.forEach(e=>e.originalWidth=e.width)}displayEmptyDataWarning(t=!0){var e;(e=this.slickEmptyWarning)===null||e===void 0||e.showEmptyDataMessage(t)}handleOnItemCountChanged(t,e){var n;this._currentDatasetLength=e,this.metrics={startTime:new Date,endTime:new Date,itemCount:t,totalItemCount:e},this.slickFooter&&(this.slickFooter.metrics=this.metrics),this._isLocalGrid&&(!((n=this._gridOptions)===null||n===void 0)&&n.enableEmptyDataWarningMessage)&&this.displayEmptyDataWarning(t===0)}initializePaginationService(t){this.slickGrid&&this.gridOptions&&(this.paginationData={gridOptions:this.gridOptions,paginationService:this.paginationService},this.paginationService.totalItems=this.totalItems,this.paginationService.init(this.slickGrid,t,this.backendServiceApi),this.subscriptions.push(this._eventPubSubService.subscribe("onPaginationChanged",e=>this.paginationChanged(e)),this._eventPubSubService.subscribe("onPaginationVisibilityChanged",e=>{var n,r,o;this.showPagination=(n=e==null?void 0:e.visible)!==null&&n!==void 0?n:!1,!((r=this.gridOptions)===null||r===void 0)&&r.backendServiceApi&&((o=this.backendUtilityService)===null||o===void 0||o.refreshBackendDataset(this.gridOptions)),this.renderPagination(this.showPagination)})),this.renderPagination(),this._isPaginationInitialized=!0)}renderPagination(t=!0){var e;!((e=this._gridOptions)===null||e===void 0)&&e.enablePagination&&!this._isPaginationInitialized&&t?(this.slickPagination=new gv(this.paginationService,this._eventPubSubService,this.sharedService,this.translaterService),this.slickPagination.renderPagination(this._gridParentContainerElm),this._isPaginationInitialized=!0):t||(this.slickPagination&&this.slickPagination.dispose(),this._isPaginationInitialized=!1)}loadEditorCollectionAsync(t){var e;const n=(t==null?void 0:t.editor).collectionAsync;(t==null?void 0:t.editor).disabled=!0,n instanceof Promise?n.then(r=>{Array.isArray(r)?this.updateEditorCollection(t,r):(r==null?void 0:r.status)>=200&&r.status<300&&typeof r.json=="function"?r.bodyUsed?console.warn("[SlickGrid-Universal] The response body passed to collectionAsync was already read.Either pass the dataset from the Response or clone the response first using response.clone()"):r.json().then(o=>this.updateEditorCollection(t,o)):r!=null&&r.content&&this.updateEditorCollection(t,r.content)}):!((e=this.rxjs)===null||e===void 0)&&e.isObservable(n)&&setTimeout(()=>{this.subscriptions.push(n.subscribe(r=>this.updateEditorCollection(t,r)))})}insertDynamicPresetColumns(t,e){if(this._columnDefinitions){const n=this._columnDefinitions.findIndex(r=>r.id===t);if(n>=0){const r=this._columnDefinitions[n];(r==null?void 0:r.id)===t&&!e.some(o=>o.id===t)&&(n>0?e.splice(n,0,r):e.unshift(r))}}}loadColumnPresetsWhenDatasetInitialized(){var t,e,n,r,o,s,l,u,h;if(this.slickGrid&&this.gridOptions.presets&&Array.isArray(this.gridOptions.presets.columns)&&this.gridOptions.presets.columns.length>0){const c=this.gridStateService.getAssociatedGridColumns(this.slickGrid,this.gridOptions.presets.columns);if(c&&Array.isArray(c)&&c.length>0&&Array.isArray(this._columnDefinitions)){if(this.gridOptions.enableRowMoveManager){const p=(n=(e=(t=this.gridOptions)===null||t===void 0?void 0:t.rowMoveManager)===null||e===void 0?void 0:e.columnId)!==null&&n!==void 0?n:"_move";this.insertDynamicPresetColumns(p,c)}if(this.gridOptions.enableCheckboxSelector){const p=(s=(o=(r=this.gridOptions)===null||r===void 0?void 0:r.checkboxSelector)===null||o===void 0?void 0:o.columnId)!==null&&s!==void 0?s:"_checkbox_selector";this.insertDynamicPresetColumns(p,c)}if(this.gridOptions.enableRowDetailView){const p=(h=(u=(l=this.gridOptions)===null||l===void 0?void 0:l.rowDetailView)===null||u===void 0?void 0:u.columnId)!==null&&h!==void 0?h:"_detail_selector";this.insertDynamicPresetColumns(p,c)}c.forEach(p=>p.originalWidth=p.width),this.slickGrid.setColumns(c),this.sharedService.visibleColumns=c}}}loadFilterPresetsWhenDatasetInitialized(){var t,e,n;this.gridOptions&&!this.customDataView&&this.gridOptions.presets&&(Array.isArray(this.gridOptions.presets.filters)||Array.isArray((e=(t=this.gridOptions.presets)===null||t===void 0?void 0:t.treeData)===null||e===void 0?void 0:e.toggledItems))&&this.filterService.populateColumnFilterSearchTermPresets(((n=this.gridOptions.presets)===null||n===void 0?void 0:n.filters)||[])}loadLocalGridPagination(t){var e;if(this.gridOptions&&this._paginationOptions){if(this.totalItems=Array.isArray(t)?t.length:0,this._paginationOptions&&(!((e=this.dataView)===null||e===void 0)&&e.getPagingInfo)){const r=this.dataView.getPagingInfo();r!=null&&r.hasOwnProperty("totalRows")&&this._paginationOptions.totalItems!==r.totalRows&&(this.totalItems=(r==null?void 0:r.totalRows)||0)}this._paginationOptions.totalItems=this.totalItems;const n=this.setPaginationOptionsWhenPresetDefined(this.gridOptions,this._paginationOptions);this.initializePaginationService(n)}}loadRowSelectionPresetWhenExists(){var t,e,n;const r=(t=this.gridOptions)===null||t===void 0?void 0:t.presets,o=(n=(e=this.slickGrid)===null||e===void 0?void 0:e.getSelectionModel)===null||n===void 0?void 0:n.call(e),s=this.gridOptions&&(this.gridOptions.enableCheckboxSelector||this.gridOptions.enableRowSelection);if(this.slickGrid&&this.dataView&&s&&o&&(r!=null&&r.rowSelection)&&(Array.isArray(r.rowSelection.gridRowIndexes)||Array.isArray(r.rowSelection.dataContextIds))){let l=r.rowSelection.dataContextIds,u=r.rowSelection.gridRowIndexes;Array.isArray(l)&&l.length>0?u=this.dataView.mapIdsToRows(l)||[]:Array.isArray(u)&&u.length>0&&(l=this.dataView.mapRowsToIds(u)||[]),this.slickGrid&&Array.isArray(u)&&(this.slickGrid.setSelectedRows(u),this.dataView.setSelectedIds(l||[],{isRowBeingAdded:!0,shouldTriggerEvent:!1,applyRowSelectionToGrid:!0}))}}preRegisterResources(){if(this._registeredResources=this.gridOptions.registerExternalResources||[],Array.isArray(this._registeredResources))for(const t of this._registeredResources)(t==null?void 0:t.className)==="RxJsResource"&&this.registerRxJsResource(t)}registerResources(){if(Array.isArray(this._registeredResources)&&(this.sharedService.externalRegisteredResources=this._registeredResources),this._registeredResources.push(this.gridService,this.gridStateService),this.gridOptions.createPreHeaderPanel&&!this.gridOptions.enableDraggableGrouping&&this._registeredResources.push(this.groupingService),this.gridOptions.enableTreeData&&this._registeredResources.push(this.treeDataService),this.gridOptions.enableTranslate&&this.extensionService.translateColumnHeaders(),this.slickEmptyWarning=new mf,this._registeredResources.push(this.slickEmptyWarning),Array.isArray(this._registeredResources))for(const t of this._registeredResources)this.slickGrid&&typeof t.init=="function"&&t.init(this.slickGrid,this.universalContainerService)}registerRxJsResource(t){this.rxjs=t,this.backendUtilityService.addRxJsResource(this.rxjs),this.filterFactory.addRxJsResource(this.rxjs),this.filterService.addRxJsResource(this.rxjs),this.sortService.addRxJsResource(this.rxjs),this.paginationService.addRxJsResource(this.rxjs),this.universalContainerService.registerInstance("RxJsFacade",this.rxjs),this.universalContainerService.registerInstance("RxJsResource",this.rxjs)}sortTreeDataset(t,e=!1){var n,r;const o=this._currentDatasetLength;let s,l=[];return this._isDatasetHierarchicalInitialized&&this.datasetHierarchical?(s=this.treeDataService.sortHierarchicalDataset(this.datasetHierarchical),l=s.flat):Array.isArray(t)&&t.length>0&&(!((r=(n=this.gridOptions)===null||n===void 0?void 0:n.treeDataOptions)===null||r===void 0)&&r.initialSort?(s=this.treeDataService.convertFlatParentChildToTreeDatasetAndSort(t,this._columnDefinitions||[],this.gridOptions),this.sharedService.hierarchicalDataset=s.hierarchical,l=s.flat):(this.sharedService.hierarchicalDataset=this.treeDataService.convertFlatParentChildToTreeDataset(t,this.gridOptions),l=t||[])),t.length>0&&(e||t.length!==o)&&this.filterService.refreshTreeDataFilters(l),l}swapInternalEditorToSlickGridFactoryEditor(t){const e=Array.isArray(t)?t:[];return e.some(n=>`${n.id}`.includes("."))&&console.error('[Slickgrid-Universal] Make sure that none of your Column Definition "id" property includes a dot in its name because that will cause some problems with the Editors. For example if your column definition "field" property is "user.firstName" then use "firstName" as the column "id".'),e.map(n=>{var r;!((r=n.editor)===null||r===void 0)&&r.collectionAsync&&this.loadEditorCollectionAsync(n);const o=n.internalColumnEditor||n.editor;return{...n,editor:o==null?void 0:o.model,internalColumnEditor:{...o}}})}translateColumnHeaderTitleKeys(){this.extensionUtility.translateItems(this.sharedService.allColumns,"nameKey","name")}translateColumnGroupKeys(){this.extensionUtility.translateItems(this.sharedService.allColumns,"columnGroupKey","columnGroup")}updateEditorCollection(t,e){if(t.editor.collection=e,t.editor.disabled=!1,this.slickGrid){if(Array.isArray(this.columnDefinitions)){const r=this.columnDefinitions.find(o=>o.id===t.id);r&&(r.internalColumnEditor=t.editor)}const n=this.slickGrid.getCellEditor();n!=null&&n.disable&&(n!=null&&n.renderDomElement)&&(typeof n.destroy=="function"&&n.destroy(),n.disable(!1),n.renderDomElement(e))}}}const ay={GridBundle:Pv,Aggregators:cf,BindingService:Bu,Editors:hf,Enums:ih,Filters:Fu,Formatters:ln,GroupTotalFormatters:Ti,SortComparers:El,Utilities:ff};typeof window<"u"&&(window.Slicker=ay);const dy={autoEdit:!0,autoCommitEdit:!0,autoFixResizeTimeout:5*60*60,autoFixResizeRequiredGoodCount:5*60*60,autoFixResizeWhenBrokenStyleDetected:!0,cellValueCouldBeUndefined:!0,contextMenu:{hideCloseButton:!1},eventNamingStyle:Do.lowerCaseWithoutOnPrefix,compositeEditorOptions:{resetEditorButtonCssClass:"mdi mdi-refresh mdi-15px mdi-v-align-text-top",resetFormButtonIconCssClass:"mdi mdi-refresh mdi-16px mdi-flip-h mdi-v-align-text-top",shouldPreviewMassChangeDataset:!0},datasetIdPropertyName:"Id",emptyDataWarning:{message:'<span class="mdi mdi-alert color-warning"></span> No data to display.'},enableDeepCopyDatasetOnPageLoad:!0,enableTextExport:!0,textExportOptions:{exportWithFormatter:!0,sanitizeDataExport:!0},enableCellNavigation:!0,customTooltip:{tooltipTextMaxLength:650},enableExcelExport:!0,excelExportOptions:{exportWithFormatter:!0,mimeType:"",sanitizeDataExport:!0},filterTypingDebounce:250,formatterOptions:{thousandSeparator:","},frozenHeaderWidthCalcDifferential:2,columnPicker:{hideForceFitButton:!0},gridMenu:{commandLabels:{clearFrozenColumnsCommandKey:"UNFREEZE_COLUMNS"},hideTogglePreHeaderCommand:!0,hideRefreshDatasetCommand:!0,hideClearFrozenColumnsCommand:!1,hideForceFitButton:!0},headerMenu:{hideFreezeColumnsCommand:!1,iconSortAscCommand:"fa fa-sort-amount-asc mdi mdi-arrow-up",iconSortDescCommand:"fa fa-sort-amount-desc mdi mdi-arrow-down"},sanitizer:a=>typeof a=="string"?a.replace(/(\b)(on[a-z]+)(\s*)=|javascript:([^>]*)[^>]*|(<\s*)(\/*)script([<>]*).*(<\s*)(\/*)script(>*)|(&lt;)(\/*)(script|script defer)(.*)(&gt;|&gt;">)/gi,""):a,showCustomFooter:!0,customFooterOptions:{hideMetrics:!1,hideTotalItemCount:!1,hideLastUpdateTimestamp:!0,metricTexts:{itemsSelectedKey:"RECORDS_SELECTED"}},headerRowHeight:35,rowHeight:33,resizeByContentOnlyOnFirstLoad:!1,resizeByContentOptions:{formatterPaddingWidthInPx:8,maxItemToInspectCellContentWidth:500},rowMoveManager:{hideRowMoveShadow:!1},useSalesforceDefaultGridOptions:!0};class Fv extends Pv{constructor(t,e,n,r,o,s){super(t,e,n,r,o,s)}mergeGridOptions(t){var r;const e=t.useSalesforceDefaultGridOptions||(r=this._gridOptions)!=null&&r.useSalesforceDefaultGridOptions?dy:{},n=Slick.Utils.extend(!0,{},uf,e,t);return n.enableFiltering&&!n.showHeaderRow&&(n.showHeaderRow=n.enableFiltering),n!=null&&n.pagination&&(t.enablePagination||t.backendServiceApi)&&t.pagination&&Array.isArray(t.pagination.pageSizes)&&(n.pagination.pageSizes=t.pagination.pageSizes),!n.enableFiltering&&n.enablePagination&&this._isLocalGrid&&(n.enableFiltering=!0,n.showHeaderRow=!1,this._hideHeaderRowAfterPageLoad=!0,this.sharedService&&(this.sharedService.hideHeaderRowAfterPageLoad=!0)),n}registerResources(){if(this.gridOptions.enableTextExport&&this._registeredResources.push(new ry),this.gridOptions.enableTextExport&&this._registeredResources.push(new JC),this._registeredResources.push(new ey),Array.isArray(this._registeredResources)&&(this.sharedService.externalRegisteredResources=this._registeredResources),this._registeredResources.push(this.gridService,this.gridStateService),this.gridOptions.createPreHeaderPanel&&!this.gridOptions.enableDraggableGrouping&&this._registeredResources.push(this.groupingService),this.gridOptions.enableTreeData&&this._registeredResources.push(this.treeDataService),this.gridOptions.enableTranslate&&this.extensionService.translateColumnHeaders(),this.slickEmptyWarning=new mf,this._registeredResources.push(this.slickEmptyWarning),this.gridOptions.enableCompositeEditor&&(this._registeredResources.some(t=>t instanceof pf)||(this.slickCompositeEditor=new pf,this._registeredResources.push(this.slickCompositeEditor))),Array.isArray(this._registeredResources))for(const t of this._registeredResources)this.slickGrid&&typeof t.init=="function"&&t.init(this.slickGrid,this.universalContainerService)}}const Mv={GridBundle:Fv,Aggregators:cf,BindingService:Bu,Editors:hf,Enums:ih,Filters:Fu,Formatters:ln,GroupTotalFormatters:Ti,SortComparers:El,Utilities:ff};typeof window<"u"&&(window.Slicker=Mv),Pn.Aggregators=cf,Pn.BindingService=Bu,Pn.Editors=hf,Pn.Enums=ih,Pn.EventPubSubService=Mp,Pn.Filters=Fu,Pn.Formatters=ln,Pn.GroupTotalFormatters=Ti,Pn.SlickCompositeEditorComponent=pf,Pn.SlickEmptyWarningComponent=mf,Pn.SlickPaginationComponent=gv,Pn.Slicker=Mv,Pn.SortComparers=El,Pn.Utilities=ff,Pn.VanillaForceGridBundle=Fv,Object.defineProperty(Pn,Symbol.toStringTag,{value:"Module"})});
